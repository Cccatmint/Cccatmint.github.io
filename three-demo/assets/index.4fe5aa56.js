var e=Object.defineProperty,t=(t,n,r)=>(((t,n,r)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r})(t,"symbol"!=typeof n?n+"":n,r),r);function n(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const r=n("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function i(e){return!!e||""===e}function s(e){if(S(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=A(r)?l(r):s(r);if(i)for(const e in i)t[e]=i[e]}return t}return A(e)||P(e)?e:void 0}const a=/;(?![^(]*\))/g,o=/:(.+)/;function l(e){const t={};return e.split(a).forEach((e=>{if(e){const n=e.split(o);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function c(e){let t="";if(A(e))t=e;else if(S(e))for(let n=0;n<e.length;n++){const r=c(e[n]);r&&(t+=r+" ")}else if(P(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const h=e=>A(e)?e:null==e?"":S(e)||P(e)&&(e.toString===L||!T(e.toString))?JSON.stringify(e,u,2):String(e),u=(e,t)=>t&&t.__v_isRef?u(e,t.value):M(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:E(t)?{[`Set(${t.size})`]:[...t.values()]}:!P(t)||S(t)||z(t)?t:String(t),d={},p=[],f=()=>{},m=()=>!1,g=/^on[^a-z]/,v=e=>g.test(e),_=e=>e.startsWith("onUpdate:"),x=Object.assign,y=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},b=Object.prototype.hasOwnProperty,w=(e,t)=>b.call(e,t),S=Array.isArray,M=e=>"[object Map]"===O(e),E=e=>"[object Set]"===O(e),T=e=>"function"==typeof e,A=e=>"string"==typeof e,C=e=>"symbol"==typeof e,P=e=>null!==e&&"object"==typeof e,R=e=>P(e)&&T(e.then)&&T(e.catch),L=Object.prototype.toString,O=e=>L.call(e),z=e=>"[object Object]"===O(e),D=e=>A(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,k=n(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),I=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},N=/-(\w)/g,F=I((e=>e.replace(N,((e,t)=>t?t.toUpperCase():"")))),U=/\B([A-Z])/g,B=I((e=>e.replace(U,"-$1").toLowerCase())),H=I((e=>e.charAt(0).toUpperCase()+e.slice(1))),G=I((e=>e?`on${H(e)}`:"")),j=(e,t)=>!Object.is(e,t),V=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},W=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},X=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let q;let Y;class Z{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&Y&&(this.parent=Y,this.index=(Y.scopes||(Y.scopes=[])).push(this)-1)}run(e){if(this.active){const t=Y;try{return Y=this,e()}finally{Y=t}}}on(){Y=this}off(){Y=this.parent}stop(e){if(this.active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}const K=e=>{const t=new Set(e);return t.w=0,t.n=0,t},J=e=>(e.w&te)>0,Q=e=>(e.n&te)>0,$=new WeakMap;let ee=0,te=1;let ne;const re=Symbol(""),ie=Symbol("");class se{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,function(e,t=Y){t&&t.active&&t.effects.push(e)}(this,n)}run(){if(!this.active)return this.fn();let e=ne,t=oe;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=ne,ne=this,oe=!0,te=1<<++ee,ee<=30?(({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=te})(this):ae(this),this.fn()}finally{ee<=30&&(e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];J(i)&&!Q(i)?i.delete(e):t[n++]=i,i.w&=~te,i.n&=~te}t.length=n}})(this),te=1<<--ee,ne=this.parent,oe=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ne===this?this.deferStop=!0:this.active&&(ae(this),this.onStop&&this.onStop(),this.active=!1)}}function ae(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let oe=!0;const le=[];function ce(){le.push(oe),oe=!1}function he(){const e=le.pop();oe=void 0===e||e}function ue(e,t,n){if(oe&&ne){let t=$.get(e);t||$.set(e,t=new Map);let r=t.get(n);r||t.set(n,r=K()),de(r)}}function de(e,t){let n=!1;ee<=30?Q(e)||(e.n|=te,n=!J(e)):n=!e.has(ne),n&&(e.add(ne),ne.deps.push(e))}function pe(e,t,n,r,i,s){const a=$.get(e);if(!a)return;let o=[];if("clear"===t)o=[...a.values()];else if("length"===n&&S(e))a.forEach(((e,t)=>{("length"===t||t>=r)&&o.push(e)}));else switch(void 0!==n&&o.push(a.get(n)),t){case"add":S(e)?D(n)&&o.push(a.get("length")):(o.push(a.get(re)),M(e)&&o.push(a.get(ie)));break;case"delete":S(e)||(o.push(a.get(re)),M(e)&&o.push(a.get(ie)));break;case"set":M(e)&&o.push(a.get(re))}if(1===o.length)o[0]&&fe(o[0]);else{const e=[];for(const t of o)t&&e.push(...t);fe(K(e))}}function fe(e,t){const n=S(e)?e:[...e];for(const r of n)r.computed&&me(r);for(const r of n)r.computed||me(r)}function me(e,t){(e!==ne||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const ge=n("__proto__,__v_isRef,__isVue"),ve=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(C)),_e=Se(),xe=Se(!1,!0),ye=Se(!0),be=we();function we(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=ot(this);for(let t=0,i=this.length;t<i;t++)ue(n,0,t+"");const r=n[t](...e);return-1===r||!1===r?n[t](...e.map(ot)):r}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){ce();const n=ot(this)[t].apply(this,e);return he(),n}})),e}function Se(e=!1,t=!1){return function(n,r,i){if("__v_isReactive"===r)return!e;if("__v_isReadonly"===r)return e;if("__v_isShallow"===r)return t;if("__v_raw"===r&&i===(e?t?Qe:Je:t?Ke:Ze).get(n))return n;const s=S(n);if(!e&&s&&w(be,r))return Reflect.get(be,r,i);const a=Reflect.get(n,r,i);return(C(r)?ve.has(r):ge(r))?a:(e||ue(n,0,r),t?a:pt(a)?s&&D(r)?a:a.value:P(a)?e?tt(a):et(a):a)}}function Me(e=!1){return function(t,n,r,i){let s=t[n];if(it(s)&&pt(s)&&!pt(r))return!1;if(!e&&(st(r)||it(r)||(s=ot(s),r=ot(r)),!S(t)&&pt(s)&&!pt(r)))return s.value=r,!0;const a=S(t)&&D(n)?Number(n)<t.length:w(t,n),o=Reflect.set(t,n,r,i);return t===ot(i)&&(a?j(r,s)&&pe(t,"set",n,r):pe(t,"add",n,r)),o}}const Ee={get:_e,set:Me(),deleteProperty:function(e,t){const n=w(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&pe(e,"delete",t,void 0),r},has:function(e,t){const n=Reflect.has(e,t);return C(t)&&ve.has(t)||ue(e,0,t),n},ownKeys:function(e){return ue(e,0,S(e)?"length":re),Reflect.ownKeys(e)}},Te={get:ye,set:(e,t)=>!0,deleteProperty:(e,t)=>!0},Ae=x({},Ee,{get:xe,set:Me(!0)}),Ce=e=>e,Pe=e=>Reflect.getPrototypeOf(e);function Re(e,t,n=!1,r=!1){const i=ot(e=e.__v_raw),s=ot(t);n||(t!==s&&ue(i,0,t),ue(i,0,s));const{has:a}=Pe(i),o=r?Ce:n?ht:ct;return a.call(i,t)?o(e.get(t)):a.call(i,s)?o(e.get(s)):void(e!==i&&e.get(t))}function Le(e,t=!1){const n=this.__v_raw,r=ot(n),i=ot(e);return t||(e!==i&&ue(r,0,e),ue(r,0,i)),e===i?n.has(e):n.has(e)||n.has(i)}function Oe(e,t=!1){return e=e.__v_raw,!t&&ue(ot(e),0,re),Reflect.get(e,"size",e)}function ze(e){e=ot(e);const t=ot(this);return Pe(t).has.call(t,e)||(t.add(e),pe(t,"add",e,e)),this}function De(e,t){t=ot(t);const n=ot(this),{has:r,get:i}=Pe(n);let s=r.call(n,e);s||(e=ot(e),s=r.call(n,e));const a=i.call(n,e);return n.set(e,t),s?j(t,a)&&pe(n,"set",e,t):pe(n,"add",e,t),this}function ke(e){const t=ot(this),{has:n,get:r}=Pe(t);let i=n.call(t,e);i||(e=ot(e),i=n.call(t,e)),r&&r.call(t,e);const s=t.delete(e);return i&&pe(t,"delete",e,void 0),s}function Ie(){const e=ot(this),t=0!==e.size,n=e.clear();return t&&pe(e,"clear",void 0,void 0),n}function Ne(e,t){return function(n,r){const i=this,s=i.__v_raw,a=ot(s),o=t?Ce:e?ht:ct;return!e&&ue(a,0,re),s.forEach(((e,t)=>n.call(r,o(e),o(t),i)))}}function Fe(e,t,n){return function(...r){const i=this.__v_raw,s=ot(i),a=M(s),o="entries"===e||e===Symbol.iterator&&a,l="keys"===e&&a,c=i[e](...r),h=n?Ce:t?ht:ct;return!t&&ue(s,0,l?ie:re),{next(){const{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:o?[h(e[0]),h(e[1])]:h(e),done:t}},[Symbol.iterator](){return this}}}}function Ue(e){return function(...t){return"delete"!==e&&this}}function Be(){const e={get(e){return Re(this,e)},get size(){return Oe(this)},has:Le,add:ze,set:De,delete:ke,clear:Ie,forEach:Ne(!1,!1)},t={get(e){return Re(this,e,!1,!0)},get size(){return Oe(this)},has:Le,add:ze,set:De,delete:ke,clear:Ie,forEach:Ne(!1,!0)},n={get(e){return Re(this,e,!0)},get size(){return Oe(this,!0)},has(e){return Le.call(this,e,!0)},add:Ue("add"),set:Ue("set"),delete:Ue("delete"),clear:Ue("clear"),forEach:Ne(!0,!1)},r={get(e){return Re(this,e,!0,!0)},get size(){return Oe(this,!0)},has(e){return Le.call(this,e,!0)},add:Ue("add"),set:Ue("set"),delete:Ue("delete"),clear:Ue("clear"),forEach:Ne(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((i=>{e[i]=Fe(i,!1,!1),n[i]=Fe(i,!0,!1),t[i]=Fe(i,!1,!0),r[i]=Fe(i,!0,!0)})),[e,n,t,r]}const[He,Ge,je,Ve]=Be();function We(e,t){const n=t?e?Ve:je:e?Ge:He;return(t,r,i)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get(w(n,r)&&r in t?n:t,r,i)}const Xe={get:We(!1,!1)},qe={get:We(!1,!0)},Ye={get:We(!0,!1)},Ze=new WeakMap,Ke=new WeakMap,Je=new WeakMap,Qe=new WeakMap;function $e(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((e=>O(e).slice(8,-1))(e))}function et(e){return it(e)?e:nt(e,!1,Ee,Xe,Ze)}function tt(e){return nt(e,!0,Te,Ye,Je)}function nt(e,t,n,r,i){if(!P(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const a=$e(e);if(0===a)return e;const o=new Proxy(e,2===a?r:n);return i.set(e,o),o}function rt(e){return it(e)?rt(e.__v_raw):!(!e||!e.__v_isReactive)}function it(e){return!(!e||!e.__v_isReadonly)}function st(e){return!(!e||!e.__v_isShallow)}function at(e){return rt(e)||it(e)}function ot(e){const t=e&&e.__v_raw;return t?ot(t):e}function lt(e){return W(e,"__v_skip",!0),e}const ct=e=>P(e)?et(e):e,ht=e=>P(e)?tt(e):e;function ut(e){oe&&ne&&de((e=ot(e)).dep||(e.dep=K()))}function dt(e,t){(e=ot(e)).dep&&fe(e.dep)}function pt(e){return!(!e||!0!==e.__v_isRef)}function ft(e){return mt(e,!1)}function mt(e,t){return pt(e)?e:new gt(e,t)}class gt{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:ot(e),this._value=t?e:ct(e)}get value(){return ut(this),this._value}set value(e){const t=this.__v_isShallow||st(e)||it(e);e=t?e:ot(e),j(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:ct(e),dt(this))}}function vt(e){return pt(e)?e.value:e}const _t={get:(e,t,n)=>vt(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return pt(i)&&!pt(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function xt(e){return rt(e)?e:new Proxy(e,_t)}var yt;class bt{constructor(e,t,n,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[yt]=!1,this._dirty=!0,this.effect=new se(e,(()=>{this._dirty||(this._dirty=!0,dt(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=n}get value(){const e=ot(this);return ut(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function wt(e,t,n,r){let i;try{i=r?e(...r):e()}catch(s){Mt(s,t,n)}return i}function St(e,t,n,r){if(T(e)){const i=wt(e,t,n,r);return i&&R(i)&&i.catch((e=>{Mt(e,t,n)})),i}const i=[];for(let s=0;s<e.length;s++)i.push(St(e[s],t,n,r));return i}function Mt(e,t,n,r=!0){t&&t.vnode;if(t){let r=t.parent;const i=t.proxy,s=n;for(;r;){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,i,s))return;r=r.parent}const a=t.appContext.config.errorHandler;if(a)return void wt(a,null,10,[e,i,s])}}yt="__v_isReadonly";let Et=!1,Tt=!1;const At=[];let Ct=0;const Pt=[];let Rt=null,Lt=0;const Ot=Promise.resolve();let zt=null;function Dt(e){const t=zt||Ot;return e?t.then(this?e.bind(this):e):t}function kt(e){At.length&&At.includes(e,Et&&e.allowRecurse?Ct+1:Ct)||(null==e.id?At.push(e):At.splice(function(e){let t=Ct+1,n=At.length;for(;t<n;){const r=t+n>>>1;Ut(At[r])<e?t=r+1:n=r}return t}(e.id),0,e),It())}function It(){Et||Tt||(Tt=!0,zt=Ot.then(Ht))}function Nt(e,t=(Et?Ct+1:0)){for(;t<At.length;t++){const e=At[t];e&&e.pre&&(At.splice(t,1),t--,e())}}function Ft(e){if(Pt.length){const e=[...new Set(Pt)];if(Pt.length=0,Rt)return void Rt.push(...e);for(Rt=e,Rt.sort(((e,t)=>Ut(e)-Ut(t))),Lt=0;Lt<Rt.length;Lt++)Rt[Lt]();Rt=null,Lt=0}}const Ut=e=>null==e.id?1/0:e.id,Bt=(e,t)=>{const n=Ut(e)-Ut(t);if(0===n){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Ht(e){Tt=!1,Et=!0,At.sort(Bt);try{for(Ct=0;Ct<At.length;Ct++){const e=At[Ct];e&&!1!==e.active&&wt(e,null,14)}}finally{Ct=0,At.length=0,Ft(),Et=!1,zt=null,(At.length||Pt.length)&&Ht()}}function Gt(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||d;let i=n;const s=t.startsWith("update:"),a=s&&t.slice(7);if(a&&a in r){const e=`${"modelValue"===a?"model":a}Modifiers`,{number:t,trim:s}=r[e]||d;s&&(i=n.map((e=>e.trim()))),t&&(i=n.map(X))}let o,l=r[o=G(t)]||r[o=G(F(t))];!l&&s&&(l=r[o=G(B(t))]),l&&St(l,e,6,i);const c=r[o+"Once"];if(c){if(e.emitted){if(e.emitted[o])return}else e.emitted={};e.emitted[o]=!0,St(c,e,6,i)}}function jt(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(void 0!==i)return i;const s=e.emits;let a={},o=!1;if(!T(e)){const r=e=>{const n=jt(e,t,!0);n&&(o=!0,x(a,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return s||o?(S(s)?s.forEach((e=>a[e]=null)):x(a,s),P(e)&&r.set(e,a),a):(P(e)&&r.set(e,null),null)}function Vt(e,t){return!(!e||!v(t))&&(t=t.slice(2).replace(/Once$/,""),w(e,t[0].toLowerCase()+t.slice(1))||w(e,B(t))||w(e,t))}let Wt=null,Xt=null;function qt(e){const t=Wt;return Wt=e,Xt=e&&e.type.__scopeId||null,t}function Yt(e){Xt=e}function Zt(){Xt=null}function Kt(e,t=Wt,n){if(!t)return e;if(e._n)return e;const r=(...n)=>{r._d&&Dr(-1);const i=qt(t),s=e(...n);return qt(i),r._d&&Dr(1),s};return r._n=!0,r._c=!0,r._d=!0,r}function Jt(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[a],slots:o,attrs:l,emit:c,render:h,renderCache:u,data:d,setupState:p,ctx:f,inheritAttrs:m}=e;let g,v;const x=qt(e);try{if(4&n.shapeFlag){const e=i||r;g=Yr(h.call(e,e,u,s,p,d,f)),v=l}else{const e=t;0,g=Yr(e.length>1?e(s,{attrs:l,slots:o,emit:c}):e(s,null)),v=t.props?l:Qt(l)}}catch(b){Rr.length=0,Mt(b,e,1),g=Vr(Cr)}let y=g;if(v&&!1!==m){const e=Object.keys(v),{shapeFlag:t}=y;e.length&&7&t&&(a&&e.some(_)&&(v=$t(v,a)),y=Wr(y,v))}return n.dirs&&(y=Wr(y),y.dirs=y.dirs?y.dirs.concat(n.dirs):n.dirs),n.transition&&(y.transition=n.transition),g=y,qt(x),g}const Qt=e=>{let t;for(const n in e)("class"===n||"style"===n||v(n))&&((t||(t={}))[n]=e[n]);return t},$t=(e,t)=>{const n={};for(const r in e)_(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function en(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!Vt(n,s))return!0}return!1}function tn(e,t){if(ei){let n=ei.provides;const r=ei.parent&&ei.parent.provides;r===n&&(n=ei.provides=Object.create(r)),n[e]=t}else;}function nn(e,t,n=!1){const r=ei||Wt;if(r){const i=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&T(t)?t.call(r.proxy):t}}const rn={};function sn(e,t,n){return an(e,t,n)}function an(e,t,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:a}=d){const o=ei;let l,c,h=!1,u=!1;if(pt(e)?(l=()=>e.value,h=st(e)):rt(e)?(l=()=>e,r=!0):S(e)?(u=!0,h=e.some((e=>rt(e)||st(e))),l=()=>e.map((e=>pt(e)?e.value:rt(e)?cn(e):T(e)?wt(e,o,2):void 0))):l=T(e)?t?()=>wt(e,o,2):()=>{if(!o||!o.isUnmounted)return c&&c(),St(e,o,3,[p])}:f,t&&r){const e=l;l=()=>cn(e())}let p=e=>{c=_.onStop=()=>{wt(e,o,4)}};if(si)return p=f,t?n&&St(t,o,3,[l(),u?[]:void 0,p]):l(),f;let m=u?[]:rn;const g=()=>{if(_.active)if(t){const e=_.run();(r||h||(u?e.some(((e,t)=>j(e,m[t]))):j(e,m)))&&(c&&c(),St(t,o,3,[e,m===rn?void 0:m,p]),m=e)}else _.run()};let v;g.allowRecurse=!!t,"sync"===i?v=g:"post"===i?v=()=>wr(g,o&&o.suspense):(g.pre=!0,o&&(g.id=o.uid),v=()=>kt(g));const _=new se(l,v);return t?n?g():m=_.run():"post"===i?wr(_.run.bind(_),o&&o.suspense):_.run(),()=>{_.stop(),o&&o.scope&&y(o.scope.effects,_)}}function on(e,t,n){const r=this.proxy,i=A(e)?e.includes(".")?ln(r,e):()=>r[e]:e.bind(r,r);let s;T(t)?s=t:(s=t.handler,n=t);const a=ei;ni(this);const o=an(i,s.bind(r),n);return a?ni(a):ri(),o}function ln(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function cn(e,t){if(!P(e)||e.__v_skip)return e;if((t=t||new Set).has(e))return e;if(t.add(e),pt(e))cn(e.value,t);else if(S(e))for(let n=0;n<e.length;n++)cn(e[n],t);else if(E(e)||M(e))e.forEach((e=>{cn(e,t)}));else if(z(e))for(const n in e)cn(e[n],t);return e}const hn=[Function,Array],un={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:hn,onEnter:hn,onAfterEnter:hn,onEnterCancelled:hn,onBeforeLeave:hn,onLeave:hn,onAfterLeave:hn,onLeaveCancelled:hn,onBeforeAppear:hn,onAppear:hn,onAfterAppear:hn,onAppearCancelled:hn},setup(e,{slots:t}){const n=ti(),r=function(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Cn((()=>{e.isMounted=!0})),Ln((()=>{e.isUnmounting=!0})),e}();let i;return()=>{const s=t.default&&vn(t.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1)for(const e of s)if(e.type!==Cr){a=e;break}const o=ot(e),{mode:l}=o;if(r.isLeaving)return fn(a);const c=mn(a);if(!c)return fn(a);const h=pn(c,o,r,n);gn(c,h);const u=n.subTree,d=u&&mn(u);let p=!1;const{getTransitionKey:f}=c.type;if(f){const e=f();void 0===i?i=e:e!==i&&(i=e,p=!0)}if(d&&d.type!==Cr&&(!Ur(c,d)||p)){const e=pn(d,o,r,n);if(gn(d,e),"out-in"===l)return r.isLeaving=!0,e.afterLeave=()=>{r.isLeaving=!1,n.update()},fn(a);"in-out"===l&&c.type!==Cr&&(e.delayLeave=(e,t,n)=>{dn(r,d)[String(d.key)]=d,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=n})}return a}}};function dn(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function pn(e,t,n,r){const{appear:i,mode:s,persisted:a=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:c,onEnterCancelled:h,onBeforeLeave:u,onLeave:d,onAfterLeave:p,onLeaveCancelled:f,onBeforeAppear:m,onAppear:g,onAfterAppear:v,onAppearCancelled:_}=t,x=String(e.key),y=dn(n,e),b=(e,t)=>{e&&St(e,r,9,t)},w=(e,t)=>{const n=t[1];b(e,t),S(e)?e.every((e=>e.length<=1))&&n():e.length<=1&&n()},M={mode:s,persisted:a,beforeEnter(t){let r=o;if(!n.isMounted){if(!i)return;r=m||o}t._leaveCb&&t._leaveCb(!0);const s=y[x];s&&Ur(e,s)&&s.el._leaveCb&&s.el._leaveCb(),b(r,[t])},enter(e){let t=l,r=c,s=h;if(!n.isMounted){if(!i)return;t=g||l,r=v||c,s=_||h}let a=!1;const o=e._enterCb=t=>{a||(a=!0,b(t?s:r,[e]),M.delayedLeave&&M.delayedLeave(),e._enterCb=void 0)};t?w(t,[e,o]):o()},leave(t,r){const i=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return r();b(u,[t]);let s=!1;const a=t._leaveCb=n=>{s||(s=!0,r(),b(n?f:p,[t]),t._leaveCb=void 0,y[i]===e&&delete y[i])};y[i]=e,d?w(d,[t,a]):a()},clone:e=>pn(e,t,n,r)};return M}function fn(e){if(yn(e))return(e=Wr(e)).children=null,e}function mn(e){return yn(e)?e.children?e.children[0]:void 0:e}function gn(e,t){6&e.shapeFlag&&e.component?gn(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function vn(e,t=!1,n){let r=[],i=0;for(let s=0;s<e.length;s++){let a=e[s];const o=null==n?a.key:String(n)+String(null!=a.key?a.key:s);a.type===Tr?(128&a.patchFlag&&i++,r=r.concat(vn(a.children,t,o))):(t||a.type!==Cr)&&r.push(null!=o?Wr(a,{key:o}):a)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function _n(e){return T(e)?{setup:e,name:e.name}:e}const xn=e=>!!e.type.__asyncLoader,yn=e=>e.type.__isKeepAlive;function bn(e,t){Sn(e,"a",t)}function wn(e,t){Sn(e,"da",t)}function Sn(e,t,n=ei){const r=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(En(t,r,n),n){let e=n.parent;for(;e&&e.parent;)yn(e.parent.vnode)&&Mn(r,t,n,e),e=e.parent}}function Mn(e,t,n,r){const i=En(t,e,r,!0);On((()=>{y(r[t],i)}),n)}function En(e,t,n=ei,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...r)=>{if(n.isUnmounted)return;ce(),ni(n);const i=St(t,n,e,r);return ri(),he(),i});return r?i.unshift(s):i.push(s),s}}const Tn=e=>(t,n=ei)=>(!si||"sp"===e)&&En(e,t,n),An=Tn("bm"),Cn=Tn("m"),Pn=Tn("bu"),Rn=Tn("u"),Ln=Tn("bum"),On=Tn("um"),zn=Tn("sp"),Dn=Tn("rtg"),kn=Tn("rtc");function In(e,t=ei){En("ec",e,t)}function Nn(e,t){const n=Wt;if(null===n)return e;const r=li(n)||n.proxy,i=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[e,n,a,o=d]=t[s];T(e)&&(e={mounted:e,updated:e}),e.deep&&cn(n),i.push({dir:e,instance:r,value:n,oldValue:void 0,arg:a,modifiers:o})}return e}function Fn(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let a=0;a<i.length;a++){const o=i[a];s&&(o.oldValue=s[a].value);let l=o.dir[r];l&&(ce(),St(l,n,8,[e.el,o,e,t]),he())}}function Un(e,t){return function(e,t,n=!0,r=!1){const i=Wt||ei;if(i){const n=i.type;if("components"===e){const e=function(e,t=!0){return T(e)?e.displayName||e.name:e.name||t&&e.__name}(n,!1);if(e&&(e===t||e===F(t)||e===H(F(t))))return n}const s=Hn(i[e]||n[e],t)||Hn(i.appContext[e],t);return!s&&r?n:s}}("components",e,!0,t)||e}const Bn=Symbol();function Hn(e,t){return e&&(e[t]||e[F(t)]||e[H(F(t))])}function Gn(e,t,n,r){let i;const s=n&&n[r];if(S(e)||A(e)){i=new Array(e.length);for(let n=0,r=e.length;n<r;n++)i[n]=t(e[n],n,void 0,s&&s[n])}else if("number"==typeof e){i=new Array(e);for(let n=0;n<e;n++)i[n]=t(n+1,n,void 0,s&&s[n])}else if(P(e))if(e[Symbol.iterator])i=Array.from(e,((e,n)=>t(e,n,void 0,s&&s[n])));else{const n=Object.keys(e);i=new Array(n.length);for(let r=0,a=n.length;r<a;r++){const a=n[r];i[r]=t(e[a],a,r,s&&s[r])}}else i=[];return n&&(n[r]=i),i}function jn(e,t,n={},r,i){if(Wt.isCE||Wt.parent&&xn(Wt.parent)&&Wt.parent.isCE)return Vr("slot","default"===t?null:{name:t},r&&r());let s=e[t];s&&s._c&&(s._d=!1),Or();const a=s&&Vn(s(n)),o=Nr(Tr,{key:n.key||a&&a.key||`_${t}`},a||(r?r():[]),a&&1===e._?64:-2);return!i&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function Vn(e){return e.some((e=>!Fr(e)||e.type!==Cr&&!(e.type===Tr&&!Vn(e.children))))?e:null}const Wn=e=>e?ii(e)?li(e)||e.proxy:Wn(e.parent):null,Xn=x(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Wn(e.parent),$root:e=>Wn(e.root),$emit:e=>e.emit,$options:e=>Qn(e),$forceUpdate:e=>e.f||(e.f=()=>kt(e.update)),$nextTick:e=>e.n||(e.n=Dt.bind(e.proxy)),$watch:e=>on.bind(e)}),qn={get({_:e},t){const{ctx:n,setupState:r,data:i,props:s,accessCache:a,type:o,appContext:l}=e;let c;if("$"!==t[0]){const o=a[t];if(void 0!==o)switch(o){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if(r!==d&&w(r,t))return a[t]=1,r[t];if(i!==d&&w(i,t))return a[t]=2,i[t];if((c=e.propsOptions[0])&&w(c,t))return a[t]=3,s[t];if(n!==d&&w(n,t))return a[t]=4,n[t];Yn&&(a[t]=0)}}const h=Xn[t];let u,p;return h?("$attrs"===t&&ue(e,0,t),h(e)):(u=o.__cssModules)&&(u=u[t])?u:n!==d&&w(n,t)?(a[t]=4,n[t]):(p=l.config.globalProperties,w(p,t)?p[t]:void 0)},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return i!==d&&w(i,t)?(i[t]=n,!0):r!==d&&w(r,t)?(r[t]=n,!0):!w(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(s[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},a){let o;return!!n[a]||e!==d&&w(e,a)||t!==d&&w(t,a)||(o=s[0])&&w(o,a)||w(r,a)||w(Xn,a)||w(i.config.globalProperties,a)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:w(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let Yn=!0;function Zn(e){const t=Qn(e),n=e.proxy,r=e.ctx;Yn=!1,t.beforeCreate&&Kn(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:a,watch:o,provide:l,inject:c,created:h,beforeMount:u,mounted:d,beforeUpdate:p,updated:m,activated:g,deactivated:v,beforeDestroy:_,beforeUnmount:x,destroyed:y,unmounted:b,render:w,renderTracked:M,renderTriggered:E,errorCaptured:A,serverPrefetch:C,expose:R,inheritAttrs:L,components:O,directives:z,filters:D}=t;if(c&&function(e,t,n=f,r=!1){S(e)&&(e=nr(e));for(const i in e){const n=e[i];let s;s=P(n)?"default"in n?nn(n.from||i,n.default,!0):nn(n.from||i):nn(n),pt(s)&&r?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:e=>s.value=e}):t[i]=s}}(c,r,null,e.appContext.config.unwrapInjectedRef),a)for(const f in a){const e=a[f];T(e)&&(r[f]=e.bind(n))}if(i){const t=i.call(n,n);P(t)&&(e.data=et(t))}if(Yn=!0,s)for(const S in s){const e=s[S],t=T(e)?e.bind(n,n):T(e.get)?e.get.bind(n,n):f,i=!T(e)&&T(e.set)?e.set.bind(n):f,a=ci({get:t,set:i});Object.defineProperty(r,S,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e})}if(o)for(const f in o)Jn(o[f],r,n,f);if(l){const e=T(l)?l.call(n):l;Reflect.ownKeys(e).forEach((t=>{tn(t,e[t])}))}function k(e,t){S(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(h&&Kn(h,e,"c"),k(An,u),k(Cn,d),k(Pn,p),k(Rn,m),k(bn,g),k(wn,v),k(In,A),k(kn,M),k(Dn,E),k(Ln,x),k(On,b),k(zn,C),S(R))if(R.length){const t=e.exposed||(e.exposed={});R.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});w&&e.render===f&&(e.render=w),null!=L&&(e.inheritAttrs=L),O&&(e.components=O),z&&(e.directives=z)}function Kn(e,t,n){St(S(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function Jn(e,t,n,r){const i=r.includes(".")?ln(n,r):()=>n[r];if(A(e)){const n=t[e];T(n)&&sn(i,n)}else if(T(e))sn(i,e.bind(n));else if(P(e))if(S(e))e.forEach((e=>Jn(e,t,n,r)));else{const r=T(e.handler)?e.handler.bind(n):t[e.handler];T(r)&&sn(i,r,e)}}function Qn(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,o=s.get(t);let l;return o?l=o:i.length||n||r?(l={},i.length&&i.forEach((e=>$n(l,e,a,!0))),$n(l,t,a)):l=t,P(t)&&s.set(t,l),l}function $n(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&$n(e,s,n,!0),i&&i.forEach((t=>$n(e,t,n,!0)));for(const a in t)if(r&&"expose"===a);else{const r=er[a]||n&&n[a];e[a]=r?r(e[a],t[a]):t[a]}return e}const er={data:tr,props:ir,emits:ir,methods:ir,computed:ir,beforeCreate:rr,created:rr,beforeMount:rr,mounted:rr,beforeUpdate:rr,updated:rr,beforeDestroy:rr,beforeUnmount:rr,destroyed:rr,unmounted:rr,activated:rr,deactivated:rr,errorCaptured:rr,serverPrefetch:rr,components:ir,directives:ir,watch:function(e,t){if(!e)return t;if(!t)return e;const n=x(Object.create(null),e);for(const r in t)n[r]=rr(e[r],t[r]);return n},provide:tr,inject:function(e,t){return ir(nr(e),nr(t))}};function tr(e,t){return t?e?function(){return x(T(e)?e.call(this,this):e,T(t)?t.call(this,this):t)}:t:e}function nr(e){if(S(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function rr(e,t){return e?[...new Set([].concat(e,t))]:t}function ir(e,t){return e?x(x(Object.create(null),e),t):t}function sr(e,t,n,r=!1){const i={},s={};W(s,Br,1),e.propsDefaults=Object.create(null),ar(e,t,i,s);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);n?e.props=r?i:nt(i,!1,Ae,qe,Ke):e.type.props?e.props=i:e.props=s,e.attrs=s}function ar(e,t,n,r){const[i,s]=e.propsOptions;let a,o=!1;if(t)for(let l in t){if(k(l))continue;const c=t[l];let h;i&&w(i,h=F(l))?s&&s.includes(h)?(a||(a={}))[h]=c:n[h]=c:Vt(e.emitsOptions,l)||l in r&&c===r[l]||(r[l]=c,o=!0)}if(s){const t=ot(n),r=a||d;for(let a=0;a<s.length;a++){const o=s[a];n[o]=or(i,t,o,r[o],e,!w(r,o))}}return o}function or(e,t,n,r,i,s){const a=e[n];if(null!=a){const e=w(a,"default");if(e&&void 0===r){const e=a.default;if(a.type!==Function&&T(e)){const{propsDefaults:s}=i;n in s?r=s[n]:(ni(i),r=s[n]=e.call(null,t),ri())}else r=e}a[0]&&(s&&!e?r=!1:!a[1]||""!==r&&r!==B(n)||(r=!0))}return r}function lr(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const s=e.props,a={},o=[];let l=!1;if(!T(e)){const r=e=>{l=!0;const[n,r]=lr(e,t,!0);x(a,n),r&&o.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!s&&!l)return P(e)&&r.set(e,p),p;if(S(s))for(let h=0;h<s.length;h++){const e=F(s[h]);cr(e)&&(a[e]=d)}else if(s)for(const h in s){const e=F(h);if(cr(e)){const t=s[h],n=a[e]=S(t)||T(t)?{type:t}:t;if(n){const t=dr(Boolean,n.type),r=dr(String,n.type);n[0]=t>-1,n[1]=r<0||t<r,(t>-1||w(n,"default"))&&o.push(e)}}}const c=[a,o];return P(e)&&r.set(e,c),c}function cr(e){return"$"!==e[0]}function hr(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:null===e?"null":""}function ur(e,t){return hr(e)===hr(t)}function dr(e,t){return S(t)?t.findIndex((t=>ur(t,e))):T(t)&&ur(t,e)?0:-1}const pr=e=>"_"===e[0]||"$stable"===e,fr=e=>S(e)?e.map(Yr):[Yr(e)],mr=(e,t,n)=>{if(t._n)return t;const r=Kt(((...e)=>fr(t(...e))),n);return r._c=!1,r},gr=(e,t,n)=>{const r=e._ctx;for(const i in e){if(pr(i))continue;const n=e[i];if(T(n))t[i]=mr(0,n,r);else if(null!=n){const e=fr(n);t[i]=()=>e}}},vr=(e,t)=>{const n=fr(t);e.slots.default=()=>n};function _r(){return{app:null,config:{isNativeTag:m,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let xr=0;function yr(e,t){return function(n,r=null){T(n)||(n=Object.assign({},n)),null==r||P(r)||(r=null);const i=_r(),s=new Set;let a=!1;const o=i.app={_uid:xr++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:ui,get config(){return i.config},set config(e){},use:(e,...t)=>(s.has(e)||(e&&T(e.install)?(s.add(e),e.install(o,...t)):T(e)&&(s.add(e),e(o,...t))),o),mixin:e=>(i.mixins.includes(e)||i.mixins.push(e),o),component:(e,t)=>t?(i.components[e]=t,o):i.components[e],directive:(e,t)=>t?(i.directives[e]=t,o):i.directives[e],mount(s,l,c){if(!a){const h=Vr(n,r);return h.appContext=i,l&&t?t(h,s):e(h,s,c),a=!0,o._container=s,s.__vue_app__=o,li(h.component)||h.component.proxy}},unmount(){a&&(e(null,o._container),delete o._container.__vue_app__)},provide:(e,t)=>(i.provides[e]=t,o)};return o}}function br(e,t,n,r,i=!1){if(S(e))return void e.forEach(((e,s)=>br(e,t&&(S(t)?t[s]:t),n,r,i)));if(xn(r)&&!i)return;const s=4&r.shapeFlag?li(r.component)||r.component.proxy:r.el,a=i?null:s,{i:o,r:l}=e,c=t&&t.r,h=o.refs===d?o.refs={}:o.refs,u=o.setupState;if(null!=c&&c!==l&&(A(c)?(h[c]=null,w(u,c)&&(u[c]=null)):pt(c)&&(c.value=null)),T(l))wt(l,o,12,[a,h]);else{const t=A(l),r=pt(l);if(t||r){const o=()=>{if(e.f){const n=t?h[l]:l.value;i?S(n)&&y(n,s):S(n)?n.includes(s)||n.push(s):t?(h[l]=[s],w(u,l)&&(u[l]=h[l])):(l.value=[s],e.k&&(h[e.k]=l.value))}else t?(h[l]=a,w(u,l)&&(u[l]=a)):r&&(l.value=a,e.k&&(h[e.k]=a))};a?(o.id=-1,wr(o,n)):o()}}}const wr=function(e,t){var n;t&&t.pendingBranch?S(e)?t.effects.push(...e):t.effects.push(e):(S(n=e)?Pt.push(...n):Rt&&Rt.includes(n,n.allowRecurse?Lt+1:Lt)||Pt.push(n),It())};function Sr(e){return function(e,t){(q||(q="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})).__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:s,createText:a,createComment:o,setText:l,setElementText:c,parentNode:h,nextSibling:u,setScopeId:m=f,cloneNode:g,insertStaticContent:v}=e,_=(e,t,n,r=null,i=null,s=null,a=!1,o=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!Ur(e,t)&&(r=ne(e),J(e,i,s,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:c,ref:h,shapeFlag:u}=t;switch(c){case Ar:y(e,t,n,r);break;case Cr:b(e,t,n,r);break;case Pr:null==e&&S(t,n,r,a);break;case Tr:D(e,t,n,r,i,s,a,o,l);break;default:1&u?T(e,t,n,r,i,s,a,o,l):6&u?I(e,t,n,r,i,s,a,o,l):(64&u||128&u)&&c.process(e,t,n,r,i,s,a,o,l,ie)}null!=h&&i&&br(h,e&&e.ref,s,t||e,!t)},y=(e,t,r,i)=>{if(null==e)n(t.el=a(t.children),r,i);else{const n=t.el=e.el;t.children!==e.children&&l(n,t.children)}},b=(e,t,r,i)=>{null==e?n(t.el=o(t.children||""),r,i):t.el=e.el},S=(e,t,n,r)=>{[e.el,e.anchor]=v(e.children,t,n,r,e.el,e.anchor)},M=({el:e,anchor:t},r,i)=>{let s;for(;e&&e!==t;)s=u(e),n(e,r,i),e=s;n(t,r,i)},E=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=u(e),r(e),e=n;r(t)},T=(e,t,n,r,i,s,a,o,l)=>{a=a||"svg"===t.type,null==e?A(t,n,r,i,s,a,o,l):L(e,t,i,s,a,o,l)},A=(e,t,r,a,o,l,h,u)=>{let d,p;const{type:f,props:m,shapeFlag:v,transition:_,patchFlag:x,dirs:y}=e;if(e.el&&void 0!==g&&-1===x)d=e.el=g(e.el);else{if(d=e.el=s(e.type,l,m&&m.is,m),8&v?c(d,e.children):16&v&&P(e.children,d,null,a,o,l&&"foreignObject"!==f,h,u),y&&Fn(e,null,a,"created"),m){for(const t in m)"value"===t||k(t)||i(d,t,null,m[t],l,e.children,a,o,te);"value"in m&&i(d,"value",null,m.value),(p=m.onVnodeBeforeMount)&&Jr(p,a,e)}C(d,e,e.scopeId,h,a)}y&&Fn(e,null,a,"beforeMount");const b=(!o||o&&!o.pendingBranch)&&_&&!_.persisted;b&&_.beforeEnter(d),n(d,t,r),((p=m&&m.onVnodeMounted)||b||y)&&wr((()=>{p&&Jr(p,a,e),b&&_.enter(d),y&&Fn(e,null,a,"mounted")}),o)},C=(e,t,n,r,i)=>{if(n&&m(e,n),r)for(let s=0;s<r.length;s++)m(e,r[s]);if(i){if(t===i.subTree){const t=i.vnode;C(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},P=(e,t,n,r,i,s,a,o,l=0)=>{for(let c=l;c<e.length;c++){const l=e[c]=o?Zr(e[c]):Yr(e[c]);_(null,l,t,n,r,i,s,a,o)}},L=(e,t,n,r,s,a,o)=>{const l=t.el=e.el;let{patchFlag:h,dynamicChildren:u,dirs:p}=t;h|=16&e.patchFlag;const f=e.props||d,m=t.props||d;let g;n&&Mr(n,!1),(g=m.onVnodeBeforeUpdate)&&Jr(g,n,t,e),p&&Fn(t,e,n,"beforeUpdate"),n&&Mr(n,!0);const v=s&&"foreignObject"!==t.type;if(u?O(e.dynamicChildren,u,l,n,r,v,a):o||j(e,t,l,null,n,r,v,a,!1),h>0){if(16&h)z(l,t,f,m,n,r,s);else if(2&h&&f.class!==m.class&&i(l,"class",null,m.class,s),4&h&&i(l,"style",f.style,m.style,s),8&h){const a=t.dynamicProps;for(let t=0;t<a.length;t++){const o=a[t],c=f[o],h=m[o];h===c&&"value"!==o||i(l,o,c,h,s,e.children,n,r,te)}}1&h&&e.children!==t.children&&c(l,t.children)}else o||null!=u||z(l,t,f,m,n,r,s);((g=m.onVnodeUpdated)||p)&&wr((()=>{g&&Jr(g,n,t,e),p&&Fn(t,e,n,"updated")}),r)},O=(e,t,n,r,i,s,a)=>{for(let o=0;o<t.length;o++){const l=e[o],c=t[o],u=l.el&&(l.type===Tr||!Ur(l,c)||70&l.shapeFlag)?h(l.el):n;_(l,c,u,null,r,i,s,a,!0)}},z=(e,t,n,r,s,a,o)=>{if(n!==r){for(const l in r){if(k(l))continue;const c=r[l],h=n[l];c!==h&&"value"!==l&&i(e,l,h,c,o,t.children,s,a,te)}if(n!==d)for(const l in n)k(l)||l in r||i(e,l,n[l],null,o,t.children,s,a,te);"value"in r&&i(e,"value",n.value,r.value)}},D=(e,t,r,i,s,o,l,c,h)=>{const u=t.el=e?e.el:a(""),d=t.anchor=e?e.anchor:a("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:m}=t;m&&(c=c?c.concat(m):m),null==e?(n(u,r,i),n(d,r,i),P(t.children,r,d,s,o,l,c,h)):p>0&&64&p&&f&&e.dynamicChildren?(O(e.dynamicChildren,f,r,s,o,l,c),(null!=t.key||s&&t===s.subTree)&&Er(e,t,!0)):j(e,t,r,d,s,o,l,c,h)},I=(e,t,n,r,i,s,a,o,l)=>{t.slotScopeIds=o,null==e?512&t.shapeFlag?i.ctx.activate(t,n,r,a,l):N(t,n,r,i,s,a,l):U(e,t,l)},N=(e,t,n,r,i,s,a)=>{const o=e.component=function(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||Qr,s={uid:$r++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Z(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:lr(r,i),emitsOptions:jt(r,i),emit:null,emitted:null,propsDefaults:d,inheritAttrs:r.inheritAttrs,ctx:d,data:d,props:d,attrs:d,slots:d,refs:d,setupState:d,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};s.ctx={_:s},s.root=t?t.root:s,s.emit=Gt.bind(null,s),e.ce&&e.ce(s);return s}(e,r,i);if(yn(e)&&(o.ctx.renderer=ie),function(e,t=!1){si=t;const{props:n,children:r}=e.vnode,i=ii(e);sr(e,n,i,t),((e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=ot(t),W(t,"_",n)):gr(t,e.slots={})}else e.slots={},t&&vr(e,t);W(e.slots,Br,1)})(e,r);const s=i?function(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=lt(new Proxy(e.ctx,qn));const{setup:r}=n;if(r){const n=e.setupContext=r.length>1?function(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=function(e){return new Proxy(e.attrs,{get:(t,n)=>(ue(e,0,"$attrs"),t[n])})}(e))},slots:e.slots,emit:e.emit,expose:t}}(e):null;ni(e),ce();const i=wt(r,e,0,[e.props,n]);if(he(),ri(),R(i)){if(i.then(ri,ri),t)return i.then((n=>{ai(e,n,t)})).catch((t=>{Mt(t,e,0)}));e.asyncDep=i}else ai(e,i,t)}else oi(e,t)}(e,t):void 0;si=!1}(o),o.asyncDep){if(i&&i.registerDep(o,H),!e.el){const e=o.subTree=Vr(Cr);b(null,e,t,n)}}else H(o,e,t,n,i,s,a)},U=(e,t,n)=>{const r=t.component=e.component;if(function(e,t,n){const{props:r,children:i,component:s}=e,{props:a,children:o,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!i&&!o||o&&o.$stable)||r!==a&&(r?!a||en(r,a,c):!!a);if(1024&l)return!0;if(16&l)return r?en(r,a,c):!!a;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(a[n]!==r[n]&&!Vt(c,n))return!0}}return!1}(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void G(r,t,n);r.next=t,function(e){const t=At.indexOf(e);t>Ct&&At.splice(t,1)}(r.update),r.update()}else t.el=e.el,r.vnode=t},H=(e,t,n,r,i,s,a)=>{const o=()=>{if(e.isMounted){let t,{next:n,bu:r,u:o,parent:l,vnode:c}=e,u=n;Mr(e,!1),n?(n.el=c.el,G(e,n,a)):n=c,r&&V(r),(t=n.props&&n.props.onVnodeBeforeUpdate)&&Jr(t,l,n,c),Mr(e,!0);const d=Jt(e),p=e.subTree;e.subTree=d,_(p,d,h(p.el),ne(p),e,i,s),n.el=d.el,null===u&&function({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}(e,d.el),o&&wr(o,i),(t=n.props&&n.props.onVnodeUpdated)&&wr((()=>Jr(t,l,n,c)),i)}else{let a;const{el:o,props:l}=t,{bm:c,m:h,parent:u}=e,d=xn(t);if(Mr(e,!1),c&&V(c),!d&&(a=l&&l.onVnodeBeforeMount)&&Jr(a,u,t),Mr(e,!0),o&&oe){const n=()=>{e.subTree=Jt(e),oe(o,e.subTree,e,i,null)};d?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{const a=e.subTree=Jt(e);_(null,a,n,r,e,i,s),t.el=a.el}if(h&&wr(h,i),!d&&(a=l&&l.onVnodeMounted)){const e=t;wr((()=>Jr(a,u,e)),i)}(256&t.shapeFlag||u&&xn(u.vnode)&&256&u.vnode.shapeFlag)&&e.a&&wr(e.a,i),e.isMounted=!0,t=n=r=null}},l=e.effect=new se(o,(()=>kt(c)),e.scope),c=e.update=()=>l.run();c.id=e.uid,Mr(e,!0),c()},G=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=e,o=ot(i),[l]=e.propsOptions;let c=!1;if(!(r||a>0)||16&a){let r;ar(e,t,i,s)&&(c=!0);for(const s in o)t&&(w(t,s)||(r=B(s))!==s&&w(t,r))||(l?!n||void 0===n[s]&&void 0===n[r]||(i[s]=or(l,o,s,void 0,e,!0)):delete i[s]);if(s!==o)for(const e in s)t&&w(t,e)||(delete s[e],c=!0)}else if(8&a){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let a=n[r];if(Vt(e.emitsOptions,a))continue;const h=t[a];if(l)if(w(s,a))h!==s[a]&&(s[a]=h,c=!0);else{const t=F(a);i[t]=or(l,o,t,h,e,!1)}else h!==s[a]&&(s[a]=h,c=!0)}}c&&pe(e,"set","$attrs")}(e,t.props,r,n),((e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,a=d;if(32&r.shapeFlag){const e=t._;e?n&&1===e?s=!1:(x(i,t),n||1!==e||delete i._):(s=!t.$stable,gr(t,i)),a=t}else t&&(vr(e,t),a={default:1});if(s)for(const o in i)pr(o)||o in a||delete i[o]})(e,t.children,n),ce(),Nt(),he()},j=(e,t,n,r,i,s,a,o,l=!1)=>{const h=e&&e.children,u=e?e.shapeFlag:0,d=t.children,{patchFlag:p,shapeFlag:f}=t;if(p>0){if(128&p)return void Y(h,d,n,r,i,s,a,o,l);if(256&p)return void X(h,d,n,r,i,s,a,o,l)}8&f?(16&u&&te(h,i,s),d!==h&&c(n,d)):16&u?16&f?Y(h,d,n,r,i,s,a,o,l):te(h,i,s,!0):(8&u&&c(n,""),16&f&&P(d,n,r,i,s,a,o,l))},X=(e,t,n,r,i,s,a,o,l)=>{t=t||p;const c=(e=e||p).length,h=t.length,u=Math.min(c,h);let d;for(d=0;d<u;d++){const r=t[d]=l?Zr(t[d]):Yr(t[d]);_(e[d],r,n,null,i,s,a,o,l)}c>h?te(e,i,s,!0,!1,u):P(t,n,r,i,s,a,o,l,u)},Y=(e,t,n,r,i,s,a,o,l)=>{let c=0;const h=t.length;let u=e.length-1,d=h-1;for(;c<=u&&c<=d;){const r=e[c],h=t[c]=l?Zr(t[c]):Yr(t[c]);if(!Ur(r,h))break;_(r,h,n,null,i,s,a,o,l),c++}for(;c<=u&&c<=d;){const r=e[u],c=t[d]=l?Zr(t[d]):Yr(t[d]);if(!Ur(r,c))break;_(r,c,n,null,i,s,a,o,l),u--,d--}if(c>u){if(c<=d){const e=d+1,u=e<h?t[e].el:r;for(;c<=d;)_(null,t[c]=l?Zr(t[c]):Yr(t[c]),n,u,i,s,a,o,l),c++}}else if(c>d)for(;c<=u;)J(e[c],i,s,!0),c++;else{const f=c,m=c,g=new Map;for(c=m;c<=d;c++){const e=t[c]=l?Zr(t[c]):Yr(t[c]);null!=e.key&&g.set(e.key,c)}let v,x=0;const y=d-m+1;let b=!1,w=0;const S=new Array(y);for(c=0;c<y;c++)S[c]=0;for(c=f;c<=u;c++){const r=e[c];if(x>=y){J(r,i,s,!0);continue}let h;if(null!=r.key)h=g.get(r.key);else for(v=m;v<=d;v++)if(0===S[v-m]&&Ur(r,t[v])){h=v;break}void 0===h?J(r,i,s,!0):(S[h-m]=c+1,h>=w?w=h:b=!0,_(r,t[h],n,null,i,s,a,o,l),x++)}const M=b?function(e){const t=e.slice(),n=[0];let r,i,s,a,o;const l=e.length;for(r=0;r<l;r++){const l=e[r];if(0!==l){if(i=n[n.length-1],e[i]<l){t[r]=i,n.push(r);continue}for(s=0,a=n.length-1;s<a;)o=s+a>>1,e[n[o]]<l?s=o+1:a=o;l<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}s=n.length,a=n[s-1];for(;s-- >0;)n[s]=a,a=t[a];return n}(S):p;for(v=M.length-1,c=y-1;c>=0;c--){const e=m+c,u=t[e],d=e+1<h?t[e+1].el:r;0===S[c]?_(null,u,n,d,i,s,a,o,l):b&&(v<0||c!==M[v]?K(u,n,d,2):v--)}}},K=(e,t,r,i,s=null)=>{const{el:a,type:o,transition:l,children:c,shapeFlag:h}=e;if(6&h)return void K(e.component.subTree,t,r,i);if(128&h)return void e.suspense.move(t,r,i);if(64&h)return void o.move(e,t,r,ie);if(o===Tr){n(a,t,r);for(let e=0;e<c.length;e++)K(c[e],t,r,i);return void n(e.anchor,t,r)}if(o===Pr)return void M(e,t,r);if(2!==i&&1&h&&l)if(0===i)l.beforeEnter(a),n(a,t,r),wr((()=>l.enter(a)),s);else{const{leave:e,delayLeave:i,afterLeave:s}=l,o=()=>n(a,t,r),c=()=>{e(a,(()=>{o(),s&&s()}))};i?i(a,o,c):c()}else n(a,t,r)},J=(e,t,n,r=!1,i=!1)=>{const{type:s,props:a,ref:o,children:l,dynamicChildren:c,shapeFlag:h,patchFlag:u,dirs:d}=e;if(null!=o&&br(o,null,n,e,!0),256&h)return void t.ctx.deactivate(e);const p=1&h&&d,f=!xn(e);let m;if(f&&(m=a&&a.onVnodeBeforeUnmount)&&Jr(m,t,e),6&h)ee(e.component,n,r);else{if(128&h)return void e.suspense.unmount(n,r);p&&Fn(e,null,t,"beforeUnmount"),64&h?e.type.remove(e,t,n,i,ie,r):c&&(s!==Tr||u>0&&64&u)?te(c,t,n,!1,!0):(s===Tr&&384&u||!i&&16&h)&&te(l,t,n),r&&Q(e)}(f&&(m=a&&a.onVnodeUnmounted)||p)&&wr((()=>{m&&Jr(m,t,e),p&&Fn(e,null,t,"unmounted")}),n)},Q=e=>{const{type:t,el:n,anchor:i,transition:s}=e;if(t===Tr)return void $(n,i);if(t===Pr)return void E(e);const a=()=>{r(n),s&&!s.persisted&&s.afterLeave&&s.afterLeave()};if(1&e.shapeFlag&&s&&!s.persisted){const{leave:t,delayLeave:r}=s,i=()=>t(n,a);r?r(e.el,a,i):i()}else a()},$=(e,t)=>{let n;for(;e!==t;)n=u(e),r(e),e=n;r(t)},ee=(e,t,n)=>{const{bum:r,scope:i,update:s,subTree:a,um:o}=e;r&&V(r),i.stop(),s&&(s.active=!1,J(a,e,t,n)),o&&wr(o,t),wr((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},te=(e,t,n,r=!1,i=!1,s=0)=>{for(let a=s;a<e.length;a++)J(e[a],t,n,r,i)},ne=e=>6&e.shapeFlag?ne(e.component.subTree):128&e.shapeFlag?e.suspense.next():u(e.anchor||e.el),re=(e,t,n)=>{null==e?t._vnode&&J(t._vnode,null,null,!0):_(t._vnode||null,e,t,null,null,null,n),Nt(),Ft(),t._vnode=e},ie={p:_,um:J,m:K,r:Q,mt:N,mc:P,pc:j,pbc:O,n:ne,o:e};let ae,oe;t&&([ae,oe]=t(ie));return{render:re,hydrate:ae,createApp:yr(re,ae)}}(e)}function Mr({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Er(e,t,n=!1){const r=e.children,i=t.children;if(S(r)&&S(i))for(let s=0;s<r.length;s++){const e=r[s];let t=i[s];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=i[s]=Zr(i[s]),t.el=e.el),n||Er(e,t))}}const Tr=Symbol(void 0),Ar=Symbol(void 0),Cr=Symbol(void 0),Pr=Symbol(void 0),Rr=[];let Lr=null;function Or(e=!1){Rr.push(Lr=e?null:[])}let zr=1;function Dr(e){zr+=e}function kr(e){return e.dynamicChildren=zr>0?Lr||p:null,Rr.pop(),Lr=Rr[Rr.length-1]||null,zr>0&&Lr&&Lr.push(e),e}function Ir(e,t,n,r,i,s){return kr(jr(e,t,n,r,i,s,!0))}function Nr(e,t,n,r,i){return kr(Vr(e,t,n,r,i,!0))}function Fr(e){return!!e&&!0===e.__v_isVNode}function Ur(e,t){return e.type===t.type&&e.key===t.key}const Br="__vInternal",Hr=({key:e})=>null!=e?e:null,Gr=({ref:e,ref_key:t,ref_for:n})=>null!=e?A(e)||pt(e)||T(e)?{i:Wt,r:e,k:t,f:!!n}:e:null;function jr(e,t=null,n=null,r=0,i=null,s=(e===Tr?0:1),a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Hr(t),ref:t&&Gr(t),scopeId:Xt,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null};return o?(Kr(l,n),128&s&&e.normalize(l)):n&&(l.shapeFlag|=A(n)?8:16),zr>0&&!a&&Lr&&(l.patchFlag>0||6&s)&&32!==l.patchFlag&&Lr.push(l),l}const Vr=function(e,t=null,n=null,r=0,i=null,a=!1){e&&e!==Bn||(e=Cr);if(Fr(e)){const r=Wr(e,t,!0);return n&&Kr(r,n),zr>0&&!a&&Lr&&(6&r.shapeFlag?Lr[Lr.indexOf(e)]=r:Lr.push(r)),r.patchFlag|=-2,r}o=e,T(o)&&"__vccOpts"in o&&(e=e.__vccOpts);var o;if(t){t=function(e){return e?at(e)||Br in e?x({},e):e:null}(t);let{class:e,style:n}=t;e&&!A(e)&&(t.class=c(e)),P(n)&&(at(n)&&!S(n)&&(n=x({},n)),t.style=s(n))}const l=A(e)?1:(e=>e.__isSuspense)(e)?128:(e=>e.__isTeleport)(e)?64:P(e)?4:T(e)?2:0;return jr(e,t,n,r,i,l,a,!0)};function Wr(e,t,n=!1){const{props:r,ref:i,patchFlag:a,children:o}=e,l=t?function(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=c([t.class,r.class]));else if("style"===e)t.style=s([t.style,r.style]);else if(v(e)){const n=t[e],i=r[e];!i||n===i||S(n)&&n.includes(i)||(t[e]=n?[].concat(n,i):i)}else""!==e&&(t[e]=r[e])}return t}(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Hr(l),ref:t&&t.ref?n&&i?S(i)?i.concat(Gr(t)):[i,Gr(t)]:Gr(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Tr?-1===a?16:16|a:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Wr(e.ssContent),ssFallback:e.ssFallback&&Wr(e.ssFallback),el:e.el,anchor:e.anchor}}function Xr(e=" ",t=0){return Vr(Ar,null,e,t)}function qr(e="",t=!1){return t?(Or(),Nr(Cr,null,e)):Vr(Cr,null,e)}function Yr(e){return null==e||"boolean"==typeof e?Vr(Cr):S(e)?Vr(Tr,null,e.slice()):"object"==typeof e?Zr(e):Vr(Ar,null,String(e))}function Zr(e){return null===e.el||e.memo?e:Wr(e)}function Kr(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if(S(t))n=16;else if("object"==typeof t){if(65&r){const n=t.default;return void(n&&(n._c&&(n._d=!1),Kr(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||Br in t?3===r&&Wt&&(1===Wt.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=Wt}}else T(t)?(t={default:t,_ctx:Wt},n=32):(t=String(t),64&r?(n=16,t=[Xr(t)]):n=8);e.children=t,e.shapeFlag|=n}function Jr(e,t,n,r=null){St(e,t,7,[n,r])}const Qr=_r();let $r=0;let ei=null;const ti=()=>ei||Wt,ni=e=>{ei=e,e.scope.on()},ri=()=>{ei&&ei.scope.off(),ei=null};function ii(e){return 4&e.vnode.shapeFlag}let si=!1;function ai(e,t,n){T(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:P(t)&&(e.setupState=xt(t)),oi(e,n)}function oi(e,t,n){const r=e.type;e.render||(e.render=r.render||f),ni(e),ce(),Zn(e),he(),ri()}function li(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(xt(lt(e.exposed)),{get:(t,n)=>n in t?t[n]:n in Xn?Xn[n](e):void 0}))}const ci=(e,t)=>function(e,t,n=!1){let r,i;const s=T(e);return s?(r=e,i=f):(r=e.get,i=e.set),new bt(r,i,s||!i,n)}(e,0,si);function hi(e,t,n){const r=arguments.length;return 2===r?P(t)&&!S(t)?Fr(t)?Vr(e,null,[t]):Vr(e,t):Vr(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&Fr(n)&&(n=[n]),Vr(e,t,n))}const ui="3.2.39",di="undefined"!=typeof document?document:null,pi=di&&di.createElement("template"),fi={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?di.createElementNS("http://www.w3.org/2000/svg",e):di.createElement(e,n?{is:n}:void 0);return"select"===e&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:e=>di.createTextNode(e),createComment:e=>di.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>di.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,r,i,s){const a=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),i!==s&&(i=i.nextSibling););else{pi.innerHTML=r?`<svg>${e}</svg>`:e;const i=pi.content;if(r){const e=i.firstChild;for(;e.firstChild;)i.appendChild(e.firstChild);i.removeChild(e)}t.insertBefore(i,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};const mi=/\s*!important$/;function gi(e,t,n){if(S(n))n.forEach((n=>gi(e,t,n)));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=function(e,t){const n=_i[t];if(n)return n;let r=F(t);if("filter"!==r&&r in e)return _i[t]=r;r=H(r);for(let i=0;i<vi.length;i++){const n=vi[i]+r;if(n in e)return _i[t]=n}return t}(e,t);mi.test(n)?e.setProperty(B(r),n.replace(mi,""),"important"):e[r]=n}}const vi=["Webkit","Moz","ms"],_i={};const xi="http://www.w3.org/1999/xlink";const[yi,bi]=(()=>{let e=Date.now,t=!1;if("undefined"!=typeof window){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(n&&Number(n[1])<=53)}return[e,t]})();let wi=0;const Si=Promise.resolve(),Mi=()=>{wi=0};function Ei(e,t,n,r,i=null){const s=e._vei||(e._vei={}),a=s[t];if(r&&a)a.value=r;else{const[n,o]=function(e){let t;if(Ti.test(e)){let n;for(t={};n=e.match(Ti);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[":"===e[2]?e.slice(3):B(e.slice(2)),t]}(t);if(r){const a=s[t]=function(e,t){const n=e=>{const r=e.timeStamp||yi();(bi||r>=n.attached-1)&&St(function(e,t){if(S(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=(()=>wi||(Si.then(Mi),wi=yi()))(),n}(r,i);!function(e,t,n,r){e.addEventListener(t,n,r)}(e,n,a,o)}else a&&(!function(e,t,n,r){e.removeEventListener(t,n,r)}(e,n,a,o),s[t]=void 0)}}const Ti=/(?:Once|Passive|Capture)$/;const Ai=/^on[a-z]/;const Ci="transition",Pi=(e,{slots:t})=>hi(un,function(e){const t={};for(const x in e)x in Ri||(t[x]=e[x]);if(!1===e.css)return t;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:o=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=a,appearToClass:h=o,leaveFromClass:u=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=e,f=function(e){if(null==e)return null;if(P(e))return[zi(e.enter),zi(e.leave)];{const t=zi(e);return[t,t]}}(i),m=f&&f[0],g=f&&f[1],{onBeforeEnter:v,onEnter:_,onEnterCancelled:y,onLeave:b,onLeaveCancelled:w,onBeforeAppear:S=v,onAppear:M=_,onAppearCancelled:E=y}=t,T=(e,t,n)=>{ki(e,t?h:o),ki(e,t?c:a),n&&n()},A=(e,t)=>{e._isLeaving=!1,ki(e,u),ki(e,p),ki(e,d),t&&t()},C=e=>(t,n)=>{const i=e?M:_,a=()=>T(t,e,n);Li(i,[t,a]),Ii((()=>{ki(t,e?l:s),Di(t,e?h:o),Oi(i)||Fi(t,r,m,a)}))};return x(t,{onBeforeEnter(e){Li(v,[e]),Di(e,s),Di(e,a)},onBeforeAppear(e){Li(S,[e]),Di(e,l),Di(e,c)},onEnter:C(!1),onAppear:C(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>A(e,t);Di(e,u),document.body.offsetHeight,Di(e,d),Ii((()=>{e._isLeaving&&(ki(e,u),Di(e,p),Oi(b)||Fi(e,r,g,n))})),Li(b,[e,n])},onEnterCancelled(e){T(e,!1),Li(y,[e])},onAppearCancelled(e){T(e,!0),Li(E,[e])},onLeaveCancelled(e){A(e),Li(w,[e])}})}(e),t);Pi.displayName="Transition";const Ri={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Pi.props=x({},un.props,Ri);const Li=(e,t=[])=>{S(e)?e.forEach((e=>e(...t))):e&&e(...t)},Oi=e=>!!e&&(S(e)?e.some((e=>e.length>1)):e.length>1);function zi(e){return X(e)}function Di(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function ki(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Ii(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let Ni=0;function Fi(e,t,n,r){const i=e._endId=++Ni,s=()=>{i===e._endId&&r()};if(n)return setTimeout(s,n);const{type:a,timeout:o,propCount:l}=function(e,t){const n=window.getComputedStyle(e),r=e=>(n[e]||"").split(", "),i=r("transitionDelay"),s=r("transitionDuration"),a=Ui(i,s),o=r("animationDelay"),l=r("animationDuration"),c=Ui(o,l);let h=null,u=0,d=0;t===Ci?a>0&&(h=Ci,u=a,d=s.length):"animation"===t?c>0&&(h="animation",u=c,d=l.length):(u=Math.max(a,c),h=u>0?a>c?Ci:"animation":null,d=h?h===Ci?s.length:l.length:0);const p=h===Ci&&/\b(transform|all)(,|$)/.test(n.transitionProperty);return{type:h,timeout:u,propCount:d,hasTransform:p}}(e,t);if(!a)return r();const c=a+"end";let h=0;const u=()=>{e.removeEventListener(c,d),s()},d=t=>{t.target===e&&++h>=l&&u()};setTimeout((()=>{h<l&&u()}),o+1),e.addEventListener(c,d)}function Ui(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map(((t,n)=>Bi(t)+Bi(e[n]))))}function Bi(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}const Hi={beforeMount(e,{value:t},{transition:n}){e._vod="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):Gi(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Gi(e,!0),r.enter(e)):r.leave(e,(()=>{Gi(e,!1)})):Gi(e,t))},beforeUnmount(e,{value:t}){Gi(e,t)}};function Gi(e,t){e.style.display=t?e._vod:"none"}const ji=x({patchProp:(e,t,n,s,a=!1,o,l,c,h)=>{"class"===t?function(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,s,a):"style"===t?function(e,t,n){const r=e.style,i=A(n);if(n&&!i){for(const e in n)gi(r,e,n[e]);if(t&&!A(t))for(const e in t)null==n[e]&&gi(r,e,"")}else{const s=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=s)}}(e,n,s):v(t)?_(t)||Ei(e,t,0,s,l):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,n,r){if(r)return"innerHTML"===t||"textContent"===t||!!(t in e&&Ai.test(t)&&T(n));if("spellcheck"===t||"draggable"===t||"translate"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if(Ai.test(t)&&A(n))return!1;return t in e}(e,t,s,a))?function(e,t,n,r,s,a,o){if("innerHTML"===t||"textContent"===t)return r&&o(r,s,a),void(e[t]=null==n?"":n);if("value"===t&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=n;const r=null==n?"":n;return e.value===r&&"OPTION"!==e.tagName||(e.value=r),void(null==n&&e.removeAttribute(t))}let l=!1;if(""===n||null==n){const r=typeof e[t];"boolean"===r?n=i(n):null==n&&"string"===r?(n="",l=!0):"number"===r&&(n=0,l=!0)}try{e[t]=n}catch(c){}l&&e.removeAttribute(t)}(e,t,s,o,l,c,h):("true-value"===t?e._trueValue=s:"false-value"===t&&(e._falseValue=s),function(e,t,n,s,a){if(s&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(xi,t.slice(6,t.length)):e.setAttributeNS(xi,t,n);else{const s=r(t);null==n||s&&!i(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}(e,t,s,a))}},fi);let Vi;const Wi=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n};const Xi=Wi({},[["render",function(e,t){const n=Un("RouterView");return Or(),Nr(n)}]]),qi={},Yi=0,Zi=1,Ki=2,Ji=0,Qi=1,$i=2,es=3;class ts{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const ns=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let rs=1234567;const is=Math.PI/180,ss=180/Math.PI;function as(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(ns[255&e]+ns[e>>8&255]+ns[e>>16&255]+ns[e>>24&255]+"-"+ns[255&t]+ns[t>>8&255]+"-"+ns[t>>16&15|64]+ns[t>>24&255]+"-"+ns[63&n|128]+ns[n>>8&255]+"-"+ns[n>>16&255]+ns[n>>24&255]+ns[255&r]+ns[r>>8&255]+ns[r>>16&255]+ns[r>>24&255]).toLowerCase()}function os(e,t,n){return Math.max(t,Math.min(n,e))}function ls(e,t){return(e%t+t)%t}function cs(e,t,n){return(1-n)*e+n*t}function hs(e){return 0==(e&e-1)&&0!==e}function us(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function ds(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function ps(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function fs(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var ms=Object.freeze({__proto__:null,DEG2RAD:is,RAD2DEG:ss,generateUUID:as,clamp:os,euclideanModulo:ls,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:cs,damp:function(e,t,n,r){return cs(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(ls(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(rs=e);let t=rs+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*is},radToDeg:function(e){return e*ss},isPowerOfTwo:hs,ceilPowerOfTwo:us,floorPowerOfTwo:ds,setQuaternionFromProperEuler:function(e,t,n,r,i){const s=Math.cos,a=Math.sin,o=s(n/2),l=a(n/2),c=s((t+r)/2),h=a((t+r)/2),u=s((t-r)/2),d=a((t-r)/2),p=s((r-t)/2),f=a((r-t)/2);switch(i){case"XYX":e.set(o*h,l*u,l*d,o*c);break;case"YZY":e.set(l*d,o*h,l*u,o*c);break;case"ZXZ":e.set(l*u,l*d,o*h,o*c);break;case"XZX":e.set(o*h,l*f,l*p,o*c);break;case"YXY":e.set(l*p,o*h,l*f,o*c);break;case"ZYZ":e.set(l*f,l*p,o*h,o*c)}},normalize:fs,denormalize:ps});class gs{constructor(e=0,t=0){gs.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,s=this.y-e.y;return this.x=i*n-s*r+e.x,this.y=i*r+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class vs{constructor(){vs.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,i,s,a,o,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=o,c[6]=n,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],a=n[3],o=n[6],l=n[1],c=n[4],h=n[7],u=n[2],d=n[5],p=n[8],f=r[0],m=r[3],g=r[6],v=r[1],_=r[4],x=r[7],y=r[2],b=r[5],w=r[8];return i[0]=s*f+a*v+o*y,i[3]=s*m+a*_+o*b,i[6]=s*g+a*x+o*w,i[1]=l*f+c*v+h*y,i[4]=l*m+c*_+h*b,i[7]=l*g+c*x+h*w,i[2]=u*f+d*v+p*y,i[5]=u*m+d*_+p*b,i[8]=u*g+d*x+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8];return t*s*c-t*a*l-n*i*c+n*a*o+r*i*l-r*s*o}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],h=c*s-a*l,u=a*o-c*i,d=l*i-s*o,p=t*h+n*u+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=h*f,e[1]=(r*l-c*n)*f,e[2]=(a*n-r*s)*f,e[3]=u*f,e[4]=(c*t-r*o)*f,e[5]=(r*i-a*t)*f,e[6]=d*f,e[7]=(n*o-l*t)*f,e[8]=(s*t-n*i)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,s,a){const o=Math.cos(i),l=Math.sin(i);return this.set(n*o,n*l,-n*(o*s+l*a)+s+e,-r*l,r*o,-r*(-l*s+o*a)+a+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],s=r[3],a=r[6],o=r[1],l=r[4],c=r[7];return r[0]=t*i+n*o,r[3]=t*s+n*l,r[6]=t*a+n*c,r[1]=-n*i+t*o,r[4]=-n*s+t*l,r[7]=-n*a+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function _s(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}function xs(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function ys(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function bs(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}const ws={srgb:{"srgb-linear":ys},"srgb-linear":{srgb:bs}},Ss={legacyMode:!0,get workingColorSpace(){return"srgb-linear"},set workingColorSpace(e){},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(ws[t]&&void 0!==ws[t][n]){const r=ws[t][n];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},Ms={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Es={r:0,g:0,b:0},Ts={h:0,s:0,l:0},As={h:0,s:0,l:0};function Cs(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Ps(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}class Rs{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t="srgb"){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Ss.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r="srgb-linear"){return this.r=e,this.g=t,this.b=n,Ss.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r="srgb-linear"){if(e=ls(e,1),t=os(t,0,1),n=os(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Cs(i,r,e+1/3),this.g=Cs(i,r,e),this.b=Cs(i,r,e-1/3)}return Ss.toWorkingColorSpace(this,r),this}setStyle(e,t="srgb"){function n(e){void 0!==e&&parseFloat(e)}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const i=r[1],s=r[2];switch(i){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,Ss.toWorkingColorSpace(this,t),n(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,Ss.toWorkingColorSpace(this,t),n(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s)){const r=parseFloat(e[1])/360,i=parseFloat(e[2])/100,s=parseFloat(e[3])/100;return n(e[4]),this.setHSL(r,i,s,t)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=r[1],n=e.length;if(3===n)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,Ss.toWorkingColorSpace(this,t),this;if(6===n)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,Ss.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t="srgb"){const n=Ms[e.toLowerCase()];return void 0!==n&&this.setHex(n,t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ys(e.r),this.g=ys(e.g),this.b=ys(e.b),this}copyLinearToSRGB(e){return this.r=bs(e.r),this.g=bs(e.g),this.b=bs(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e="srgb"){return Ss.fromWorkingColorSpace(Ps(this,Es),e),os(255*Es.r,0,255)<<16^os(255*Es.g,0,255)<<8^os(255*Es.b,0,255)<<0}getHexString(e="srgb"){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t="srgb-linear"){Ss.fromWorkingColorSpace(Ps(this,Es),t);const n=Es.r,r=Es.g,i=Es.b,s=Math.max(n,r,i),a=Math.min(n,r,i);let o,l;const c=(a+s)/2;if(a===s)o=0,l=0;else{const e=s-a;switch(l=c<=.5?e/(s+a):e/(2-s-a),s){case n:o=(r-i)/e+(r<i?6:0);break;case r:o=(i-n)/e+2;break;case i:o=(n-r)/e+4}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e,t="srgb-linear"){return Ss.fromWorkingColorSpace(Ps(this,Es),t),e.r=Es.r,e.g=Es.g,e.b=Es.b,e}getStyle(e="srgb"){return Ss.fromWorkingColorSpace(Ps(this,Es),e),"srgb"!==e?`color(${e} ${Es.r} ${Es.g} ${Es.b})`:`rgb(${255*Es.r|0},${255*Es.g|0},${255*Es.b|0})`}offsetHSL(e,t,n){return this.getHSL(Ts),Ts.h+=e,Ts.s+=t,Ts.l+=n,this.setHSL(Ts.h,Ts.s,Ts.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Ts),e.getHSL(As);const n=cs(Ts.h,As.h,t),r=cs(Ts.s,As.s,t),i=cs(Ts.l,As.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let Ls;Rs.NAMES=Ms;class Os{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Ls&&(Ls=xs("canvas")),Ls.width=e.width,Ls.height=e.height;const n=Ls.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Ls}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=xs("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*ys(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*ys(t[e]/255)):t[e]=ys(t[e]);return{data:t,width:e.width,height:e.height}}return e}}class zs{constructor(e=null){this.isSource=!0,this.uuid=as(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(Ds(r[t].image)):e.push(Ds(r[t]))}else e=Ds(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function Ds(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?Os.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:{}}let ks=0;class Is extends ts{constructor(e=Is.DEFAULT_IMAGE,t=Is.DEFAULT_MAPPING,n=1001,r=1001,i=1006,s=1008,a=1023,o=1009,l=1,c=3e3){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ks++}),this.uuid=as(),this.name="",this.source=new zs(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new gs(0,0),this.repeat=new gs(1,1),this.center=new gs(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new vs,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}Is.DEFAULT_IMAGE=null,Is.DEFAULT_MAPPING=300;class Ns{constructor(e=0,t=0,n=0,r=1){Ns.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r+s[12]*i,this.y=s[1]*t+s[5]*n+s[9]*r+s[13]*i,this.z=s[2]*t+s[6]*n+s[10]*r+s[14]*i,this.w=s[3]*t+s[7]*n+s[11]*r+s[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const s=.01,a=.1,o=e.elements,l=o[0],c=o[4],h=o[8],u=o[1],d=o[5],p=o[9],f=o[2],m=o[6],g=o[10];if(Math.abs(c-u)<s&&Math.abs(h-f)<s&&Math.abs(p-m)<s){if(Math.abs(c+u)<a&&Math.abs(h+f)<a&&Math.abs(p+m)<a&&Math.abs(l+d+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(d+1)/2,v=(g+1)/2,_=(c+u)/4,x=(h+f)/4,y=(p+m)/4;return e>o&&e>v?e<s?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=_/n,i=x/n):o>v?o<s?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(o),n=_/r,i=y/r):v<s?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=x/i,r=y/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-p)*(m-p)+(h-f)*(h-f)+(u-c)*(u-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(h-f)/v,this.z=(u-c)/v,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Fs extends ts{constructor(e,t,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ns(0,0,e,t),this.scissorTest=!1,this.viewport=new Ns(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new Is(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:1006,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new zs(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Us extends Is{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Bs extends Is{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Hs{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,s,a){let o=n[r+0],l=n[r+1],c=n[r+2],h=n[r+3];const u=i[s+0],d=i[s+1],p=i[s+2],f=i[s+3];if(0===a)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=h);if(1===a)return e[t+0]=u,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(h!==f||o!==u||l!==d||c!==p){let e=1-a;const t=o*u+l*d+c*p+h*f,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),s=Math.atan2(i,t*n);e=Math.sin(e*s)/i,a=Math.sin(a*s)/i}const i=a*n;if(o=o*e+u*i,l=l*e+d*i,c=c*e+p*i,h=h*e+f*i,e===1-a){const e=1/Math.sqrt(o*o+l*l+c*c+h*h);o*=e,l*=e,c*=e,h*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=h}static multiplyQuaternionsFlat(e,t,n,r,i,s){const a=n[r],o=n[r+1],l=n[r+2],c=n[r+3],h=i[s],u=i[s+1],d=i[s+2],p=i[s+3];return e[t]=a*p+c*h+o*d-l*u,e[t+1]=o*p+c*u+l*h-a*d,e[t+2]=l*p+c*d+a*u-o*h,e[t+3]=c*p-a*h-o*u-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,i=e._z,s=e._order,a=Math.cos,o=Math.sin,l=a(n/2),c=a(r/2),h=a(i/2),u=o(n/2),d=o(r/2),p=o(i/2);switch(s){case"XYZ":this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p;break;case"YXZ":this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p;break;case"ZXY":this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p;break;case"ZYX":this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p;break;case"YZX":this._x=u*c*h+l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h-u*d*p;break;case"XZY":this._x=u*c*h-l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h+u*d*p}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],s=t[1],a=t[5],o=t[9],l=t[2],c=t[6],h=t[10],u=n+a+h;if(u>0){const e=.5/Math.sqrt(u+1);this._w=.25/e,this._x=(c-o)*e,this._y=(i-l)*e,this._z=(s-r)*e}else if(n>a&&n>h){const e=2*Math.sqrt(1+n-a-h);this._w=(c-o)/e,this._x=.25*e,this._y=(r+s)/e,this._z=(i+l)/e}else if(a>h){const e=2*Math.sqrt(1+a-n-h);this._w=(i-l)/e,this._x=(r+s)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+h-n-a);this._w=(s-r)/e,this._x=(i+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(os(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,s=e._w,a=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+s*a+r*l-i*o,this._y=r*c+s*o+i*a-n*l,this._z=i*c+s*l+n*o-r*a,this._w=s*c-n*a-r*o-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,s=this._w;let a=s*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=n,this._y=r,this._z=i,this;const o=1-a*a;if(o<=Number.EPSILON){const e=1-t;return this._w=e*s+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,a),h=Math.sin((1-t)*c)/l,u=Math.sin(t*c)/l;return this._w=s*h+this._w*u,this._x=n*h+this._x*u,this._y=r*h+this._y*u,this._z=i*h+this._z*u,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Gs{constructor(e=0,t=0,n=0){Gs.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Vs.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Vs.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,s=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*s,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*s,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,s=e.y,a=e.z,o=e.w,l=o*t+s*r-a*n,c=o*n+a*t-i*r,h=o*r+i*n-s*t,u=-i*t-s*n-a*r;return this.x=l*o+u*-i+c*-a-h*-s,this.y=c*o+u*-s+h*-i-l*-a,this.z=h*o+u*-a+l*-s-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,s=t.x,a=t.y,o=t.z;return this.x=r*o-i*a,this.y=i*s-n*o,this.z=n*a-r*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return js.copy(this).projectOnVector(e),this.sub(js)}reflect(e){return this.sub(js.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(os(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const js=new Gs,Vs=new Hs;class Ws{constructor(e=new Gs(1/0,1/0,1/0),t=new Gs(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.length;o<l;o+=3){const l=e[o],c=e[o+1],h=e[o+2];l<t&&(t=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>s&&(s=c),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,s,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.count;o<l;o++){const l=e.getX(o),c=e.getY(o),h=e.getZ(o);l<t&&(t=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>s&&(s=c),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,s,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=qs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n)if(t&&null!=n.attributes&&void 0!==n.attributes.position){const t=n.attributes.position;for(let n=0,r=t.count;n<r;n++)qs.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(qs)}else null===n.boundingBox&&n.computeBoundingBox(),Ys.copy(n.boundingBox),Ys.applyMatrix4(e.matrixWorld),this.union(Ys);const r=e.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,qs),qs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ta),na.subVectors(this.max,ta),Zs.subVectors(e.a,ta),Ks.subVectors(e.b,ta),Js.subVectors(e.c,ta),Qs.subVectors(Ks,Zs),$s.subVectors(Js,Ks),ea.subVectors(Zs,Js);let t=[0,-Qs.z,Qs.y,0,-$s.z,$s.y,0,-ea.z,ea.y,Qs.z,0,-Qs.x,$s.z,0,-$s.x,ea.z,0,-ea.x,-Qs.y,Qs.x,0,-$s.y,$s.x,0,-ea.y,ea.x,0];return!!sa(t,Zs,Ks,Js,na)&&(t=[1,0,0,0,1,0,0,0,1],!!sa(t,Zs,Ks,Js,na)&&(ra.crossVectors(Qs,$s),t=[ra.x,ra.y,ra.z],sa(t,Zs,Ks,Js,na)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return qs.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(qs).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Xs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Xs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Xs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Xs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Xs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Xs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Xs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Xs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Xs)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Xs=[new Gs,new Gs,new Gs,new Gs,new Gs,new Gs,new Gs,new Gs],qs=new Gs,Ys=new Ws,Zs=new Gs,Ks=new Gs,Js=new Gs,Qs=new Gs,$s=new Gs,ea=new Gs,ta=new Gs,na=new Gs,ra=new Gs,ia=new Gs;function sa(e,t,n,r,i){for(let s=0,a=e.length-3;s<=a;s+=3){ia.fromArray(e,s);const a=i.x*Math.abs(ia.x)+i.y*Math.abs(ia.y)+i.z*Math.abs(ia.z),o=t.dot(ia),l=n.dot(ia),c=r.dot(ia);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>a)return!1}return!0}const aa=new Ws,oa=new Gs,la=new Gs,ca=new Gs;class ha{constructor(e=new Gs,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):aa.setFromPoints(e).getCenter(n);let r=0;for(let i=0,s=e.length;i<s;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){ca.subVectors(e,this.center);const t=ca.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.add(ca.multiplyScalar(n/e)),this.radius+=n}return this}union(e){return!0===this.center.equals(e.center)?la.set(0,0,1).multiplyScalar(e.radius):la.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(oa.copy(e.center).add(la)),this.expandByPoint(oa.copy(e.center).sub(la)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const ua=new Gs,da=new Gs,pa=new Gs,fa=new Gs,ma=new Gs,ga=new Gs,va=new Gs;class _a{constructor(e=new Gs,t=new Gs(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ua)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ua.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ua.copy(this.direction).multiplyScalar(t).add(this.origin),ua.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){da.copy(e).add(t).multiplyScalar(.5),pa.copy(t).sub(e).normalize(),fa.copy(this.origin).sub(da);const i=.5*e.distanceTo(t),s=-this.direction.dot(pa),a=fa.dot(this.direction),o=-fa.dot(pa),l=fa.lengthSq(),c=Math.abs(1-s*s);let h,u,d,p;if(c>0)if(h=s*o-a,u=s*a-o,p=i*c,h>=0)if(u>=-p)if(u<=p){const e=1/c;h*=e,u*=e,d=h*(h+s*u+2*a)+u*(s*h+u+2*o)+l}else u=i,h=Math.max(0,-(s*u+a)),d=-h*h+u*(u+2*o)+l;else u=-i,h=Math.max(0,-(s*u+a)),d=-h*h+u*(u+2*o)+l;else u<=-p?(h=Math.max(0,-(-s*i+a)),u=h>0?-i:Math.min(Math.max(-i,-o),i),d=-h*h+u*(u+2*o)+l):u<=p?(h=0,u=Math.min(Math.max(-i,-o),i),d=u*(u+2*o)+l):(h=Math.max(0,-(s*i+a)),u=h>0?i:Math.min(Math.max(-i,-o),i),d=-h*h+u*(u+2*o)+l);else u=s>0?-i:i,h=Math.max(0,-(s*u+a)),d=-h*h+u*(u+2*o)+l;return n&&n.copy(this.direction).multiplyScalar(h).add(this.origin),r&&r.copy(pa).multiplyScalar(u).add(da),d}intersectSphere(e,t){ua.subVectors(e.center,this.origin);const n=ua.dot(this.direction),r=ua.dot(ua)-n*n,i=e.radius*e.radius;if(r>i)return null;const s=Math.sqrt(i-r),a=n-s,o=n+s;return a<0&&o<0?null:a<0?this.at(o,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,s,a,o;const l=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,u=this.origin;return l>=0?(n=(e.min.x-u.x)*l,r=(e.max.x-u.x)*l):(n=(e.max.x-u.x)*l,r=(e.min.x-u.x)*l),c>=0?(i=(e.min.y-u.y)*c,s=(e.max.y-u.y)*c):(i=(e.max.y-u.y)*c,s=(e.min.y-u.y)*c),n>s||i>r?null:((i>n||n!=n)&&(n=i),(s<r||r!=r)&&(r=s),h>=0?(a=(e.min.z-u.z)*h,o=(e.max.z-u.z)*h):(a=(e.max.z-u.z)*h,o=(e.min.z-u.z)*h),n>o||a>r?null:((a>n||n!=n)&&(n=a),(o<r||r!=r)&&(r=o),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,ua)}intersectTriangle(e,t,n,r,i){ma.subVectors(t,e),ga.subVectors(n,e),va.crossVectors(ma,ga);let s,a=this.direction.dot(va);if(a>0){if(r)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}fa.subVectors(this.origin,e);const o=s*this.direction.dot(ga.crossVectors(fa,ga));if(o<0)return null;const l=s*this.direction.dot(ma.cross(fa));if(l<0)return null;if(o+l>a)return null;const c=-s*fa.dot(va);return c<0?null:this.at(c/a,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class xa{constructor(){xa.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,i,s,a,o,l,c,h,u,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=c,g[10]=h,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new xa).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/ya.setFromMatrixColumn(e,0).length(),i=1/ya.setFromMatrixColumn(e,1).length(),s=1/ya.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,s=Math.cos(n),a=Math.sin(n),o=Math.cos(r),l=Math.sin(r),c=Math.cos(i),h=Math.sin(i);if("XYZ"===e.order){const e=s*c,n=s*h,r=a*c,i=a*h;t[0]=o*c,t[4]=-o*h,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-a*o,t[2]=i-e*l,t[6]=r+n*l,t[10]=s*o}else if("YXZ"===e.order){const e=o*c,n=o*h,r=l*c,i=l*h;t[0]=e+i*a,t[4]=r*a-n,t[8]=s*l,t[1]=s*h,t[5]=s*c,t[9]=-a,t[2]=n*a-r,t[6]=i+e*a,t[10]=s*o}else if("ZXY"===e.order){const e=o*c,n=o*h,r=l*c,i=l*h;t[0]=e-i*a,t[4]=-s*h,t[8]=r+n*a,t[1]=n+r*a,t[5]=s*c,t[9]=i-e*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if("ZYX"===e.order){const e=s*c,n=s*h,r=a*c,i=a*h;t[0]=o*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=o*h,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=a*o,t[10]=s*o}else if("YZX"===e.order){const e=s*o,n=s*l,r=a*o,i=a*l;t[0]=o*c,t[4]=i-e*h,t[8]=r*h+n,t[1]=h,t[5]=s*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*h+r,t[10]=e-i*h}else if("XZY"===e.order){const e=s*o,n=s*l,r=a*o,i=a*l;t[0]=o*c,t[4]=-h,t[8]=l*c,t[1]=e*h+i,t[5]=s*c,t[9]=n*h-r,t[2]=r*h-n,t[6]=a*c,t[10]=i*h+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(wa,e,Sa)}lookAt(e,t,n){const r=this.elements;return Ta.subVectors(e,t),0===Ta.lengthSq()&&(Ta.z=1),Ta.normalize(),Ma.crossVectors(n,Ta),0===Ma.lengthSq()&&(1===Math.abs(n.z)?Ta.x+=1e-4:Ta.z+=1e-4,Ta.normalize(),Ma.crossVectors(n,Ta)),Ma.normalize(),Ea.crossVectors(Ta,Ma),r[0]=Ma.x,r[4]=Ea.x,r[8]=Ta.x,r[1]=Ma.y,r[5]=Ea.y,r[9]=Ta.y,r[2]=Ma.z,r[6]=Ea.z,r[10]=Ta.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],a=n[4],o=n[8],l=n[12],c=n[1],h=n[5],u=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],_=n[7],x=n[11],y=n[15],b=r[0],w=r[4],S=r[8],M=r[12],E=r[1],T=r[5],A=r[9],C=r[13],P=r[2],R=r[6],L=r[10],O=r[14],z=r[3],D=r[7],k=r[11],I=r[15];return i[0]=s*b+a*E+o*P+l*z,i[4]=s*w+a*T+o*R+l*D,i[8]=s*S+a*A+o*L+l*k,i[12]=s*M+a*C+o*O+l*I,i[1]=c*b+h*E+u*P+d*z,i[5]=c*w+h*T+u*R+d*D,i[9]=c*S+h*A+u*L+d*k,i[13]=c*M+h*C+u*O+d*I,i[2]=p*b+f*E+m*P+g*z,i[6]=p*w+f*T+m*R+g*D,i[10]=p*S+f*A+m*L+g*k,i[14]=p*M+f*C+m*O+g*I,i[3]=v*b+_*E+x*P+y*z,i[7]=v*w+_*T+x*R+y*D,i[11]=v*S+_*A+x*L+y*k,i[15]=v*M+_*C+x*O+y*I,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],s=e[1],a=e[5],o=e[9],l=e[13],c=e[2],h=e[6],u=e[10],d=e[14];return e[3]*(+i*o*h-r*l*h-i*a*u+n*l*u+r*a*d-n*o*d)+e[7]*(+t*o*d-t*l*u+i*s*u-r*s*d+r*l*c-i*o*c)+e[11]*(+t*l*h-t*a*d-i*s*h+n*s*d+i*a*c-n*l*c)+e[15]*(-r*a*c-t*o*h+t*a*u+r*s*h-n*s*u+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],h=e[9],u=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=h*m*l-f*u*l+f*o*d-a*m*d-h*o*g+a*u*g,_=p*u*l-c*m*l-p*o*d+s*m*d+c*o*g-s*u*g,x=c*f*l-p*h*l+p*a*d-s*f*d-c*a*g+s*h*g,y=p*h*o-c*f*o-p*a*u+s*f*u+c*a*m-s*h*m,b=t*v+n*_+r*x+i*y;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/b;return e[0]=v*w,e[1]=(f*u*i-h*m*i-f*r*d+n*m*d+h*r*g-n*u*g)*w,e[2]=(a*m*i-f*o*i+f*r*l-n*m*l-a*r*g+n*o*g)*w,e[3]=(h*o*i-a*u*i-h*r*l+n*u*l+a*r*d-n*o*d)*w,e[4]=_*w,e[5]=(c*m*i-p*u*i+p*r*d-t*m*d-c*r*g+t*u*g)*w,e[6]=(p*o*i-s*m*i-p*r*l+t*m*l+s*r*g-t*o*g)*w,e[7]=(s*u*i-c*o*i+c*r*l-t*u*l-s*r*d+t*o*d)*w,e[8]=x*w,e[9]=(p*h*i-c*f*i-p*n*d+t*f*d+c*n*g-t*h*g)*w,e[10]=(s*f*i-p*a*i+p*n*l-t*f*l-s*n*g+t*a*g)*w,e[11]=(c*a*i-s*h*i-c*n*l+t*h*l+s*n*d-t*a*d)*w,e[12]=y*w,e[13]=(c*f*r-p*h*r+p*n*u-t*f*u-c*n*m+t*h*m)*w,e[14]=(p*a*r-s*f*r-p*n*o+t*f*o+s*n*m-t*a*m)*w,e[15]=(s*h*r-c*a*r+c*n*o-t*h*o-s*n*u+t*a*u)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,s=e.x,a=e.y,o=e.z,l=i*s,c=i*a;return this.set(l*s+n,l*a-r*o,l*o+r*a,0,l*a+r*o,c*a+n,c*o-r*s,0,l*o-r*a,c*o+r*s,i*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,s){return this.set(1,n,i,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,s=t._y,a=t._z,o=t._w,l=i+i,c=s+s,h=a+a,u=i*l,d=i*c,p=i*h,f=s*c,m=s*h,g=a*h,v=o*l,_=o*c,x=o*h,y=n.x,b=n.y,w=n.z;return r[0]=(1-(f+g))*y,r[1]=(d+x)*y,r[2]=(p-_)*y,r[3]=0,r[4]=(d-x)*b,r[5]=(1-(u+g))*b,r[6]=(m+v)*b,r[7]=0,r[8]=(p+_)*w,r[9]=(m-v)*w,r[10]=(1-(u+f))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=ya.set(r[0],r[1],r[2]).length();const s=ya.set(r[4],r[5],r[6]).length(),a=ya.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],ba.copy(this);const o=1/i,l=1/s,c=1/a;return ba.elements[0]*=o,ba.elements[1]*=o,ba.elements[2]*=o,ba.elements[4]*=l,ba.elements[5]*=l,ba.elements[6]*=l,ba.elements[8]*=c,ba.elements[9]*=c,ba.elements[10]*=c,t.setFromRotationMatrix(ba),n.x=i,n.y=s,n.z=a,this}makePerspective(e,t,n,r,i,s){const a=this.elements,o=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),h=(n+r)/(n-r),u=-(s+i)/(s-i),d=-2*s*i/(s-i);return a[0]=o,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=u,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,s){const a=this.elements,o=1/(t-e),l=1/(n-r),c=1/(s-i),h=(t+e)*o,u=(n+r)*l,d=(s+i)*c;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-u,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const ya=new Gs,ba=new xa,wa=new Gs(0,0,0),Sa=new Gs(1,1,1),Ma=new Gs,Ea=new Gs,Ta=new Gs,Aa=new xa,Ca=new Hs;class Pa{constructor(e=0,t=0,n=0,r=Pa.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],s=r[4],a=r[8],o=r[1],l=r[5],c=r[9],h=r[2],u=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(os(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-s,i)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-os(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-h,i),this._z=0);break;case"ZXY":this._x=Math.asin(os(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,i));break;case"ZYX":this._y=Math.asin(-os(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(u,d),this._z=Math.atan2(o,i)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(os(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,i)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-os(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-c,d),this._y=0)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Aa.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Aa,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Ca.setFromEuler(this),this.setFromQuaternion(Ca,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){}}Pa.DefaultOrder="XYZ",Pa.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Ra{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let La=0;const Oa=new Gs,za=new Hs,Da=new xa,ka=new Gs,Ia=new Gs,Na=new Gs,Fa=new Hs,Ua=new Gs(1,0,0),Ba=new Gs(0,1,0),Ha=new Gs(0,0,1),Ga={type:"added"},ja={type:"removed"};class Va extends ts{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:La++}),this.uuid=as(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Va.DefaultUp.clone();const e=new Gs,t=new Pa,n=new Hs,r=new Gs(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new xa},normalMatrix:{value:new vs}}),this.matrix=new xa,this.matrixWorld=new xa,this.matrixAutoUpdate=Va.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Va.DefaultMatrixWorldAutoUpdate,this.layers=new Ra,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return za.setFromAxisAngle(e,t),this.quaternion.multiply(za),this}rotateOnWorldAxis(e,t){return za.setFromAxisAngle(e,t),this.quaternion.premultiply(za),this}rotateX(e){return this.rotateOnAxis(Ua,e)}rotateY(e){return this.rotateOnAxis(Ba,e)}rotateZ(e){return this.rotateOnAxis(Ha,e)}translateOnAxis(e,t){return Oa.copy(e).applyQuaternion(this.quaternion),this.position.add(Oa.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Ua,e)}translateY(e){return this.translateOnAxis(Ba,e)}translateZ(e){return this.translateOnAxis(Ha,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Da.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?ka.copy(e):ka.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Ia.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Da.lookAt(Ia,ka,this.up):Da.lookAt(ka,Ia,this.up),this.quaternion.setFromRotationMatrix(Da),r&&(Da.extractRotation(r.matrixWorld),za.setFromRotationMatrix(Da),this.quaternion.premultiply(za.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this||e&&e.isObject3D&&(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Ga)),this}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(ja)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(ja)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Da.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Da.multiply(e.parent.matrixWorld)),e.applyMatrix4(Da),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ia,e,Na),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ia,Fa,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const r=t[n];!0!==r.matrixWorldAutoUpdate&&!0!==e||r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=s(e.geometries),r=s(e.materials),i=s(e.textures),a=s(e.images),o=s(e.shapes),l=s(e.skeletons),c=s(e.animations),h=s(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),h.length>0&&(n.nodes=h)}return n.object=r,n;function s(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}Va.DefaultUp=new Gs(0,1,0),Va.DefaultMatrixAutoUpdate=!0,Va.DefaultMatrixWorldAutoUpdate=!0;const Wa=new Gs,Xa=new Gs,qa=new Gs,Ya=new Gs,Za=new Gs,Ka=new Gs,Ja=new Gs,Qa=new Gs,$a=new Gs,eo=new Gs;class to{constructor(e=new Gs,t=new Gs,n=new Gs){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Wa.subVectors(e,t),r.cross(Wa);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){Wa.subVectors(r,t),Xa.subVectors(n,t),qa.subVectors(e,t);const s=Wa.dot(Wa),a=Wa.dot(Xa),o=Wa.dot(qa),l=Xa.dot(Xa),c=Xa.dot(qa),h=s*l-a*a;if(0===h)return i.set(-2,-1,-1);const u=1/h,d=(l*o-a*c)*u,p=(s*c-a*o)*u;return i.set(1-d-p,p,d)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Ya),Ya.x>=0&&Ya.y>=0&&Ya.x+Ya.y<=1}static getUV(e,t,n,r,i,s,a,o){return this.getBarycoord(e,t,n,r,Ya),o.set(0,0),o.addScaledVector(i,Ya.x),o.addScaledVector(s,Ya.y),o.addScaledVector(a,Ya.z),o}static isFrontFacing(e,t,n,r){return Wa.subVectors(n,t),Xa.subVectors(e,t),Wa.cross(Xa).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Wa.subVectors(this.c,this.b),Xa.subVectors(this.a,this.b),.5*Wa.cross(Xa).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return to.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return to.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return to.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return to.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return to.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let s,a;Za.subVectors(r,n),Ka.subVectors(i,n),Qa.subVectors(e,n);const o=Za.dot(Qa),l=Ka.dot(Qa);if(o<=0&&l<=0)return t.copy(n);$a.subVectors(e,r);const c=Za.dot($a),h=Ka.dot($a);if(c>=0&&h<=c)return t.copy(r);const u=o*h-c*l;if(u<=0&&o>=0&&c<=0)return s=o/(o-c),t.copy(n).addScaledVector(Za,s);eo.subVectors(e,i);const d=Za.dot(eo),p=Ka.dot(eo);if(p>=0&&d<=p)return t.copy(i);const f=d*l-o*p;if(f<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(n).addScaledVector(Ka,a);const m=c*p-d*h;if(m<=0&&h-c>=0&&d-p>=0)return Ja.subVectors(i,r),a=(h-c)/(h-c+(d-p)),t.copy(r).addScaledVector(Ja,a);const g=1/(m+f+u);return s=f*g,a=u*g,t.copy(n).addScaledVector(Za,s).addScaledVector(Ka,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let no=0;class ro extends ts{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:no++}),this.uuid=as(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n)continue;const r=this[t];void 0!==r&&(r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class io extends ro{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Rs(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const so=new Gs,ao=new gs;class oo{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)ao.fromBufferAttribute(this,t),ao.applyMatrix3(e),this.setXY(t,ao.x,ao.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)so.fromBufferAttribute(this,t),so.applyMatrix3(e),this.setXYZ(t,so.x,so.y,so.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)so.fromBufferAttribute(this,t),so.applyMatrix4(e),this.setXYZ(t,so.x,so.y,so.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)so.fromBufferAttribute(this,t),so.applyNormalMatrix(e),this.setXYZ(t,so.x,so.y,so.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)so.fromBufferAttribute(this,t),so.transformDirection(e),this.setXYZ(t,so.x,so.y,so.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ps(t,this.array)),t}setX(e,t){return this.normalized&&(t=fs(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ps(t,this.array)),t}setY(e,t){return this.normalized&&(t=fs(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ps(t,this.array)),t}setZ(e,t){return this.normalized&&(t=fs(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ps(t,this.array)),t}setW(e,t){return this.normalized&&(t=fs(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=fs(t,this.array),n=fs(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=fs(t,this.array),n=fs(n,this.array),r=fs(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=fs(t,this.array),n=fs(n,this.array),r=fs(r,this.array),i=fs(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}copyColorsArray(){}copyVector2sArray(){}copyVector3sArray(){}copyVector4sArray(){}}class lo extends oo{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class co extends oo{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class ho extends oo{constructor(e,t,n){super(new Float32Array(e),t,n)}}let uo=0;const po=new xa,fo=new Va,mo=new Gs,go=new Ws,vo=new Ws,_o=new Gs;class xo extends ts{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:uo++}),this.uuid=as(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(_s(e)?co:lo)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new vs).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return po.makeRotationFromQuaternion(e),this.applyMatrix4(po),this}rotateX(e){return po.makeRotationX(e),this.applyMatrix4(po),this}rotateY(e){return po.makeRotationY(e),this.applyMatrix4(po),this}rotateZ(e){return po.makeRotationZ(e),this.applyMatrix4(po),this}translate(e,t,n){return po.makeTranslation(e,t,n),this.applyMatrix4(po),this}scale(e,t,n){return po.makeScale(e,t,n),this.applyMatrix4(po),this}lookAt(e){return fo.lookAt(e),fo.updateMatrix(),this.applyMatrix4(fo.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(mo).negate(),this.translate(mo.x,mo.y,mo.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new ho(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ws);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)this.boundingBox.set(new Gs(-1/0,-1/0,-1/0),new Gs(1/0,1/0,1/0));else{if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];go.setFromBufferAttribute(n),this.morphTargetsRelative?(_o.addVectors(this.boundingBox.min,go.min),this.boundingBox.expandByPoint(_o),_o.addVectors(this.boundingBox.max,go.max),this.boundingBox.expandByPoint(_o)):(this.boundingBox.expandByPoint(go.min),this.boundingBox.expandByPoint(go.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new ha);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)this.boundingSphere.set(new Gs,1/0);else if(e){const n=this.boundingSphere.center;if(go.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const n=t[e];vo.setFromBufferAttribute(n),this.morphTargetsRelative?(_o.addVectors(go.min,vo.min),go.expandByPoint(_o),_o.addVectors(go.max,vo.max),go.expandByPoint(_o)):(go.expandByPoint(vo.min),go.expandByPoint(vo.max))}go.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)_o.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(_o));if(t)for(let i=0,s=t.length;i<s;i++){const s=t[i],a=this.morphTargetsRelative;for(let t=0,i=s.count;t<i;t++)_o.fromBufferAttribute(s,t),a&&(mo.fromBufferAttribute(e,t),_o.add(mo)),r=Math.max(r,n.distanceToSquared(_o))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return;const n=e.array,r=t.position.array,i=t.normal.array,s=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new oo(new Float32Array(4*a),4));const o=this.getAttribute("tangent").array,l=[],c=[];for(let E=0;E<a;E++)l[E]=new Gs,c[E]=new Gs;const h=new Gs,u=new Gs,d=new Gs,p=new gs,f=new gs,m=new gs,g=new Gs,v=new Gs;function _(e,t,n){h.fromArray(r,3*e),u.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(s,2*e),f.fromArray(s,2*t),m.fromArray(s,2*n),u.sub(h),d.sub(h),f.sub(p),m.sub(p);const i=1/(f.x*m.y-m.x*f.y);isFinite(i)&&(g.copy(u).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(i),v.copy(d).multiplyScalar(f.x).addScaledVector(u,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let x=this.groups;0===x.length&&(x=[{start:0,count:n.length}]);for(let E=0,T=x.length;E<T;++E){const e=x[E],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)_(n[r+0],n[r+1],n[r+2])}const y=new Gs,b=new Gs,w=new Gs,S=new Gs;function M(e){w.fromArray(i,3*e),S.copy(w);const t=l[e];y.copy(t),y.sub(w.multiplyScalar(w.dot(t))).normalize(),b.crossVectors(S,t);const n=b.dot(c[e])<0?-1:1;o[4*e]=y.x,o[4*e+1]=y.y,o[4*e+2]=y.z,o[4*e+3]=n}for(let E=0,T=x.length;E<T;++E){const e=x[E],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)M(n[r+0]),M(n[r+1]),M(n[r+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new oo(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new Gs,i=new Gs,s=new Gs,a=new Gs,o=new Gs,l=new Gs,c=new Gs,h=new Gs;if(e)for(let u=0,d=e.count;u<d;u+=3){const d=e.getX(u+0),p=e.getX(u+1),f=e.getX(u+2);r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,p),s.fromBufferAttribute(t,f),c.subVectors(s,i),h.subVectors(r,i),c.cross(h),a.fromBufferAttribute(n,d),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),a.add(c),o.add(c),l.add(c),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,u=t.count;e<u;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),s.fromBufferAttribute(t,e+2),c.subVectors(s,i),h.subVectors(r,i),c.cross(h),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)_o.fromBufferAttribute(e,t),_o.normalize(),e.setXYZ(t,_o.x,_o.y,_o.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,s=new n.constructor(t.length*r);let a=0,o=0;for(let l=0,c=t.length;l<c;l++){a=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(let e=0;e<r;e++)s[o++]=n[a++]}return new oo(s,r,i)}if(null===this.index)return this;const t=new xo,n=this.index.array,r=this.attributes;for(const a in r){const i=e(r[a],n);t.setAttribute(a,i)}const i=this.morphAttributes;for(const a in i){const r=[],s=i[a];for(let t=0,i=s.length;t<i;t++){const i=e(s[t],n);r.push(i)}t.morphAttributes[a]=r}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,o=s.length;a<o;a++){const e=s[a];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const o in n){const t=n[o];e.data.attributes[o]=t.toJSON(e.data)}const r={};let i=!1;for(const o in this.morphAttributes){const t=this.morphAttributes[o],n=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];n.push(i.toJSON(e.data))}n.length>0&&(r[o]=n,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const l in r){const e=r[l];this.setAttribute(l,e.clone(t))}const i=e.morphAttributes;for(const l in i){const e=[],n=i[l];for(let r=0,i=n.length;r<i;r++)e.push(n[r].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let l=0,c=s.length;l<c;l++){const e=s[l];this.addGroup(e.start,e.count,e.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const yo=new xa,bo=new _a,wo=new ha,So=new Gs,Mo=new Gs,Eo=new Gs,To=new Gs,Ao=new Gs,Co=new Gs,Po=new Gs,Ro=new Gs,Lo=new Gs,Oo=new gs,zo=new gs,Do=new gs,ko=new Gs,Io=new Gs;class No extends Va{constructor(e=new xo,t=new io){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),wo.copy(n.boundingSphere),wo.applyMatrix4(i),!1===e.ray.intersectsSphere(wo))return;if(yo.copy(i).invert(),bo.copy(e.ray).applyMatrix4(yo),null!==n.boundingBox&&!1===bo.intersectsBox(n.boundingBox))return;let s;const a=n.index,o=n.attributes.position,l=n.morphAttributes.position,c=n.morphTargetsRelative,h=n.attributes.uv,u=n.attributes.uv2,d=n.groups,p=n.drawRange;if(null!==a)if(Array.isArray(r))for(let f=0,m=d.length;f<m;f++){const n=d[f],i=r[n.materialIndex];for(let r=Math.max(n.start,p.start),d=Math.min(a.count,Math.min(n.start+n.count,p.start+p.count));r<d;r+=3){const d=a.getX(r),p=a.getX(r+1),f=a.getX(r+2);s=Fo(this,i,e,bo,o,l,c,h,u,d,p,f),s&&(s.faceIndex=Math.floor(r/3),s.face.materialIndex=n.materialIndex,t.push(s))}}else{for(let n=Math.max(0,p.start),i=Math.min(a.count,p.start+p.count);n<i;n+=3){const i=a.getX(n),d=a.getX(n+1),p=a.getX(n+2);s=Fo(this,r,e,bo,o,l,c,h,u,i,d,p),s&&(s.faceIndex=Math.floor(n/3),t.push(s))}}else if(void 0!==o)if(Array.isArray(r))for(let f=0,m=d.length;f<m;f++){const n=d[f],i=r[n.materialIndex];for(let r=Math.max(n.start,p.start),a=Math.min(o.count,Math.min(n.start+n.count,p.start+p.count));r<a;r+=3){s=Fo(this,i,e,bo,o,l,c,h,u,r,r+1,r+2),s&&(s.faceIndex=Math.floor(r/3),s.face.materialIndex=n.materialIndex,t.push(s))}}else{for(let n=Math.max(0,p.start),i=Math.min(o.count,p.start+p.count);n<i;n+=3){s=Fo(this,r,e,bo,o,l,c,h,u,n,n+1,n+2),s&&(s.faceIndex=Math.floor(n/3),t.push(s))}}}}function Fo(e,t,n,r,i,s,a,o,l,c,h,u){So.fromBufferAttribute(i,c),Mo.fromBufferAttribute(i,h),Eo.fromBufferAttribute(i,u);const d=e.morphTargetInfluences;if(s&&d){Po.set(0,0,0),Ro.set(0,0,0),Lo.set(0,0,0);for(let e=0,t=s.length;e<t;e++){const t=d[e],n=s[e];0!==t&&(To.fromBufferAttribute(n,c),Ao.fromBufferAttribute(n,h),Co.fromBufferAttribute(n,u),a?(Po.addScaledVector(To,t),Ro.addScaledVector(Ao,t),Lo.addScaledVector(Co,t)):(Po.addScaledVector(To.sub(So),t),Ro.addScaledVector(Ao.sub(Mo),t),Lo.addScaledVector(Co.sub(Eo),t)))}So.add(Po),Mo.add(Ro),Eo.add(Lo)}e.isSkinnedMesh&&(e.boneTransform(c,So),e.boneTransform(h,Mo),e.boneTransform(u,Eo));const p=function(e,t,n,r,i,s,a,o){let l;if(l=1===t.side?r.intersectTriangle(a,s,i,!0,o):r.intersectTriangle(i,s,a,2!==t.side,o),null===l)return null;Io.copy(o),Io.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(Io);return c<n.near||c>n.far?null:{distance:c,point:Io.clone(),object:e}}(e,t,n,r,So,Mo,Eo,ko);if(p){o&&(Oo.fromBufferAttribute(o,c),zo.fromBufferAttribute(o,h),Do.fromBufferAttribute(o,u),p.uv=to.getUV(ko,So,Mo,Eo,Oo,zo,Do,new gs)),l&&(Oo.fromBufferAttribute(l,c),zo.fromBufferAttribute(l,h),Do.fromBufferAttribute(l,u),p.uv2=to.getUV(ko,So,Mo,Eo,Oo,zo,Do,new gs));const e={a:c,b:h,c:u,normal:new Gs,materialIndex:0};to.getNormal(So,Mo,Eo,e.normal),p.face=e}return p}class Uo extends xo{constructor(e=1,t=1,n=1,r=1,i=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:s};const a=this;r=Math.floor(r),i=Math.floor(i),s=Math.floor(s);const o=[],l=[],c=[],h=[];let u=0,d=0;function p(e,t,n,r,i,s,p,f,m,g,v){const _=s/m,x=p/g,y=s/2,b=p/2,w=f/2,S=m+1,M=g+1;let E=0,T=0;const A=new Gs;for(let a=0;a<M;a++){const s=a*x-b;for(let o=0;o<S;o++){const u=o*_-y;A[e]=u*r,A[t]=s*i,A[n]=w,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=f>0?1:-1,c.push(A.x,A.y,A.z),h.push(o/m),h.push(1-a/g),E+=1}}for(let a=0;a<g;a++)for(let e=0;e<m;e++){const t=u+e+S*a,n=u+e+S*(a+1),r=u+(e+1)+S*(a+1),i=u+(e+1)+S*a;o.push(t,n,i),o.push(n,r,i),T+=6}a.addGroup(d,T,v),d+=T,u+=E}p("z","y","x",-1,-1,n,t,e,s,i,0),p("z","y","x",1,-1,n,t,-e,s,i,1),p("x","z","y",1,1,e,n,t,r,s,2),p("x","z","y",1,-1,e,n,-t,r,s,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(o),this.setAttribute("position",new ho(l,3)),this.setAttribute("normal",new ho(c,3)),this.setAttribute("uv",new ho(h,2))}static fromJSON(e){return new Uo(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Bo(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function Ho(e){const t={};for(let n=0;n<e.length;n++){const r=Bo(e[n]);for(const e in r)t[e]=r[e]}return t}const Go={clone:Bo,merge:Ho};class jo extends ro{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Bo(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Vo extends Va{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new xa,this.projectionMatrix=new xa,this.projectionMatrixInverse=new xa}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Wo extends Vo{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*ss*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*is*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*ss*Math.atan(Math.tan(.5*is*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*is*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const s=this.view;if(null!==this.view&&this.view.enabled){const e=s.fullWidth,a=s.fullHeight;i+=s.offsetX*r/e,t-=s.offsetY*n/a,r*=s.width/e,n*=s.height/a}const a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class Xo extends Va{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new Wo(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Gs(1,0,0)),this.add(r);const i=new Wo(90,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Gs(-1,0,0)),this.add(i);const s=new Wo(90,1,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new Gs(0,1,0)),this.add(s);const a=new Wo(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new Gs(0,-1,0)),this.add(a);const o=new Wo(90,1,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new Gs(0,0,1)),this.add(o);const l=new Wo(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Gs(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,s,a,o,l]=this.children,c=e.getRenderTarget(),h=e.toneMapping,u=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,o),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=h,e.xr.enabled=u,n.texture.needsPMREMUpdate=!0}}class qo extends Is{constructor(e,t,n,r,i,s,a,o,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:301,n,r,i,s,a,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Yo extends Fs{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new qo(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:1006}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new Uo(5,5,5),i=new jo({name:"CubemapFromEquirect",uniforms:Bo(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});i.uniforms.tEquirect.value=t;const s=new No(r,i),a=t.minFilter;1008===t.minFilter&&(t.minFilter=1006);return new Xo(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,n,r);e.setRenderTarget(i)}}const Zo=new Gs,Ko=new Gs,Jo=new vs;class Qo{constructor(e=new Gs(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Zo.subVectors(n,t).cross(Ko.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(Zo),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Jo.getNormalMatrix(e),r=this.coplanarPoint(Zo).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const $o=new ha,el=new Gs;class tl{constructor(e=new Qo,t=new Qo,n=new Qo,r=new Qo,i=new Qo,s=new Qo){this.planes=[e,t,n,r,i,s]}set(e,t,n,r,i,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],s=n[2],a=n[3],o=n[4],l=n[5],c=n[6],h=n[7],u=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],_=n[15];return t[0].setComponents(a-r,h-o,f-u,_-m).normalize(),t[1].setComponents(a+r,h+o,f+u,_+m).normalize(),t[2].setComponents(a+i,h+l,f+d,_+g).normalize(),t[3].setComponents(a-i,h-l,f-d,_-g).normalize(),t[4].setComponents(a-s,h-c,f-p,_-v).normalize(),t[5].setComponents(a+s,h+c,f+p,_+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),$o.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere($o)}intersectsSprite(e){return $o.center.set(0,0,0),$o.radius=.7071067811865476,$o.applyMatrix4(e.matrixWorld),this.intersectsSphere($o)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(el.x=r.normal.x>0?e.max.x:e.min.x,el.y=r.normal.y>0?e.max.y:e.min.y,el.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(el)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function nl(){let e=null,t=!1,n=null,r=null;function i(t,s){n(t,s),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function rl(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const s=r.get(t);void 0===s?r.set(t,function(t,r){const i=t.array,s=t.usage,a=e.createBuffer();let o;if(e.bindBuffer(r,a),e.bufferData(r,i,s),t.onUploadCallback(),i instanceof Float32Array)o=5126;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");o=5131}else o=5123;else if(i instanceof Int16Array)o=5122;else if(i instanceof Uint32Array)o=5125;else if(i instanceof Int32Array)o=5124;else if(i instanceof Int8Array)o=5120;else if(i instanceof Uint8Array)o=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);o=5121}return{buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):s.version<t.version&&(!function(t,r,i){const s=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,s):(n?e.bufferSubData(i,a.offset*s.BYTES_PER_ELEMENT,s,a.offset,a.count):e.bufferSubData(i,a.offset*s.BYTES_PER_ELEMENT,s.subarray(a.offset,a.offset+a.count)),a.count=-1)}(s.buffer,t,i),s.version=t.version)}}}class il extends xo{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,s=t/2,a=Math.floor(n),o=Math.floor(r),l=a+1,c=o+1,h=e/a,u=t/o,d=[],p=[],f=[],m=[];for(let g=0;g<c;g++){const e=g*u-s;for(let t=0;t<l;t++){const n=t*h-i;p.push(n,-e,0),f.push(0,0,1),m.push(t/a),m.push(1-g/o)}}for(let g=0;g<o;g++)for(let e=0;e<a;e++){const t=e+l*g,n=e+l*(g+1),r=e+1+l*(g+1),i=e+1+l*g;d.push(t,n,i),d.push(n,r,i)}this.setIndex(d),this.setAttribute("position",new ho(p,3)),this.setAttribute("normal",new ho(f,3)),this.setAttribute("uv",new ho(m,2))}static fromJSON(e){return new il(e.width,e.height,e.widthSegments,e.heightSegments)}}const sl={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},al={common:{diffuse:{value:new Rs(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new vs},uv2Transform:{value:new vs},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new gs(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Rs(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Rs(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new vs}},sprite:{diffuse:{value:new Rs(16777215)},opacity:{value:1},center:{value:new gs(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new vs}}},ol={basic:{uniforms:Ho([al.common,al.specularmap,al.envmap,al.aomap,al.lightmap,al.fog]),vertexShader:sl.meshbasic_vert,fragmentShader:sl.meshbasic_frag},lambert:{uniforms:Ho([al.common,al.specularmap,al.envmap,al.aomap,al.lightmap,al.emissivemap,al.bumpmap,al.normalmap,al.displacementmap,al.fog,al.lights,{emissive:{value:new Rs(0)}}]),vertexShader:sl.meshlambert_vert,fragmentShader:sl.meshlambert_frag},phong:{uniforms:Ho([al.common,al.specularmap,al.envmap,al.aomap,al.lightmap,al.emissivemap,al.bumpmap,al.normalmap,al.displacementmap,al.fog,al.lights,{emissive:{value:new Rs(0)},specular:{value:new Rs(1118481)},shininess:{value:30}}]),vertexShader:sl.meshphong_vert,fragmentShader:sl.meshphong_frag},standard:{uniforms:Ho([al.common,al.envmap,al.aomap,al.lightmap,al.emissivemap,al.bumpmap,al.normalmap,al.displacementmap,al.roughnessmap,al.metalnessmap,al.fog,al.lights,{emissive:{value:new Rs(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:sl.meshphysical_vert,fragmentShader:sl.meshphysical_frag},toon:{uniforms:Ho([al.common,al.aomap,al.lightmap,al.emissivemap,al.bumpmap,al.normalmap,al.displacementmap,al.gradientmap,al.fog,al.lights,{emissive:{value:new Rs(0)}}]),vertexShader:sl.meshtoon_vert,fragmentShader:sl.meshtoon_frag},matcap:{uniforms:Ho([al.common,al.bumpmap,al.normalmap,al.displacementmap,al.fog,{matcap:{value:null}}]),vertexShader:sl.meshmatcap_vert,fragmentShader:sl.meshmatcap_frag},points:{uniforms:Ho([al.points,al.fog]),vertexShader:sl.points_vert,fragmentShader:sl.points_frag},dashed:{uniforms:Ho([al.common,al.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:sl.linedashed_vert,fragmentShader:sl.linedashed_frag},depth:{uniforms:Ho([al.common,al.displacementmap]),vertexShader:sl.depth_vert,fragmentShader:sl.depth_frag},normal:{uniforms:Ho([al.common,al.bumpmap,al.normalmap,al.displacementmap,{opacity:{value:1}}]),vertexShader:sl.meshnormal_vert,fragmentShader:sl.meshnormal_frag},sprite:{uniforms:Ho([al.sprite,al.fog]),vertexShader:sl.sprite_vert,fragmentShader:sl.sprite_frag},background:{uniforms:{uvTransform:{value:new vs},t2D:{value:null}},vertexShader:sl.background_vert,fragmentShader:sl.background_frag},cube:{uniforms:Ho([al.envmap,{opacity:{value:1}}]),vertexShader:sl.cube_vert,fragmentShader:sl.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:sl.equirect_vert,fragmentShader:sl.equirect_frag},distanceRGBA:{uniforms:Ho([al.common,al.displacementmap,{referencePosition:{value:new Gs},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:sl.distanceRGBA_vert,fragmentShader:sl.distanceRGBA_frag},shadow:{uniforms:Ho([al.lights,al.fog,{color:{value:new Rs(0)},opacity:{value:1}}]),vertexShader:sl.shadow_vert,fragmentShader:sl.shadow_frag}};function ll(e,t,n,r,i,s){const a=new Rs(0);let o,l,c=!0===i?0:1,h=null,u=0,d=null;function p(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,s)}return{getClearColor:function(){return a},setClearColor:function(e,t=1){a.set(e),c=t,p(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(e){c=e,p(a,c)},render:function(n,i){let s=!1,f=!0===i.isScene?i.background:null;f&&f.isTexture&&(f=t.get(f));const m=e.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(f=null),null===f?p(a,c):f&&f.isColor&&(p(f,1),s=!0),(e.autoClear||s)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&(f.isCubeTexture||306===f.mapping)?(void 0===l&&(l=new No(new Uo(1,1,1),new jo({name:"BackgroundCubeMaterial",uniforms:Bo(ol.cube.uniforms),vertexShader:ol.cube.vertexShader,fragmentShader:ol.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),l.material.uniforms.envMap.value=f,l.material.uniforms.flipEnvMap.value=f.isCubeTexture&&!1===f.isRenderTargetTexture?-1:1,h===f&&u===f.version&&d===e.toneMapping||(l.material.needsUpdate=!0,h=f,u=f.version,d=e.toneMapping),l.layers.enableAll(),n.unshift(l,l.geometry,l.material,0,0,null)):f&&f.isTexture&&(void 0===o&&(o=new No(new il(2,2),new jo({name:"BackgroundMaterial",uniforms:Bo(ol.background.uniforms),vertexShader:ol.background.vertexShader,fragmentShader:ol.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(o)),o.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),o.material.uniforms.uvTransform.value.copy(f.matrix),h===f&&u===f.version&&d===e.toneMapping||(o.material.needsUpdate=!0,h=f,u=f.version,d=e.toneMapping),o.layers.enableAll(),n.unshift(o,o.geometry,o.material,0,0,null))}}}function cl(e,t,n,r){const i=e.getParameter(34921),s=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==s,o={},l=p(null);let c=l,h=!1;function u(t){return r.isWebGL2?e.bindVertexArray(t):s.bindVertexArrayOES(t)}function d(t){return r.isWebGL2?e.deleteVertexArray(t):s.deleteVertexArrayOES(t)}function p(e){const t=[],n=[],r=[];for(let s=0;s<i;s++)t[s]=0,n[s]=0,r[s]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function f(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,i){const s=c.newAttributes,a=c.enabledAttributes,o=c.attributeDivisors;if(s[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),o[n]!==i){(r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),o[n]=i}}function v(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function _(t,n,i,s,a,o){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,s,a,o):e.vertexAttribIPointer(t,n,i,a,o)}function x(){y(),h=!0,c!==l&&(c=l,u(c.object))}function y(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,d,x,y){let b=!1;if(a){const t=function(t,n,i){const a=!0===i.wireframe;let l=o[t.id];void 0===l&&(l={},o[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let h=c[a];void 0===h&&(h=p(r.isWebGL2?e.createVertexArray():s.createVertexArrayOES()),c[a]=h);return h}(x,d,l);c!==t&&(c=t,u(c.object)),b=function(e,t,n,r){const i=c.attributes,s=t.attributes;let a=0;const o=n.getAttributes();for(const l in o){if(o[l].location>=0){const t=i[l];let n=s[l];if(void 0===n&&("instanceMatrix"===l&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;a++}}return c.attributesNum!==a||c.index!==r}(i,x,d,y),b&&function(e,t,n,r){const i={},s=t.attributes;let a=0;const o=n.getAttributes();for(const l in o){if(o[l].location>=0){let t=s[l];void 0===t&&("instanceMatrix"===l&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),i[l]=n,a++}}c.attributes=i,c.attributesNum=a,c.index=r}(i,x,d,y)}else{const e=!0===l.wireframe;c.geometry===x.id&&c.program===d.id&&c.wireframe===e||(c.geometry=x.id,c.program=d.id,c.wireframe=e,b=!0)}null!==y&&n.update(y,34963),(b||h)&&(h=!1,function(i,s,a,o){if(!1===r.isWebGL2&&(i.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const l=o.attributes,c=a.getAttributes(),h=s.defaultAttributeValues;for(const t in c){const r=c[t];if(r.location>=0){let s=l[t];if(void 0===s&&("instanceMatrix"===t&&i.instanceMatrix&&(s=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(s=i.instanceColor)),void 0!==s){const t=s.normalized,a=s.itemSize,l=n.get(s);if(void 0===l)continue;const c=l.buffer,h=l.type,u=l.bytesPerElement;if(s.isInterleavedBufferAttribute){const n=s.data,l=n.stride,d=s.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)g(r.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)_(r.location+e,a/r.locationSize,h,t,l*u,(d+a/r.locationSize*e)*u)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)g(r.location+e,s.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)_(r.location+e,a/r.locationSize,h,t,a*u,a/r.locationSize*e*u)}}else if(void 0!==h){const n=h[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r.location,n);break;case 3:e.vertexAttrib3fv(r.location,n);break;case 4:e.vertexAttrib4fv(r.location,n);break;default:e.vertexAttrib1fv(r.location,n)}}}}v()}(i,l,d,x),null!==y&&e.bindBuffer(34963,n.get(y).buffer))},reset:x,resetDefaultState:y,dispose:function(){x();for(const e in o){const t=o[e];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;const t=o[e.id];for(const n in t){const e=t[n];for(const t in e)d(e[t].object),delete e[t];delete t[n]}delete o[e.id]},releaseStatesOfProgram:function(e){for(const t in o){const n=o[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)d(r[e].object),delete r[e];delete n[e.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:v}}function hl(e,t,n,r){const i=r.isWebGL2;let s;this.setMode=function(e){s=e},this.render=function(t,r){e.drawArrays(s,t,r),n.update(r,s,1)},this.renderInstances=function(r,a,o){if(0===o)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return;l[c](s,r,a,o),n.update(a,s,o)}}function ul(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const o=i(a);o!==a&&(a=o);const l=s||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,h=e.getParameter(34930),u=e.getParameter(35660),d=e.getParameter(3379),p=e.getParameter(34076),f=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),_=u>0,x=s||t.has("OES_texture_float");return{isWebGL2:s,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:u,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:_,floatFragmentTextures:x,floatVertexTextures:_&&x,maxSamples:s?e.getParameter(36183):0}}function dl(e){const t=this;let n=null,r=0,i=!1,s=!1;const a=new Qo,o=new vs,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function h(e,n,r,i){const s=null!==e?e.length:0;let c=null;if(0!==s){if(c=l.value,!0!==i||null===c){const t=r+4*s,i=n.matrixWorldInverse;o.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=r;n!==s;++n,l+=4)a.copy(e[n]).applyMatrix4(i,o),a.normal.toArray(c,l),c[l+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=s,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,s){const a=0!==e.length||t||0!==r||i;return i=t,n=h(e,s,0),r=e.length,a},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1,c()},this.setState=function(t,a,o){const u=t.clippingPlanes,d=t.clipIntersection,p=t.clipShadows,f=e.get(t);if(!i||null===u||0===u.length||s&&!p)s?h(null):c();else{const e=s?0:r,t=4*e;let i=f.clippingState||null;l.value=i,i=h(u,a,t,o);for(let r=0;r!==t;++r)i[r]=n[r];f.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function pl(e){let t=new WeakMap;function n(e,t){return 303===t?e.mapping=301:304===t&&(e.mapping=302),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const s=i.mapping;if(303===s||304===s){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{const s=i.image;if(s&&s.height>0){const a=new Yo(s.height/2);return a.fromEquirectangularTexture(e,i),t.set(i,a),i.addEventListener("dispose",r),n(a.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}ol.physical={uniforms:Ho([ol.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new gs(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Rs(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new gs},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Rs(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Rs(1,1,1)},specularColorMap:{value:null}}]),vertexShader:sl.meshphysical_vert,fragmentShader:sl.meshphysical_frag};class fl extends Vo{constructor(e=-1,t=1,n=1,r=-1,i=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,s=n+e,a=r+t,o=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,s=i+e*this.view.width,a-=t*this.view.offsetY,o=a-t*this.view.height}this.projectionMatrix.makeOrthographic(i,s,a,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const ml=[.125,.215,.35,.446,.526,.582],gl=new fl,vl=new Rs;let _l=null;const xl=(1+Math.sqrt(5))/2,yl=1/xl,bl=[new Gs(1,1,1),new Gs(-1,1,1),new Gs(1,1,-1),new Gs(-1,1,-1),new Gs(0,xl,yl),new Gs(0,xl,-yl),new Gs(yl,0,xl),new Gs(-yl,0,xl),new Gs(xl,yl,0),new Gs(-xl,yl,0)];class wl{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){_l=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Tl(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=El(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(_l),e.scissorTest=!1,Ml(e,0,0,e.width,e.height)}_fromTexture(e,t){301===e.mapping||302===e.mapping?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),_l=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:1006,minFilter:1006,generateMipmaps:!1,type:1016,format:1023,encoding:3e3,depthBuffer:!1},r=Sl(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Sl(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const s=e-4+1+ml.length;for(let a=0;a<s;a++){const s=Math.pow(2,i);n.push(s);let o=1/s;a>e-4?o=ml[a-e+4-1]:0===a&&(o=0),r.push(o);const l=1/(s-2),c=-l,h=1+l,u=[c,c,h,c,h,h,c,c,h,h,c,h],d=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*d),_=new Float32Array(m*p*d),x=new Float32Array(g*p*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,f*p*e),_.set(u,m*p*e);const i=[e,e,e,e,e,e];x.set(i,g*p*e)}const y=new xo;y.setAttribute("position",new oo(v,f)),y.setAttribute("uv",new oo(_,m)),y.setAttribute("faceIndex",new oo(x,g)),t.push(y),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(20),i=new Gs(0,1,0);return new jo({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Al(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(r,e,t)}return r}_compileMaterial(e){const t=new No(this._lodPlanes[0],e);this._renderer.compile(t,gl)}_sceneToCubeUV(e,t,n,r){const i=new Wo(90,1,t,n),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(vl),o.toneMapping=0,o.autoClear=!1;const h=new io({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),u=new No(new Uo,h);let d=!1;const p=e.background;p?p.isColor&&(h.color.copy(p),e.background=null,d=!0):(h.color.copy(vl),d=!0);for(let f=0;f<6;f++){const t=f%3;0===t?(i.up.set(0,s[f],0),i.lookAt(a[f],0,0)):1===t?(i.up.set(0,0,s[f]),i.lookAt(0,a[f],0)):(i.up.set(0,s[f],0),i.lookAt(0,0,a[f]));const n=this._cubeSize;Ml(r,t*n,f>2?n:0,n,n),o.setRenderTarget(r),d&&o.render(u,i),o.render(e,i)}u.geometry.dispose(),u.material.dispose(),o.toneMapping=c,o.autoClear=l,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Tl()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=El());const i=r?this._cubemapMaterial:this._equirectMaterial,s=new No(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const a=this._cubeSize;Ml(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(s,gl)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const t=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=bl[(r-1)%bl.length];this._blur(e,r-1,r,t,n)}t.autoClear=n}_blur(e,t,n,r,i){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,r,"latitudinal",i),this._halfBlur(s,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,s,a){const o=this._renderer,l=this._blurMaterial,c=new No(this._lodPlanes[r],l),h=l.uniforms,u=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*u):2*Math.PI/39,p=i/d,f=isFinite(i)?1+Math.floor(3*p):20,m=[];let g=0;for(let x=0;x<20;++x){const e=x/p,t=Math.exp(-e*e/2);m.push(t),0===x?g+=t:x<f&&(g+=2*t)}for(let x=0;x<m.length;x++)m[x]=m[x]/g;h.envMap.value=e.texture,h.samples.value=f,h.weights.value=m,h.latitudinal.value="latitudinal"===s,a&&(h.poleAxis.value=a);const{_lodMax:v}=this;h.dTheta.value=d,h.mipInt.value=v-n;const _=this._sizeLods[r];Ml(t,3*_*(r>v-4?r-v+4:0),4*(this._cubeSize-_),3*_,2*_),o.setRenderTarget(t),o.render(c,gl)}}function Sl(e,t,n){const r=new Fs(e,t,n);return r.texture.mapping=306,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Ml(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function El(){return new jo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Al(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Tl(){return new jo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Al(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Al(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Cl(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const s=i.mapping,a=303===s||304===s,o=301===s||302===s;if(a||o){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new wl(e)),r=a?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{const s=i.image;if(a&&s&&s.height>0||o&&s&&function(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(s)){null===n&&(n=new wl(e));const s=a?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,s),i.addEventListener("dispose",r),s.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Pl(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return t}}}function Rl(e,t,n,r){const i={},s=new WeakMap;function a(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const n in o.attributes)t.remove(o.attributes[n]);o.removeEventListener("dispose",a),delete i[o.id];const l=s.get(o);l&&(t.remove(l),s.delete(o)),r.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){const n=[],r=e.index,i=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],s=e[t+2];n.push(r,i,i,s,s,r)}}else{const e=i.array;a=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const o=new(_s(n)?co:lo)(n,1);o.version=a;const l=s.get(e);l&&t.remove(l),s.set(e,o)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const i in n)t.update(n[i],34962);const r=e.morphAttributes;for(const i in r){const e=r[i];for(let n=0,r=e.length;n<r;n++)t.update(e[n],34962)}},getWireframeAttribute:function(e){const t=s.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return s.get(e)}}}function Ll(e,t,n,r){const i=r.isWebGL2;let s,a,o;this.setMode=function(e){s=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(s,r,a,t*o),n.update(r,s,1)},this.renderInstances=function(r,l,c){if(0===c)return;let h,u;if(i)h=e,u="drawElementsInstanced";else if(h=t.get("ANGLE_instanced_arrays"),u="drawElementsInstancedANGLE",null===h)return;h[u](s,l,a,r*o,c),n.update(l,s,c)}}function Ol(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e}}}}function zl(e,t){return e[0]-t[0]}function Dl(e,t){return Math.abs(t[1])-Math.abs(e[1])}function kl(e,t,n){const r={},i=new Float32Array(8),s=new WeakMap,a=new Ns,o=[];for(let l=0;l<8;l++)o[l]=[l,0];return{update:function(l,c,h,u){const d=l.morphTargetInfluences;if(!0===t.isWebGL2){const r=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,i=void 0!==r?r.length:0;let o=s.get(c);if(void 0===o||o.count!==i){let e=function(){v.dispose(),s.delete(c),c.removeEventListener("dispose",e)};void 0!==o&&o.texture.dispose();const n=void 0!==c.morphAttributes.position,r=void 0!==c.morphAttributes.normal,l=void 0!==c.morphAttributes.color,h=c.morphAttributes.position||[],u=c.morphAttributes.normal||[],d=c.morphAttributes.color||[];let p=0;!0===n&&(p=1),!0===r&&(p=2),!0===l&&(p=3);let f=c.attributes.position.count*p,m=1;f>t.maxTextureSize&&(m=Math.ceil(f/t.maxTextureSize),f=t.maxTextureSize);const g=new Float32Array(f*m*4*i),v=new Us(g,f,m,i);v.type=1015,v.needsUpdate=!0;const _=4*p;for(let t=0;t<i;t++){const e=h[t],i=u[t],s=d[t],o=f*m*4*t;for(let t=0;t<e.count;t++){const c=t*_;!0===n&&(a.fromBufferAttribute(e,t),g[o+c+0]=a.x,g[o+c+1]=a.y,g[o+c+2]=a.z,g[o+c+3]=0),!0===r&&(a.fromBufferAttribute(i,t),g[o+c+4]=a.x,g[o+c+5]=a.y,g[o+c+6]=a.z,g[o+c+7]=0),!0===l&&(a.fromBufferAttribute(s,t),g[o+c+8]=a.x,g[o+c+9]=a.y,g[o+c+10]=a.z,g[o+c+11]=4===s.itemSize?a.w:1)}}o={count:i,texture:v,size:new gs(f,m)},s.set(c,o),c.addEventListener("dispose",e)}let l=0;for(let e=0;e<d.length;e++)l+=d[e];const h=c.morphTargetsRelative?1:1-l;u.getUniforms().setValue(e,"morphTargetBaseInfluence",h),u.getUniforms().setValue(e,"morphTargetInfluences",d),u.getUniforms().setValue(e,"morphTargetsTexture",o.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",o.size)}else{const t=void 0===d?0:d.length;let n=r[c.id];if(void 0===n||n.length!==t){n=[];for(let e=0;e<t;e++)n[e]=[e,0];r[c.id]=n}for(let e=0;e<t;e++){const t=n[e];t[0]=e,t[1]=d[e]}n.sort(Dl);for(let e=0;e<8;e++)e<t&&n[e][1]?(o[e][0]=n[e][0],o[e][1]=n[e][1]):(o[e][0]=Number.MAX_SAFE_INTEGER,o[e][1]=0);o.sort(zl);const s=c.morphAttributes.position,a=c.morphAttributes.normal;let l=0;for(let e=0;e<8;e++){const t=o[e],n=t[0],r=t[1];n!==Number.MAX_SAFE_INTEGER&&r?(s&&c.getAttribute("morphTarget"+e)!==s[n]&&c.setAttribute("morphTarget"+e,s[n]),a&&c.getAttribute("morphNormal"+e)!==a[n]&&c.setAttribute("morphNormal"+e,a[n]),i[e]=r,l+=r):(s&&!0===c.hasAttribute("morphTarget"+e)&&c.deleteAttribute("morphTarget"+e),a&&!0===c.hasAttribute("morphNormal"+e)&&c.deleteAttribute("morphNormal"+e),i[e]=0)}const h=c.morphTargetsRelative?1:1-l;u.getUniforms().setValue(e,"morphTargetBaseInfluence",h),u.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function Il(e,t,n,r){let i=new WeakMap;function s(e){const t=e.target;t.removeEventListener("dispose",s),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const a=r.render.frame,o=e.geometry,l=t.get(e,o);return i.get(l)!==a&&(t.update(l),i.set(l,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",s)&&e.addEventListener("dispose",s),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}const Nl=new Is,Fl=new Us,Ul=new Bs,Bl=new qo,Hl=[],Gl=[],jl=new Float32Array(16),Vl=new Float32Array(9),Wl=new Float32Array(4);function Xl(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let s=Hl[i];if(void 0===s&&(s=new Float32Array(i),Hl[i]=s),0!==t){r.toArray(s,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(s,i)}return s}function ql(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Yl(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function Zl(e,t){let n=Gl[t];void 0===n&&(n=new Int32Array(t),Gl[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Kl(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Jl(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(ql(n,t))return;e.uniform2fv(this.addr,t),Yl(n,t)}}function Ql(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(ql(n,t))return;e.uniform3fv(this.addr,t),Yl(n,t)}}function $l(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(ql(n,t))return;e.uniform4fv(this.addr,t),Yl(n,t)}}function ec(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(ql(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Yl(n,t)}else{if(ql(n,r))return;Wl.set(r),e.uniformMatrix2fv(this.addr,!1,Wl),Yl(n,r)}}function tc(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(ql(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Yl(n,t)}else{if(ql(n,r))return;Vl.set(r),e.uniformMatrix3fv(this.addr,!1,Vl),Yl(n,r)}}function nc(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(ql(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Yl(n,t)}else{if(ql(n,r))return;jl.set(r),e.uniformMatrix4fv(this.addr,!1,jl),Yl(n,r)}}function rc(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function ic(e,t){const n=this.cache;ql(n,t)||(e.uniform2iv(this.addr,t),Yl(n,t))}function sc(e,t){const n=this.cache;ql(n,t)||(e.uniform3iv(this.addr,t),Yl(n,t))}function ac(e,t){const n=this.cache;ql(n,t)||(e.uniform4iv(this.addr,t),Yl(n,t))}function oc(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function lc(e,t){const n=this.cache;ql(n,t)||(e.uniform2uiv(this.addr,t),Yl(n,t))}function cc(e,t){const n=this.cache;ql(n,t)||(e.uniform3uiv(this.addr,t),Yl(n,t))}function hc(e,t){const n=this.cache;ql(n,t)||(e.uniform4uiv(this.addr,t),Yl(n,t))}function uc(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||Nl,i)}function dc(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Ul,i)}function pc(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||Bl,i)}function fc(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Fl,i)}function mc(e,t){e.uniform1fv(this.addr,t)}function gc(e,t){const n=Xl(t,this.size,2);e.uniform2fv(this.addr,n)}function vc(e,t){const n=Xl(t,this.size,3);e.uniform3fv(this.addr,n)}function _c(e,t){const n=Xl(t,this.size,4);e.uniform4fv(this.addr,n)}function xc(e,t){const n=Xl(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function yc(e,t){const n=Xl(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function bc(e,t){const n=Xl(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function wc(e,t){e.uniform1iv(this.addr,t)}function Sc(e,t){e.uniform2iv(this.addr,t)}function Mc(e,t){e.uniform3iv(this.addr,t)}function Ec(e,t){e.uniform4iv(this.addr,t)}function Tc(e,t){e.uniform1uiv(this.addr,t)}function Ac(e,t){e.uniform2uiv(this.addr,t)}function Cc(e,t){e.uniform3uiv(this.addr,t)}function Pc(e,t){e.uniform4uiv(this.addr,t)}function Rc(e,t,n){const r=t.length,i=Zl(n,r);e.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)n.setTexture2D(t[s]||Nl,i[s])}function Lc(e,t,n){const r=t.length,i=Zl(n,r);e.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)n.setTexture3D(t[s]||Ul,i[s])}function Oc(e,t,n){const r=t.length,i=Zl(n,r);e.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)n.setTextureCube(t[s]||Bl,i[s])}function zc(e,t,n){const r=t.length,i=Zl(n,r);e.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)n.setTexture2DArray(t[s]||Fl,i[s])}class Dc{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Kl;case 35664:return Jl;case 35665:return Ql;case 35666:return $l;case 35674:return ec;case 35675:return tc;case 35676:return nc;case 5124:case 35670:return rc;case 35667:case 35671:return ic;case 35668:case 35672:return sc;case 35669:case 35673:return ac;case 5125:return oc;case 36294:return lc;case 36295:return cc;case 36296:return hc;case 35678:case 36198:case 36298:case 36306:case 35682:return uc;case 35679:case 36299:case 36307:return dc;case 35680:case 36300:case 36308:case 36293:return pc;case 36289:case 36303:case 36311:case 36292:return fc}}(t.type)}}class kc{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return mc;case 35664:return gc;case 35665:return vc;case 35666:return _c;case 35674:return xc;case 35675:return yc;case 35676:return bc;case 5124:case 35670:return wc;case 35667:case 35671:return Sc;case 35668:case 35672:return Mc;case 35669:case 35673:return Ec;case 5125:return Tc;case 36294:return Ac;case 36295:return Cc;case 36296:return Pc;case 35678:case 36198:case 36298:case 36306:case 35682:return Rc;case 35679:case 36299:case 36307:return Lc;case 35680:case 36300:case 36308:case 36293:return Oc;case 36289:case 36303:case 36311:case 36292:return zc}}(t.type)}}class Ic{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,s=r.length;i!==s;++i){const s=r[i];s.setValue(e,t[s.id],n)}}}const Nc=/(\w+)(\])?(\[|\.)?/g;function Fc(e,t){e.seq.push(t),e.map[t.id]=t}function Uc(e,t,n){const r=e.name,i=r.length;for(Nc.lastIndex=0;;){const s=Nc.exec(r),a=Nc.lastIndex;let o=s[1];const l="]"===s[2],c=s[3];if(l&&(o|=0),void 0===c||"["===c&&a+2===i){Fc(n,void 0===c?new Dc(o,e,t):new kc(o,e,t));break}{let e=n.map[o];void 0===e&&(e=new Ic(o),Fc(n,e)),n=e}}}class Bc{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);Uc(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,s=t.length;i!==s;++i){const s=t[i],a=n[s.id];!1!==a.needsUpdate&&s.setValue(e,a.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function Hc(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let Gc=0;function jc(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const r=parseInt(s[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),s=Math.min(t+6,n.length);for(let a=i;a<s;a++){const e=a+1;r.push(`${e===t?">":" "} ${e}: ${n[a]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return i}function Vc(e,t){const n=function(e){switch(e){case 3e3:default:return["Linear","( value )"];case 3001:return["sRGB","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Wc(e,t){let n;switch(t){case 1:default:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Xc(e){return""!==e}function qc(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Yc(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Zc=/^[ \t]*#include +<([\w\d./]+)>/gm;function Kc(e){return e.replace(Zc,Jc)}function Jc(e,t){const n=sl[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Kc(n)}const Qc=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function $c(e){return e.replace(Qc,eh)}function eh(e,t,n,r){let i="";for(let s=parseInt(t);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function th(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function nh(e,t,n,r){const i=e.getContext(),s=n.defines;let a=n.vertexShader,o=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),h=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&302===e.envMapMode&&(t="ENVMAP_MODE_REFRACTION");return t}(n),u=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),d=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),p=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Xc).join("\n")}(n),f=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),m=i.createProgram();let g,v,_=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[f].filter(Xc).join("\n"),g.length>0&&(g+="\n"),v=[p,f].filter(Xc).join("\n"),v.length>0&&(v+="\n")):(g=[th(n),"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Xc).join("\n"),v=[p,th(n),"#define SHADER_NAME "+n.shaderName,f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",n.envMap?"#define "+u:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?sl.tonemapping_pars_fragment:"",0!==n.toneMapping?Wc("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",sl.encodings_pars_fragment,Vc("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Xc).join("\n")),a=Kc(a),a=qc(a,n),a=Yc(a,n),o=Kc(o),o=qc(o,n),o=Yc(o,n),a=$c(a),o=$c(o),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(_="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in","300 es"===n.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===n.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const x=_+v+o,y=Hc(i,35633,_+g+a),b=Hc(i,35632,x);if(i.attachShader(m,y),i.attachShader(m,b),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(m).trim(),t=i.getShaderInfoLog(y).trim(),n=i.getShaderInfoLog(b).trim();let r=!0,s=!0;if(!1===i.getProgramParameter(m,35714)){r=!1;jc(i,y,"vertex"),jc(i,b,"fragment")}else""!==e||""!==t&&""!==n||(s=!1);s&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:g},fragmentShader:{log:n,prefix:v}})}let w,S;return i.deleteShader(y),i.deleteShader(b),this.getUniforms=function(){return void 0===w&&(w=new Bc(i,m)),w},this.getAttributes=function(){return void 0===S&&(S=function(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),s=r.name;let a=1;35674===r.type&&(a=2),35675===r.type&&(a=3),35676===r.type&&(a=4),n[s]={type:r.type,location:e.getAttribLocation(t,s),locationSize:a}}return n}(i,m)),S},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=Gc++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=y,this.fragmentShader=b,this}let rh=0;class ih{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return!1===s.has(r)&&(s.add(r),r.usedTimes++),!1===s.has(i)&&(s.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new sh(e),t.set(e,n)),n}}class sh{constructor(e){this.id=rh++,this.code=e,this.usedTimes=0}}function ah(e,t,n,r,i,s,a){const o=new Ra,l=new ih,c=[],h=i.isWebGL2,u=i.logarithmicDepthBuffer,d=i.vertexTextures;let p=i.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(s,o,c,m,g){const v=m.fog,_=g.geometry,x=s.isMeshStandardMaterial?m.environment:null,y=(s.isMeshStandardMaterial?n:t).get(s.envMap||x),b=y&&306===y.mapping?y.image.height:null,w=f[s.type];null!==s.precision&&(p=i.getMaxPrecision(s.precision),s.precision);const S=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,M=void 0!==S?S.length:0;let E,T,A,C,P=0;if(void 0!==_.morphAttributes.position&&(P=1),void 0!==_.morphAttributes.normal&&(P=2),void 0!==_.morphAttributes.color&&(P=3),w){const e=ol[w];E=e.vertexShader,T=e.fragmentShader}else E=s.vertexShader,T=s.fragmentShader,l.update(s),A=l.getVertexShaderID(s),C=l.getFragmentShaderID(s);const R=e.getRenderTarget(),L=s.alphaTest>0,O=s.clearcoat>0,z=s.iridescence>0;return{isWebGL2:h,shaderID:w,shaderName:s.type,vertexShader:E,fragmentShader:T,defines:s.defines,customVertexShaderID:A,customFragmentShaderID:C,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:p,instancing:!0===g.isInstancedMesh,instancingColor:!0===g.isInstancedMesh&&null!==g.instanceColor,supportsVertexTextures:d,outputEncoding:null===R?e.outputEncoding:!0===R.isXRRenderTarget?R.texture.encoding:3e3,map:!!s.map,matcap:!!s.matcap,envMap:!!y,envMapMode:y&&y.mapping,envMapCubeUVHeight:b,lightMap:!!s.lightMap,aoMap:!!s.aoMap,emissiveMap:!!s.emissiveMap,bumpMap:!!s.bumpMap,normalMap:!!s.normalMap,objectSpaceNormalMap:1===s.normalMapType,tangentSpaceNormalMap:0===s.normalMapType,decodeVideoTexture:!!s.map&&!0===s.map.isVideoTexture&&3001===s.map.encoding,clearcoat:O,clearcoatMap:O&&!!s.clearcoatMap,clearcoatRoughnessMap:O&&!!s.clearcoatRoughnessMap,clearcoatNormalMap:O&&!!s.clearcoatNormalMap,iridescence:z,iridescenceMap:z&&!!s.iridescenceMap,iridescenceThicknessMap:z&&!!s.iridescenceThicknessMap,displacementMap:!!s.displacementMap,roughnessMap:!!s.roughnessMap,metalnessMap:!!s.metalnessMap,specularMap:!!s.specularMap,specularIntensityMap:!!s.specularIntensityMap,specularColorMap:!!s.specularColorMap,opaque:!1===s.transparent&&1===s.blending,alphaMap:!!s.alphaMap,alphaTest:L,gradientMap:!!s.gradientMap,sheen:s.sheen>0,sheenColorMap:!!s.sheenColorMap,sheenRoughnessMap:!!s.sheenRoughnessMap,transmission:s.transmission>0,transmissionMap:!!s.transmissionMap,thicknessMap:!!s.thicknessMap,combine:s.combine,vertexTangents:!!s.normalMap&&!!_.attributes.tangent,vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!_.attributes.color&&4===_.attributes.color.itemSize,vertexUvs:!!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatMap||s.clearcoatRoughnessMap||s.clearcoatNormalMap||s.iridescenceMap||s.iridescenceThicknessMap||s.displacementMap||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularColorMap||s.sheenColorMap||s.sheenRoughnessMap),uvsVertexOnly:!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatNormalMap||s.iridescenceMap||s.iridescenceThicknessMap||s.transmission>0||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularColorMap||s.sheen>0||s.sheenColorMap||s.sheenRoughnessMap||!s.displacementMap),fog:!!v,useFog:!0===s.fog,fogExp2:v&&v.isFogExp2,flatShading:!!s.flatShading,sizeAttenuation:s.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===g.isSkinnedMesh,morphTargets:void 0!==_.morphAttributes.position,morphNormals:void 0!==_.morphAttributes.normal,morphColors:void 0!==_.morphAttributes.color,morphTargetsCount:M,morphTextureStride:P,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:s.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:s.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:s.premultipliedAlpha,doubleSided:2===s.side,flipSided:1===s.side,useDepthPacking:!!s.depthPacking,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionDerivatives:s.extensions&&s.extensions.derivatives,extensionFragDepth:s.extensions&&s.extensions.fragDepth,extensionDrawBuffers:s.extensions&&s.extensions.drawBuffers,extensionShaderTextureLOD:s.extensions&&s.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||r.has("EXT_shader_texture_lod"),customProgramCacheKey:s.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){o.disableAll(),t.isWebGL2&&o.enable(0);t.supportsVertexTextures&&o.enable(1);t.instancing&&o.enable(2);t.instancingColor&&o.enable(3);t.map&&o.enable(4);t.matcap&&o.enable(5);t.envMap&&o.enable(6);t.lightMap&&o.enable(7);t.aoMap&&o.enable(8);t.emissiveMap&&o.enable(9);t.bumpMap&&o.enable(10);t.normalMap&&o.enable(11);t.objectSpaceNormalMap&&o.enable(12);t.tangentSpaceNormalMap&&o.enable(13);t.clearcoat&&o.enable(14);t.clearcoatMap&&o.enable(15);t.clearcoatRoughnessMap&&o.enable(16);t.clearcoatNormalMap&&o.enable(17);t.iridescence&&o.enable(18);t.iridescenceMap&&o.enable(19);t.iridescenceThicknessMap&&o.enable(20);t.displacementMap&&o.enable(21);t.specularMap&&o.enable(22);t.roughnessMap&&o.enable(23);t.metalnessMap&&o.enable(24);t.gradientMap&&o.enable(25);t.alphaMap&&o.enable(26);t.alphaTest&&o.enable(27);t.vertexColors&&o.enable(28);t.vertexAlphas&&o.enable(29);t.vertexUvs&&o.enable(30);t.vertexTangents&&o.enable(31);t.uvsVertexOnly&&o.enable(32);e.push(o.mask),o.disableAll(),t.fog&&o.enable(0);t.useFog&&o.enable(1);t.flatShading&&o.enable(2);t.logarithmicDepthBuffer&&o.enable(3);t.skinning&&o.enable(4);t.morphTargets&&o.enable(5);t.morphNormals&&o.enable(6);t.morphColors&&o.enable(7);t.premultipliedAlpha&&o.enable(8);t.shadowMapEnabled&&o.enable(9);t.physicallyCorrectLights&&o.enable(10);t.doubleSided&&o.enable(11);t.flipSided&&o.enable(12);t.useDepthPacking&&o.enable(13);t.dithering&&o.enable(14);t.specularIntensityMap&&o.enable(15);t.specularColorMap&&o.enable(16);t.transmission&&o.enable(17);t.transmissionMap&&o.enable(18);t.thicknessMap&&o.enable(19);t.sheen&&o.enable(20);t.sheenColorMap&&o.enable(21);t.sheenRoughnessMap&&o.enable(22);t.decodeVideoTexture&&o.enable(23);t.opaque&&o.enable(24);e.push(o.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=ol[t];n=Go.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,i=c.length;e<i;e++){const t=c[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new nh(e,n,t,s),c.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function oh(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function lh(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function ch(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function hh(){const e=[];let t=0;const n=[],r=[],i=[];function s(n,r,i,s,a,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:s,renderOrder:n.renderOrder,z:a,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=s,l.renderOrder=n.renderOrder,l.z=a,l.group=o),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,a,o,l,c){const h=s(e,t,a,o,l,c);a.transmission>0?r.push(h):!0===a.transparent?i.push(h):n.push(h)},unshift:function(e,t,a,o,l,c){const h=s(e,t,a,o,l,c);a.transmission>0?r.unshift(h):!0===a.transparent?i.unshift(h):n.unshift(h)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||lh),r.length>1&&r.sort(t||ch),i.length>1&&i.sort(t||ch)}}}function uh(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let i;return void 0===r?(i=new hh,e.set(t,[i])):n>=r.length?(i=new hh,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function dh(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Gs,color:new Rs};break;case"SpotLight":n={position:new Gs,direction:new Gs,color:new Rs,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Gs,color:new Rs,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Gs,skyColor:new Rs,groundColor:new Rs};break;case"RectAreaLight":n={color:new Rs,position:new Gs,halfWidth:new Gs,halfHeight:new Gs}}return e[t.id]=n,n}}}let ph=0;function fh(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function mh(e,t){const n=new dh,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gs};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gs,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let l=0;l<9;l++)i.probe.push(new Gs);const s=new Gs,a=new xa,o=new xa;return{setup:function(s,a){let o=0,l=0,c=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let h=0,u=0,d=0,p=0,f=0,m=0,g=0,v=0,_=0,x=0;s.sort(fh);const y=!0!==a?Math.PI:1;for(let e=0,t=s.length;e<t;e++){const t=s[e],a=t.color,b=t.intensity,w=t.distance,S=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=a.r*b*y,l+=a.g*b*y,c+=a.b*b*y;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],b);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[h]=n,i.directionalShadowMap[h]=S,i.directionalShadowMatrix[h]=t.shadow.matrix,m++}i.directional[h]=e,h++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(a).multiplyScalar(b*y),e.distance=w,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,i.spot[d]=e;const s=t.shadow;if(t.map&&(i.spotLightMap[_]=t.map,_++,s.updateMatrices(t),t.castShadow&&x++),i.spotLightMatrix[d]=s.matrix,t.castShadow){const e=r.get(t);e.shadowBias=s.bias,e.shadowNormalBias=s.normalBias,e.shadowRadius=s.radius,e.shadowMapSize=s.mapSize,i.spotShadow[d]=e,i.spotShadowMap[d]=S,v++}d++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(a).multiplyScalar(b),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[u]=n,i.pointShadowMap[u]=S,i.pointShadowMatrix[u]=t.shadow.matrix,g++}i.point[u]=e,u++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(b*y),e.groundColor.copy(t.groundColor).multiplyScalar(b*y),i.hemi[f]=e,f++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=al.LTC_FLOAT_1,i.rectAreaLTC2=al.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")&&(i.rectAreaLTC1=al.LTC_HALF_1,i.rectAreaLTC2=al.LTC_HALF_2)),i.ambient[0]=o,i.ambient[1]=l,i.ambient[2]=c;const b=i.hash;b.directionalLength===h&&b.pointLength===u&&b.spotLength===d&&b.rectAreaLength===p&&b.hemiLength===f&&b.numDirectionalShadows===m&&b.numPointShadows===g&&b.numSpotShadows===v&&b.numSpotMaps===_||(i.directional.length=h,i.spot.length=d,i.rectArea.length=p,i.point.length=u,i.hemi.length=f,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=v+_-x,i.spotLightMap.length=_,i.numSpotLightShadowsWithMaps=x,b.directionalLength=h,b.pointLength=u,b.spotLength=d,b.rectAreaLength=p,b.hemiLength=f,b.numDirectionalShadows=m,b.numPointShadows=g,b.numSpotShadows=v,b.numSpotMaps=_,i.version=ph++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,h=0;const u=t.matrixWorldInverse;for(let d=0,p=e.length;d<p;d++){const t=e[d];if(t.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),s.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(u),n++}else if(t.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(u),e.direction.setFromMatrixPosition(t.matrixWorld),s.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(u),l++}else if(t.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(u),o.identity(),a.copy(t.matrixWorld),a.premultiply(u),o.extractRotation(a),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(t.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(u),r++}else if(t.isHemisphereLight){const e=i.hemi[h];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(u),h++}}},state:i}}function gh(e,t){const n=new mh(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function vh(e,t){let n=new WeakMap;return{get:function(r,i=0){const s=n.get(r);let a;return void 0===s?(a=new gh(e,t),n.set(r,[a])):i>=s.length?(a=new gh(e,t),s.push(a)):a=s[i],a},dispose:function(){n=new WeakMap}}}class _h extends ro{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class xh extends ro{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Gs,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function yh(e,t,n){let r=new tl;const i=new gs,s=new gs,a=new Ns,o=new _h({depthPacking:3201}),l=new xh,c={},h=n.maxTextureSize,u={0:1,1:0,2:2},d=new jo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new gs},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const f=new xo;f.setAttribute("position",new oo(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new No(f,d),g=this;function v(n,r){const s=t.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Fs(i.x,i.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,s,d,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,s,p,m,null)}function _(t,n,r,i,s,a){let h=null;const d=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(h=void 0!==d?d:!0===r.isPointLight?l:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){const e=h.uuid,t=n.uuid;let r=c[e];void 0===r&&(r={},c[e]=r);let i=r[t];void 0===i&&(i=h.clone(),r[t]=i),h=i}return h.visible=n.visible,h.wireframe=n.wireframe,h.side=3===a?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:u[n.side],h.alphaMap=n.alphaMap,h.alphaTest=n.alphaTest,h.clipShadows=n.clipShadows,h.clippingPlanes=n.clippingPlanes,h.clipIntersection=n.clipIntersection,h.displacementMap=n.displacementMap,h.displacementScale=n.displacementScale,h.displacementBias=n.displacementBias,h.wireframeLinewidth=n.wireframeLinewidth,h.linewidth=n.linewidth,!0===r.isPointLight&&!0===h.isMeshDistanceMaterial&&(h.referencePosition.setFromMatrixPosition(r.matrixWorld),h.nearDistance=i,h.farDistance=s),h}function x(n,i,s,a,o){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===o)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],h=i[c.materialIndex];if(h&&h.visible){const t=_(n,h,a,s.near,s.far,o);e.renderBufferDirect(s,null,r,t,n,c)}}}else if(i.visible){const t=_(n,i,a,s.near,s.far,o);e.renderBufferDirect(s,null,r,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)x(l[e],i,s,a,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,o){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),d=e.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let p=0,f=t.length;p<f;p++){const l=t[p],c=l.shadow;if(void 0===c)continue;if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;i.copy(c.mapSize);const u=c.getFrameExtents();if(i.multiply(u),s.copy(c.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(s.x=Math.floor(h/u.x),i.x=s.x*u.x,c.mapSize.x=s.x),i.y>h&&(s.y=Math.floor(h/u.y),i.y=s.y*u.y,c.mapSize.y=s.y)),null===c.map){const e=3!==this.type?{minFilter:1003,magFilter:1003}:{};c.map=new Fs(i.x,i.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const f=c.getViewportCount();for(let e=0;e<f;e++){const t=c.getViewport(e);a.set(s.x*t.x,s.y*t.y,s.x*t.z,s.y*t.w),d.viewport(a),c.updateMatrices(l,e),r=c.getFrustum(),x(n,o,c.camera,l,this.type)}!0!==c.isPointLightShadow&&3===this.type&&v(c,o),c.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(l,c,u)}}function bh(e,t,n){const r=n.isWebGL2;const i=new function(){let t=!1;const n=new Ns;let r=null;const i=new Ns(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,s,a,o){!0===o&&(t*=a,r*=a,s*=a),n.set(t,r,s,a),!1===i.equals(n)&&(e.clearColor(t,r,s,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?B(2929):H(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:default:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},a=new function(){let t=!1,n=null,r=null,i=null,s=null,a=null,o=null,l=null,c=null;return{setTest:function(e){t||(e?B(2960):H(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&s===a||(e.stencilFunc(t,n,a),r=t,i=n,s=a)},setOp:function(t,n,r){a===t&&o===n&&l===r||(e.stencilOp(t,n,r),a=t,o=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,s=null,a=null,o=null,l=null,c=null}}},o=new WeakMap,l=new WeakMap;let c={},h={},u=new WeakMap,d=[],p=null,f=!1,m=null,g=null,v=null,_=null,x=null,y=null,b=null,w=!1,S=null,M=null,E=null,T=null,A=null;const C=e.getParameter(35661);let P=!1,R=0;const L=e.getParameter(7938);-1!==L.indexOf("WebGL")?(R=parseFloat(/^WebGL (\d)/.exec(L)[1]),P=R>=1):-1!==L.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),P=R>=2);let O=null,z={};const D=e.getParameter(3088),k=e.getParameter(2978),I=(new Ns).fromArray(D),N=(new Ns).fromArray(k);function F(t,n,r){const i=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let a=0;a<r;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return s}const U={};function B(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function H(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}U[3553]=F(3553,3553,1),U[34067]=F(34067,34069,6),i.setClear(0,0,0,1),s.setClear(1),a.setClear(0),B(2929),s.setFunc(3),W(!1),X(1),B(2884),V(0);const G={100:32774,101:32778,102:32779};if(r)G[103]=32775,G[104]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(G[103]=e.MIN_EXT,G[104]=e.MAX_EXT)}const j={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function V(t,n,r,i,s,a,o,l){if(0!==t){if(!1===f&&(B(3042),f=!0),5===t)s=s||n,a=a||r,o=o||i,n===g&&s===x||(e.blendEquationSeparate(G[n],G[s]),g=n,x=s),r===v&&i===_&&a===y&&o===b||(e.blendFuncSeparate(j[r],j[i],j[a],j[o]),v=r,_=i,y=a,b=o),m=t,w=null;else if(t!==m||l!==w){if(100===g&&100===x||(e.blendEquation(32774),g=100,x=100),l)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFuncSeparate(0,768,0,770)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFunc(0,768)}v=null,_=null,y=null,b=null,m=t,w=l}}else!0===f&&(H(3042),f=!1)}function W(t){S!==t&&(t?e.frontFace(2304):e.frontFace(2305),S=t)}function X(t){0!==t?(B(2884),t!==M&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):H(2884),M=t}function q(t,n,r){t?(B(32823),T===n&&A===r||(e.polygonOffset(n,r),T=n,A=r)):H(32823)}function Y(t){void 0===t&&(t=33984+C-1),O!==t&&(e.activeTexture(t),O=t)}return{buffers:{color:i,depth:s,stencil:a},enable:B,disable:H,bindFramebuffer:function(t,n){return h[t]!==n&&(e.bindFramebuffer(t,n),h[t]=n,r&&(36009===t&&(h[36160]=n),36160===t&&(h[36009]=n)),!0)},drawBuffers:function(r,i){let s=d,a=!1;if(r)if(s=u.get(i),void 0===s&&(s=[],u.set(i,s)),r.isWebGLMultipleRenderTargets){const e=r.texture;if(s.length!==e.length||36064!==s[0]){for(let t=0,n=e.length;t<n;t++)s[t]=36064+t;s.length=e.length,a=!0}}else 36064!==s[0]&&(s[0]=36064,a=!0);else 1029!==s[0]&&(s[0]=1029,a=!0);a&&(n.isWebGL2?e.drawBuffers(s):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(s))},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:V,setMaterial:function(e,t){2===e.side?H(2884):B(2884);let n=1===e.side;t&&(n=!n),W(n),1===e.blending&&!1===e.transparent?V(0):V(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),i.setMask(e.colorWrite);const r=e.stencilWrite;a.setTest(r),r&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),q(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?B(32926):H(32926)},setFlipSided:W,setCullFace:X,setLineWidth:function(t){t!==E&&(P&&e.lineWidth(t),E=t)},setPolygonOffset:q,setScissorTest:function(e){e?B(3089):H(3089)},activeTexture:Y,bindTexture:function(t,n){null===O&&Y();let r=z[O];void 0===r&&(r={type:void 0,texture:void 0},z[O]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||U[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=z[O];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){}},updateUBOMapping:function(t,n){let r=l.get(n);void 0===r&&(r=new WeakMap,l.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){const r=l.get(n).get(t);o.get(t)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),o.set(t,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){}},scissor:function(t){!1===I.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),I.copy(t))},viewport:function(t){!1===N.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),N.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},O=null,z={},h={},u=new WeakMap,d=[],p=null,f=!1,m=null,g=null,v=null,_=null,x=null,y=null,b=null,w=!1,S=null,M=null,E=null,T=null,A=null,I.set(0,0,e.canvas.width,e.canvas.height),N.set(0,0,e.canvas.width,e.canvas.height),i.reset(),s.reset(),a.reset()}}}function wh(e,t,n,r,i,s,a){const o=i.isWebGL2,l=(i.maxTextures,i.maxCubemapSize),c=i.maxTextureSize,h=i.maxSamples,u=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,d=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let f;const m=new WeakMap;let g=!1;try{g="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(H){}function v(e,t){return g?new OffscreenCanvas(e,t):xs("canvas")}function _(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?ds:Math.floor,s=r(i*e.width),a=r(i*e.height);void 0===f&&(f=v(s,a));const o=n?v(s,a):f;o.width=s,o.height=a;return o.getContext("2d").drawImage(e,0,0,s,a),o}return e}return e}function x(e){return hs(e.width)&&hs(e.height)}function y(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function b(t){e.generateMipmap(t)}function w(n,r,i,s,a=!1){if(!1===o)return r;if(null!==n&&void 0!==e[n])return e[n];let l=r;return 6403===r&&(5126===i&&(l=33326),5131===i&&(l=33325),5121===i&&(l=33321)),33319===r&&(5126===i&&(l=33328),5131===i&&(l=33327),5121===i&&(l=33323)),6408===r&&(5126===i&&(l=34836),5131===i&&(l=34842),5121===i&&(l=3001===s&&!1===a?35907:32856),32819===i&&(l=32854),32820===i&&(l=32855)),33325!==l&&33326!==l&&33327!==l&&33328!==l&&34842!==l&&34836!==l||t.get("EXT_color_buffer_float"),l}function S(e,t,n){return!0===y(e,n)||e.isFramebufferTexture&&1003!==e.minFilter&&1006!==e.minFilter?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function M(e){return 1003===e||1004===e||1005===e?9728:9729}function E(e){const t=e.target;t.removeEventListener("dispose",E),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=m.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&A(e),0===Object.keys(i).length&&m.delete(n)}r.remove(e)}(t),t.isVideoTexture&&p.delete(t)}function T(t){const n=t.target;n.removeEventListener("dispose",T),function(t){const n=t.texture,i=r.get(t),s=r.get(n);void 0!==s.__webglTexture&&(e.deleteTexture(s.__webglTexture),a.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)e.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[r]);else{if(e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let o=0,l=n.length;o<l;o++){const t=r.get(n[o]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),a.memory.textures--),r.remove(n[o])}r.remove(n),r.remove(t)}(n)}function A(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete m.get(i)[n.__cacheKey],a.memory.textures--}let C=0;function P(e,t){const i=r.get(e);if(e.isVideoTexture&&function(e){const t=a.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&i.__version!==e.version){const n=e.image;if(null===n);else if(!1!==n.complete)return void D(i,e,t)}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}const R={1e3:10497,1001:33071,1002:33648},L={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987};function O(n,s,a){if(a?(e.texParameteri(n,10242,R[s.wrapS]),e.texParameteri(n,10243,R[s.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,R[s.wrapR]),e.texParameteri(n,10240,L[s.magFilter]),e.texParameteri(n,10241,L[s.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),1001!==s.wrapS||s.wrapT,e.texParameteri(n,10240,M(s.magFilter)),e.texParameteri(n,10241,M(s.minFilter)),1003!==s.minFilter&&s.minFilter),!0===t.has("EXT_texture_filter_anisotropic")){const a=t.get("EXT_texture_filter_anisotropic");if(1015===s.type&&!1===t.has("OES_texture_float_linear"))return;if(!1===o&&1016===s.type&&!1===t.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||r.get(s).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,i.getMaxAnisotropy())),r.get(s).__currentAnisotropy=s.anisotropy)}}function z(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",E));const i=n.source;let s=m.get(i);void 0===s&&(s={},m.set(i,s));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(o!==t.__cacheKey){void 0===s[o]&&(s[o]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,r=!0),s[o].usedTimes++;const i=s[t.__cacheKey];void 0!==i&&(s[t.__cacheKey].usedTimes--,0===i.usedTimes&&A(n)),t.__cacheKey=o,t.__webglTexture=s[o].texture}return r}function D(t,r,i){let a=3553;r.isDataArrayTexture&&(a=35866),r.isData3DTexture&&(a=32879);const l=z(t,r),h=r.source;if(n.activeTexture(33984+i),n.bindTexture(a,t.__webglTexture),h.version!==h.__currentVersion||!0===l){e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const t=function(e){return!o&&(1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&1006!==e.minFilter)}(r)&&!1===x(r.image);let i=_(r.image,t,!1,c);i=B(r,i);const u=x(i)||o,d=s.convert(r.format,r.encoding);let p,f=s.convert(r.type),m=w(r.internalFormat,d,f,r.encoding,r.isVideoTexture);O(a,r,u);const g=r.mipmaps,v=o&&!0!==r.isVideoTexture,M=void 0===h.__currentVersion||!0===l,E=S(r,i,u);if(r.isDepthTexture)m=6402,o?m=1015===r.type?36012:1014===r.type?33190:1020===r.type?35056:33189:r.type,1026===r.format&&6402===m&&1012!==r.type&&1014!==r.type&&(r.type=1014,f=s.convert(r.type)),1027===r.format&&6402===m&&(m=34041,1020!==r.type&&(r.type=1020,f=s.convert(r.type))),M&&(v?n.texStorage2D(3553,1,m,i.width,i.height):n.texImage2D(3553,0,m,i.width,i.height,0,d,f,null));else if(r.isDataTexture)if(g.length>0&&u){v&&M&&n.texStorage2D(3553,E,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)p=g[e],v?n.texSubImage2D(3553,e,0,0,p.width,p.height,d,f,p.data):n.texImage2D(3553,e,m,p.width,p.height,0,d,f,p.data);r.generateMipmaps=!1}else v?(M&&n.texStorage2D(3553,E,m,i.width,i.height),n.texSubImage2D(3553,0,0,0,i.width,i.height,d,f,i.data)):n.texImage2D(3553,0,m,i.width,i.height,0,d,f,i.data);else if(r.isCompressedTexture){v&&M&&n.texStorage2D(3553,E,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)p=g[e],1023!==r.format?null!==d&&(v?n.compressedTexSubImage2D(3553,e,0,0,p.width,p.height,d,p.data):n.compressedTexImage2D(3553,e,m,p.width,p.height,0,p.data)):v?n.texSubImage2D(3553,e,0,0,p.width,p.height,d,f,p.data):n.texImage2D(3553,e,m,p.width,p.height,0,d,f,p.data)}else if(r.isDataArrayTexture)v?(M&&n.texStorage3D(35866,E,m,i.width,i.height,i.depth),n.texSubImage3D(35866,0,0,0,0,i.width,i.height,i.depth,d,f,i.data)):n.texImage3D(35866,0,m,i.width,i.height,i.depth,0,d,f,i.data);else if(r.isData3DTexture)v?(M&&n.texStorage3D(32879,E,m,i.width,i.height,i.depth),n.texSubImage3D(32879,0,0,0,0,i.width,i.height,i.depth,d,f,i.data)):n.texImage3D(32879,0,m,i.width,i.height,i.depth,0,d,f,i.data);else if(r.isFramebufferTexture){if(M)if(v)n.texStorage2D(3553,E,m,i.width,i.height);else{let e=i.width,t=i.height;for(let r=0;r<E;r++)n.texImage2D(3553,r,m,e,t,0,d,f,null),e>>=1,t>>=1}}else if(g.length>0&&u){v&&M&&n.texStorage2D(3553,E,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)p=g[e],v?n.texSubImage2D(3553,e,0,0,d,f,p):n.texImage2D(3553,e,m,d,f,p);r.generateMipmaps=!1}else v?(M&&n.texStorage2D(3553,E,m,i.width,i.height),n.texSubImage2D(3553,0,0,0,d,f,i)):n.texImage2D(3553,0,m,d,f,i);y(r,u)&&b(a),h.__currentVersion=h.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function k(t,i,a,o,l){const c=s.convert(a.format,a.encoding),h=s.convert(a.type),d=w(a.internalFormat,c,h,a.encoding);r.get(i).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,d,i.width,i.height,i.depth,0,c,h,null):n.texImage2D(l,0,d,i.width,i.height,0,c,h,null)),n.bindFramebuffer(36160,t),U(i)?u.framebufferTexture2DMultisampleEXT(36160,o,l,r.get(a).__webglTexture,0,F(i)):e.framebufferTexture2D(36160,o,l,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function I(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r||U(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(1015===t.type?i=36012:1014===t.type&&(i=33190));const r=F(n);U(n)?u.renderbufferStorageMultisampleEXT(36161,r,i,n.width,n.height):e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){const i=F(n);r&&!1===U(n)?e.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):U(n)?u.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<t.length;i++){const a=t[i],o=s.convert(a.format,a.encoding),l=s.convert(a.type),c=w(a.internalFormat,o,l,a.encoding),h=F(n);r&&!1===U(n)?e.renderbufferStorageMultisample(36161,h,c,n.width,n.height):U(n)?u.renderbufferStorageMultisampleEXT(36161,h,c,n.width,n.height):e.renderbufferStorage(36161,c,n.width,n.height)}}e.bindRenderbuffer(36161,null)}function N(t){const i=r.get(t),s=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),P(i.depthTexture,0);const s=r.get(i.depthTexture).__webglTexture,a=F(i);if(1026===i.depthTexture.format)U(i)?u.framebufferTexture2DMultisampleEXT(36160,36096,3553,s,0,a):e.framebufferTexture2D(36160,36096,3553,s,0);else{if(1027!==i.depthTexture.format)throw new Error("Unknown depthTexture format");U(i)?u.framebufferTexture2DMultisampleEXT(36160,33306,3553,s,0,a):e.framebufferTexture2D(36160,33306,3553,s,0)}}(i.__webglFramebuffer,t)}else if(s){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),I(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),I(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function F(e){return Math.min(h,e.samples)}function U(e){const n=r.get(e);return o&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function B(e,n){const r=e.encoding,i=e.format;e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||1035===e.format||3e3!==r&&3001===r&&!1===o&&(!0===t.has("EXT_sRGB")&&1023===i?(e.format=1035,e.minFilter=1006,e.generateMipmaps=!1):n=Os.sRGBToLinear(n)),n}this.allocateTextureUnit=function(){const e=C;return C+=1,e},this.resetTextureUnits=function(){C=0},this.setTexture2D=P,this.setTexture2DArray=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?D(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?D(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=function(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;const a=z(t,r),c=r.source;if(n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),c.version!==c.__currentVersion||!0===a){e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const t=r.isCompressedTexture||r.image[0].isCompressedTexture,i=r.image[0]&&r.image[0].isDataTexture,h=[];for(let e=0;e<6;e++)h[e]=t||i?i?r.image[e].image:r.image[e]:_(r.image[e],!1,!0,l),h[e]=B(r,h[e]);const u=h[0],d=x(u)||o,p=s.convert(r.format,r.encoding),f=s.convert(r.type),m=w(r.internalFormat,p,f,r.encoding),g=o&&!0!==r.isVideoTexture,v=void 0===c.__currentVersion||!0===a;let M,E=S(r,u,d);if(O(34067,r,d),t){g&&v&&n.texStorage2D(34067,E,m,u.width,u.height);for(let e=0;e<6;e++){M=h[e].mipmaps;for(let t=0;t<M.length;t++){const i=M[t];1023!==r.format?null!==p&&(g?n.compressedTexSubImage2D(34069+e,t,0,0,i.width,i.height,p,i.data):n.compressedTexImage2D(34069+e,t,m,i.width,i.height,0,i.data)):g?n.texSubImage2D(34069+e,t,0,0,i.width,i.height,p,f,i.data):n.texImage2D(34069+e,t,m,i.width,i.height,0,p,f,i.data)}}}else{M=r.mipmaps,g&&v&&(M.length>0&&E++,n.texStorage2D(34067,E,m,h[0].width,h[0].height));for(let e=0;e<6;e++)if(i){g?n.texSubImage2D(34069+e,0,0,0,h[e].width,h[e].height,p,f,h[e].data):n.texImage2D(34069+e,0,m,h[e].width,h[e].height,0,p,f,h[e].data);for(let t=0;t<M.length;t++){const r=M[t].image[e].image;g?n.texSubImage2D(34069+e,t+1,0,0,r.width,r.height,p,f,r.data):n.texImage2D(34069+e,t+1,m,r.width,r.height,0,p,f,r.data)}}else{g?n.texSubImage2D(34069+e,0,0,0,p,f,h[e]):n.texImage2D(34069+e,0,m,p,f,h[e]);for(let t=0;t<M.length;t++){const r=M[t];g?n.texSubImage2D(34069+e,t+1,0,0,p,f,r.image[e]):n.texImage2D(34069+e,t+1,m,p,f,r.image[e])}}}y(r,d)&&b(34067),c.__currentVersion=c.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}(a,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture))},this.rebindTextures=function(e,t,n){const i=r.get(e);void 0!==t&&k(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&N(e)},this.setupRenderTarget=function(t){const l=t.texture,c=r.get(t),h=r.get(l);t.addEventListener("dispose",T),!0!==t.isWebGLMultipleRenderTargets&&(void 0===h.__webglTexture&&(h.__webglTexture=e.createTexture()),h.__version=l.version,a.memory.textures++);const u=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,p=x(t)||o;if(u){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),d&&i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),a.memory.textures++)}}if(o&&t.samples>0&&!1===U(t)){const r=d?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer[n]);const a=s.convert(i.format,i.encoding),o=s.convert(i.type),l=w(i.internalFormat,a,o,i.encoding),h=F(t);e.renderbufferStorageMultisample(36161,h,l,t.width,t.height),e.framebufferRenderbuffer(36160,36064+n,36161,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),I(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(u){n.bindTexture(34067,h.__webglTexture),O(34067,l,p);for(let e=0;e<6;e++)k(c.__webglFramebuffer[e],t,l,36064,34069+e);y(l,p)&&b(34067),n.unbindTexture()}else if(d){const e=t.texture;for(let i=0,s=e.length;i<s;i++){const s=e[i],a=r.get(s);n.bindTexture(3553,a.__webglTexture),O(3553,s,p),k(c.__webglFramebuffer,t,s,36064+i,3553),y(s,p)&&b(3553)}n.unbindTexture()}else{let e=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&o&&(e=t.isWebGL3DRenderTarget?32879:35866),n.bindTexture(e,h.__webglTexture),O(e,l,p),k(c.__webglFramebuffer,t,l,36064,e),y(l,p)&&b(e),n.unbindTexture()}t.depthBuffer&&N(t)},this.updateRenderTargetMipmap=function(e){const t=x(e)||o,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let s=0,a=i.length;s<a;s++){const a=i[s];if(y(a,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,i=r.get(a).__webglTexture;n.bindTexture(t,i),b(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(o&&t.samples>0&&!1===U(t)){const i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],s=t.width,a=t.height;let o=16384;const l=[],c=t.stencilBuffer?33306:36096,h=r.get(t),u=!0===t.isWebGLMultipleRenderTargets;if(u)for(let t=0;t<i.length;t++)n.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,null),n.bindFramebuffer(36160,h.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,null,0);n.bindFramebuffer(36008,h.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,h.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(36064+n),t.depthBuffer&&l.push(c);const p=void 0!==h.__ignoreDepthValues&&h.__ignoreDepthValues;if(!1===p&&(t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024)),u&&e.framebufferRenderbuffer(36008,36064,36161,h.__webglColorRenderbuffer[n]),!0===p&&(e.invalidateFramebuffer(36008,[c]),e.invalidateFramebuffer(36009,[c])),u){const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,t,0)}e.blitFramebuffer(0,0,s,a,0,0,s,a,o,9728),d&&e.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),u)for(let t=0;t<i.length;t++){n.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,h.__webglColorRenderbuffer[t]);const s=r.get(i[t]).__webglTexture;n.bindFramebuffer(36160,h.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,s,0)}n.bindFramebuffer(36009,h.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=N,this.setupFrameBufferTexture=k,this.useMultisampledRTT=U}function Sh(e,t,n){const r=n.isWebGL2;return{convert:function(n,i=null){let s;if(1009===n)return 5121;if(1017===n)return 32819;if(1018===n)return 32820;if(1010===n)return 5120;if(1011===n)return 5122;if(1012===n)return 5123;if(1013===n)return 5124;if(1014===n)return 5125;if(1015===n)return 5126;if(1016===n)return r?5131:(s=t.get("OES_texture_half_float"),null!==s?s.HALF_FLOAT_OES:null);if(1021===n)return 6406;if(1023===n)return 6408;if(1024===n)return 6409;if(1025===n)return 6410;if(1026===n)return 6402;if(1027===n)return 34041;if(1028===n)return 6403;if(1022===n)return 6408;if(1035===n)return s=t.get("EXT_sRGB"),null!==s?s.SRGB_ALPHA_EXT:null;if(1029===n)return 36244;if(1030===n)return 33319;if(1031===n)return 33320;if(1033===n)return 36249;if(33776===n||33777===n||33778===n||33779===n)if(3001===i){if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(33776===n)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===n)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===n)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===n)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=t.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(33776===n)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===n)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===n)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===n)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===n||35841===n||35842===n||35843===n){if(s=t.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(35840===n)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return s=t.get("WEBGL_compressed_texture_etc1"),null!==s?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===n||37496===n){if(s=t.get("WEBGL_compressed_texture_etc"),null===s)return null;if(37492===n)return 3001===i?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(37496===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(s=t.get("WEBGL_compressed_texture_astc"),null===s)return null;if(37808===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===n){if(s=t.get("EXT_texture_compression_bptc"),null===s)return null;if(36492===n)return 3001===i?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}return 1020===n?r?34042:(s=t.get("WEBGL_depth_texture"),null!==s?s.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class Mh extends Wo{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Eh extends Va{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Th={type:"move"};class Ah{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Eh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Eh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Gs,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Gs),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Eh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Gs,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Gs),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,s=null;const a=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){s=!0;for(const s of e.hand.values()){const e=t.getJointPose(s,n);if(void 0===l.joints[s.jointName]){const e=new Eh;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[s.jointName]=e,l.add(e)}const r=l.joints[s.jointName];null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=e.radius),r.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],a=r.position.distanceTo(i.position),o=.02,c=.005;l.inputState.pinching&&a>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Th)))}return null!==a&&(a.visible=null!==r),null!==o&&(o.visible=null!==i),null!==l&&(l.visible=null!==s),this}}class Ch extends Is{constructor(e,t,n,r,i,s,a,o,l,c){if(1026!==(c=void 0!==c?c:1026)&&1027!==c)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===c&&(n=1014),void 0===n&&1027===c&&(n=1020),super(null,r,i,s,a,o,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:1003,this.minFilter=void 0!==o?o:1003,this.flipY=!1,this.generateMipmaps=!1}}class Ph extends ts{constructor(e,t){super();const n=this;let r=null,i=1,s=null,a="local-floor",o=null,l=null,c=null,h=null,u=null,d=null;const p=t.getContextAttributes();let f=null,m=null;const g=[],v=[],_=new Wo;_.layers.enable(1),_.viewport=new Ns;const x=new Wo;x.layers.enable(2),x.viewport=new Ns;const y=[_,x],b=new Mh;b.layers.enable(1),b.layers.enable(2);let w=null,S=null;function M(e){const t=v.indexOf(e.inputSource);if(-1===t)return;const n=g[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}function E(){r.removeEventListener("select",M),r.removeEventListener("selectstart",M),r.removeEventListener("selectend",M),r.removeEventListener("squeeze",M),r.removeEventListener("squeezestart",M),r.removeEventListener("squeezeend",M),r.removeEventListener("end",E),r.removeEventListener("inputsourceschange",T);for(let e=0;e<g.length;e++){const t=v[e];null!==t&&(v[e]=null,g[e].disconnect(t))}w=null,S=null,e.setRenderTarget(f),u=null,h=null,c=null,r=null,m=null,L.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function T(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=v.indexOf(n);r>=0&&(v[r]=null,g[r].dispatchEvent({type:"disconnected",data:n}))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=v.indexOf(n);if(-1===r){for(let e=0;e<g.length;e++){if(e>=v.length){v.push(n),r=e;break}if(null===v[e]){v[e]=n,r=e;break}}if(-1===r)break}const i=g[r];i&&i.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=g[e];return void 0===t&&(t=new Ah,g[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=g[e];return void 0===t&&(t=new Ah,g[e]=t),t.getGripSpace()},this.getHand=function(e){let t=g[e];return void 0===t&&(t=new Ah,g[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,n.isPresenting},this.setReferenceSpaceType=function(e){a=e,n.isPresenting},this.getReferenceSpace=function(){return o||s},this.setReferenceSpace=function(e){o=e},this.getBaseLayer=function(){return null!==h?h:u},this.getBinding=function(){return c},this.getFrame=function(){return d},this.getSession=function(){return r},this.setSession=async function(l){if(r=l,null!==r){if(f=e.getRenderTarget(),r.addEventListener("select",M),r.addEventListener("selectstart",M),r.addEventListener("selectend",M),r.addEventListener("squeeze",M),r.addEventListener("squeezestart",M),r.addEventListener("squeezeend",M),r.addEventListener("end",E),r.addEventListener("inputsourceschange",T),!0!==p.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||p.antialias,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:i};u=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:u}),m=new Fs(u.framebufferWidth,u.framebufferHeight,{format:1023,type:1009,encoding:e.outputEncoding,stencilBuffer:p.stencil})}else{let n=null,s=null,a=null;p.depth&&(a=p.stencil?35056:33190,n=p.stencil?1027:1026,s=p.stencil?1020:1014);const o={colorFormat:32856,depthFormat:a,scaleFactor:i};c=new XRWebGLBinding(r,t),h=c.createProjectionLayer(o),r.updateRenderState({layers:[h]}),m=new Fs(h.textureWidth,h.textureHeight,{format:1023,type:1009,depthTexture:new Ch(h.textureWidth,h.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0});e.properties.get(m).__ignoreDepthValues=h.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),o=null,s=await r.requestReferenceSpace(a),L.setContext(r),L.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const A=new Gs,C=new Gs;function P(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;b.near=x.near=_.near=e.near,b.far=x.far=_.far=e.far,w===b.near&&S===b.far||(r.updateRenderState({depthNear:b.near,depthFar:b.far}),w=b.near,S=b.far);const t=e.parent,n=b.cameras;P(b,t);for(let r=0;r<n.length;r++)P(n[r],t);b.matrixWorld.decompose(b.position,b.quaternion,b.scale),e.matrix.copy(b.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);const i=e.children;for(let r=0,s=i.length;r<s;r++)i[r].updateMatrixWorld(!0);2===n.length?function(e,t,n){A.setFromMatrixPosition(t.matrixWorld),C.setFromMatrixPosition(n.matrixWorld);const r=A.distanceTo(C),i=t.projectionMatrix.elements,s=n.projectionMatrix.elements,a=i[14]/(i[10]-1),o=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],h=(i[8]-1)/i[0],u=(s[8]+1)/s[0],d=a*h,p=a*u,f=r/(-h+u),m=f*-h;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=a+f,v=o+f,_=d-m,x=p+(r-m),y=l*o/v*g,b=c*o/v*g;e.projectionMatrix.makePerspective(_,x,y,b,g,v)}(b,_,x):b.projectionMatrix.copy(_.projectionMatrix)},this.getCamera=function(){return b},this.getFoveation=function(){return null!==h?h.fixedFoveation:null!==u?u.fixedFoveation:void 0},this.setFoveation=function(e){null!==h&&(h.fixedFoveation=e),null!==u&&void 0!==u.fixedFoveation&&(u.fixedFoveation=e)};let R=null;const L=new nl;L.setAnimationLoop((function(t,n){if(l=n.getViewerPose(o||s),d=n,null!==l){const t=l.views;null!==u&&(e.setRenderTargetFramebuffer(m,u.framebuffer),e.setRenderTarget(m));let n=!1;t.length!==b.cameras.length&&(b.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let s=null;if(null!==u)s=u.getViewport(i);else{const t=c.getViewSubImage(h,i);s=t.viewport,0===r&&(e.setRenderTargetTextures(m,t.colorTexture,h.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(m))}let a=y[r];void 0===a&&(a=new Wo,a.layers.enable(r),a.viewport=new Ns,y[r]=a),a.matrix.fromArray(i.transform.matrix),a.projectionMatrix.fromArray(i.projectionMatrix),a.viewport.set(s.x,s.y,s.width,s.height),0===r&&b.matrix.copy(a.matrix),!0===n&&b.cameras.push(a)}}for(let e=0;e<g.length;e++){const t=v[e],r=g[e];null!==t&&void 0!==r&&r.update(t,n,o||s)}R&&R(t,n),d=null})),this.setAnimationLoop=function(e){R=e},this.dispose=function(){}}}function Rh(e,t){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,1===r.side&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),1===r.side&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);const i=t.get(r).envMap;if(i&&(n.envMap.value=i,n.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;const t=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*t}let s,a;r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?s=r.map:r.specularMap?s=r.specularMap:r.displacementMap?s=r.displacementMap:r.normalMap?s=r.normalMap:r.bumpMap?s=r.bumpMap:r.roughnessMap?s=r.roughnessMap:r.metalnessMap?s=r.metalnessMap:r.alphaMap?s=r.alphaMap:r.emissiveMap?s=r.emissiveMap:r.clearcoatMap?s=r.clearcoatMap:r.clearcoatNormalMap?s=r.clearcoatNormalMap:r.clearcoatRoughnessMap?s=r.clearcoatRoughnessMap:r.iridescenceMap?s=r.iridescenceMap:r.iridescenceThicknessMap?s=r.iridescenceThicknessMap:r.specularIntensityMap?s=r.specularIntensityMap:r.specularColorMap?s=r.specularColorMap:r.transmissionMap?s=r.transmissionMap:r.thicknessMap?s=r.thicknessMap:r.sheenColorMap?s=r.sheenColorMap:r.sheenRoughnessMap&&(s=r.sheenRoughnessMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),n.uvTransform.value.copy(s.matrix)),r.aoMap?a=r.aoMap:r.lightMap&&(a=r.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,s,a){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(n(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap);n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap);t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,a)):r.isMeshMatcapMaterial?(n(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,s):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Lh(e,t,n,r){let i={},s={},a=[];const o=n.isWebGL2?e.getParameter(35375):0;function l(e,t,n){const r=e.value;if(void 0===n[t])return n[t]="number"==typeof r?r:r.clone(),!0;if("number"==typeof r){if(n[t]!==r)return n[t]=r,!0}else{const e=n[t];if(!1===e.equals(r))return e.copy(r),!0}return!1}function c(e){const t=e.value,n={boundary:0,storage:0};return"number"==typeof t?(n.boundary=4,n.storage=4):t.isVector2?(n.boundary=8,n.storage=8):t.isVector3||t.isColor?(n.boundary=16,n.storage=12):t.isVector4?(n.boundary=16,n.storage=16):t.isMatrix3?(n.boundary=48,n.storage=48):t.isMatrix4?(n.boundary=64,n.storage=64):t.isTexture,n}function h(t){const n=t.target;n.removeEventListener("dispose",h);const r=a.indexOf(n.__bindingPointIndex);a.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete s[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,u){let d=i[n.id];void 0===d&&(!function(e){const t=e.uniforms;let n=0;const r=16;let i=0;for(let s=0,a=t.length;s<a;s++){const e=t[s],a=c(e);if(e.__data=new Float32Array(a.storage/Float32Array.BYTES_PER_ELEMENT),e.__offset=n,s>0){i=n%r;const t=r-i;0!==i&&t-a.boundary<0&&(n+=r-i,e.__offset=n)}n+=a.storage}i=n%r,i>0&&(n+=r-i);e.__size=n,e.__cache={}}(n),d=function(t){const n=function(){for(let e=0;e<o;e++)if(-1===a.indexOf(e))return a.push(e),e;return 0}();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,s=t.usage;return e.bindBuffer(35345,r),e.bufferData(35345,i,s),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",h));const p=u.program;r.updateUBOMapping(n,p);const f=t.render.frame;s[n.id]!==f&&(!function(t){const n=i[t.id],r=t.uniforms,s=t.__cache;e.bindBuffer(35345,n);for(let i=0,a=r.length;i<a;i++){const t=r[i];if(!0===l(t,i,s)){const n=t.value,r=t.__offset;"number"==typeof n?(t.__data[0]=n,e.bufferSubData(35345,r,t.__data)):(t.value.isMatrix3?(t.__data[0]=t.value.elements[0],t.__data[1]=t.value.elements[1],t.__data[2]=t.value.elements[2],t.__data[3]=t.value.elements[0],t.__data[4]=t.value.elements[3],t.__data[5]=t.value.elements[4],t.__data[6]=t.value.elements[5],t.__data[7]=t.value.elements[0],t.__data[8]=t.value.elements[6],t.__data[9]=t.value.elements[7],t.__data[10]=t.value.elements[8],t.__data[11]=t.value.elements[0]):n.toArray(t.__data),e.bufferSubData(35345,r,t.__data))}}e.bindBuffer(35345,null)}(n),s[n.id]=f)},dispose:function(){for(const t in i)e.deleteBuffer(i[t]);a=[],i={},s={}}}}function Oh(e={}){this.isWebGLRenderer=!0;const t=void 0!==e.canvas?e.canvas:function(){const e=xs("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0===e.depth||e.depth,i=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,a=void 0===e.premultipliedAlpha||e.premultipliedAlpha,o=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let h;h=null!==n?n.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let u=null,d=null;const p=[],f=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return 2},set:function(){}}});const m=this;let g=!1,v=0,_=0,x=null,y=-1,b=null;const w=new Ns,S=new Ns;let M=null,E=t.width,T=t.height,A=1,C=null,P=null;const R=new Ns(0,0,E,T),L=new Ns(0,0,E,T);let O=!1;const z=new tl;let D=!1,k=!1,I=null;const N=new xa,F=new gs,U=new Gs,B={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function H(){return null===x?A:1}let G,j,V,W,X,q,Y,Z,K,J,Q,$,ee,te,ne,re,ie,se,ae,oe,le,ce,he,ue,de=n;function pe(e,n){for(let r=0;r<e.length;r++){const i=e[r],s=t.getContext(i,n);if(null!==s)return s}return null}try{const e={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r144"),t.addEventListener("webglcontextlost",ge,!1),t.addEventListener("webglcontextrestored",ve,!1),t.addEventListener("webglcontextcreationerror",_e,!1),null===de){const t=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&t.shift(),de=pe(t,e),null===de)throw pe(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===de.getShaderPrecisionFormat&&(de.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Re){throw Re}function fe(){G=new Pl(de),j=new ul(de,G,e),G.init(j),ce=new Sh(de,G,j),V=new bh(de,G,j),W=new Ol,X=new oh,q=new wh(de,G,V,X,j,ce,W),Y=new pl(m),Z=new Cl(m),K=new rl(de,j),he=new cl(de,G,K,j),J=new Rl(de,K,W,he),Q=new Il(de,J,K,W),ae=new kl(de,j,q),re=new dl(X),$=new ah(m,Y,Z,G,j,he,re),ee=new Rh(m,X),te=new uh,ne=new vh(G,j),se=new ll(m,Y,V,Q,h,a),ie=new yh(m,Q,j),ue=new Lh(de,W,j,V),oe=new hl(de,G,W,j),le=new Ll(de,G,W,j),W.programs=$.programs,m.capabilities=j,m.extensions=G,m.properties=X,m.renderLists=te,m.shadowMap=ie,m.state=V,m.info=W}fe();const me=new Ph(m,de);function ge(e){e.preventDefault(),g=!0}function ve(){g=!1;const e=W.autoReset,t=ie.enabled,n=ie.autoUpdate,r=ie.needsUpdate,i=ie.type;fe(),W.autoReset=e,ie.enabled=t,ie.autoUpdate=n,ie.needsUpdate=r,ie.type=i}function _e(e){}function xe(e){const t=e.target;t.removeEventListener("dispose",xe),function(e){(function(e){const t=X.get(e).programs;void 0!==t&&(t.forEach((function(e){$.releaseProgram(e)})),e.isShaderMaterial&&$.releaseShaderCache(e))})(e),X.remove(e)}(t)}this.xr=me,this.getContext=function(){return de},this.getContextAttributes=function(){return de.getContextAttributes()},this.forceContextLoss=function(){const e=G.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=G.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return A},this.setPixelRatio=function(e){void 0!==e&&(A=e,this.setSize(E,T,!1))},this.getSize=function(e){return e.set(E,T)},this.setSize=function(e,n,r){me.isPresenting||(E=e,T=n,t.width=Math.floor(e*A),t.height=Math.floor(n*A),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(E*A,T*A).floor()},this.setDrawingBufferSize=function(e,n,r){E=e,T=n,A=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(w)},this.getViewport=function(e){return e.copy(R)},this.setViewport=function(e,t,n,r){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,n,r),V.viewport(w.copy(R).multiplyScalar(A).floor())},this.getScissor=function(e){return e.copy(L)},this.setScissor=function(e,t,n,r){e.isVector4?L.set(e.x,e.y,e.z,e.w):L.set(e,t,n,r),V.scissor(S.copy(L).multiplyScalar(A).floor())},this.getScissorTest=function(){return O},this.setScissorTest=function(e){V.setScissorTest(O=e)},this.setOpaqueSort=function(e){C=e},this.setTransparentSort=function(e){P=e},this.getClearColor=function(e){return e.copy(se.getClearColor())},this.setClearColor=function(){se.setClearColor.apply(se,arguments)},this.getClearAlpha=function(){return se.getClearAlpha()},this.setClearAlpha=function(){se.setClearAlpha.apply(se,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;e&&(r|=16384),t&&(r|=256),n&&(r|=1024),de.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ge,!1),t.removeEventListener("webglcontextrestored",ve,!1),t.removeEventListener("webglcontextcreationerror",_e,!1),te.dispose(),ne.dispose(),X.dispose(),Y.dispose(),Z.dispose(),Q.dispose(),he.dispose(),ue.dispose(),$.dispose(),me.dispose(),me.removeEventListener("sessionstart",be),me.removeEventListener("sessionend",we),I&&(I.dispose(),I=null),Se.stop()},this.renderBufferDirect=function(e,t,n,r,i,s){null===t&&(t=B);const a=i.isMesh&&i.matrixWorld.determinant()<0,o=function(e,t,n,r,i){!0!==t.isScene&&(t=B);q.resetTextureUnits();const s=t.fog,a=r.isMeshStandardMaterial?t.environment:null,o=null===x?m.outputEncoding:!0===x.isXRRenderTarget?x.texture.encoding:3e3,l=(r.isMeshStandardMaterial?Z:Y).get(r.envMap||a),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,h=!!r.normalMap&&!!n.attributes.tangent,u=!!n.morphAttributes.position,p=!!n.morphAttributes.normal,f=!!n.morphAttributes.color,g=r.toneMapped?m.toneMapping:0,v=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,_=void 0!==v?v.length:0,w=X.get(r),S=d.state.lights;if(!0===D&&(!0===k||e!==b)){const t=e===b&&r.id===y;re.setState(r,e,t)}let M=!1;r.version===w.__version?w.needsLights&&w.lightsStateVersion!==S.state.version||w.outputEncoding!==o||i.isInstancedMesh&&!1===w.instancing?M=!0:i.isInstancedMesh||!0!==w.instancing?i.isSkinnedMesh&&!1===w.skinning?M=!0:i.isSkinnedMesh||!0!==w.skinning?w.envMap!==l||!0===r.fog&&w.fog!==s?M=!0:void 0===w.numClippingPlanes||w.numClippingPlanes===re.numPlanes&&w.numIntersection===re.numIntersection?(w.vertexAlphas!==c||w.vertexTangents!==h||w.morphTargets!==u||w.morphNormals!==p||w.morphColors!==f||w.toneMapping!==g||!0===j.isWebGL2&&w.morphTargetsCount!==_)&&(M=!0):M=!0:M=!0:M=!0:(M=!0,w.__version=r.version);let E=w.currentProgram;!0===M&&(E=Ce(r,t,i));let C=!1,P=!1,R=!1;const L=E.getUniforms(),O=w.uniforms;V.useProgram(E.program)&&(C=!0,P=!0,R=!0);r.id!==y&&(y=r.id,P=!0);if(C||b!==e){if(L.setValue(de,"projectionMatrix",e.projectionMatrix),j.logarithmicDepthBuffer&&L.setValue(de,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),b!==e&&(b=e,P=!0,R=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const t=L.map.cameraPosition;void 0!==t&&t.setValue(de,U.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&L.setValue(de,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&L.setValue(de,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){L.setOptional(de,i,"bindMatrix"),L.setOptional(de,i,"bindMatrixInverse");const e=i.skeleton;e&&j.floatVertexTextures&&(null===e.boneTexture&&e.computeBoneTexture(),L.setValue(de,"boneTexture",e.boneTexture,q),L.setValue(de,"boneTextureSize",e.boneTextureSize))}const z=n.morphAttributes;(void 0!==z.position||void 0!==z.normal||void 0!==z.color&&!0===j.isWebGL2)&&ae.update(i,n,r,E);(P||w.receiveShadow!==i.receiveShadow)&&(w.receiveShadow=i.receiveShadow,L.setValue(de,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(O.envMap.value=l,O.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);P&&(L.setValue(de,"toneMappingExposure",m.toneMappingExposure),w.needsLights&&(F=R,(N=O).ambientLightColor.needsUpdate=F,N.lightProbe.needsUpdate=F,N.directionalLights.needsUpdate=F,N.directionalLightShadows.needsUpdate=F,N.pointLights.needsUpdate=F,N.pointLightShadows.needsUpdate=F,N.spotLights.needsUpdate=F,N.spotLightShadows.needsUpdate=F,N.rectAreaLights.needsUpdate=F,N.hemisphereLights.needsUpdate=F),s&&!0===r.fog&&ee.refreshFogUniforms(O,s),ee.refreshMaterialUniforms(O,r,A,T,I),Bc.upload(de,w.uniformsList,O,q));var N,F;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Bc.upload(de,w.uniformsList,O,q),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&L.setValue(de,"center",i.center);if(L.setValue(de,"modelViewMatrix",i.modelViewMatrix),L.setValue(de,"normalMatrix",i.normalMatrix),L.setValue(de,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(j.isWebGL2){const n=e[t];ue.update(n,E),ue.bind(n,E)}}return E}(e,t,n,r,i);V.setMaterial(r,a);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let h,u=1;!0===r.wireframe&&(l=J.getWireframeAttribute(n),u=2),he.setup(i,r,o,n,l);let p=oe;null!==l&&(h=K.get(l),p=le,p.setIndex(h));const f=null!==l?l.count:c.count,g=n.drawRange.start*u,v=n.drawRange.count*u,_=null!==s?s.start*u:0,w=null!==s?s.count*u:1/0,S=Math.max(g,_),M=Math.min(f,g+v,_+w)-1,E=Math.max(0,M-S+1);if(0!==E){if(i.isMesh)!0===r.wireframe?(V.setLineWidth(r.wireframeLinewidth*H()),p.setMode(1)):p.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),V.setLineWidth(e*H()),i.isLineSegments?p.setMode(1):i.isLineLoop?p.setMode(2):p.setMode(3)}else i.isPoints?p.setMode(0):i.isSprite&&p.setMode(4);if(i.isInstancedMesh)p.renderInstances(S,E,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);p.renderInstances(S,E,e)}else p.render(S,E)}},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&2===e.side?(e.side=1,e.needsUpdate=!0,Ce(e,t,n),e.side=0,e.needsUpdate=!0,Ce(e,t,n),e.side=2):Ce(e,t,n)}d=ne.get(e),d.init(),f.push(d),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(m.physicallyCorrectLights),e.traverse((function(t){const r=t.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++){n(r[i],e,t)}else n(r,e,t)})),f.pop(),d=null};let ye=null;function be(){Se.stop()}function we(){Se.start()}const Se=new nl;function Me(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||z.intersectsSprite(e)){r&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(N);const t=Q.update(e),i=e.material;i.visible&&u.push(e,t,i,n,U.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||z.intersectsObject(e))){r&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(N);const t=Q.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let s=0,a=r.length;s<a;s++){const a=r[s],o=i[a.materialIndex];o&&o.visible&&u.push(e,t,o,n,U.z,a)}}else i.visible&&u.push(e,t,i,n,U.z,null)}const i=e.children;for(let s=0,a=i.length;s<a;s++)Me(i[s],t,n,r)}function Ee(e,t,n,r){const i=e.opaque,a=e.transmissive,o=e.transparent;d.setupLightsView(n),a.length>0&&function(e,t,n){const r=j.isWebGL2;null===I&&(I=new Fs(1,1,{generateMipmaps:!0,type:G.has("EXT_color_buffer_half_float")?1016:1009,minFilter:1008,samples:r&&!0===s?4:0}));m.getDrawingBufferSize(F),r?I.setSize(F.x,F.y):I.setSize(ds(F.x),ds(F.y));const i=m.getRenderTarget();m.setRenderTarget(I),m.clear();const a=m.toneMapping;m.toneMapping=0,Te(e,t,n),m.toneMapping=a,q.updateMultisampleRenderTarget(I),q.updateRenderTargetMipmap(I),m.setRenderTarget(i)}(i,t,n),r&&V.viewport(w.copy(r)),i.length>0&&Te(i,t,n),a.length>0&&Te(a,t,n),o.length>0&&Te(o,t,n),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1)}function Te(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,s=e.length;i<s;i++){const s=e[i],a=s.object,o=s.geometry,l=null===r?s.material:r,c=s.group;a.layers.test(n.layers)&&Ae(a,t,n,o,l,c)}}function Ae(e,t,n,r,i,s){e.onBeforeRender(m,t,n,r,i,s),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(m,t,n,r,e,s),!0===i.transparent&&2===i.side?(i.side=1,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,s),i.side=0,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,s),i.side=2):m.renderBufferDirect(n,t,r,i,e,s),e.onAfterRender(m,t,n,r,i,s)}function Ce(e,t,n){!0!==t.isScene&&(t=B);const r=X.get(e),i=d.state.lights,s=d.state.shadowsArray,a=i.state.version,o=$.getParameters(e,i.state,s,t,n),l=$.getProgramCacheKey(o);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?Z:Y).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",xe),c=new Map,r.programs=c);let h=c.get(l);if(void 0!==h){if(r.currentProgram===h&&r.lightsStateVersion===a)return Pe(e,o),h}else o.uniforms=$.getUniforms(e),e.onBuild(n,o,m),e.onBeforeCompile(o,m),h=$.acquireProgram(o,l),c.set(l,h),r.uniforms=o.uniforms;const u=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(u.clippingPlanes=re.uniform),Pe(e,o),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(u.ambientLightColor.value=i.state.ambient,u.lightProbe.value=i.state.probe,u.directionalLights.value=i.state.directional,u.directionalLightShadows.value=i.state.directionalShadow,u.spotLights.value=i.state.spot,u.spotLightShadows.value=i.state.spotShadow,u.rectAreaLights.value=i.state.rectArea,u.ltc_1.value=i.state.rectAreaLTC1,u.ltc_2.value=i.state.rectAreaLTC2,u.pointLights.value=i.state.point,u.pointLightShadows.value=i.state.pointShadow,u.hemisphereLights.value=i.state.hemi,u.directionalShadowMap.value=i.state.directionalShadowMap,u.directionalShadowMatrix.value=i.state.directionalShadowMatrix,u.spotShadowMap.value=i.state.spotShadowMap,u.spotLightMatrix.value=i.state.spotLightMatrix,u.spotLightMap.value=i.state.spotLightMap,u.pointShadowMap.value=i.state.pointShadowMap,u.pointShadowMatrix.value=i.state.pointShadowMatrix);const p=h.getUniforms(),f=Bc.seqWithValue(p.seq,u);return r.currentProgram=h,r.uniformsList=f,h}function Pe(e,t){const n=X.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Se.setAnimationLoop((function(e){ye&&ye(e)})),"undefined"!=typeof self&&Se.setContext(self),this.setAnimationLoop=function(e){ye=e,me.setAnimationLoop(e),null===e?Se.stop():Se.start()},me.addEventListener("sessionstart",be),me.addEventListener("sessionend",we),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return;if(!0===g)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===me.enabled&&!0===me.isPresenting&&(!0===me.cameraAutoUpdate&&me.updateCamera(t),t=me.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,x),d=ne.get(e,f.length),d.init(),f.push(d),N.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),z.setFromProjectionMatrix(N),k=this.localClippingEnabled,D=re.init(this.clippingPlanes,k,t),u=te.get(e,p.length),u.init(),p.push(u),Me(e,t,0,m.sortObjects),u.finish(),!0===m.sortObjects&&u.sort(C,P),!0===D&&re.beginShadows();const n=d.state.shadowsArray;if(ie.render(n,e,t),!0===D&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),se.render(u,e),d.setupLights(m.physicallyCorrectLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];Ee(u,e,r,r.viewport)}}else Ee(u,e,t);null!==x&&(q.updateMultisampleRenderTarget(x),q.updateRenderTargetMipmap(x)),!0===e.isScene&&e.onAfterRender(m,e,t),he.resetDefaultState(),y=-1,b=null,f.pop(),d=f.length>0?f[f.length-1]:null,p.pop(),u=p.length>0?p[p.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(e,t,n){X.get(e.texture).__webglTexture=t,X.get(e.depthTexture).__webglTexture=n;const r=X.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===G.has("WEBGL_multisampled_render_to_texture")&&(r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=X.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){x=e,v=t,_=n;let r=!0;if(e){const t=X.get(e);void 0!==t.__useDefaultFramebuffer?(V.bindFramebuffer(36160,null),r=!1):void 0===t.__webglFramebuffer?q.setupRenderTarget(e):t.__hasExternalTextures&&q.rebindTextures(e,X.get(e.texture).__webglTexture,X.get(e.depthTexture).__webglTexture)}let i=null,s=!1,a=!1;if(e){const n=e.texture;(n.isData3DTexture||n.isDataArrayTexture)&&(a=!0);const r=X.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=r[t],s=!0):i=j.isWebGL2&&e.samples>0&&!1===q.useMultisampledRTT(e)?X.get(e).__webglMultisampledFramebuffer:r,w.copy(e.viewport),S.copy(e.scissor),M=e.scissorTest}else w.copy(R).multiplyScalar(A).floor(),S.copy(L).multiplyScalar(A).floor(),M=O;if(V.bindFramebuffer(36160,i)&&j.drawBuffers&&r&&V.drawBuffers(e,i),V.viewport(w),V.scissor(S),V.setScissorTest(M),s){const r=X.get(e.texture);de.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(a){const r=X.get(e.texture),i=t||0;de.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}y=-1},this.readRenderTargetPixels=function(e,t,n,r,i,s,a){if(!e||!e.isWebGLRenderTarget)return;let o=X.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(o=o[a]),o){V.bindFramebuffer(36160,o);try{const a=e.texture,o=a.format,l=a.type;if(1023!==o&&ce.convert(o)!==de.getParameter(35739))return;const c=1016===l&&(G.has("EXT_color_buffer_half_float")||j.isWebGL2&&G.has("EXT_color_buffer_float"));if(!(1009===l||ce.convert(l)===de.getParameter(35738)||1015===l&&(j.isWebGL2||G.has("OES_texture_float")||G.has("WEBGL_color_buffer_float"))||c))return;t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&de.readPixels(t,n,r,i,ce.convert(o),ce.convert(l),s)}finally{const e=null!==x?X.get(x).__webglFramebuffer:null;V.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),s=Math.floor(t.image.height*r);q.setTexture2D(t,0),de.copyTexSubImage2D(3553,n,0,0,e.x,e.y,i,s),V.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,s=t.image.height,a=ce.convert(n.format),o=ce.convert(n.type);q.setTexture2D(n,0),de.pixelStorei(37440,n.flipY),de.pixelStorei(37441,n.premultiplyAlpha),de.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?de.texSubImage2D(3553,r,e.x,e.y,i,s,a,o,t.image.data):t.isCompressedTexture?de.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):de.texSubImage2D(3553,r,e.x,e.y,a,o,t.image),0===r&&n.generateMipmaps&&de.generateMipmap(3553),V.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(m.isWebGL1Renderer)return;const s=e.max.x-e.min.x+1,a=e.max.y-e.min.y+1,o=e.max.z-e.min.z+1,l=ce.convert(r.format),c=ce.convert(r.type);let h;if(r.isData3DTexture)q.setTexture3D(r,0),h=32879;else{if(!r.isDataArrayTexture)return;q.setTexture2DArray(r,0),h=35866}de.pixelStorei(37440,r.flipY),de.pixelStorei(37441,r.premultiplyAlpha),de.pixelStorei(3317,r.unpackAlignment);const u=de.getParameter(3314),d=de.getParameter(32878),p=de.getParameter(3316),f=de.getParameter(3315),g=de.getParameter(32877),v=n.isCompressedTexture?n.mipmaps[0]:n.image;de.pixelStorei(3314,v.width),de.pixelStorei(32878,v.height),de.pixelStorei(3316,e.min.x),de.pixelStorei(3315,e.min.y),de.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?de.texSubImage3D(h,i,t.x,t.y,t.z,s,a,o,l,c,v.data):n.isCompressedTexture?de.compressedTexSubImage3D(h,i,t.x,t.y,t.z,s,a,o,l,v.data):de.texSubImage3D(h,i,t.x,t.y,t.z,s,a,o,l,c,v),de.pixelStorei(3314,u),de.pixelStorei(32878,d),de.pixelStorei(3316,p),de.pixelStorei(3315,f),de.pixelStorei(32877,g),0===i&&r.generateMipmaps&&de.generateMipmap(h),V.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?q.setTextureCube(e,0):e.isData3DTexture?q.setTexture3D(e,0):e.isDataArrayTexture?q.setTexture2DArray(e,0):q.setTexture2D(e,0),V.unbindTexture()},this.resetState=function(){v=0,_=0,x=null,V.reset(),he.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends Oh{}).prototype.isWebGL1Renderer=!0;class zh{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Rs(e),this.near=t,this.far=n}clone(){return new zh(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Dh extends Va{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}get autoUpdate(){return this.matrixWorldAutoUpdate}set autoUpdate(e){this.matrixWorldAutoUpdate=e}}class kh{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=as()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=as()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=as()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ih=new Gs;class Nh{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Ih.fromBufferAttribute(this,t),Ih.applyMatrix4(e),this.setXYZ(t,Ih.x,Ih.y,Ih.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ih.fromBufferAttribute(this,t),Ih.applyNormalMatrix(e),this.setXYZ(t,Ih.x,Ih.y,Ih.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ih.fromBufferAttribute(this,t),Ih.transformDirection(e),this.setXYZ(t,Ih.x,Ih.y,Ih.z);return this}setX(e,t){return this.normalized&&(t=fs(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=fs(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=fs(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=fs(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ps(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ps(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ps(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ps(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=fs(t,this.array),n=fs(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=fs(t,this.array),n=fs(n,this.array),r=fs(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=fs(t,this.array),n=fs(n,this.array),r=fs(r,this.array),i=fs(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new oo(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Nh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Fh extends ro{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Rs(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Uh;const Bh=new Gs,Hh=new Gs,Gh=new Gs,jh=new gs,Vh=new gs,Wh=new xa,Xh=new Gs,qh=new Gs,Yh=new Gs,Zh=new gs,Kh=new gs,Jh=new gs;class Qh extends Va{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",void 0===Uh){Uh=new xo;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new kh(e,5);Uh.setIndex([0,1,2,0,2,3]),Uh.setAttribute("position",new Nh(t,3,0,!1)),Uh.setAttribute("uv",new Nh(t,2,3,!1))}this.geometry=Uh,this.material=void 0!==e?e:new Fh,this.center=new gs(.5,.5)}raycast(e,t){e.camera,Hh.setFromMatrixScale(this.matrixWorld),Wh.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Gh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Hh.multiplyScalar(-Gh.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const s=this.center;$h(Xh.set(-.5,-.5,0),Gh,s,Hh,r,i),$h(qh.set(.5,-.5,0),Gh,s,Hh,r,i),$h(Yh.set(.5,.5,0),Gh,s,Hh,r,i),Zh.set(0,0),Kh.set(1,0),Jh.set(1,1);let a=e.ray.intersectTriangle(Xh,qh,Yh,!1,Bh);if(null===a&&($h(qh.set(-.5,.5,0),Gh,s,Hh,r,i),Kh.set(0,1),a=e.ray.intersectTriangle(Xh,Yh,qh,!1,Bh),null===a))return;const o=e.ray.origin.distanceTo(Bh);o<e.near||o>e.far||t.push({distance:o,point:Bh.clone(),uv:to.getUV(Bh,Xh,qh,Yh,Zh,Kh,Jh,new gs),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function $h(e,t,n,r,i,s){jh.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(Vh.x=s*jh.x-i*jh.y,Vh.y=i*jh.x+s*jh.y):Vh.copy(jh),e.copy(t),e.x+=Vh.x,e.y+=Vh.y,e.applyMatrix4(Wh)}const eu=new Gs,tu=new Ns,nu=new Ns,ru=new Gs,iu=new xa;class su extends No{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new xa,this.bindMatrixInverse=new xa}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ns,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}boneTransform(e,t){const n=this.skeleton,r=this.geometry;tu.fromBufferAttribute(r.attributes.skinIndex,e),nu.fromBufferAttribute(r.attributes.skinWeight,e),eu.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let i=0;i<4;i++){const e=nu.getComponent(i);if(0!==e){const r=tu.getComponent(i);iu.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(ru.copy(eu).applyMatrix4(iu),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}class au extends Va{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ou extends Is{constructor(e=null,t=1,n=1,r,i,s,a,o,l=1003,c=1003,h,u){super(null,s,a,o,l,c,r,i,h,u),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const lu=new xa,cu=new xa;class hu{constructor(e=[],t=[]){this.uuid=as(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new xa)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new xa;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,s=e.length;i<s;i++){const r=e[i]?e[i].matrixWorld:cu;lu.multiplyMatrices(r,t[i]),lu.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}clone(){return new hu(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=us(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new ou(t,e,e,1023,1015);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){let r=t[e.bones[n]];void 0===r&&(r=new au),this.bones.push(r),this.boneInverses.push((new xa).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const s=n[r];e.boneInverses.push(s.toArray())}return e}}class uu extends ro{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Rs(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const du=new Gs,pu=new Gs,fu=new xa,mu=new _a,gu=new ha;class vu extends Va{constructor(e=new xo,t=new uu){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)du.fromBufferAttribute(t,e-1),pu.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=du.distanceTo(pu);e.setAttribute("lineDistance",new ho(n,1))}return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),gu.copy(n.boundingSphere),gu.applyMatrix4(r),gu.radius+=i,!1===e.ray.intersectsSphere(gu))return;fu.copy(r).invert(),mu.copy(e.ray).applyMatrix4(fu);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=new Gs,c=new Gs,h=new Gs,u=new Gs,d=this.isLineSegments?2:1,p=n.index,f=n.attributes.position;if(null!==p){for(let n=Math.max(0,s.start),r=Math.min(p.count,s.start+s.count)-1;n<r;n+=d){const r=p.getX(n),i=p.getX(n+1);l.fromBufferAttribute(f,r),c.fromBufferAttribute(f,i);if(mu.distanceSqToSegment(l,c,u,h)>o)continue;u.applyMatrix4(this.matrixWorld);const s=e.ray.origin.distanceTo(u);s<e.near||s>e.far||t.push({distance:s,point:h.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,s.start),r=Math.min(f.count,s.start+s.count)-1;n<r;n+=d){l.fromBufferAttribute(f,n),c.fromBufferAttribute(f,n+1);if(mu.distanceSqToSegment(l,c,u,h)>o)continue;u.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(u);r<e.near||r>e.far||t.push({distance:r,point:h.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const _u=new Gs,xu=new Gs;class yu extends vu{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)_u.fromBufferAttribute(t,e),xu.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+_u.distanceTo(xu);e.setAttribute("lineDistance",new ho(n,1))}return this}}class bu extends vu{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class wu extends ro{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Rs(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Su=new xa,Mu=new _a,Eu=new ha,Tu=new Gs;class Au extends Va{constructor(e=new xo,t=new wu){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Eu.copy(n.boundingSphere),Eu.applyMatrix4(r),Eu.radius+=i,!1===e.ray.intersectsSphere(Eu))return;Su.copy(r).invert(),Mu.copy(e.ray).applyMatrix4(Su);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,s.start),i=Math.min(l.count,s.start+s.count);n<i;n++){const i=l.getX(n);Tu.fromBufferAttribute(c,i),Cu(Tu,i,o,r,e,t,this)}}else{for(let n=Math.max(0,s.start),i=Math.min(c.count,s.start+s.count);n<i;n++)Tu.fromBufferAttribute(c,n),Cu(Tu,n,o,r,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function Cu(e,t,n,r,i,s,a){const o=Mu.distanceSqToPoint(e);if(o<n){const n=new Gs;Mu.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;s.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:t,face:null,object:a})}}class Pu{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let s;s=t||e*n[i-1];let a,o=0,l=i-1;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),a=n[r]-s,a<0)o=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(r=l,n[r]===s)return r/(i-1);const c=n[r];return(r+(s-c)/(n[r+1]-c))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const s=this.getPoint(r),a=this.getPoint(i),o=t||(s.isVector2?new gs:new Gs);return o.copy(a).sub(s).normalize(),o}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new Gs,r=[],i=[],s=[],a=new Gs,o=new xa;for(let d=0;d<=e;d++){const t=d/e;r[d]=this.getTangentAt(t,new Gs)}i[0]=new Gs,s[0]=new Gs;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),h=Math.abs(r[0].y),u=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),h<=l&&(l=h,n.set(0,1,0)),u<=l&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),s[0].crossVectors(r[0],i[0]);for(let d=1;d<=e;d++){if(i[d]=i[d-1].clone(),s[d]=s[d-1].clone(),a.crossVectors(r[d-1],r[d]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(os(r[d-1].dot(r[d]),-1,1));i[d].applyMatrix4(o.makeRotationAxis(a,e))}s[d].crossVectors(r[d],i[d])}if(!0===t){let t=Math.acos(os(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(a.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(o.makeRotationAxis(r[n],t*n)),s[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ru extends Pu{constructor(e=0,t=0,n=1,r=1,i=0,s=2*Math.PI,a=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o}getPoint(e,t){const n=t||new gs,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const s=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=s?0:r),!0!==this.aClockwise||s||(i===r?i=-r:i-=r);const a=this.aStartAngle+e*i;let o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=o-this.aX,r=l-this.aY;o=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function Lu(){let e=0,t=0,n=0,r=0;function i(i,s,a,o){e=i,t=a,n=-3*i+3*s-2*a-o,r=2*i-2*s+a+o}return{initCatmullRom:function(e,t,n,r,s){i(t,n,s*(n-e),s*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,s,a,o){let l=(t-e)/s-(n-e)/(s+a)+(n-t)/a,c=(n-t)/a-(r-t)/(a+o)+(r-n)/o;l*=a,c*=a,i(t,n,l,c)},calc:function(i){const s=i*i;return e+t*i+n*s+r*(s*i)}}}const Ou=new Gs,zu=new Lu,Du=new Lu,ku=new Lu;function Iu(e,t,n,r,i){const s=.5*(r-t),a=.5*(i-n),o=e*e;return(2*n-2*r+s+a)*(e*o)+(-3*n+3*r-2*s-a)*o+s*e+n}function Nu(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Fu(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}class Uu extends Pu{constructor(e=new gs,t=new gs,n=new gs,r=new gs){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new gs){const n=t,r=this.v0,i=this.v1,s=this.v2,a=this.v3;return n.set(Fu(e,r.x,i.x,s.x,a.x),Fu(e,r.y,i.y,s.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Bu extends Pu{constructor(e=new gs,t=new gs){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new gs){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new gs;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Hu extends Pu{constructor(e=new gs,t=new gs,n=new gs){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new gs){const n=t,r=this.v0,i=this.v1,s=this.v2;return n.set(Nu(e,r.x,i.x,s.x),Nu(e,r.y,i.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Gu extends Pu{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new gs){const n=t,r=this.points,i=(r.length-1)*e,s=Math.floor(i),a=i-s,o=r[0===s?s:s-1],l=r[s],c=r[s>r.length-2?r.length-1:s+1],h=r[s>r.length-3?r.length-1:s+2];return n.set(Iu(a,o.x,l.x,c.x,h.x),Iu(a,o.y,l.y,c.y,h.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new gs).fromArray(n))}return this}}var ju=Object.freeze({__proto__:null,ArcCurve:class extends Ru{constructor(e,t,n,r,i,s){super(e,t,n,n,r,i,s),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class extends Pu{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new Gs){const n=t,r=this.points,i=r.length,s=(i-(this.closed?0:1))*e;let a,o,l=Math.floor(s),c=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===c&&l===i-1&&(l=i-2,c=1),this.closed||l>0?a=r[(l-1)%i]:(Ou.subVectors(r[0],r[1]).add(r[0]),a=Ou);const h=r[l%i],u=r[(l+1)%i];if(this.closed||l+2<i?o=r[(l+2)%i]:(Ou.subVectors(r[i-1],r[i-2]).add(r[i-1]),o=Ou),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(h),e),n=Math.pow(h.distanceToSquared(u),e),r=Math.pow(u.distanceToSquared(o),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),zu.initNonuniformCatmullRom(a.x,h.x,u.x,o.x,t,n,r),Du.initNonuniformCatmullRom(a.y,h.y,u.y,o.y,t,n,r),ku.initNonuniformCatmullRom(a.z,h.z,u.z,o.z,t,n,r)}else"catmullrom"===this.curveType&&(zu.initCatmullRom(a.x,h.x,u.x,o.x,this.tension),Du.initCatmullRom(a.y,h.y,u.y,o.y,this.tension),ku.initCatmullRom(a.z,h.z,u.z,o.z,this.tension));return n.set(zu.calc(c),Du.calc(c),ku.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Gs).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:Uu,CubicBezierCurve3:class extends Pu{constructor(e=new Gs,t=new Gs,n=new Gs,r=new Gs){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Gs){const n=t,r=this.v0,i=this.v1,s=this.v2,a=this.v3;return n.set(Fu(e,r.x,i.x,s.x,a.x),Fu(e,r.y,i.y,s.y,a.y),Fu(e,r.z,i.z,s.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:Ru,LineCurve:Bu,LineCurve3:class extends Pu{constructor(e=new Gs,t=new Gs){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Gs){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Hu,QuadraticBezierCurve3:class extends Pu{constructor(e=new Gs,t=new Gs,n=new Gs){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Gs){const n=t,r=this.v0,i=this.v1,s=this.v2;return n.set(Nu(e,r.x,i.x,s.x),Nu(e,r.y,i.y,s.y),Nu(e,r.z,i.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},SplineCurve:Gu});class Vu extends Pu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Bu(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const e=r[i]-n,s=this.curves[i],a=s.getLength(),o=0===a?0:1-e/a;return s.getPointAt(o,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const s=i[r],a=s.isEllipseCurve?2*e:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,o=s.getPoints(a);for(let e=0;e<o.length;e++){const r=o[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new ju[n.type]).fromJSON(n))}return this}}class Wu extends Vu{constructor(e){super(),this.type="Path",this.currentPoint=new gs,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Bu(this.currentPoint.clone(),new gs(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new Hu(this.currentPoint.clone(),new gs(e,t),new gs(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,s){const a=new Uu(this.currentPoint.clone(),new gs(e,t),new gs(n,r),new gs(i,s));return this.curves.push(a),this.currentPoint.set(i,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Gu(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,s){const a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+a,t+o,n,r,i,s),this}absarc(e,t,n,r,i,s){return this.absellipse(e,t,n,n,r,i,s),this}ellipse(e,t,n,r,i,s,a,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,s,a,o),this}absellipse(e,t,n,r,i,s,a,o){const l=new Ru(e,t,n,r,i,s,a,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Xu extends xo{constructor(e=1,t=8,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],s=[],a=[],o=[],l=new Gs,c=new gs;s.push(0,0,0),a.push(0,0,1),o.push(.5,.5);for(let h=0,u=3;h<=t;h++,u+=3){const i=n+h/t*r;l.x=e*Math.cos(i),l.y=e*Math.sin(i),s.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(s[u]/e+1)/2,c.y=(s[u+1]/e+1)/2,o.push(c.x,c.y)}for(let h=1;h<=t;h++)i.push(h,h+1,0);this.setIndex(i),this.setAttribute("position",new ho(s,3)),this.setAttribute("normal",new ho(a,3)),this.setAttribute("uv",new ho(o,2))}static fromJSON(e){return new Xu(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class qu extends Wu{constructor(e){super(e),this.uuid=as(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Wu).fromJSON(n))}return this}}const Yu=function(e,t,n=2){const r=t&&t.length,i=r?t[0]*n:e.length;let s=Zu(e,0,i,n,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c,h,u,d,p;if(r&&(s=function(e,t,n,r){const i=[];let s,a,o,l,c;for(s=0,a=t.length;s<a;s++)o=t[s]*r,l=s<a-1?t[s+1]*r:e.length,c=Zu(e,o,l,r,!1),c===c.next&&(c.steiner=!0),i.push(ad(c));for(i.sort(nd),s=0;s<i.length;s++)rd(i[s],n),n=Ku(n,n.next);return n}(e,t,s,n)),e.length>80*n){o=c=e[0],l=h=e[1];for(let t=n;t<i;t+=n)u=e[t],d=e[t+1],u<o&&(o=u),d<l&&(l=d),u>c&&(c=u),d>h&&(h=d);p=Math.max(c-o,h-l),p=0!==p?1/p:0}return Ju(s,a,n,o,l,p),a};function Zu(e,t,n,r,i){let s,a;if(i===function(e,t,n,r){let i=0;for(let s=t,a=n-r;s<n;s+=r)i+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return i}(e,t,n,r)>0)for(s=t;s<n;s+=r)a=gd(s,e[s],e[s+1],a);else for(s=n-r;s>=t;s-=r)a=gd(s,e[s],e[s+1],a);return a&&hd(a,a.next)&&(vd(a),a=a.next),a}function Ku(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!hd(r,r.next)&&0!==cd(r.prev,r,r.next))r=r.next;else{if(vd(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function Ju(e,t,n,r,i,s,a){if(!e)return;!a&&s&&function(e,t,n,r){let i=e;do{null===i.z&&(i.z=sd(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,s,a,o,l,c=1;do{for(n=e,e=null,s=null,a=0;n;){for(a++,r=n,o=0,t=0;t<c&&(o++,r=r.nextZ,r);t++);for(l=c;o>0||l>0&&r;)0!==o&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,o--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,s);let o,l,c=e;for(;e.prev!==e.next;)if(o=e.prev,l=e.next,s?$u(e,r,i,s):Qu(e))t.push(o.i/n),t.push(e.i/n),t.push(l.i/n),vd(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?Ju(e=ed(Ku(e),t,n),t,n,r,i,s,2):2===a&&td(e,t,n,r,i,s):Ju(Ku(e),t,n,r,i,s,1);break}}function Qu(e){const t=e.prev,n=e,r=e.next;if(cd(t,n,r)>=0)return!1;let i=e.next.next;for(;i!==e.prev;){if(od(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&cd(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function $u(e,t,n,r){const i=e.prev,s=e,a=e.next;if(cd(i,s,a)>=0)return!1;const o=i.x<s.x?i.x<a.x?i.x:a.x:s.x<a.x?s.x:a.x,l=i.y<s.y?i.y<a.y?i.y:a.y:s.y<a.y?s.y:a.y,c=i.x>s.x?i.x>a.x?i.x:a.x:s.x>a.x?s.x:a.x,h=i.y>s.y?i.y>a.y?i.y:a.y:s.y>a.y?s.y:a.y,u=sd(o,l,t,n,r),d=sd(c,h,t,n,r);let p=e.prevZ,f=e.nextZ;for(;p&&p.z>=u&&f&&f.z<=d;){if(p!==e.prev&&p!==e.next&&od(i.x,i.y,s.x,s.y,a.x,a.y,p.x,p.y)&&cd(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==e.prev&&f!==e.next&&od(i.x,i.y,s.x,s.y,a.x,a.y,f.x,f.y)&&cd(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=u;){if(p!==e.prev&&p!==e.next&&od(i.x,i.y,s.x,s.y,a.x,a.y,p.x,p.y)&&cd(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&od(i.x,i.y,s.x,s.y,a.x,a.y,f.x,f.y)&&cd(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function ed(e,t,n){let r=e;do{const i=r.prev,s=r.next.next;!hd(i,s)&&ud(i,r,r.next,s)&&fd(i,s)&&fd(s,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(s.i/n),vd(r),vd(r.next),r=e=s),r=r.next}while(r!==e);return Ku(r)}function td(e,t,n,r,i,s){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&ld(a,e)){let o=md(a,e);return a=Ku(a,a.next),o=Ku(o,o.next),Ju(a,t,n,r,i,s),void Ju(o,t,n,r,i,s)}e=e.next}a=a.next}while(a!==e)}function nd(e,t){return e.x-t.x}function rd(e,t){if(t=function(e,t){let n=t;const r=e.x,i=e.y;let s,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>a){if(a=e,e===r){if(i===n.y)return n;if(i===n.next.y)return n.next}s=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!s)return null;if(r===a)return s;const o=s,l=s.x,c=s.y;let h,u=1/0;n=s;do{r>=n.x&&n.x>=l&&r!==n.x&&od(i<c?r:a,i,l,c,i<c?a:r,i,n.x,n.y)&&(h=Math.abs(i-n.y)/(r-n.x),fd(n,e)&&(h<u||h===u&&(n.x>s.x||n.x===s.x&&id(s,n)))&&(s=n,u=h)),n=n.next}while(n!==o);return s}(e,t),t){const n=md(t,e);Ku(t,t.next),Ku(n,n.next)}}function id(e,t){return cd(e.prev,e,t.prev)<0&&cd(t.next,e,e.next)<0}function sd(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ad(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function od(e,t,n,r,i,s,a,o){return(i-a)*(t-o)-(e-a)*(s-o)>=0&&(e-a)*(r-o)-(n-a)*(t-o)>=0&&(n-a)*(s-o)-(i-a)*(r-o)>=0}function ld(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&ud(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(fd(e,t)&&fd(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,s=(e.y+t.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(cd(e.prev,e,t.prev)||cd(e,t.prev,t))||hd(e,t)&&cd(e.prev,e,e.next)>0&&cd(t.prev,t,t.next)>0)}function cd(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function hd(e,t){return e.x===t.x&&e.y===t.y}function ud(e,t,n,r){const i=pd(cd(e,t,n)),s=pd(cd(e,t,r)),a=pd(cd(n,r,e)),o=pd(cd(n,r,t));return i!==s&&a!==o||(!(0!==i||!dd(e,n,t))||(!(0!==s||!dd(e,r,t))||(!(0!==a||!dd(n,e,r))||!(0!==o||!dd(n,t,r)))))}function dd(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function pd(e){return e>0?1:e<0?-1:0}function fd(e,t){return cd(e.prev,e,e.next)<0?cd(e,t,e.next)>=0&&cd(e,e.prev,t)>=0:cd(e,t,e.prev)<0||cd(e,e.next,t)<0}function md(e,t){const n=new _d(e.i,e.x,e.y),r=new _d(t.i,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function gd(e,t,n,r){const i=new _d(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function vd(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function _d(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class xd{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return xd.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];yd(e),bd(n,e);let s=e.length;t.forEach(yd);for(let o=0;o<t.length;o++)r.push(s),s+=t[o].length,bd(n,t[o]);const a=Yu(n,r);for(let o=0;o<a.length;o+=3)i.push(a.slice(o,o+3));return i}}function yd(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function bd(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class wd extends xo{constructor(e=new qu([new gs(.5,.5),new gs(-.5,.5),new gs(-.5,-.5),new gs(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let a=0,o=e.length;a<o;a++){s(e[a])}function s(e){const s=[],a=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,h=void 0!==t.bevelThickness?t.bevelThickness:.2,u=void 0!==t.bevelSize?t.bevelSize:h-.1,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Sd;let g,v,_,x,y,b=!1;f&&(g=f.getSpacedPoints(o),b=!0,c=!1,v=f.computeFrenetFrames(o,!1),_=new Gs,x=new Gs,y=new Gs),c||(p=0,h=0,u=0,d=0);const w=e.extractPoints(a);let S=w.shape;const M=w.holes;if(!xd.isClockWise(S)){S=S.reverse();for(let e=0,t=M.length;e<t;e++){const t=M[e];xd.isClockWise(t)&&(M[e]=t.reverse())}}const E=xd.triangulateShape(S,M),T=S;for(let t=0,n=M.length;t<n;t++){const e=M[t];S=S.concat(e)}function A(e,t,n){return t.clone().multiplyScalar(n).add(e)}const C=S.length,P=E.length;function R(e,t,n){let r,i,s;const a=e.x-t.x,o=e.y-t.y,l=n.x-e.x,c=n.y-e.y,h=a*a+o*o,u=a*c-o*l;if(Math.abs(u)>Number.EPSILON){const u=Math.sqrt(h),d=Math.sqrt(l*l+c*c),p=t.x-o/u,f=t.y+a/u,m=((n.x-c/d-p)*c-(n.y+l/d-f)*l)/(a*c-o*l);r=p+a*m-e.x,i=f+o*m-e.y;const g=r*r+i*i;if(g<=2)return new gs(r,i);s=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?l>Number.EPSILON&&(e=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(r=-o,i=a,s=Math.sqrt(h)):(r=a,i=o,s=Math.sqrt(h/2))}return new gs(r/s,i/s)}const L=[];for(let t=0,n=T.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),L[t]=R(T[t],T[r],T[i]);const O=[];let z,D=L.concat();for(let t=0,n=M.length;t<n;t++){const e=M[t];z=[];for(let t=0,n=e.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),z[t]=R(e[t],e[r],e[i]);O.push(z),D=D.concat(z)}for(let t=0;t<p;t++){const e=t/p,n=h*Math.cos(e*Math.PI/2),r=u*Math.sin(e*Math.PI/2)+d;for(let t=0,i=T.length;t<i;t++){const e=A(T[t],L[t],r);N(e.x,e.y,-n)}for(let t=0,i=M.length;t<i;t++){const e=M[t];z=O[t];for(let t=0,i=e.length;t<i;t++){const i=A(e[t],z[t],r);N(i.x,i.y,-n)}}}const k=u+d;for(let t=0;t<C;t++){const e=c?A(S[t],D[t],k):S[t];b?(x.copy(v.normals[0]).multiplyScalar(e.x),_.copy(v.binormals[0]).multiplyScalar(e.y),y.copy(g[0]).add(x).add(_),N(y.x,y.y,y.z)):N(e.x,e.y,0)}for(let t=1;t<=o;t++)for(let e=0;e<C;e++){const n=c?A(S[e],D[e],k):S[e];b?(x.copy(v.normals[t]).multiplyScalar(n.x),_.copy(v.binormals[t]).multiplyScalar(n.y),y.copy(g[t]).add(x).add(_),N(y.x,y.y,y.z)):N(n.x,n.y,l/o*t)}for(let t=p-1;t>=0;t--){const e=t/p,n=h*Math.cos(e*Math.PI/2),r=u*Math.sin(e*Math.PI/2)+d;for(let t=0,i=T.length;t<i;t++){const e=A(T[t],L[t],r);N(e.x,e.y,l+n)}for(let t=0,i=M.length;t<i;t++){const e=M[t];z=O[t];for(let t=0,i=e.length;t<i;t++){const i=A(e[t],z[t],r);b?N(i.x,i.y+g[o-1].y,g[o-1].x+n):N(i.x,i.y,l+n)}}}function I(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=o+2*p;e<n;e++){const n=C*e,s=C*(e+1);U(t+r+n,t+i+n,t+i+s,t+r+s)}}}function N(e,t,n){s.push(e),s.push(t),s.push(n)}function F(e,t,i){B(e),B(t),B(i);const s=r.length/3,a=m.generateTopUV(n,r,s-3,s-2,s-1);H(a[0]),H(a[1]),H(a[2])}function U(e,t,i,s){B(e),B(t),B(s),B(t),B(i),B(s);const a=r.length/3,o=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);H(o[0]),H(o[1]),H(o[3]),H(o[1]),H(o[2]),H(o[3])}function B(e){r.push(s[3*e+0]),r.push(s[3*e+1]),r.push(s[3*e+2])}function H(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=C*e;for(let n=0;n<P;n++){const e=E[n];F(e[2]+t,e[1]+t,e[0]+t)}e=o+2*p,t=C*e;for(let n=0;n<P;n++){const e=E[n];F(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<P;e++){const t=E[e];F(t[2],t[1],t[0])}for(let e=0;e<P;e++){const t=E[e];F(t[0]+C*o,t[1]+C*o,t[2]+C*o)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;I(T,t),t+=T.length;for(let n=0,r=M.length;n<r;n++){const e=M[n];I(e,t),t+=e.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new ho(r,3)),this.setAttribute("uv",new ho(i,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){const t=e[r];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let i=0,s=e.shapes.length;i<s;i++){const r=t[e.shapes[i]];n.push(r)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new ju[r.type]).fromJSON(r)),new wd(n,e.options)}}const Sd={generateTopUV:function(e,t,n,r,i){const s=t[3*n],a=t[3*n+1],o=t[3*r],l=t[3*r+1],c=t[3*i],h=t[3*i+1];return[new gs(s,a),new gs(o,l),new gs(c,h)]},generateSideWallUV:function(e,t,n,r,i,s){const a=t[3*n],o=t[3*n+1],l=t[3*n+2],c=t[3*r],h=t[3*r+1],u=t[3*r+2],d=t[3*i],p=t[3*i+1],f=t[3*i+2],m=t[3*s],g=t[3*s+1],v=t[3*s+2];return Math.abs(o-h)<Math.abs(a-c)?[new gs(a,1-l),new gs(c,1-u),new gs(d,1-f),new gs(m,1-v)]:[new gs(o,1-l),new gs(h,1-u),new gs(p,1-f),new gs(g,1-v)]}};class Md extends xo{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const o=Math.min(s+a,Math.PI);let l=0;const c=[],h=new Gs,u=new Gs,d=[],p=[],f=[],m=[];for(let g=0;g<=n;g++){const d=[],v=g/n;let _=0;0==g&&0==s?_=.5/t:g==n&&o==Math.PI&&(_=-.5/t);for(let n=0;n<=t;n++){const o=n/t;h.x=-e*Math.cos(r+o*i)*Math.sin(s+v*a),h.y=e*Math.cos(s+v*a),h.z=e*Math.sin(r+o*i)*Math.sin(s+v*a),p.push(h.x,h.y,h.z),u.copy(h).normalize(),f.push(u.x,u.y,u.z),m.push(o+_,1-v),d.push(l++)}c.push(d)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=c[g][e+1],r=c[g][e],i=c[g+1][e],a=c[g+1][e+1];(0!==g||s>0)&&d.push(t,r,a),(g!==n-1||o<Math.PI)&&d.push(r,i,a)}this.setIndex(d),this.setAttribute("position",new ho(p,3)),this.setAttribute("normal",new ho(f,3)),this.setAttribute("uv",new ho(m,2))}static fromJSON(e){return new Md(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Ed extends jo{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Td extends ro{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Rs(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rs(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new gs(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ad extends Td{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new gs(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return os(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Rs(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Rs(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Rs(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Cd extends ro{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Rs(16777215),this.specular=new Rs(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rs(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new gs(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function Pd(e,t,n){return Ld(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function Rd(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function Ld(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Od(e){const t=e.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n}function zd(e,t,n){const r=e.length,i=new e.constructor(r);for(let s=0,a=0;a!==r;++s){const r=n[s]*t;for(let n=0;n!==t;++n)i[a++]=e[r+n]}return i}function Dd(e,t,n,r){let i=1,s=e[0];for(;void 0!==s&&void 0===s[r];)s=e[i++];if(void 0===s)return;let a=s[r];if(void 0!==a)if(Array.isArray(a))do{a=s[r],void 0!==a&&(t.push(s.time),n.push.apply(n,a)),s=e[i++]}while(void 0!==s);else if(void 0!==a.toArray)do{a=s[r],void 0!==a&&(t.push(s.time),a.toArray(n,n.length)),s=e[i++]}while(void 0!==s);else do{a=s[r],void 0!==a&&(t.push(s.time),n.push(a)),s=e[i++]}while(void 0!==s)}class kd{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let s;n:{r:if(!(e<r)){for(let s=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(i=r,r=t[++n],e<r)break t}s=t.length;break n}if(e>=i)break e;{const a=t[1];e<a&&(n=2,i=a);for(let s=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===s)break;if(r=i,i=t[--n-1],e>=i)break t}s=n,n=0}}for(;n<s;){const r=n+s>>>1;e<t[r]?s=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let s=0;s!==r;++s)t[s]=n[i+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Id extends kd{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,s=e+1,a=r[i],o=r[s];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=e,a=2*t-n;break;case 2402:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:s=e,o=2*n-t;break;case 2402:s=1,o=n+r[1]-r[0];break;default:s=e-1,o=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-n),this._offsetPrev=i*c,this._offsetNext=s*c}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,d=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,g=-u*m+2*u*f-u*p,v=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*p+1,_=(-1-d)*m+(1.5+d)*f+.5*p,x=d*m-d*f;for(let y=0;y!==a;++y)i[y]=g*s[c+y]+v*s[l+y]+_*s[o+y]+x*s[h+y];return i}}class Nd extends kd{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=(n-t)/(r-t),h=1-c;for(let u=0;u!==a;++u)i[u]=s[l+u]*h+s[o+u]*c;return i}}class Fd extends kd{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ud{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Rd(t,this.TimeBufferType),this.values=Rd(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Rd(e.times,Array),values:Rd(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Fd(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Nd(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Id(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,s=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==s&&n[s]>t;)--s;if(++s,0!==i||s!==r){i>=s&&(s=Math.max(s,1),i=s-1);const e=this.getValueSize();this.times=Pd(n,i,s),this.values=Pd(this.values,i*e,s*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(e=!1);let s=null;for(let a=0;a!==i;a++){const t=n[a];if("number"==typeof t&&isNaN(t)){e=!1;break}if(null!==s&&s>t){e=!1;break}s=t}if(void 0!==r&&Ld(r))for(let a=0,o=r.length;a!==o;++a){const t=r[a];if(isNaN(t)){e=!1;break}}return e}optimize(){const e=Pd(this.times),t=Pd(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),i=e.length-1;let s=1;for(let a=1;a<i;++a){let i=!1;const o=e[a];if(o!==e[a+1]&&(1!==a||o!==e[0]))if(r)i=!0;else{const e=a*n,r=e-n,s=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[r+a]||n!==t[s+a]){i=!0;break}}}if(i){if(a!==s){e[s]=e[a];const r=a*n,i=s*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++s}}if(i>0){e[s]=e[i];for(let e=i*n,r=s*n,a=0;a!==n;++a)t[r+a]=t[e+a];++s}return s!==e.length?(this.times=Pd(e,0,s),this.values=Pd(t,0,s*n)):(this.times=e,this.values=t),this}clone(){const e=Pd(this.times,0),t=Pd(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}Ud.prototype.TimeBufferType=Float32Array,Ud.prototype.ValueBufferType=Float32Array,Ud.prototype.DefaultInterpolation=2301;class Bd extends Ud{}Bd.prototype.ValueTypeName="bool",Bd.prototype.ValueBufferType=Array,Bd.prototype.DefaultInterpolation=2300,Bd.prototype.InterpolantFactoryMethodLinear=void 0,Bd.prototype.InterpolantFactoryMethodSmooth=void 0;class Hd extends Ud{}Hd.prototype.ValueTypeName="color";class Gd extends Ud{}Gd.prototype.ValueTypeName="number";class jd extends kd{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(n-t)/(r-t);let l=e*a;for(let c=l+a;l!==c;l+=4)Hs.slerpFlat(i,0,s,l-a,s,l,o);return i}}class Vd extends Ud{InterpolantFactoryMethodLinear(e){return new jd(this.times,this.values,this.getValueSize(),e)}}Vd.prototype.ValueTypeName="quaternion",Vd.prototype.DefaultInterpolation=2301,Vd.prototype.InterpolantFactoryMethodSmooth=void 0;class Wd extends Ud{}Wd.prototype.ValueTypeName="string",Wd.prototype.ValueBufferType=Array,Wd.prototype.DefaultInterpolation=2300,Wd.prototype.InterpolantFactoryMethodLinear=void 0,Wd.prototype.InterpolantFactoryMethodSmooth=void 0;class Xd extends Ud{}Xd.prototype.ValueTypeName="vector";class qd{constructor(e,t=-1,n,r=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=as(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let s=0,a=n.length;s!==a;++s)t.push(Yd(n[s]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,s=n.length;i!==s;++i)t.push(Ud.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,s=[];for(let a=0;a<i;a++){let e=[],o=[];e.push((a+i-1)%i,a,(a+1)%i),o.push(0,1,0);const l=Od(e);e=zd(e,1,l),o=zd(o,1,l),r||0!==e[0]||(e.push(i),o.push(o[0])),s.push(new Gd(".morphTargetInfluences["+t[a].name+"]",e,o).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let a=0,o=e.length;a<o;a++){const t=e[a],n=t.name.match(i);if(n&&n.length>1){const e=n[1];let i=r[e];i||(r[e]=i=[]),i.push(t)}}const s=[];for(const a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return s}static parseAnimation(e,t){if(!e)return null;const n=function(e,t,n,r,i){if(0!==n.length){const s=[],a=[];Dd(n,s,a,r),0!==s.length&&i.push(new e(t,s,a))}},r=[],i=e.name||"default",s=e.fps||30,a=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let c=0;c<l.length;c++){const e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let r=0;r<e[n].morphTargets.length;r++)t[e[n].morphTargets[r]]=-1;for(const i in t){const t=[],s=[];for(let r=0;r!==e[n].morphTargets.length;++r){const r=e[n];t.push(r.time),s.push(r.morphTarget===i?1:0)}r.push(new Gd(".morphTargetInfluence["+i+"]",t,s))}o=t.length*s}else{const i=".bones["+t[c].name+"]";n(Xd,i+".position",e,"pos",r),n(Vd,i+".quaternion",e,"rot",r),n(Xd,i+".scale",e,"scl",r)}}if(0===r.length)return null;return new this(i,o,r,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Yd(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Gd;case"vector":case"vector2":case"vector3":case"vector4":return Xd;case"color":return Hd;case"quaternion":return Vd;case"bool":case"boolean":return Bd;case"string":return Wd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];Dd(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Zd={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Kd{constructor(e,t,n){const r=this;let i,s=!1,a=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===s&&void 0!==r.onStart&&r.onStart(e,a,o),s=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,o),a===o&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const Jd=new Kd;class Qd{constructor(e){this.manager=void 0!==e?e:Jd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const $d={};class ep extends Error{constructor(e,t){super(e),this.response=t}}class tp extends Qd{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=Zd.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==$d[e])return void $d[e].push({onLoad:t,onProgress:n,onError:r});$d[e]=[],$d[e].push({onLoad:t,onProgress:n,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,o=this.responseType;fetch(s).then((t=>{if(200===t.status||0===t.status){if(t.status,"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=$d[e],r=t.body.getReader(),i=t.headers.get("Content-Length"),s=i?parseInt(i):0,a=0!==s;let o=0;const l=new ReadableStream({start(e){!function t(){r.read().then((({done:r,value:i})=>{if(r)e.close();else{o+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:a,loaded:o,total:s});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}}))}()}});return new Response(l)}throw new ep(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,a)));case"json":return e.json();default:if(void 0===a)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(a),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((t=>{Zd.add(e,t);const n=$d[e];delete $d[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{const n=$d[e];if(void 0===n)throw this.manager.itemError(e),t;delete $d[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class np extends Qd{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=Zd.get(e);if(void 0!==s)return i.manager.itemStart(e),setTimeout((function(){t&&t(s),i.manager.itemEnd(e)}),0),s;const a=xs("img");function o(){c(),Zd.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){c(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",o,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}class rp extends Qd{constructor(e){super(e)}load(e,t,n,r){const i=new qo,s=new np(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function o(n){s.load(e[n],(function(e){i.images[n]=e,a++,6===a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let l=0;l<e.length;++l)o(l);return i}}class ip extends Qd{constructor(e){super(e)}load(e,t,n,r){const i=new Is,s=new np(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class sp extends Va{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Rs(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class ap extends sp{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Va.DefaultUp),this.updateMatrix(),this.groundColor=new Rs(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const op=new xa,lp=new Gs,cp=new Gs;class hp{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new gs(512,512),this.map=null,this.mapPass=null,this.matrix=new xa,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new tl,this._frameExtents=new gs(1,1),this._viewportCount=1,this._viewports=[new Ns(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;lp.setFromMatrixPosition(e.matrixWorld),t.position.copy(lp),cp.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(cp),t.updateMatrixWorld(),op.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(op),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class up extends hp{constructor(){super(new Wo(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*ss*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class dp extends sp{constructor(e,t,n=0,r=Math.PI/3,i=0,s=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Va.DefaultUp),this.updateMatrix(),this.target=new Va,this.distance=n,this.angle=r,this.penumbra=i,this.decay=s,this.map=null,this.shadow=new up}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const pp=new xa,fp=new Gs,mp=new Gs;class gp extends hp{constructor(){super(new Wo(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new gs(4,2),this._viewportCount=6,this._viewports=[new Ns(2,1,1,1),new Ns(0,1,1,1),new Ns(3,1,1,1),new Ns(1,1,1,1),new Ns(3,0,1,1),new Ns(1,0,1,1)],this._cubeDirections=[new Gs(1,0,0),new Gs(-1,0,0),new Gs(0,0,1),new Gs(0,0,-1),new Gs(0,1,0),new Gs(0,-1,0)],this._cubeUps=[new Gs(0,1,0),new Gs(0,1,0),new Gs(0,1,0),new Gs(0,1,0),new Gs(0,0,1),new Gs(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),fp.setFromMatrixPosition(e.matrixWorld),n.position.copy(fp),mp.copy(n.position),mp.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(mp),n.updateMatrixWorld(),r.makeTranslation(-fp.x,-fp.y,-fp.z),pp.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(pp)}}class vp extends sp{constructor(e,t,n=0,r=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new gp}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class _p extends hp{constructor(){super(new fl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class xp extends sp{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Va.DefaultUp),this.updateMatrix(),this.target=new Va,this.shadow=new _p}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class yp extends sp{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class bp{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch(n){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class wp extends Qd{constructor(e){super(e),this.isImageBitmapLoader=!0,this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=Zd.get(e);if(void 0!==s)return i.manager.itemStart(e),setTimeout((function(){t&&t(s),i.manager.itemEnd(e)}),0),s;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Zd.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}class Sp{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Mp(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Mp();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Mp(){return("undefined"==typeof performance?Date:performance).now()}class Ep{constructor(e,t,n){let r,i,s;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let s=this.cumulativeWeight;if(0===s){for(let e=0;e!==r;++e)n[i+e]=n[e];s=t}else{s+=t;const e=t/s;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}s>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let o=t,l=t+t;o!==l;++o)if(n[o]!==n[o+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let i=n,s=r;i!==s;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let s=0;s!==i;++s)e[t+s]=e[n+s]}_slerp(e,t,n,r){Hs.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const s=this._workIndex*i;Hs.multiplyQuaternionsFlat(e,s,e,t,e,n),Hs.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,n,r,i){const s=1-r;for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]*s+e[n+a]*r}}_lerpAdditive(e,t,n,r,i){for(let s=0;s!==i;++s){const i=t+s;e[i]=e[i]+e[n+s]*r}}}const Tp=new RegExp("[\\[\\]\\.:\\/]","g"),Ap="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Cp=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]")+/(WCOD+)?/.source.replace("WCOD",Ap)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]")+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]")+"$"),Pp=["material","materials","bones","map"];class Rp{constructor(e,t,n){this.path=t,this.parsedPath=n||Rp.parseTrackName(t),this.node=Rp.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Rp.Composite(e,t,n):new Rp(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Tp,"")}static parseTrackName(e){const t=Cp.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==Pp.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const s=n(i.children);if(s)return s}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=Rp.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return;if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return;if(!e.material.materials)return;e=e.material.materials;break;case"bones":if(!e.skeleton)return;e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if(!e.material)return;if(!e.material.map)return;e=e.material.map;break;default:if(void 0===e[n])return;e=e[n]}if(void 0!==r){if(void 0===e[r])return;e=e[r]}}const s=e[r];if(void 0===s){t.nodeName;return}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return;if(!e.geometry.morphAttributes)return;void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Rp.Composite=class{constructor(e,t,n){const r=n||Rp.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Rp.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Rp.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Rp.prototype.GetterByBindingType=[Rp.prototype._getValue_direct,Rp.prototype._getValue_array,Rp.prototype._getValue_arrayElement,Rp.prototype._getValue_toArray],Rp.prototype.SetterByBindingTypeAndVersioning=[[Rp.prototype._setValue_direct,Rp.prototype._setValue_direct_setNeedsUpdate,Rp.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Rp.prototype._setValue_array,Rp.prototype._setValue_array_setNeedsUpdate,Rp.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Rp.prototype._setValue_arrayElement,Rp.prototype._setValue_arrayElement_setNeedsUpdate,Rp.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Rp.prototype._setValue_fromArray,Rp.prototype._setValue_fromArray_setNeedsUpdate,Rp.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Lp{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,s=i.length,a=new Array(s),o={endingStart:2400,endingEnd:2400};for(let l=0;l!==s;++l){const e=i[l].createInterpolant(null);a[l]=e,e.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,s=n/r;e.warp(1,i,t),this.warp(s,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,s=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=i,o[1]=i+n,l[0]=e/s,l[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;r<0||0===n?t=0:(this._startTime=null,t=n*r)}t*=this._updateTimeScale(e);const s=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;if(2501===this.blendMode)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(s),t[n].accumulateAdditive(a);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(s),t[n].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const s=2202===n;if(0===e)return-1===i?r:s&&1==(1&i)?t-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,s)}else this._setEndings(!1,!1,s);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(s&&1==(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let s=this._weightInterpolant;null===s&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,o=s.sampleValues;return a[0]=i,o[0]=t,a[1]=i+e,o[1]=n,this}}const Op=new Float32Array(1);class zp extends ts{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,s=e._propertyBindings,a=e._interpolants,o=n.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let h=0;h!==i;++h){const e=r[h],i=e.name;let l=c[i];if(void 0!==l)++l.referenceCount,s[h]=l;else{if(l=s[h],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,o,i));continue}const r=t&&t._propertyBindings[h].binding.parsedPath;l=new Ep(Rp.create(n,i,r),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,o,i),s[h]=l}a[h].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let s=i[t];if(void 0===s)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=s;else{const t=s.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,s=this._actionsByClip,a=s[i],o=a.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null;delete a.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete s[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const e=t[n];0==--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let s=r[t];void 0===s&&(s={},r[t]=s),s[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,s=this._bindingsByRootAndName,a=s[r],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete a[i],0===Object.keys(a).length&&delete s[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new Nd(new Float32Array(2),new Float32Array(2),1,Op),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let s="string"==typeof e?qd.findByName(r,e):e;const a=null!==s?s.uuid:e,o=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==s?s.blendMode:2500),void 0!==o){const e=o.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=o.knownActions[0],null===s&&(s=l._clip)}if(null===s)return null;const c=new Lp(this,s,t,n);return this._bindAction(c,l),this._addInactiveAction(c,a,i),c}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"==typeof e?qd.findByName(n,e):e,s=i?i.uuid:e,a=this._actionsByClip[s];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),s=this._accuIndex^=1;for(let l=0;l!==n;++l){t[l]._update(r,e,i,s)}const a=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)a[l].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,s=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,s._cacheIndex=i,t[i]=s,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const i in n){const e=n[i].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const i in r){const e=r[i];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Dp{constructor(e){this.value=e}clone(){return new Dp(void 0===this.value.clone?this.value:this.value.clone())}}class kp{constructor(e,t,n=0,r=1/0){this.ray=new _a(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new Ra,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera&&(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t)}intersectObject(e,t=!0,n=[]){return Np(e,this,n,t),n.sort(Ip),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)Np(e[r],this,n,t);return n.sort(Ip),n}}function Ip(e,t){return e.distance-t.distance}function Np(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)Np(r[e],t,n,!0)}}class Fp{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(os(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Up extends No{constructor(e,t,n){super(new Md(t,4,2),new io({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}class Bp extends yu{constructor(e=10,t=10,n=4473924,r=8947848){n=new Rs(n),r=new Rs(r);const i=t/2,s=e/t,a=e/2,o=[],l=[];for(let h=0,u=0,d=-a;h<=t;h++,d+=s){o.push(-a,0,d,a,0,d),o.push(d,0,-a,d,0,a);const e=h===i?n:r;e.toArray(l,u),u+=3,e.toArray(l,u),u+=3,e.toArray(l,u),u+=3,e.toArray(l,u),u+=3}const c=new xo;c.setAttribute("position",new ho(o,3)),c.setAttribute("color",new ho(l,3));super(c,new uu({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}const Hp=new Gs,Gp=new Gs,jp=new Gs;class Vp extends Va{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);let r=new xo;r.setAttribute("position",new ho([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new uu({fog:!1,toneMapped:!1});this.lightPlane=new vu(r,i),this.add(this.lightPlane),r=new xo,r.setAttribute("position",new ho([0,0,0,0,0,1],3)),this.targetLine=new vu(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Hp.setFromMatrixPosition(this.light.matrixWorld),Gp.setFromMatrixPosition(this.light.target.matrixWorld),jp.subVectors(Gp,Hp),this.lightPlane.lookAt(Gp),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Gp),this.targetLine.scale.z=jp.length()}}const Wp=new Gs,Xp=new Vo;class qp extends yu{constructor(e){const t=new xo,n=new uu({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],s={};function a(e,t){o(e),o(t)}function o(e){r.push(0,0,0),i.push(0,0,0),void 0===s[e]&&(s[e]=[]),s[e].push(r.length/3-1)}a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4"),t.setAttribute("position",new ho(r,3)),t.setAttribute("color",new ho(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const l=new Rs(16755200),c=new Rs(16711680),h=new Rs(43775),u=new Rs(16777215),d=new Rs(3355443);this.setColors(l,c,h,u,d)}setColors(e,t,n,r,i){const s=this.geometry.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,t.r,t.g,t.b),s.setXYZ(25,t.r,t.g,t.b),s.setXYZ(26,t.r,t.g,t.b),s.setXYZ(27,t.r,t.g,t.b),s.setXYZ(28,t.r,t.g,t.b),s.setXYZ(29,t.r,t.g,t.b),s.setXYZ(30,t.r,t.g,t.b),s.setXYZ(31,t.r,t.g,t.b),s.setXYZ(32,n.r,n.g,n.b),s.setXYZ(33,n.r,n.g,n.b),s.setXYZ(34,n.r,n.g,n.b),s.setXYZ(35,n.r,n.g,n.b),s.setXYZ(36,n.r,n.g,n.b),s.setXYZ(37,n.r,n.g,n.b),s.setXYZ(38,r.r,r.g,r.b),s.setXYZ(39,r.r,r.g,r.b),s.setXYZ(40,i.r,i.g,i.b),s.setXYZ(41,i.r,i.g,i.b),s.setXYZ(42,i.r,i.g,i.b),s.setXYZ(43,i.r,i.g,i.b),s.setXYZ(44,i.r,i.g,i.b),s.setXYZ(45,i.r,i.g,i.b),s.setXYZ(46,i.r,i.g,i.b),s.setXYZ(47,i.r,i.g,i.b),s.setXYZ(48,i.r,i.g,i.b),s.setXYZ(49,i.r,i.g,i.b),s.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;Xp.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Yp("c",t,e,Xp,0,0,-1),Yp("t",t,e,Xp,0,0,1),Yp("n1",t,e,Xp,-1,-1,-1),Yp("n2",t,e,Xp,1,-1,-1),Yp("n3",t,e,Xp,-1,1,-1),Yp("n4",t,e,Xp,1,1,-1),Yp("f1",t,e,Xp,-1,-1,1),Yp("f2",t,e,Xp,1,-1,1),Yp("f3",t,e,Xp,-1,1,1),Yp("f4",t,e,Xp,1,1,1),Yp("u1",t,e,Xp,.7,1.1,-1),Yp("u2",t,e,Xp,-.7,1.1,-1),Yp("u3",t,e,Xp,0,2,-1),Yp("cf1",t,e,Xp,-1,0,1),Yp("cf2",t,e,Xp,1,0,1),Yp("cf3",t,e,Xp,0,-1,1),Yp("cf4",t,e,Xp,0,1,1),Yp("cn1",t,e,Xp,-1,0,-1),Yp("cn2",t,e,Xp,1,0,-1),Yp("cn3",t,e,Xp,0,-1,-1),Yp("cn4",t,e,Xp,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Yp(e,t,n,r,i,s,a){Wp.set(i,s,a).unproject(r);const o=t[e];if(void 0!==o){const e=n.getAttribute("position");for(let t=0,n=o.length;t<n;t++)e.setXYZ(o[t],Wp.x,Wp.y,Wp.z)}}class Zp extends yu{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new xo;n.setAttribute("position",new ho(t,3)),n.setAttribute("color",new ho([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new uu({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new Rs,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Kp{constructor(){this.type="ShapePath",this.color=new Rs,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Wu,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,s){return this.currentPath.bezierCurveTo(e,t,n,r,i,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let r=!1;for(let i=n-1,s=0;s<n;i=s++){let n=t[i],a=t[s],o=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[s],o=-o,a=t[i],l=-l),e.y<n.y||e.y>a.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-o*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(a.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=a.x)return!0}}return r}const n=xd.isClockWise,r=this.subPaths;if(0===r.length)return[];let i,s,a;const o=[];if(1===r.length)return s=r[0],a=new qu,a.curves=s.curves,o.push(a),o;let l=!n(r[0].getPoints());l=e?!l:l;const c=[],h=[];let u,d,p=[],f=0;h[f]=void 0,p[f]=[];for(let m=0,g=r.length;m<g;m++)s=r[m],u=s.getPoints(),i=n(u),i=e?!i:i,i?(!l&&h[f]&&f++,h[f]={s:new qu,p:u},h[f].s.curves=s.curves,l&&f++,p[f]=[]):p[f].push({h:s,p:u[0]});if(!h[0])return function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new qu;i.curves=r.curves,t.push(i)}return t}(r);if(h.length>1){let e=!1,n=0;for(let t=0,r=h.length;t<r;t++)c[t]=[];for(let r=0,i=h.length;r<i;r++){const i=p[r];for(let s=0;s<i.length;s++){const a=i[s];let o=!0;for(let i=0;i<h.length;i++)t(a.p,h[i].p)&&(r!==i&&n++,o?(o=!1,c[i].push(a)):e=!0);o&&c[r].push(a)}}n>0&&!1===e&&(p=c)}for(let m=0,g=h.length;m<g;m++){a=h[m].s,o.push(a),d=p[m];for(let e=0,t=d.length;e<t;e++)a.holes.push(d[e].h)}return o}}class Jp extends Fs{constructor(e,t,n){super(e,t,n),this.samples=4}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"144"}})),"undefined"!=typeof window&&(window.__THREE__||(window.__THREE__="144"));const Qp={type:"change"},$p={type:"start"},ef={type:"end"};class tf extends ts{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Gs,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Yi,MIDDLE:Zi,RIGHT:Ki},this.touches={ONE:Ji,TWO:$i},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",j),this._domElementKeyEvents=e},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(Qp),n.update(),i=r.NONE},this.update=function(){const t=new Gs,u=(new Hs).setFromUnitVectors(e.up,new Gs(0,1,0)),d=u.clone().invert(),p=new Gs,f=new Hs,m=2*Math.PI;return function(){const e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(u),a.setFromVector3(t),n.autoRotate&&i===r.NONE&&S(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(a.theta+=o.theta*n.dampingFactor,a.phi+=o.phi*n.dampingFactor):(a.theta+=o.theta,a.phi+=o.phi);let g=n.minAzimuthAngle,v=n.maxAzimuthAngle;return isFinite(g)&&isFinite(v)&&(g<-Math.PI?g+=m:g>Math.PI&&(g-=m),v<-Math.PI?v+=m:v>Math.PI&&(v-=m),a.theta=g<=v?Math.max(g,Math.min(v,a.theta)):a.theta>(g+v)/2?Math.max(g,a.theta):Math.min(v,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=l,a.radius=Math.max(n.minDistance,Math.min(n.maxDistance,a.radius)),!0===n.enableDamping?n.target.addScaledVector(c,n.dampingFactor):n.target.add(c),t.setFromSpherical(a),t.applyQuaternion(d),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(o.theta*=1-n.dampingFactor,o.phi*=1-n.dampingFactor,c.multiplyScalar(1-n.dampingFactor)):(o.set(0,0,0),c.set(0,0,0)),l=1,!!(h||p.distanceToSquared(n.object.position)>s||8*(1-f.dot(n.object.quaternion))>s)&&(n.dispatchEvent(Qp),p.copy(n.object.position),f.copy(n.object.quaternion),h=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",V),n.domElement.removeEventListener("pointerdown",F),n.domElement.removeEventListener("pointercancel",H),n.domElement.removeEventListener("wheel",G),n.domElement.removeEventListener("pointermove",U),n.domElement.removeEventListener("pointerup",B),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",j)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=r.NONE;const s=1e-6,a=new Fp,o=new Fp;let l=1;const c=new Gs;let h=!1;const u=new gs,d=new gs,p=new gs,f=new gs,m=new gs,g=new gs,v=new gs,_=new gs,x=new gs,y=[],b={};function w(){return Math.pow(.95,n.zoomSpeed)}function S(e){o.theta-=e}function M(e){o.phi-=e}const E=function(){const e=new Gs;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),c.add(e)}}(),T=function(){const e=new Gs;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),c.add(e)}}(),A=function(){const e=new Gs;return function(t,r){const i=n.domElement;if(n.object.isPerspectiveCamera){const s=n.object.position;e.copy(s).sub(n.target);let a=e.length();a*=Math.tan(n.object.fov/2*Math.PI/180),E(2*t*a/i.clientHeight,n.object.matrix),T(2*r*a/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(E(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),T(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):n.enablePan=!1}}();function C(e){n.object.isPerspectiveCamera?l/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),h=!0):n.enableZoom=!1}function P(e){n.object.isPerspectiveCamera?l*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),h=!0):n.enableZoom=!1}function R(e){u.set(e.clientX,e.clientY)}function L(e){f.set(e.clientX,e.clientY)}function O(){if(1===y.length)u.set(y[0].pageX,y[0].pageY);else{const e=.5*(y[0].pageX+y[1].pageX),t=.5*(y[0].pageY+y[1].pageY);u.set(e,t)}}function z(){if(1===y.length)f.set(y[0].pageX,y[0].pageY);else{const e=.5*(y[0].pageX+y[1].pageX),t=.5*(y[0].pageY+y[1].pageY);f.set(e,t)}}function D(){const e=y[0].pageX-y[1].pageX,t=y[0].pageY-y[1].pageY,n=Math.sqrt(e*e+t*t);v.set(0,n)}function k(e){if(1==y.length)d.set(e.pageX,e.pageY);else{const t=q(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);d.set(n,r)}p.subVectors(d,u).multiplyScalar(n.rotateSpeed);const t=n.domElement;S(2*Math.PI*p.x/t.clientHeight),M(2*Math.PI*p.y/t.clientHeight),u.copy(d)}function I(e){if(1===y.length)m.set(e.pageX,e.pageY);else{const t=q(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);m.set(n,r)}g.subVectors(m,f).multiplyScalar(n.panSpeed),A(g.x,g.y),f.copy(m)}function N(e){const t=q(e),r=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(r*r+i*i);_.set(0,s),x.set(0,Math.pow(_.y/v.y,n.zoomSpeed)),C(x.y),v.copy(_)}function F(e){!1!==n.enabled&&(0===y.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",U),n.domElement.addEventListener("pointerup",B)),function(e){y.push(e)}(e),"touch"===e.pointerType?function(e){switch(X(e),y.length){case 1:switch(n.touches.ONE){case Ji:if(!1===n.enableRotate)return;O(),i=r.TOUCH_ROTATE;break;case Qi:if(!1===n.enablePan)return;z(),i=r.TOUCH_PAN;break;default:i=r.NONE}break;case 2:switch(n.touches.TWO){case $i:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&D(),n.enablePan&&z(),i=r.TOUCH_DOLLY_PAN;break;case es:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&D(),n.enableRotate&&O(),i=r.TOUCH_DOLLY_ROTATE;break;default:i=r.NONE}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent($p)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Zi:if(!1===n.enableZoom)return;!function(e){v.set(e.clientX,e.clientY)}(e),i=r.DOLLY;break;case Yi:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;L(e),i=r.PAN}else{if(!1===n.enableRotate)return;R(e),i=r.ROTATE}break;case Ki:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;R(e),i=r.ROTATE}else{if(!1===n.enablePan)return;L(e),i=r.PAN}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent($p)}(e))}function U(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(X(e),i){case r.TOUCH_ROTATE:if(!1===n.enableRotate)return;k(e),n.update();break;case r.TOUCH_PAN:if(!1===n.enablePan)return;I(e),n.update();break;case r.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&N(e),n.enablePan&&I(e)}(e),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&N(e),n.enableRotate&&k(e)}(e),n.update();break;default:i=r.NONE}}(e):function(e){switch(i){case r.ROTATE:if(!1===n.enableRotate)return;!function(e){d.set(e.clientX,e.clientY),p.subVectors(d,u).multiplyScalar(n.rotateSpeed);const t=n.domElement;S(2*Math.PI*p.x/t.clientHeight),M(2*Math.PI*p.y/t.clientHeight),u.copy(d),n.update()}(e);break;case r.DOLLY:if(!1===n.enableZoom)return;!function(e){_.set(e.clientX,e.clientY),x.subVectors(_,v),x.y>0?C(w()):x.y<0&&P(w()),v.copy(_),n.update()}(e);break;case r.PAN:if(!1===n.enablePan)return;!function(e){m.set(e.clientX,e.clientY),g.subVectors(m,f).multiplyScalar(n.panSpeed),A(g.x,g.y),f.copy(m),n.update()}(e)}}(e))}function B(e){W(e),0===y.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",U),n.domElement.removeEventListener("pointerup",B)),n.dispatchEvent(ef),i=r.NONE}function H(e){W(e)}function G(e){!1!==n.enabled&&!1!==n.enableZoom&&i===r.NONE&&(e.preventDefault(),n.dispatchEvent($p),function(e){e.deltaY<0?P(w()):e.deltaY>0&&C(w()),n.update()}(e),n.dispatchEvent(ef))}function j(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:A(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:A(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:A(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:A(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function V(e){!1!==n.enabled&&e.preventDefault()}function W(e){delete b[e.pointerId];for(let t=0;t<y.length;t++)if(y[t].pointerId==e.pointerId)return void y.splice(t,1)}function X(e){let t=b[e.pointerId];void 0===t&&(t=new gs,b[e.pointerId]=t),t.set(e.pageX,e.pageY)}function q(e){const t=e.pointerId===y[0].pointerId?y[1]:y[0];return b[t.pointerId]}n.domElement.addEventListener("contextmenu",V),n.domElement.addEventListener("pointerdown",F),n.domElement.addEventListener("pointercancel",H),n.domElement.addEventListener("wheel",G,{passive:!1}),this.update()}}class nf{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=t[r],s=e+i,a=Math.abs(e)<Math.abs(i)?e-(s-i):i-(s-e);a&&(t[n++]=a),e=s}return t[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let t,n,r,i=this._n,s=0;if(i>0){for(s=e[--i];i>0&&(t=s,n=e[--i],s=t+n,r=n-(s-t),!r););i>0&&(r<0&&e[i-1]<0||r>0&&e[i-1]>0)&&(n=2*r,t=s+n,n==t-s&&(s=t))}return s}}function rf(e){return Array.from(function*(e){for(const t of e)yield*t}(e))}var sf=1e-6,af=Math.PI,of=af/2,lf=af/4,cf=2*af,hf=180/af,uf=af/180,df=Math.abs,pf=Math.atan,ff=Math.atan2,mf=Math.cos,gf=Math.exp,vf=Math.log,_f=Math.sin,xf=Math.sign||function(e){return e>0?1:e<0?-1:0},yf=Math.sqrt,bf=Math.tan;function wf(e){return e>1?of:e<-1?-of:Math.asin(e)}function Sf(){}function Mf(e,t){e&&Tf.hasOwnProperty(e.type)&&Tf[e.type](e,t)}var Ef={Feature:function(e,t){Mf(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Mf(n[r].geometry,t)}},Tf={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Af(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Af(n[r],t,0)},Polygon:function(e,t){Cf(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Cf(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Mf(n[r],t)}};function Af(e,t,n){var r,i=-1,s=e.length-n;for(t.lineStart();++i<s;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function Cf(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Af(e[n],t,1);t.polygonEnd()}function Pf(e){return[ff(e[1],e[0]),wf(e[2])]}function Rf(e){var t=e[0],n=e[1],r=mf(n);return[r*mf(t),r*_f(t),_f(n)]}function Lf(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Of(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function zf(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Df(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function kf(e){var t=yf(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function If(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function Nf(e,t){return[df(e)>af?e+Math.round(-e/cf)*cf:e,t]}function Ff(e,t,n){return(e%=cf)?t||n?If(Bf(e),Hf(t,n)):Bf(e):t||n?Hf(t,n):Nf}function Uf(e){return function(t,n){return[(t+=e)>af?t-cf:t<-af?t+cf:t,n]}}function Bf(e){var t=Uf(e);return t.invert=Uf(-e),t}function Hf(e,t){var n=mf(e),r=_f(e),i=mf(t),s=_f(t);function a(e,t){var a=mf(t),o=mf(e)*a,l=_f(e)*a,c=_f(t),h=c*n+o*r;return[ff(l*i-h*s,o*n-c*r),wf(h*i+l*s)]}return a.invert=function(e,t){var a=mf(t),o=mf(e)*a,l=_f(e)*a,c=_f(t),h=c*i-l*s;return[ff(l*i+c*s,o*n+h*r),wf(h*n-o*r)]},a}function Gf(e,t){(t=Rf(t))[0]-=e,kf(t);var n,r=(n=-t[1])>1?0:n<-1?af:Math.acos(n);return((-t[2]<0?-r:r)+cf-sf)%cf}function jf(){var e,t=[];return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:Sf,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function Vf(e,t){return df(e[0]-t[0])<sf&&df(e[1]-t[1])<sf}function Wf(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Xf(e,t,n,r,i){var s,a,o=[],l=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],a=e[t];if(Vf(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),s=0;s<t;++s)i.point((r=e[s])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}o.push(n=new Wf(r,e,null,!0)),l.push(n.o=new Wf(r,null,n,!1)),o.push(n=new Wf(a,e,null,!1)),l.push(n.o=new Wf(a,null,n,!0))}})),o.length){for(l.sort(t),qf(o),qf(l),s=0,a=l.length;s<a;++s)l[s].e=n=!n;for(var c,h,u=o[0];;){for(var d=u,p=!0;d.v;)if((d=d.n)===u)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(s=0,a=c.length;s<a;++s)i.point((h=c[s])[0],h[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p)for(c=d.p.z,s=c.length-1;s>=0;--s)i.point((h=c[s])[0],h[1]);else r(d.x,d.p.x,-1,i);d=d.p}c=(d=d.o).z,p=!p}while(!d.v);i.lineEnd()}}}function qf(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function Yf(e){return df(e[0])<=af?e[0]:xf(e[0])*((df(e[0])+af)%cf-af)}function Zf(e,t,n,r){return function(i){var s,a,o,l=t(i),c=jf(),h=t(c),u=!1,d={point:p,lineStart:m,lineEnd:g,polygonStart:function(){d.point=v,d.lineStart=_,d.lineEnd=x,a=[],s=[]},polygonEnd:function(){d.point=p,d.lineStart=m,d.lineEnd=g,a=rf(a);var e=function(e,t){var n=Yf(t),r=t[1],i=_f(r),s=[_f(n),-mf(n),0],a=0,o=0,l=new nf;1===i?r=of+sf:-1===i&&(r=-of-sf);for(var c=0,h=e.length;c<h;++c)if(d=(u=e[c]).length)for(var u,d,p=u[d-1],f=Yf(p),m=p[1]/2+lf,g=_f(m),v=mf(m),_=0;_<d;++_,f=y,g=w,v=S,p=x){var x=u[_],y=Yf(x),b=x[1]/2+lf,w=_f(b),S=mf(b),M=y-f,E=M>=0?1:-1,T=E*M,A=T>af,C=g*w;if(l.add(ff(C*E*_f(T),v*S+C*mf(T))),a+=A?M+E*cf:M,A^f>=n^y>=n){var P=Of(Rf(p),Rf(x));kf(P);var R=Of(s,P);kf(R);var L=(A^M>=0?-1:1)*wf(R[2]);(r>L||r===L&&(P[0]||P[1]))&&(o+=A^M>=0?1:-1)}}return(a<-sf||a<sf&&l<-1e-12)^1&o}(s,r);a.length?(u||(i.polygonStart(),u=!0),Xf(a,Jf,e,n,i)):e&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),a=s=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(t,n){e(t,n)&&i.point(t,n)}function f(e,t){l.point(e,t)}function m(){d.point=f,l.lineStart()}function g(){d.point=p,l.lineEnd()}function v(e,t){o.push([e,t]),h.point(e,t)}function _(){h.lineStart(),o=[]}function x(){v(o[0][0],o[0][1]),h.lineEnd();var e,t,n,r,l=h.clean(),d=c.result(),p=d.length;if(o.pop(),s.push(o),o=null,p)if(1&l){if((t=(n=d[0]).length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}}else p>1&&2&l&&d.push(d.pop().concat(d.shift())),a.push(d.filter(Kf))}return d}}function Kf(e){return e.length>1}function Jf(e,t){return((e=e.x)[0]<0?e[1]-of-sf:of-e[1])-((t=t.x)[0]<0?t[1]-of-sf:of-t[1])}Nf.invert=Nf;const Qf=Zf((function(){return!0}),(function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(s,a){var o=s>0?af:-af,l=df(s-n);df(l-af)<sf?(e.point(n,r=(r+a)/2>0?of:-of),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(o,r),e.point(s,r),t=0):i!==o&&l>=af&&(df(n-i)<sf&&(n-=i*sf),df(s-o)<sf&&(s-=o*sf),r=function(e,t,n,r){var i,s,a=_f(e-n);return df(a)>sf?pf((_f(t)*(s=mf(r))*_f(n)-_f(r)*(i=mf(t))*_f(e))/(i*s*a)):(t+r)/2}(n,r,s,a),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(o,r),t=0),e.point(n=s,r=a),i=o},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var i;if(null==e)i=n*of,r.point(-af,i),r.point(0,i),r.point(af,i),r.point(af,0),r.point(af,-i),r.point(0,-i),r.point(-af,-i),r.point(-af,0),r.point(-af,i);else if(df(e[0]-t[0])>sf){var s=e[0]<t[0]?af:-af;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}),[-af,-of]);function $f(e){var t=mf(e),n=6*uf,r=t>0,i=df(t)>sf;function s(e,n){return mf(e)*mf(n)>t}function a(e,n,r){var i=[1,0,0],s=Of(Rf(e),Rf(n)),a=Lf(s,s),o=s[0],l=a-o*o;if(!l)return!r&&e;var c=t*a/l,h=-t*o/l,u=Of(i,s),d=Df(i,c);zf(d,Df(s,h));var p=u,f=Lf(d,p),m=Lf(p,p),g=f*f-m*(Lf(d,d)-1);if(!(g<0)){var v=yf(g),_=Df(p,(-f-v)/m);if(zf(_,d),_=Pf(_),!r)return _;var x,y=e[0],b=n[0],w=e[1],S=n[1];b<y&&(x=y,y=b,b=x);var M=b-y,E=df(M-af)<sf;if(!E&&S<w&&(x=w,w=S,S=x),E||M<sf?E?w+S>0^_[1]<(df(_[0]-y)<sf?w:S):w<=_[1]&&_[1]<=S:M>af^(y<=_[0]&&_[0]<=b)){var T=Df(p,(-f+v)/m);return zf(T,d),[_,Pf(T)]}}}function o(t,n){var i=r?e:af-e,s=0;return t<-i?s|=1:t>i&&(s|=2),n<-i?s|=4:n>i&&(s|=8),s}return Zf(s,(function(e){var t,n,l,c,h;return{lineStart:function(){c=l=!1,h=1},point:function(u,d){var p,f=[u,d],m=s(u,d),g=r?m?0:o(u,d):m?o(u+(u<0?af:-af),d):0;if(!t&&(c=l=m)&&e.lineStart(),m!==l&&(!(p=a(t,f))||Vf(t,p)||Vf(f,p))&&(f[2]=1),m!==l)h=0,m?(e.lineStart(),p=a(f,t),e.point(p[0],p[1])):(p=a(t,f),e.point(p[0],p[1],2),e.lineEnd()),t=p;else if(i&&t&&r^m){var v;g&n||!(v=a(f,t,!0))||(h=0,r?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1],3)))}!m||t&&Vf(t,f)||e.point(f[0],f[1]),t=f,l=m,n=g},lineEnd:function(){l&&e.lineEnd(),t=null},clean:function(){return h|(c&&l)<<1}}}),(function(t,r,i,s){!function(e,t,n,r,i,s){if(n){var a=mf(t),o=_f(t),l=r*n;null==i?(i=t+r*cf,s=t-l/2):(i=Gf(a,i),s=Gf(a,s),(r>0?i<s:i>s)&&(i+=r*cf));for(var c,h=i;r>0?h>s:h<s;h-=l)c=Pf([a,-o*mf(h),-o*_f(h)]),e.point(c[0],c[1])}}(s,e,n,i,t,r)}),r?[0,-e]:[-af,e-af])}function em(e,t,n,r){function i(i,s){return e<=i&&i<=n&&t<=s&&s<=r}function s(i,s,o,c){var h=0,u=0;if(null==i||(h=a(i,o))!==(u=a(s,o))||l(i,s)<0^o>0)do{c.point(0===h||3===h?e:n,h>1?r:t)}while((h=(h+o+4)%4)!==u);else c.point(s[0],s[1])}function a(r,i){return df(r[0]-e)<sf?i>0?0:3:df(r[0]-n)<sf?i>0?2:1:df(r[1]-t)<sf?i>0?1:0:i>0?3:2}function o(e,t){return l(e.x,t.x)}function l(e,t){var n=a(e,1),r=a(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var l,c,h,u,d,p,f,m,g,v,_,x=a,y=jf(),b={point:w,lineStart:function(){b.point=S,c&&c.push(h=[]);v=!0,g=!1,f=m=NaN},lineEnd:function(){l&&(S(u,d),p&&g&&y.rejoin(),l.push(y.result()));b.point=w,g&&x.lineEnd()},polygonStart:function(){x=y,l=[],c=[],_=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,i=c.length;n<i;++n)for(var s,a,o=c[n],l=1,h=o.length,u=o[0],d=u[0],p=u[1];l<h;++l)s=d,a=p,d=(u=o[l])[0],p=u[1],a<=r?p>r&&(d-s)*(r-a)>(p-a)*(e-s)&&++t:p<=r&&(d-s)*(r-a)<(p-a)*(e-s)&&--t;return t}(),n=_&&t,i=(l=rf(l)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),s(null,null,1,a),a.lineEnd()),i&&Xf(l,o,t,s,a),a.polygonEnd());x=a,l=c=h=null}};function w(e,t){i(e,t)&&x.point(e,t)}function S(s,a){var o=i(s,a);if(c&&h.push([s,a]),v)u=s,d=a,p=o,v=!1,o&&(x.lineStart(),x.point(s,a));else if(o&&g)x.point(s,a);else{var l=[f=Math.max(-1e9,Math.min(1e9,f)),m=Math.max(-1e9,Math.min(1e9,m))],y=[s=Math.max(-1e9,Math.min(1e9,s)),a=Math.max(-1e9,Math.min(1e9,a))];!function(e,t,n,r,i,s){var a,o=e[0],l=e[1],c=0,h=1,u=t[0]-o,d=t[1]-l;if(a=n-o,u||!(a>0)){if(a/=u,u<0){if(a<c)return;a<h&&(h=a)}else if(u>0){if(a>h)return;a>c&&(c=a)}if(a=i-o,u||!(a<0)){if(a/=u,u<0){if(a>h)return;a>c&&(c=a)}else if(u>0){if(a<c)return;a<h&&(h=a)}if(a=r-l,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<h&&(h=a)}else if(d>0){if(a>h)return;a>c&&(c=a)}if(a=s-l,d||!(a<0)){if(a/=d,d<0){if(a>h)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<h&&(h=a)}return c>0&&(e[0]=o+c*u,e[1]=l+c*d),h<1&&(t[0]=o+h*u,t[1]=l+h*d),!0}}}}}(l,y,e,t,n,r)?o&&(x.lineStart(),x.point(s,a),_=!1):(g||(x.lineStart(),x.point(l[0],l[1])),x.point(y[0],y[1]),o||x.lineEnd(),_=!1)}f=s,m=a,g=o}return b}}const tm=e=>e;var nm=1/0,rm=nm,im=-nm,sm=im;const am={point:function(e,t){e<nm&&(nm=e);e>im&&(im=e);t<rm&&(rm=t);t>sm&&(sm=t)},lineStart:Sf,lineEnd:Sf,polygonStart:Sf,polygonEnd:Sf,result:function(){var e=[[nm,rm],[im,sm]];return im=sm=-(rm=nm=1/0),e}};function om(e){return function(t){var n=new lm;for(var r in e)n[r]=e[r];return n.stream=t,n}}function lm(){}function cm(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),function(e,t){e&&Ef.hasOwnProperty(e.type)?Ef[e.type](e,t):Mf(e,t)}(n,e.stream(am)),t(am.result()),null!=r&&e.clipExtent(r),e}function hm(e,t,n){return cm(e,(function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],s=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+t[0][0]+(r-s*(n[1][0]+n[0][0]))/2,o=+t[0][1]+(i-s*(n[1][1]+n[0][1]))/2;e.scale(150*s).translate([a,o])}),n)}lm.prototype={constructor:lm,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var um=mf(30*uf);function dm(e,t){return+t?function(e,t){function n(r,i,s,a,o,l,c,h,u,d,p,f,m,g){var v=c-r,_=h-i,x=v*v+_*_;if(x>4*t&&m--){var y=a+d,b=o+p,w=l+f,S=yf(y*y+b*b+w*w),M=wf(w/=S),E=df(df(w)-1)<sf||df(s-u)<sf?(s+u)/2:ff(b,y),T=e(E,M),A=T[0],C=T[1],P=A-r,R=C-i,L=_*P-v*R;(L*L/x>t||df((v*P+_*R)/x-.5)>.3||a*d+o*p+l*f<um)&&(n(r,i,s,a,o,l,A,C,E,y/=S,b/=S,w,m,g),g.point(A,C),n(A,C,E,y,b,w,c,h,u,d,p,f,m,g))}}return function(t){var r,i,s,a,o,l,c,h,u,d,p,f,m={point:g,lineStart:v,lineEnd:x,polygonStart:function(){t.polygonStart(),m.lineStart=y},polygonEnd:function(){t.polygonEnd(),m.lineStart=v}};function g(n,r){n=e(n,r),t.point(n[0],n[1])}function v(){h=NaN,m.point=_,t.lineStart()}function _(r,i){var s=Rf([r,i]),a=e(r,i);n(h,u,c,d,p,f,h=a[0],u=a[1],c=r,d=s[0],p=s[1],f=s[2],16,t),t.point(h,u)}function x(){m.point=g,t.lineEnd()}function y(){v(),m.point=b,m.lineEnd=w}function b(e,t){_(r=e,t),i=h,s=u,a=d,o=p,l=f,m.point=_}function w(){n(h,u,c,d,p,f,i,s,r,a,o,l,16,t),m.lineEnd=x,x()}return m}}(e,t):function(e){return om({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var pm=om({point:function(e,t){this.stream.point(e*uf,t*uf)}});function fm(e,t,n,r,i,s){if(!s)return function(e,t,n,r,i){function s(s,a){return[t+e*(s*=r),n-e*(a*=i)]}return s.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},s}(e,t,n,r,i);var a=mf(s),o=_f(s),l=a*e,c=o*e,h=a/e,u=o/e,d=(o*n-a*t)/e,p=(o*t+a*n)/e;function f(e,s){return[l*(e*=r)-c*(s*=i)+t,n-c*e-l*s]}return f.invert=function(e,t){return[r*(h*e-u*t+d),i*(p-u*e-h*t)]},f}function mm(e){return function(e){var t,n,r,i,s,a,o,l,c,h,u=150,d=480,p=250,f=0,m=0,g=0,v=0,_=0,x=0,y=1,b=1,w=null,S=Qf,M=null,E=tm,T=.5;function A(e){return l(e[0]*uf,e[1]*uf)}function C(e){return(e=l.invert(e[0],e[1]))&&[e[0]*hf,e[1]*hf]}function P(){var e=fm(u,0,0,y,b,x).apply(null,t(f,m)),r=fm(u,d-e[0],p-e[1],y,b,x);return n=Ff(g,v,_),o=If(t,r),l=If(n,o),a=dm(o,T),R()}function R(){return c=h=null,A}return A.stream=function(e){return c&&h===e?c:c=pm(function(e){return om({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(S(a(E(h=e)))))},A.preclip=function(e){return arguments.length?(S=e,w=void 0,R()):S},A.postclip=function(e){return arguments.length?(E=e,M=r=i=s=null,R()):E},A.clipAngle=function(e){return arguments.length?(S=+e?$f(w=e*uf):(w=null,Qf),R()):w*hf},A.clipExtent=function(e){return arguments.length?(E=null==e?(M=r=i=s=null,tm):em(M=+e[0][0],r=+e[0][1],i=+e[1][0],s=+e[1][1]),R()):null==M?null:[[M,r],[i,s]]},A.scale=function(e){return arguments.length?(u=+e,P()):u},A.translate=function(e){return arguments.length?(d=+e[0],p=+e[1],P()):[d,p]},A.center=function(e){return arguments.length?(f=e[0]%360*uf,m=e[1]%360*uf,P()):[f*hf,m*hf]},A.rotate=function(e){return arguments.length?(g=e[0]%360*uf,v=e[1]%360*uf,_=e.length>2?e[2]%360*uf:0,P()):[g*hf,v*hf,_*hf]},A.angle=function(e){return arguments.length?(x=e%360*uf,P()):x*hf},A.reflectX=function(e){return arguments.length?(y=e?-1:1,P()):y<0},A.reflectY=function(e){return arguments.length?(b=e?-1:1,P()):b<0},A.precision=function(e){return arguments.length?(a=dm(o,T=e*e),R()):yf(T)},A.fitExtent=function(e,t){return hm(A,e,t)},A.fitSize=function(e,t){return function(e,t,n){return hm(e,[[0,0],t],n)}(A,e,t)},A.fitWidth=function(e,t){return function(e,t,n){return cm(e,(function(n){var r=+t,i=r/(n[1][0]-n[0][0]),s=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];e.scale(150*i).translate([s,a])}),n)}(A,e,t)},A.fitHeight=function(e,t){return function(e,t,n){return cm(e,(function(n){var r=+t,i=r/(n[1][1]-n[0][1]),s=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([s,a])}),n)}(A,e,t)},function(){return t=e.apply(this,arguments),A.invert=t.invert&&C,P()}}((function(){return e}))()}function gm(e,t){return[e,vf(bf((of+t)/2))]}function vm(e,t,n){this.k=e,this.x=t,this.y=n}gm.invert=function(e,t){return[e,2*pf(gf(t))-of]},vm.prototype={constructor:vm,scale:function(e){return 1===e?this:new vm(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new vm(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new vm(1,0,0),vm.prototype;const _m={type:"FeatureCollection",features:[{type:"Feature",properties:{adcode:11e4,name:"北京市",center:[116.405285,39.904989],centroid:[116.41989,40.189913],childrenNum:16,level:"province",subFeatureIndex:0,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[117.210024,40.082262],[117.105315,40.074479],[117.105315,40.074479],[117.102851,40.073563],[117.102235,40.073105],[117.102235,40.073105],[117.102851,40.073563],[116.999989,40.030053],[116.927924,40.054788],[116.783794,40.035093],[116.757925,39.968176],[116.786874,39.886963],[116.926076,39.835524],[116.949482,39.778529],[116.902055,39.763813],[116.90575,39.687883],[116.812128,39.616018],[116.717273,39.603572],[116.717273,39.603572],[116.720969,39.599884],[116.720969,39.599884],[116.726512,39.595274],[116.726512,39.595274],[116.703106,39.588819],[116.703106,39.588819],[116.607636,39.619705],[116.524484,39.596657],[116.440716,39.527466],[116.433325,39.44296],[116.332927,39.457744],[116.245464,39.515466],[116.204196,39.588819],[116.10195,39.576368],[116.10195,39.576368],[115.957204,39.561147],[115.910393,39.600345],[115.910393,39.600345],[115.855574,39.554689],[115.855574,39.554689],[115.846951,39.550999],[115.846951,39.550999],[115.821081,39.517312],[115.821081,39.517312],[115.752712,39.512696],[115.752712,39.512696],[115.738545,39.539464],[115.738545,39.539925],[115.738545,39.539464],[115.738545,39.539925],[115.737314,39.544078],[115.737314,39.544078],[115.723763,39.544539],[115.723763,39.544539],[115.721299,39.543617],[115.721299,39.543617],[115.721299,39.55146],[115.721299,39.55146],[115.716988,39.560225],[115.716988,39.560225],[115.699125,39.577751],[115.698509,39.577751],[115.698509,39.577751],[115.699125,39.577751],[115.698509,39.577751],[115.69543,39.579135],[115.69543,39.579135],[115.586408,39.58928],[115.478619,39.650578],[115.478619,39.650578],[115.498945,39.69617],[115.498945,39.69617],[115.443511,39.785426],[115.443511,39.785426],[115.567314,39.816224],[115.514344,39.837821],[115.522967,39.898898],[115.426264,39.95029],[115.454597,40.029595],[115.599343,40.11979],[115.73485,40.129398],[115.773038,40.176044],[115.85311,40.148609],[115.89869,40.234536],[115.968907,40.264219],[115.9184,40.354103],[115.861733,40.364589],[115.861733,40.364589],[115.779197,40.442501],[115.755792,40.540333],[115.907929,40.617133],[116.005247,40.58397],[116.088399,40.62667],[116.22021,40.744181],[116.247311,40.791762],[116.464738,40.771827],[116.334159,40.90446],[116.473977,40.895867],[116.455499,40.98084],[116.519557,40.981292],[116.519557,40.981292],[116.599013,40.974516],[116.615643,41.053072],[116.688324,41.044499],[116.677853,40.970902],[116.730208,40.897676],[116.858323,40.833423],[116.964881,40.70972],[117.110858,40.70836],[117.286401,40.660719],[117.386799,40.684317],[117.49582,40.674334],[117.389879,40.5617],[117.344299,40.582152],[117.213104,40.512136],[117.225423,40.369148],[117.309191,40.279284],[117.309807,40.279284],[117.309191,40.279284],[117.309807,40.279284],[117.389879,40.228141],[117.367089,40.172387],[117.367089,40.172844],[117.367089,40.173301],[117.367089,40.173301],[117.367089,40.172844],[117.367089,40.172387],[117.344299,40.13443],[117.210024,40.082262]]]]}},{type:"Feature",properties:{adcode:12e4,name:"天津市",center:[117.190182,39.125596],centroid:[117.351154,39.28914],childrenNum:16,level:"province",subFeatureIndex:1,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[117.210024,40.082262],[117.344299,40.13443],[117.367089,40.172387],[117.367089,40.172844],[117.367089,40.173301],[117.367089,40.173301],[117.367089,40.172844],[117.367089,40.172387],[117.389879,40.228141],[117.450857,40.252347],[117.571581,40.21809],[117.652269,40.12345],[117.652269,40.12345],[117.651037,40.122535],[117.651037,40.122535],[117.71879,40.082262],[117.71879,40.082262],[117.75821,40.073563],[117.75821,40.073563],[117.782232,39.968634],[117.614697,39.972303],[117.589443,39.997059],[117.513067,39.910373],[117.513067,39.910373],[117.537704,39.835064],[117.537704,39.835064],[117.540784,39.822658],[117.540784,39.822658],[117.57774,39.727009],[117.644262,39.702155],[117.66274,39.636295],[117.619008,39.603111],[117.736037,39.560686],[117.736037,39.560686],[117.74774,39.58928],[117.866,39.596657],[117.933753,39.574062],[117.870311,39.454972],[117.846906,39.328274],[117.972557,39.312536],[117.972557,39.312536],[117.982412,39.298647],[117.982412,39.298647],[118.021833,39.287071],[118.021833,39.287071],[118.024296,39.289386],[118.024296,39.289386],[118.024912,39.292164],[118.024912,39.292164],[118.037231,39.220353],[117.871543,39.122479],[117.837667,39.056999],[117.855529,38.957502],[117.898029,38.948661],[117.847522,38.855535],[117.778536,38.869046],[117.64611,38.828972],[117.646725,38.788875],[117.740964,38.753888],[117.729261,38.680127],[117.639334,38.62686],[117.47919,38.617043],[117.39419,38.573553],[117.252524,38.556711],[117.213104,38.639947],[117.213104,38.639947],[117.176764,38.617978],[117.176764,38.617978],[117.097924,38.587118],[117.042489,38.706279],[116.95133,38.689468],[116.947634,38.689468],[116.947634,38.689468],[116.950714,38.689468],[116.95133,38.689468],[116.950714,38.689468],[116.877417,38.680594],[116.858939,38.741289],[116.766548,38.742222],[116.737599,38.784677],[116.708034,38.931907],[116.783179,39.050959],[116.783179,39.050959],[116.812744,39.050959],[116.812744,39.050959],[116.912526,39.110873],[116.91191,39.111338],[116.91191,39.111338],[116.912526,39.110873],[116.865714,39.155428],[116.865714,39.155428],[116.892816,39.224061],[116.870642,39.357426],[116.796113,39.446656],[116.812128,39.616018],[116.90575,39.687883],[116.916837,39.703996],[116.916837,39.703996],[116.983975,39.63906],[116.983975,39.63906],[117.126873,39.61694],[117.177996,39.64551],[117.165061,39.718725],[117.165061,39.718725],[117.205713,39.763813],[117.156438,39.817603],[117.229735,39.852981],[117.152126,39.878239],[117.150894,39.944785],[117.198322,39.992933],[117.210024,40.082262]]]]}},{type:"Feature",properties:{adcode:13e4,name:"河北省",center:[114.502461,38.045474],childrenNum:11,level:"province",subFeatureIndex:2,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[117.389879,40.228141],[117.309807,40.279284],[117.309191,40.279284],[117.309807,40.279284],[117.309191,40.279284],[117.225423,40.369148],[117.213104,40.512136],[117.344299,40.582152],[117.389879,40.5617],[117.49582,40.674334],[117.386799,40.684317],[117.286401,40.660719],[117.110858,40.70836],[116.964881,40.70972],[116.858323,40.833423],[116.730208,40.897676],[116.677853,40.970902],[116.688324,41.044499],[116.615643,41.053072],[116.599013,40.974516],[116.519557,40.981292],[116.519557,40.981292],[116.455499,40.98084],[116.473977,40.895867],[116.334159,40.90446],[116.464738,40.771827],[116.247311,40.791762],[116.22021,40.744181],[116.088399,40.62667],[116.005247,40.58397],[115.907929,40.617133],[115.755792,40.540333],[115.779197,40.442501],[115.861733,40.364589],[115.861733,40.364589],[115.9184,40.354103],[115.968907,40.264219],[115.89869,40.234536],[115.85311,40.148609],[115.773038,40.176044],[115.73485,40.129398],[115.599343,40.11979],[115.454597,40.029595],[115.426264,39.95029],[115.522967,39.898898],[115.514344,39.837821],[115.567314,39.816224],[115.443511,39.785426],[115.443511,39.785426],[115.498945,39.69617],[115.498945,39.69617],[115.478619,39.650578],[115.478619,39.650578],[115.586408,39.58928],[115.69543,39.579135],[115.69543,39.579135],[115.698509,39.577751],[115.699125,39.577751],[115.698509,39.577751],[115.698509,39.577751],[115.699125,39.577751],[115.716988,39.560225],[115.716988,39.560225],[115.721299,39.55146],[115.721299,39.55146],[115.721299,39.543617],[115.721299,39.543617],[115.723763,39.544539],[115.723763,39.544539],[115.737314,39.544078],[115.737314,39.544078],[115.738545,39.539925],[115.738545,39.539464],[115.738545,39.539925],[115.738545,39.539464],[115.752712,39.512696],[115.752712,39.512696],[115.821081,39.517312],[115.821081,39.517312],[115.846951,39.550999],[115.846951,39.550999],[115.855574,39.554689],[115.855574,39.554689],[115.910393,39.600345],[115.910393,39.600345],[115.957204,39.561147],[116.10195,39.576368],[116.10195,39.576368],[116.204196,39.588819],[116.245464,39.515466],[116.332927,39.457744],[116.433325,39.44296],[116.440716,39.527466],[116.524484,39.596657],[116.607636,39.619705],[116.703106,39.588819],[116.703106,39.588819],[116.726512,39.595274],[116.726512,39.595274],[116.720969,39.599884],[116.720969,39.599884],[116.717273,39.603572],[116.717273,39.603572],[116.812128,39.616018],[116.796113,39.446656],[116.870642,39.357426],[116.892816,39.224061],[116.865714,39.155428],[116.865714,39.155428],[116.912526,39.110873],[116.91191,39.111338],[116.91191,39.111338],[116.912526,39.110873],[116.812744,39.050959],[116.812744,39.050959],[116.783179,39.050959],[116.783179,39.050959],[116.708034,38.931907],[116.737599,38.784677],[116.766548,38.742222],[116.858939,38.741289],[116.877417,38.680594],[116.950714,38.689468],[116.95133,38.689468],[116.950714,38.689468],[116.947634,38.689468],[116.947634,38.689468],[116.95133,38.689468],[117.042489,38.706279],[117.097924,38.587118],[117.176764,38.617978],[117.176764,38.617978],[117.213104,38.639947],[117.213104,38.639947],[117.252524,38.556711],[117.39419,38.573553],[117.47919,38.617043],[117.639334,38.62686],[117.638102,38.545013],[117.781,38.374004],[117.937449,38.387606],[117.895565,38.30173],[117.808718,38.228445],[117.771761,38.136734],[117.70216,38.075529],[117.5839,38.070819],[117.513067,37.94353],[117.438538,37.853823],[117.34122,37.863271],[117.267923,37.838704],[117.093612,37.849571],[117.023395,37.832561],[116.788106,37.843429],[116.724664,37.744139],[116.433941,37.47349],[116.38097,37.522858],[116.379738,37.521909],[116.38097,37.522858],[116.379738,37.521909],[116.337238,37.580255],[116.291659,37.557966],[116.27626,37.466841],[116.240536,37.489633],[116.240536,37.489633],[116.226369,37.428365],[116.2855,37.404604],[116.236224,37.361816],[116.169087,37.384164],[116.051443,37.367998],[115.984921,37.326616],[115.969523,37.239497],[115.909777,37.206622],[115.868509,37.076414],[115.776734,36.992829],[115.79706,36.968931],[115.71206,36.883313],[115.683727,36.808139],[115.479851,36.76022],[115.365902,36.622043],[115.283366,36.486505],[115.308004,36.461967],[115.308004,36.461967],[115.366518,36.308793],[115.466916,36.259115],[115.466916,36.259115],[115.483547,36.149036],[115.312931,36.088137],[115.201446,36.210371],[115.201446,36.210371],[115.064092,36.178985],[114.996955,36.06831],[114.914419,36.051865],[114.912571,36.140339],[114.591666,36.130192],[114.345291,36.255738],[114.169132,36.243675],[114.169132,36.243675],[114.060727,36.276482],[114.055799,36.330005],[113.982502,36.358921],[113.911054,36.314578],[113.881488,36.354102],[113.819894,36.330969],[113.731199,36.363257],[113.708409,36.423461],[113.554425,36.494682],[113.588301,36.562955],[113.476816,36.655171],[113.499606,36.740564],[113.680692,36.789933],[113.696707,36.882356],[113.773083,36.855072],[113.76138,36.956022],[113.791561,36.987572],[113.758301,37.075459],[113.773083,37.1518],[113.832213,37.167536],[113.90243,37.309962],[114.014531,37.424564],[114.036705,37.49438],[114.123553,37.60159],[114.12848,37.698231],[113.993589,37.706752],[114.044712,37.762116],[113.976959,37.816965],[113.951706,37.917573],[113.872249,37.990228],[113.876561,38.055273],[113.810039,38.112729],[113.825438,38.169199],[113.720728,38.174843],[113.711489,38.213873],[113.570439,38.237375],[113.525475,38.382916],[113.583374,38.459793],[113.561816,38.558115],[113.612939,38.646022],[113.70225,38.65163],[113.720728,38.713283],[113.839605,38.758554],[113.855619,38.828972],[113.776163,38.885814],[113.76754,38.959828],[113.898119,39.067684],[114.050872,39.135939],[114.10877,39.052352],[114.345907,39.075116],[114.388406,39.176767],[114.47587,39.216181],[114.416124,39.243063],[114.480797,39.350023],[114.470942,39.408759],[114.568877,39.574062],[114.408117,39.65196],[114.395182,39.867218],[114.225183,39.857114],[114.17406,39.897521],[114.047176,39.916339],[114.021307,39.992017],[113.910438,40.011725],[113.956017,40.031428],[113.989278,40.112469],[114.044712,40.05662],[114.101995,40.099655],[114.073046,40.168729],[114.073046,40.168729],[114.235654,40.198442],[114.255364,40.236363],[114.46971,40.267872],[114.530688,40.344983],[114.446305,40.372795],[114.31203,40.372795],[114.267066,40.474369],[114.283081,40.590785],[114.209168,40.629848],[114.134639,40.737381],[114.044712,40.83116],[114.073661,40.857412],[113.973263,40.983099],[113.819279,41.097726],[113.920293,41.172081],[113.996669,41.192345],[113.927068,41.326829],[113.94493,41.39105],[113.871017,41.41349],[113.930764,41.485693],[114.100147,41.537218],[114.230726,41.513477],[114.203009,41.793334],[114.34837,41.947049],[114.510978,41.973299],[114.466015,42.038656],[114.510978,42.111047],[114.765361,42.118593],[114.828803,42.147434],[114.9021,42.015544],[114.922426,41.824999],[114.866991,41.803147],[114.899636,41.756299],[114.895325,41.636567],[114.862064,41.603915],[115.0992,41.624045],[115.252569,41.579303],[115.376989,41.602126],[115.319091,41.691546],[115.654162,41.829011],[115.811226,41.912328],[115.916552,41.945269],[116.016334,41.777273],[116.09887,41.776381],[116.122892,41.861995],[116.194341,41.861995],[116.233145,41.941263],[116.310137,41.997316],[116.409303,41.994203],[116.386514,41.952389],[116.510933,41.974189],[116.560209,41.928356],[116.727744,41.951054],[116.879881,42.018211],[116.890352,42.092846],[116.789338,42.200202],[116.907598,42.191337],[116.886656,42.366641],[116.910062,42.394928],[116.910062,42.394928],[116.927308,42.40509],[116.927308,42.40509],[116.929156,42.407741],[116.929156,42.408182],[116.929156,42.407741],[116.929156,42.408182],[116.936547,42.410833],[116.936547,42.410833],[116.944555,42.415251],[116.944555,42.415251],[116.976583,42.427618],[116.976583,42.427618],[116.984591,42.427176],[116.984591,42.427176],[116.993214,42.425851],[116.993214,42.425851],[116.995678,42.426734],[116.995678,42.426734],[117.001837,42.432476],[117.001837,42.432476],[117.004301,42.432476],[117.004301,42.432476],[117.005533,42.4338],[117.005533,42.4338],[117.133648,42.470443],[117.133648,42.470443],[117.147815,42.470443],[117.147815,42.470443],[117.264227,42.476621],[117.264227,42.476621],[117.412669,42.472649],[117.387415,42.517648],[117.387415,42.517648],[117.43669,42.584205],[117.516146,42.599622],[117.516146,42.599622],[117.687377,42.582884],[117.779768,42.618558],[117.874007,42.510151],[118.019369,42.39537],[118.060021,42.298083],[117.977485,42.229892],[118.109296,42.165176],[118.097593,42.105277],[118.155491,42.081301],[118.119767,42.034656],[118.194296,42.031545],[118.212774,42.081301],[118.297157,42.048876],[118.237411,42.023101],[118.313788,41.987977],[118.268824,41.930136],[118.340273,41.872688],[118.29223,41.772811],[118.165962,41.813405],[118.130854,41.74246],[118.214006,41.641933],[118.230636,41.581989],[118.307012,41.569008],[118.271904,41.471349],[118.348896,41.428296],[118.35136,41.337163],[118.519511,41.353783],[118.677192,41.350639],[118.741866,41.324133],[118.843496,41.374439],[118.890923,41.300764],[118.96422,41.309303],[119.197661,41.282781],[119.239545,41.314696],[119.2494,41.279634],[119.126212,41.138744],[119.037516,41.067509],[118.96422,41.079236],[118.951901,41.01832],[119.013495,41.007485],[118.977154,40.959155],[118.977154,40.959155],[118.90201,40.960963],[118.849039,40.800821],[118.911249,40.776811],[119.054147,40.664804],[119.184726,40.680233],[119.162552,40.599872],[119.30237,40.530329],[119.571536,40.540333],[119.598637,40.465266],[119.586934,40.37553],[119.642369,40.291151],[119.625123,40.224029],[119.745847,40.208038],[119.736608,40.10469],[119.779723,40.049293],[119.779723,40.049293],[119.780339,40.047002],[119.780339,40.047002],[119.817296,40.049751],[119.817296,40.049751],[119.848093,40.020432],[119.848093,40.020432],[119.845629,40.000726],[119.845629,40.000726],[119.854252,39.988349],[119.791426,39.952124],[119.540739,39.88834],[119.536427,39.808871],[119.466826,39.810709],[119.357805,39.721946],[119.269726,39.498385],[119.314689,39.412457],[119.190885,39.368528],[119.096031,39.242136],[118.948821,39.138259],[118.955597,39.176303],[118.76096,39.133618],[118.637156,39.157284],[118.533062,39.090907],[118.604511,38.971458],[118.491178,38.909097],[118.377845,38.971923],[118.366143,39.016101],[118.225092,39.034694],[118.120999,39.186043],[118.037231,39.220353],[118.024912,39.292164],[118.024912,39.292164],[118.024296,39.289386],[118.024296,39.289386],[118.021833,39.287071],[118.021833,39.287071],[117.982412,39.298647],[117.982412,39.298647],[117.972557,39.312536],[117.972557,39.312536],[117.846906,39.328274],[117.870311,39.454972],[117.933753,39.574062],[117.866,39.596657],[117.74774,39.58928],[117.736037,39.560686],[117.736037,39.560686],[117.619008,39.603111],[117.66274,39.636295],[117.644262,39.702155],[117.57774,39.727009],[117.540784,39.822658],[117.540784,39.822658],[117.537704,39.835064],[117.537704,39.835064],[117.513067,39.910373],[117.513067,39.910373],[117.589443,39.997059],[117.614697,39.972303],[117.782232,39.968634],[117.75821,40.073563],[117.75821,40.073563],[117.71879,40.082262],[117.71879,40.082262],[117.651037,40.122535],[117.651037,40.122535],[117.652269,40.12345],[117.652269,40.12345],[117.571581,40.21809],[117.450857,40.252347],[117.389879,40.228141]]],[[[116.90575,39.687883],[116.902055,39.763813],[116.949482,39.778529],[116.926076,39.835524],[116.786874,39.886963],[116.757925,39.968176],[116.783794,40.035093],[116.927924,40.054788],[116.999989,40.030053],[117.102851,40.073563],[117.102235,40.073105],[117.102235,40.073105],[117.102851,40.073563],[117.105315,40.074479],[117.105315,40.074479],[117.210024,40.082262],[117.198322,39.992933],[117.150894,39.944785],[117.152126,39.878239],[117.229735,39.852981],[117.156438,39.817603],[117.205713,39.763813],[117.165061,39.718725],[117.165061,39.718725],[117.177996,39.64551],[117.126873,39.61694],[116.983975,39.63906],[116.983975,39.63906],[116.916837,39.703996],[116.916837,39.703996],[116.90575,39.687883]]]]}},{type:"Feature",properties:{adcode:14e4,name:"山西省",center:[112.549248,37.857014],centroid:[112.305144,37.619053],childrenNum:11,level:"province",subFeatureIndex:3,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[113.731199,36.363257],[113.716417,36.262492],[113.651743,36.172224],[113.694859,36.026707],[113.637576,35.98847],[113.656671,35.836792],[113.604316,35.797008],[113.578446,35.63378],[113.485439,35.520879],[113.31236,35.481424],[113.298194,35.427325],[113.189789,35.449261],[113.126347,35.332197],[112.997,35.362455],[112.992072,35.296068],[112.911384,35.24673],[112.818377,35.258457],[112.766022,35.203718],[112.628052,35.263342],[112.637291,35.225716],[112.513487,35.218384],[112.058924,35.279951],[112.078634,35.219362],[112.062004,35.055937],[111.900012,35.079933],[111.66965,34.988319],[111.570484,34.843094],[111.346282,34.831798],[111.232949,34.789551],[111.148566,34.80773],[111.118385,34.756622],[110.966248,34.70499],[110.929907,34.731548],[110.883712,34.642498],[110.749437,34.652342],[110.710017,34.605078],[110.533242,34.583406],[110.474728,34.617389],[110.379257,34.600646],[110.310272,34.608033],[110.241287,34.682361],[110.232664,34.803308],[110.257301,34.93487],[110.325671,35.014785],[110.39404,35.271647],[110.45009,35.327803],[110.477808,35.413672],[110.525851,35.44195],[110.609619,35.632321],[110.57759,35.701346],[110.549257,35.877527],[110.511684,35.879951],[110.447011,36.164495],[110.474112,36.248018],[110.45933,36.330969],[110.503677,36.487948],[110.496902,36.582175],[110.394656,36.676768],[110.447011,36.737687],[110.416214,36.790892],[110.425453,36.960325],[110.382953,37.021975],[110.444547,37.007164],[110.53509,37.137969],[110.690307,37.287115],[110.695234,37.34945],[110.630561,37.373228],[110.644111,37.435017],[110.745125,37.450693],[110.795017,37.566029],[110.796248,37.66319],[110.706321,37.705332],[110.758676,37.744139],[110.663821,37.803256],[110.59422,37.921821],[110.522771,37.954853],[110.501213,38.031713],[110.509221,38.192245],[110.565887,38.215283],[110.57759,38.297035],[110.661358,38.308773],[110.746973,38.366029],[110.77777,38.44105],[110.874473,38.453702],[110.920052,38.581973],[110.880016,38.618446],[111.009363,38.847614],[110.980414,38.970063],[111.138711,39.064897],[111.163348,39.152644],[111.247732,39.302351],[111.125776,39.366678],[111.171971,39.42355],[111.337043,39.420777],[111.418963,39.500232],[111.462079,39.626157],[111.502115,39.663015],[111.646245,39.644128],[111.783599,39.588819],[111.842729,39.620166],[111.93204,39.61233],[111.970229,39.79646],[112.28559,40.197985],[112.310227,40.256457],[112.456205,40.300278],[112.6299,40.235906],[112.72845,40.168272],[112.844863,40.203926],[112.892906,40.326284],[113.251382,40.413352],[113.316056,40.319898],[113.559968,40.348631],[113.794641,40.518049],[113.855619,40.457071],[113.948626,40.514865],[114.061959,40.528964],[114.041633,40.608503],[114.074277,40.723325],[114.134639,40.737381],[114.209168,40.629848],[114.283081,40.590785],[114.267066,40.474369],[114.31203,40.372795],[114.446305,40.372795],[114.530688,40.344983],[114.46971,40.267872],[114.255364,40.236363],[114.235654,40.198442],[114.073046,40.168729],[114.073046,40.168729],[114.101995,40.099655],[114.044712,40.05662],[113.989278,40.112469],[113.956017,40.031428],[113.910438,40.011725],[114.021307,39.992017],[114.047176,39.916339],[114.17406,39.897521],[114.225183,39.857114],[114.395182,39.867218],[114.408117,39.65196],[114.568877,39.574062],[114.470942,39.408759],[114.480797,39.350023],[114.416124,39.243063],[114.47587,39.216181],[114.388406,39.176767],[114.345907,39.075116],[114.10877,39.052352],[114.050872,39.135939],[113.898119,39.067684],[113.76754,38.959828],[113.776163,38.885814],[113.855619,38.828972],[113.839605,38.758554],[113.720728,38.713283],[113.70225,38.65163],[113.612939,38.646022],[113.561816,38.558115],[113.583374,38.459793],[113.525475,38.382916],[113.570439,38.237375],[113.711489,38.213873],[113.720728,38.174843],[113.825438,38.169199],[113.810039,38.112729],[113.876561,38.055273],[113.872249,37.990228],[113.951706,37.917573],[113.976959,37.816965],[114.044712,37.762116],[113.993589,37.706752],[114.12848,37.698231],[114.123553,37.60159],[114.036705,37.49438],[114.014531,37.424564],[113.90243,37.309962],[113.832213,37.167536],[113.773083,37.1518],[113.758301,37.075459],[113.791561,36.987572],[113.76138,36.956022],[113.773083,36.855072],[113.696707,36.882356],[113.680692,36.789933],[113.499606,36.740564],[113.476816,36.655171],[113.588301,36.562955],[113.554425,36.494682],[113.708409,36.423461],[113.731199,36.363257]]]]}},{type:"Feature",properties:{adcode:15e4,name:"内蒙古自治区",center:[111.670801,40.818311],centroid:[114.059024,44.315561],childrenNum:12,level:"province",subFeatureIndex:4,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[123.703873,43.370824],[123.664453,43.264606],[123.666916,43.179585],[123.572678,43.0035],[123.515395,43.027561],[123.515395,43.027561],[123.474743,43.04243],[123.259165,42.992997],[123.18402,42.926002],[123.169853,42.859811],[123.227752,42.831735],[123.058368,42.768957],[122.887137,42.770275],[122.831087,42.722381],[122.786123,42.756218],[122.786123,42.756218],[122.732536,42.786524],[122.624747,42.773349],[122.563769,42.826031],[122.436886,42.843142],[122.35127,42.830419],[122.374676,42.774667],[122.457212,42.774227],[122.395002,42.683687],[122.338951,42.670051],[122.203445,42.731171],[122.20406,42.683687],[122.071634,42.711391],[121.940438,42.688525],[121.904714,42.569666],[121.66573,42.437333],[121.604752,42.494271],[121.388557,42.475297],[121.304789,42.435567],[121.304789,42.435567],[121.285079,42.387857],[121.068884,42.252483],[120.933378,42.279493],[120.79048,42.218372],[120.745516,42.223689],[120.624792,42.154532],[120.58414,42.167394],[120.466496,42.105277],[120.456641,42.016433],[120.373489,41.994648],[120.188707,41.848179],[120.096316,41.696907],[120.035954,41.708075],[120.051968,41.775935],[119.989759,41.898969],[119.837622,42.135455],[119.846861,42.21527],[119.744615,42.211725],[119.541971,42.292329],[119.572152,42.359568],[119.502551,42.387857],[119.415703,42.309588],[119.284508,42.265325],[119.237697,42.201088],[119.315921,42.119037],[119.384906,42.089738],[119.324544,41.969296],[119.334399,41.869569],[119.294363,41.775935],[119.307914,41.657581],[119.415703,41.590044],[119.361501,41.56498],[119.405848,41.508548],[119.376283,41.422015],[119.30545,41.402271],[119.326392,41.329525],[119.239545,41.314696],[119.197661,41.282781],[118.96422,41.309303],[118.890923,41.300764],[118.843496,41.374439],[118.741866,41.324133],[118.677192,41.350639],[118.519511,41.353783],[118.35136,41.337163],[118.348896,41.428296],[118.271904,41.471349],[118.307012,41.569008],[118.230636,41.581989],[118.214006,41.641933],[118.130854,41.74246],[118.165962,41.813405],[118.29223,41.772811],[118.340273,41.872688],[118.268824,41.930136],[118.313788,41.987977],[118.237411,42.023101],[118.297157,42.048876],[118.212774,42.081301],[118.194296,42.031545],[118.119767,42.034656],[118.155491,42.081301],[118.097593,42.105277],[118.109296,42.165176],[117.977485,42.229892],[118.060021,42.298083],[118.019369,42.39537],[117.874007,42.510151],[117.779768,42.618558],[117.687377,42.582884],[117.516146,42.599622],[117.516146,42.599622],[117.43669,42.584205],[117.387415,42.517648],[117.387415,42.517648],[117.412669,42.472649],[117.264227,42.476621],[117.264227,42.476621],[117.147815,42.470443],[117.147815,42.470443],[117.133648,42.470443],[117.133648,42.470443],[117.005533,42.4338],[117.005533,42.4338],[117.004301,42.432476],[117.004301,42.432476],[117.001837,42.432476],[117.001837,42.432476],[116.995678,42.426734],[116.995678,42.426734],[116.993214,42.425851],[116.993214,42.425851],[116.984591,42.427176],[116.984591,42.427176],[116.976583,42.427618],[116.976583,42.427618],[116.944555,42.415251],[116.944555,42.415251],[116.936547,42.410833],[116.936547,42.410833],[116.929156,42.408182],[116.929156,42.407741],[116.929156,42.408182],[116.929156,42.407741],[116.927308,42.40509],[116.927308,42.40509],[116.910062,42.394928],[116.910062,42.394928],[116.886656,42.366641],[116.907598,42.191337],[116.789338,42.200202],[116.890352,42.092846],[116.879881,42.018211],[116.727744,41.951054],[116.560209,41.928356],[116.510933,41.974189],[116.386514,41.952389],[116.409303,41.994203],[116.310137,41.997316],[116.233145,41.941263],[116.194341,41.861995],[116.122892,41.861995],[116.09887,41.776381],[116.016334,41.777273],[115.916552,41.945269],[115.811226,41.912328],[115.654162,41.829011],[115.319091,41.691546],[115.376989,41.602126],[115.252569,41.579303],[115.0992,41.624045],[114.862064,41.603915],[114.895325,41.636567],[114.899636,41.756299],[114.866991,41.803147],[114.922426,41.824999],[114.9021,42.015544],[114.828803,42.147434],[114.765361,42.118593],[114.510978,42.111047],[114.466015,42.038656],[114.510978,41.973299],[114.34837,41.947049],[114.203009,41.793334],[114.230726,41.513477],[114.100147,41.537218],[113.930764,41.485693],[113.871017,41.41349],[113.94493,41.39105],[113.927068,41.326829],[113.996669,41.192345],[113.920293,41.172081],[113.819279,41.097726],[113.973263,40.983099],[114.073661,40.857412],[114.044712,40.83116],[114.134639,40.737381],[114.074277,40.723325],[114.041633,40.608503],[114.061959,40.528964],[113.948626,40.514865],[113.855619,40.457071],[113.794641,40.518049],[113.559968,40.348631],[113.316056,40.319898],[113.251382,40.413352],[112.892906,40.326284],[112.844863,40.203926],[112.72845,40.168272],[112.6299,40.235906],[112.456205,40.300278],[112.310227,40.256457],[112.28559,40.197985],[111.970229,39.79646],[111.93204,39.61233],[111.842729,39.620166],[111.783599,39.588819],[111.646245,39.644128],[111.502115,39.663015],[111.462079,39.626157],[111.418963,39.500232],[111.337043,39.420777],[111.171971,39.42355],[111.125776,39.366678],[111.064182,39.400899],[111.148566,39.531619],[111.134399,39.586513],[110.892335,39.509927],[110.740198,39.351874],[110.702626,39.27364],[110.604075,39.277345],[110.528315,39.380091],[110.434692,39.381016],[110.39096,39.31161],[110.243751,39.42355],[110.146432,39.455434],[110.217881,39.28105],[109.961035,39.191608],[109.665384,38.981691],[109.683862,38.935631],[109.624116,38.854603],[109.549587,38.805662],[109.511399,38.833633],[109.404226,38.720752],[109.338936,38.70161],[109.367269,38.627328],[109.276726,38.623121],[109.178792,38.520675],[109.051908,38.432146],[108.938575,38.207291],[108.963829,38.155085],[109.069155,38.091071],[109.017416,37.969949],[108.938575,37.920877],[108.871438,38.027471],[108.797525,38.047735],[108.82709,37.989285],[108.798141,37.93362],[108.799989,37.783871],[108.777815,37.683554],[108.611512,37.65419],[108.532671,37.690656],[108.440896,37.654663],[108.304158,37.638556],[108.219158,37.661295],[108.134159,37.621971],[108.025137,37.649926],[107.982022,37.787181],[107.65003,37.864688],[107.49235,37.944945],[107.419669,37.940699],[107.438147,37.992586],[107.329742,38.087774],[107.19054,38.154144],[107.014997,38.120261],[106.768621,38.174843],[106.546883,38.269794],[106.482825,38.319571],[106.601702,38.392295],[106.647897,38.470569],[106.66268,38.601614],[106.709491,38.718885],[106.954019,38.941215],[106.96757,39.054676],[106.859164,39.107623],[106.795723,39.214327],[106.806809,39.318554],[106.751375,39.381478],[106.683622,39.357426],[106.602318,39.375466],[106.506231,39.269934],[106.402753,39.291701],[106.284493,39.270397],[106.283877,39.14522],[106.145907,39.153108],[106.096631,39.08487],[106.060907,38.968667],[105.97098,38.909097],[106.003625,38.874636],[105.897683,38.788875],[105.90569,38.731488],[105.852719,38.641349],[105.874277,38.593197],[105.821307,38.366967],[105.86627,38.296565],[105.775111,38.186601],[105.780655,38.084949],[105.840401,38.003902],[105.799749,37.940227],[105.80406,37.861854],[105.760944,37.799947],[105.622974,37.778669],[105.598952,37.699178],[105.315004,37.702018],[105.111128,37.633818],[105.024281,37.579781],[104.866601,37.566503],[104.801311,37.538516],[104.419429,37.511943],[104.407726,37.464467],[104.287002,37.42789],[104.183524,37.406981],[103.948235,37.564606],[103.676606,37.783871],[103.401897,37.861854],[103.362477,38.037368],[103.369868,38.089658],[103.53494,38.156497],[103.507838,38.281068],[103.416063,38.404956],[103.85954,38.64462],[104.044322,38.895128],[104.168125,38.940285],[104.207546,39.083941],[104.177364,39.15218],[104.047401,39.297721],[104.091133,39.418466],[103.964865,39.455434],[103.839214,39.460516],[103.595302,39.386565],[103.344615,39.331514],[103.007696,39.09973],[102.601792,39.172129],[102.45335,39.25511],[102.280887,39.190217],[101.830636,39.093229],[101.926106,39.000758],[102.075164,38.891403],[101.941505,38.808926],[101.777049,38.660507],[101.679115,38.690869],[101.601506,38.6549],[101.562702,38.712816],[101.307087,38.802865],[101.334189,38.848545],[101.24303,38.86066],[101.198682,38.943077],[101.228863,39.02075],[101.117378,38.97518],[100.969553,38.9468],[100.961545,39.005873],[100.835278,39.025863],[100.864227,39.106695],[100.842669,39.199955],[100.842053,39.405523],[100.619699,39.38749],[100.498975,39.400437],[100.500823,39.4813],[100.326512,39.509003],[100.314193,39.606799],[100.250135,39.68512],[100.128179,39.702155],[100.040716,39.756913],[99.904593,39.785886],[99.822058,39.85987],[99.672384,39.887881],[99.488218,39.875943],[99.927383,40.063947],[100.002528,40.197528],[100.169447,40.277458],[100.169447,40.541242],[100.242744,40.618495],[100.237201,40.716977],[100.107853,40.875511],[100.057346,40.908077],[99.673,40.932943],[99.565827,40.846551],[99.174705,40.858317],[99.172858,40.747354],[99.102025,40.676603],[99.041662,40.693844],[98.984996,40.782701],[98.790975,40.705185],[98.801446,40.609411],[98.689345,40.691576],[98.668403,40.772734],[98.569853,40.746901],[98.627751,40.677965],[98.344419,40.568518],[98.333332,40.918929],[98.25018,40.939271],[97.971776,41.097726],[97.629314,41.440407],[97.613915,41.477176],[97.84674,41.656687],[97.307177,42.565259],[97.172903,42.795305],[98.195362,42.653331],[98.546447,42.638368],[99.503001,42.568344],[99.969267,42.648051],[100.272309,42.636167],[100.32528,42.689845],[100.826655,42.67533],[101.23995,42.59698],[101.581796,42.525145],[101.803534,42.503534],[102.070236,42.232107],[102.449039,42.143885],[102.540814,42.162072],[102.712045,42.152757],[103.021862,42.02799],[103.418527,41.882489],[103.868779,41.802701],[104.080046,41.804931],[104.530298,41.874916],[104.524138,41.662051],[104.68613,41.64551],[104.923267,41.654005],[105.009498,41.583331],[105.230621,41.750942],[105.291599,41.750049],[105.74185,41.949274],[106.01348,42.03199],[106.619564,42.243625],[106.785867,42.291444],[107.051337,42.319322],[107.269996,42.363547],[107.303872,42.4126],[107.46648,42.458967],[107.57427,42.413042],[107.939522,42.403764],[108.022058,42.433359],[108.238252,42.460291],[108.298614,42.438216],[108.532671,42.443073],[108.845569,42.395811],[109.026039,42.458525],[109.291509,42.435567],[109.544044,42.472208],[109.683862,42.559089],[109.906216,42.635727],[110.108244,42.642769],[110.139657,42.67489],[110.437156,42.781254],[110.469801,42.839194],[110.631177,42.936078],[110.736502,43.089639],[110.769763,43.099251],[111.02045,43.329926],[111.183674,43.396045],[111.354289,43.436029],[111.456535,43.49422],[111.564325,43.490314],[111.79407,43.67192],[111.951135,43.693122],[111.959758,43.8232],[111.870447,43.940071],[111.773128,44.010686],[111.662875,44.061012],[111.559397,44.171408],[111.507042,44.294019],[111.415883,44.357368],[111.478709,44.488982],[111.569868,44.576418],[111.560629,44.647124],[111.624687,44.778509],[111.764505,44.969314],[111.889541,45.045459],[112.002874,45.090675],[112.113743,45.072931],[112.438959,45.071663],[112.540589,45.001054],[112.599719,44.93078],[112.850406,44.840484],[112.937869,44.84006],[113.11526,44.799741],[113.503918,44.77766],[113.631417,44.745372],[113.907358,44.915105],[114.065038,44.931204],[114.19069,45.036581],[114.347139,45.119392],[114.519602,45.283812],[114.551014,45.387699],[114.745035,45.438521],[114.974165,45.377193],[115.153403,45.395682],[115.36467,45.392321],[115.699741,45.459509],[115.936878,45.632987],[116.035428,45.68526],[116.17463,45.688604],[116.286731,45.775056],[116.288579,45.838869],[116.243,45.875956],[116.271949,45.966692],[116.414231,46.13404],[116.439484,46.137771],[116.585462,46.292199],[116.745606,46.327743],[116.826294,46.380602],[117.097308,46.35707],[117.372017,46.360373],[117.392343,46.463093],[117.447777,46.528172],[117.42006,46.582071],[117.49582,46.600574],[117.622704,46.596052],[117.704008,46.516645],[117.870927,46.549985],[117.914659,46.607973],[118.04647,46.631398],[118.124078,46.678216],[118.192448,46.682731],[118.316252,46.739347],[118.446831,46.704482],[118.586033,46.692992],[118.639004,46.721302],[118.788061,46.687246],[118.845343,46.771731],[118.914329,46.775009],[118.912481,46.733196],[119.011647,46.745498],[119.123132,46.642901],[119.26295,46.649062],[119.374435,46.60304],[119.431718,46.638793],[119.656535,46.625645],[119.677477,46.584539],[119.783419,46.626056],[119.8136,46.668363],[119.911534,46.669595],[119.93494,46.712688],[119.928781,46.903933],[119.859795,46.917013],[119.795122,47.01297],[119.806825,47.054973],[119.716282,47.195829],[119.56784,47.24825],[119.559833,47.303053],[119.487152,47.329419],[119.353493,47.43192],[119.365812,47.477232],[119.152081,47.540685],[119.134219,47.664539],[118.773278,47.771213],[118.568171,47.992315],[118.424041,48.014734],[118.299621,48.005127],[118.231252,48.043943],[117.96147,48.011132],[117.813645,48.016335],[117.493357,47.758343],[117.384335,47.641162],[117.094844,47.823865],[116.879265,47.893718],[116.669846,47.890509],[116.453035,47.837522],[116.26579,47.876866],[116.111189,47.811812],[115.939342,47.683071],[115.580249,47.921793],[115.529126,48.155029],[115.822929,48.2595],[115.799523,48.514993],[115.83032,48.560156],[116.077928,48.822412],[116.048363,48.873598],[116.717889,49.847388],[116.736367,49.847388],[117.068974,49.695524],[117.278394,49.636272],[117.485349,49.633172],[117.809333,49.521049],[117.867848,49.592853],[117.980565,49.621158],[118.084658,49.618057],[118.122231,49.669586],[118.205998,49.684686],[118.225708,49.734211],[118.388316,49.786004],[118.395092,49.819601],[118.49549,49.843144],[118.485635,49.86706],[118.574946,49.931423],[118.741866,49.946441],[118.929111,49.989545],[119.092335,49.986082],[119.163168,50.027613],[119.190269,50.087538],[119.243856,50.078324],[119.360269,50.196441],[119.319001,50.220948],[119.358421,50.358949],[119.259871,50.345205],[119.125596,50.389095],[119.250631,50.448568],[119.28266,50.604899],[119.361501,50.632611],[119.383674,50.682301],[119.450196,50.695569],[119.506862,50.764118],[119.491464,50.879026],[119.633746,51.010218],[119.726137,51.050105],[119.788346,51.16656],[119.760629,51.21231],[119.944795,51.366848],[120.002693,51.459396],[119.985447,51.505227],[120.051968,51.553245],[120.035338,51.586343],[120.087077,51.678076],[120.172693,51.679931],[120.363634,51.789982],[120.398742,51.832153],[120.480046,51.855072],[120.481278,51.885735],[120.656821,51.92634],[120.719031,52.014438],[120.68577,52.036896],[120.747364,52.076996],[120.786784,52.157824],[120.7449,52.206984],[120.755371,52.258287],[120.627256,52.324161],[120.62356,52.361081],[120.688234,52.427531],[120.689466,52.516098],[120.727654,52.529568],[120.467728,52.644076],[120.40367,52.617929],[120.287873,52.623378],[120.196714,52.579043],[120.049505,52.598672],[120.035338,52.646255],[120.071063,52.706113],[120.038418,52.780006],[120.222584,52.842934],[120.350699,52.906131],[120.455409,53.011376],[120.549647,53.076125],[120.643886,53.106667],[120.736277,53.204615],[120.840371,53.24724],[120.882871,53.294472],[121.129246,53.277303],[121.285695,53.291253],[121.347289,53.327003],[121.499426,53.337008],[121.612143,53.260484],[121.679896,53.240437],[121.665114,53.170556],[121.754425,53.146519],[121.817867,53.061744],[121.785838,53.018575],[121.715621,52.998054],[121.66265,52.912626],[121.610295,52.892416],[121.591201,52.824499],[121.476636,52.772043],[121.373158,52.683268],[121.182217,52.599399],[121.325731,52.572498],[121.416274,52.499346],[121.519136,52.456709],[121.63986,52.444311],[121.714389,52.317944],[121.841272,52.282818],[121.94783,52.298555],[122.091344,52.427167],[122.168952,52.513549],[122.207756,52.469103],[122.310618,52.475299],[122.342031,52.41403],[122.484313,52.341711],[122.478153,52.29636],[122.585943,52.266344],[122.76087,52.26671],[122.769493,52.179843],[122.629059,52.136529],[122.683877,51.974649],[122.726377,51.978704],[122.706051,51.890166],[122.771957,51.779619],[122.749167,51.746661],[122.85634,51.606786],[122.854492,51.477659],[122.903768,51.415384],[122.965977,51.387015],[122.978296,51.331346],[123.058984,51.321999],[123.294273,51.25427],[123.465504,51.287212],[123.736517,50.974064],[123.825829,50.813669],[124.076516,50.564249],[123.983509,50.510249],[124.005067,50.434469],[123.920067,50.37307],[123.800575,50.455806],[123.777785,50.344441],[123.870792,50.270307],[123.878799,50.208696],[123.953944,50.186865],[124.007531,50.219417],[124.061733,50.199122],[124.103001,50.238555],[124.189233,50.216737],[124.278544,50.231284],[124.32474,50.178436],[124.368471,50.258068],[124.36416,50.360857],[124.43992,50.388713],[124.499666,50.397868],[124.504594,50.342532],[124.578507,50.294777],[124.619774,50.229753],[124.575427,50.179585],[124.508289,50.162723],[124.604992,50.070644],[124.680752,50.031841],[124.650571,49.99493],[124.66597,49.868217],[124.730644,49.817671],[124.74173,49.761274],[124.824266,49.849703],[124.972708,49.834654],[124.935135,49.866675],[124.977635,49.900601],[125.095896,49.795661],[125.177815,49.829637],[125.222779,49.799137],[125.219699,49.669199],[125.132236,49.671909],[125.234482,49.592077],[125.228323,49.486857],[125.264047,49.461585],[125.261583,49.318656],[125.219699,49.188999],[125.117453,49.126],[124.906802,49.183915],[124.807636,49.108769],[124.808252,49.020563],[124.709086,48.920406],[124.697383,48.841711],[124.653651,48.777089],[124.579122,48.596574],[124.520608,48.556196],[124.555717,48.467805],[124.507674,48.445584],[124.51876,48.378068],[124.579738,48.304095],[124.578507,48.251931],[124.463942,48.097518],[124.467637,48.178972],[124.418978,48.181765],[124.404812,48.264679],[124.317964,48.347856],[124.314269,48.503894],[124.25945,48.536391],[124.25945,48.536391],[124.07898,48.436058],[123.873256,48.281006],[123.746373,48.19772],[123.537569,48.021938],[123.300432,47.953861],[123.228983,47.840735],[123.166158,47.783677],[122.855108,47.677432],[122.763333,47.613338],[122.59395,47.547551],[122.543443,47.495427],[122.507103,47.401555],[122.418407,47.350503],[122.556378,47.17265],[122.679566,47.094092],[122.845869,47.046819],[122.778116,47.00277],[122.796594,46.938261],[122.895144,46.960317],[122.906847,46.807372],[123.026339,46.718841],[123.163694,46.740167],[123.221592,46.850355],[123.309056,46.86222],[123.374345,46.837668],[123.404526,46.935401],[123.52833,46.944797],[123.483366,46.845854],[123.562823,46.825797],[123.576989,46.891259],[123.625648,46.84749],[123.631808,46.728685],[123.603475,46.689299],[123.366338,46.677805],[123.276411,46.660972],[123.228368,46.58824],[123.18094,46.614138],[123.04605,46.617426],[123.002318,46.574257],[123.011557,46.43506],[123.178476,46.247944],[123.102716,46.172172],[123.112571,46.129894],[123.04605,46.10003],[122.792898,46.073056],[122.828623,45.912185],[122.752246,45.834701],[122.792283,45.766291],[122.741775,45.70532],[122.671558,45.700723],[122.640761,45.7713],[122.555146,45.821359],[122.504639,45.787157],[122.496016,45.858041],[122.446125,45.916764],[122.362357,45.917597],[122.372828,45.855957],[122.258879,45.794666],[122.200981,45.85679],[122.091344,45.881787],[122.040221,45.95879],[121.84312,46.02447],[121.762432,45.999538],[121.809243,45.96087],[121.817251,45.875539],[121.754425,45.795084],[121.644172,45.752516],[121.713773,45.701977],[121.811091,45.686932],[121.867142,45.719942],[121.949062,45.711169],[122.003264,45.623363],[121.966308,45.596157],[122.02359,45.490137],[122.163408,45.443979],[122.147394,45.295598],[122.239169,45.276234],[122.22993,45.20672],[122.143082,45.183108],[122.109822,45.142186],[122.119677,45.068705],[122.074713,45.006553],[122.079025,44.914258],[122.04946,44.912987],[122.114749,44.776386],[122.161561,44.728371],[122.103046,44.673935],[122.13138,44.577697],[122.196053,44.559794],[122.228082,44.480017],[122.28598,44.477883],[122.291524,44.310291],[122.271198,44.255463],[122.319241,44.232745],[122.483697,44.237032],[122.676486,44.28631],[122.76087,44.369772],[122.85634,44.398422],[123.025108,44.492823],[123.125506,44.509466],[123.128585,44.366778],[123.196955,44.34496],[123.323838,44.179991],[123.386664,44.161966],[123.32815,44.083795],[123.332461,44.028326],[123.400831,43.979264],[123.52525,43.695718],[123.5117,43.59267],[123.439019,43.577501],[123.439019,43.577501],[123.304744,43.551055],[123.315831,43.49205],[123.382968,43.46904],[123.419925,43.409955],[123.486446,43.445587],[123.608402,43.366474],[123.703873,43.370824]]],[[[124.076516,50.564249],[123.825829,50.813669],[123.736517,50.974064],[123.465504,51.287212],[123.661989,51.319008],[123.711264,51.398216],[123.842459,51.367595],[123.926227,51.300681],[124.071588,51.320878],[124.128255,51.347419],[124.239124,51.344429],[124.271769,51.308162],[124.406659,51.271867],[124.43684,51.353772],[124.490427,51.380294],[124.58713,51.363486],[124.62655,51.327608],[124.693687,51.332842],[124.783614,51.392243],[124.864302,51.379547],[124.942527,51.447465],[124.928976,51.498523],[125.047236,51.529801],[125.098975,51.658408],[125.130388,51.635389],[125.35151,51.623876],[125.567089,51.455668],[125.567089,51.455668],[125.595422,51.416877],[125.595422,51.416877],[125.597886,51.414638],[125.597886,51.414638],[125.600966,51.413518],[125.600966,51.413518],[125.623756,51.387762],[125.623756,51.387762],[125.63977,51.372451],[125.63977,51.372451],[125.668103,51.347419],[125.668103,51.347419],[125.670567,51.34555],[125.670567,51.34555],[125.743248,51.275984],[125.743248,51.275984],[125.756798,51.227675],[125.840566,51.220555],[125.878138,51.159431],[126.059225,51.043711],[126.033971,51.010971],[126.073391,50.963514],[125.890457,50.805729],[125.758646,50.746706],[125.825784,50.703906],[125.787595,50.677373],[125.829479,50.561589],[125.740784,50.523184],[125.632379,50.443996],[125.590495,50.452378],[125.519662,50.315795],[125.466075,50.297452],[125.448829,50.216354],[125.334264,50.165023],[125.258504,50.103659],[125.294228,50.029151],[125.231402,49.957606],[125.239409,49.844687],[125.177815,49.829637],[125.095896,49.795661],[124.977635,49.900601],[124.935135,49.866675],[124.972708,49.834654],[124.824266,49.849703],[124.74173,49.761274],[124.730644,49.817671],[124.66597,49.868217],[124.650571,49.99493],[124.680752,50.031841],[124.604992,50.070644],[124.508289,50.162723],[124.575427,50.179585],[124.619774,50.229753],[124.578507,50.294777],[124.504594,50.342532],[124.499666,50.397868],[124.43992,50.388713],[124.43992,50.539919],[124.322892,50.532693],[124.289015,50.553226],[124.076516,50.564249]]]]}},{type:"Feature",properties:{adcode:21e4,name:"辽宁省",center:[123.429096,41.796767],centroid:[122.606135,41.300702],childrenNum:14,level:"province",subFeatureIndex:5,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[119.239545,41.314696],[119.326392,41.329525],[119.30545,41.402271],[119.376283,41.422015],[119.405848,41.508548],[119.361501,41.56498],[119.415703,41.590044],[119.307914,41.657581],[119.294363,41.775935],[119.334399,41.869569],[119.324544,41.969296],[119.384906,42.089738],[119.315921,42.119037],[119.237697,42.201088],[119.284508,42.265325],[119.415703,42.309588],[119.502551,42.387857],[119.572152,42.359568],[119.541971,42.292329],[119.744615,42.211725],[119.846861,42.21527],[119.837622,42.135455],[119.989759,41.898969],[120.051968,41.775935],[120.035954,41.708075],[120.096316,41.696907],[120.188707,41.848179],[120.373489,41.994648],[120.456641,42.016433],[120.466496,42.105277],[120.58414,42.167394],[120.624792,42.154532],[120.745516,42.223689],[120.79048,42.218372],[120.933378,42.279493],[121.068884,42.252483],[121.285079,42.387857],[121.304789,42.435567],[121.304789,42.435567],[121.388557,42.475297],[121.604752,42.494271],[121.66573,42.437333],[121.904714,42.569666],[121.940438,42.688525],[122.071634,42.711391],[122.20406,42.683687],[122.203445,42.731171],[122.338951,42.670051],[122.395002,42.683687],[122.457212,42.774227],[122.374676,42.774667],[122.35127,42.830419],[122.436886,42.843142],[122.563769,42.826031],[122.624747,42.773349],[122.732536,42.786524],[122.786123,42.756218],[122.786123,42.756218],[122.831087,42.722381],[122.887137,42.770275],[123.058368,42.768957],[123.227752,42.831735],[123.169853,42.859811],[123.18402,42.926002],[123.259165,42.992997],[123.474743,43.04243],[123.515395,43.027561],[123.515395,43.027561],[123.572678,43.0035],[123.666916,43.179585],[123.664453,43.264606],[123.703873,43.370824],[123.710032,43.417344],[123.791952,43.491182],[123.87264,43.451234],[123.84985,43.415606],[123.896046,43.361689],[124.032784,43.280724],[124.098074,43.29292],[124.114704,43.247175],[124.226805,43.241945],[124.226805,43.241945],[124.282856,43.230176],[124.284088,43.166058],[124.425754,43.076092],[124.333363,42.997373],[124.422674,42.975927],[124.431913,42.930821],[124.369087,42.882613],[124.435609,42.88086],[124.454703,42.823836],[124.514449,42.873406],[124.514449,42.873406],[124.539086,42.867266],[124.659195,42.972862],[124.686912,43.051176],[124.785462,43.117161],[124.896331,43.129826],[124.840897,43.032372],[124.869846,42.988183],[124.859375,42.822959],[124.897563,42.787841],[124.975171,42.802768],[124.996113,42.745234],[124.996113,42.745234],[124.968396,42.72282],[125.038613,42.615476],[125.097127,42.62252],[125.068794,42.499564],[125.186439,42.428059],[125.175352,42.308261],[125.29854,42.290116],[125.305931,42.146103],[125.353358,42.178923],[125.490097,42.136343],[125.369989,42.003096],[125.291764,41.958618],[125.299156,41.872243],[125.299156,41.872243],[125.297308,41.861995],[125.297308,41.861995],[125.29238,41.83971],[125.29238,41.83971],[125.29238,41.83971],[125.319482,41.777273],[125.319482,41.777273],[125.323793,41.771026],[125.323793,41.771026],[125.325025,41.670097],[125.450677,41.674119],[125.450061,41.598099],[125.534444,41.478073],[125.547995,41.401373],[125.637306,41.34435],[125.646545,41.264344],[125.758646,41.232404],[125.737088,41.179737],[125.791291,41.167577],[125.712451,41.095471],[125.726617,41.055328],[125.674879,40.974516],[125.589263,40.931135],[125.707523,40.866915],[125.544915,40.72922],[125.49564,40.728767],[125.422343,40.635297],[125.279445,40.655273],[125.018287,40.53624],[124.985642,40.475279],[124.897563,40.47892],[124.851368,40.427017],[124.74481,40.375074],[124.718325,40.319441],[124.62039,40.290695],[124.388797,40.113384],[124.38079,40.108808],[124.336442,40.049751],[124.372167,40.021348],[124.239124,39.927352],[124.173218,39.841496],[124.144885,39.745413],[124.103001,39.823577],[124.002603,39.800137],[123.828908,39.831389],[123.697097,39.807032],[123.665684,39.831389],[123.612714,39.77485],[123.536337,39.788644],[123.392823,39.723787],[123.383584,39.766572],[123.274563,39.753693],[123.253005,39.689724],[123.010941,39.655184],[122.972753,39.594813],[122.85634,39.606799],[122.808913,39.559764],[122.581631,39.464211],[122.489856,39.403673],[122.412864,39.411995],[122.274893,39.322257],[122.242865,39.267618],[122.117213,39.213863],[122.167104,39.158676],[122.048228,39.101123],[121.963228,39.030046],[121.864062,39.037018],[121.920728,38.969598],[121.863446,38.942611],[121.790149,39.022609],[121.671273,39.010057],[121.655874,38.9468],[121.719316,38.92027],[121.708845,38.872772],[121.565331,38.875101],[121.509897,38.817784],[121.359608,38.822446],[121.259825,38.786543],[121.198848,38.721686],[121.13479,38.72402],[121.128014,38.958897],[121.204391,38.941215],[121.341129,38.980761],[121.370695,39.060251],[121.508049,39.034229],[121.68236,39.117837],[121.604136,39.166098],[121.598592,39.279198],[121.668193,39.276419],[121.723628,39.367603],[121.621382,39.32596],[121.474788,39.296332],[121.432904,39.357426],[121.246891,39.421702],[121.304173,39.481762],[121.224717,39.51962],[121.297398,39.605877],[121.450151,39.625235],[121.501274,39.706758],[121.45939,39.747713],[121.530223,39.851603],[121.626925,39.882831],[121.699606,39.937445],[121.76428,39.933316],[121.82341,40.036467],[121.884388,40.053415],[122.01004,40.149067],[121.940438,40.2423],[122.02667,40.245041],[122.040221,40.322178],[122.198517,40.382367],[122.245944,40.519868],[122.133843,40.614408],[122.148626,40.671612],[122.06609,40.648464],[121.951525,40.680687],[121.934279,40.798103],[121.852359,40.821199],[121.816019,40.894962],[121.682976,40.829802],[121.526527,40.851529],[121.499426,40.880035],[121.335586,40.900842],[121.23642,40.851077],[121.126167,40.869177],[121.086747,40.798103],[120.991276,40.744181],[121.033776,40.70972],[120.8299,40.671158],[120.822509,40.593966],[120.72827,40.539423],[120.674683,40.471183],[120.616169,40.457071],[120.599539,40.355471],[120.537329,40.325372],[120.523778,40.256914],[120.465264,40.178787],[120.371641,40.174673],[120.273091,40.127111],[119.955882,40.046544],[119.913998,39.988349],[119.854252,39.988349],[119.845629,40.000726],[119.845629,40.000726],[119.848093,40.020432],[119.848093,40.020432],[119.817296,40.049751],[119.817296,40.049751],[119.780339,40.047002],[119.780339,40.047002],[119.779723,40.049293],[119.779723,40.049293],[119.736608,40.10469],[119.745847,40.208038],[119.625123,40.224029],[119.642369,40.291151],[119.586934,40.37553],[119.598637,40.465266],[119.571536,40.540333],[119.30237,40.530329],[119.162552,40.599872],[119.184726,40.680233],[119.054147,40.664804],[118.911249,40.776811],[118.849039,40.800821],[118.90201,40.960963],[118.977154,40.959155],[118.977154,40.959155],[119.013495,41.007485],[118.951901,41.01832],[118.96422,41.079236],[119.037516,41.067509],[119.126212,41.138744],[119.2494,41.279634],[119.239545,41.314696]]],[[[122.969057,39.513158],[122.978912,39.561609],[123.036194,39.533004],[122.969057,39.513158]]]]}},{type:"Feature",properties:{adcode:22e4,name:"吉林省",center:[125.3245,43.886841],centroid:[126.171246,43.703944],childrenNum:9,level:"province",subFeatureIndex:6,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[125.707523,40.866915],[125.589263,40.931135],[125.674879,40.974516],[125.726617,41.055328],[125.712451,41.095471],[125.791291,41.167577],[125.737088,41.179737],[125.758646,41.232404],[125.646545,41.264344],[125.637306,41.34435],[125.547995,41.401373],[125.534444,41.478073],[125.450061,41.598099],[125.450677,41.674119],[125.325025,41.670097],[125.323793,41.771026],[125.323793,41.771026],[125.319482,41.777273],[125.319482,41.777273],[125.29238,41.83971],[125.29238,41.83971],[125.29238,41.83971],[125.297308,41.861995],[125.297308,41.861995],[125.299156,41.872243],[125.299156,41.872243],[125.291764,41.958618],[125.369989,42.003096],[125.490097,42.136343],[125.353358,42.178923],[125.305931,42.146103],[125.29854,42.290116],[125.175352,42.308261],[125.186439,42.428059],[125.068794,42.499564],[125.097127,42.62252],[125.038613,42.615476],[124.968396,42.72282],[124.996113,42.745234],[124.996113,42.745234],[124.975171,42.802768],[124.897563,42.787841],[124.859375,42.822959],[124.869846,42.988183],[124.840897,43.032372],[124.896331,43.129826],[124.785462,43.117161],[124.686912,43.051176],[124.659195,42.972862],[124.539086,42.867266],[124.514449,42.873406],[124.514449,42.873406],[124.454703,42.823836],[124.435609,42.88086],[124.369087,42.882613],[124.431913,42.930821],[124.422674,42.975927],[124.333363,42.997373],[124.425754,43.076092],[124.284088,43.166058],[124.282856,43.230176],[124.226805,43.241945],[124.226805,43.241945],[124.114704,43.247175],[124.098074,43.29292],[124.032784,43.280724],[123.896046,43.361689],[123.84985,43.415606],[123.87264,43.451234],[123.791952,43.491182],[123.710032,43.417344],[123.703873,43.370824],[123.608402,43.366474],[123.486446,43.445587],[123.419925,43.409955],[123.382968,43.46904],[123.315831,43.49205],[123.304744,43.551055],[123.439019,43.577501],[123.439019,43.577501],[123.5117,43.59267],[123.52525,43.695718],[123.400831,43.979264],[123.332461,44.028326],[123.32815,44.083795],[123.386664,44.161966],[123.323838,44.179991],[123.196955,44.34496],[123.128585,44.366778],[123.125506,44.509466],[123.025108,44.492823],[122.85634,44.398422],[122.76087,44.369772],[122.676486,44.28631],[122.483697,44.237032],[122.319241,44.232745],[122.271198,44.255463],[122.291524,44.310291],[122.28598,44.477883],[122.228082,44.480017],[122.196053,44.559794],[122.13138,44.577697],[122.103046,44.673935],[122.161561,44.728371],[122.114749,44.776386],[122.04946,44.912987],[122.079025,44.914258],[122.074713,45.006553],[122.119677,45.068705],[122.109822,45.142186],[122.143082,45.183108],[122.22993,45.20672],[122.239169,45.276234],[122.147394,45.295598],[122.163408,45.443979],[122.02359,45.490137],[121.966308,45.596157],[122.003264,45.623363],[121.949062,45.711169],[121.867142,45.719942],[121.811091,45.686932],[121.713773,45.701977],[121.644172,45.752516],[121.754425,45.795084],[121.817251,45.875539],[121.809243,45.96087],[121.762432,45.999538],[121.84312,46.02447],[122.040221,45.95879],[122.091344,45.881787],[122.200981,45.85679],[122.258879,45.794666],[122.372828,45.855957],[122.362357,45.917597],[122.446125,45.916764],[122.496016,45.858041],[122.504639,45.787157],[122.555146,45.821359],[122.640761,45.7713],[122.671558,45.700723],[122.741775,45.70532],[122.792283,45.766291],[122.752246,45.834701],[122.828623,45.912185],[122.792898,46.073056],[123.04605,46.10003],[123.112571,46.129894],[123.102716,46.172172],[123.178476,46.247944],[123.248078,46.273178],[123.319527,46.253736],[123.319527,46.253736],[123.373113,46.223112],[123.498765,46.259528],[123.565902,46.22601],[123.610866,46.252909],[123.779633,46.264078],[123.896046,46.303774],[123.982893,46.22601],[123.99398,46.101275],[124.040176,46.019484],[123.970574,45.971267],[123.996444,45.907189],[124.061118,45.886369],[124.064813,45.797586],[124.009379,45.78215],[124.13811,45.68735],[124.129487,45.637589],[124.273001,45.584014],[124.287783,45.539191],[124.354305,45.546734],[124.398652,45.44062],[124.480572,45.456151],[124.544014,45.412066],[124.625318,45.437262],[124.886476,45.442719],[124.923433,45.541286],[124.961005,45.49517],[125.025678,45.493492],[125.06941,45.384757],[125.248649,45.417526],[125.347815,45.395262],[125.398322,45.416686],[125.424807,45.485523],[125.497488,45.469161],[125.628067,45.522006],[125.687813,45.51404],[125.716146,45.421725],[125.697052,45.349447],[125.760494,45.291389],[125.915095,45.196602],[126.166398,45.133323],[126.321615,45.178891],[126.428172,45.2358],[126.567375,45.252651],[126.831613,45.146406],[126.96404,45.132056],[126.968351,45.074621],[127.085995,44.944757],[127.021938,44.899002],[126.984366,44.823936],[127.037336,44.72157],[127.049039,44.567041],[127.094003,44.615189],[127.182082,44.644144],[127.392733,44.632223],[127.557189,44.575566],[127.536247,44.522266],[127.463566,44.484713],[127.50853,44.437312],[127.483892,44.401842],[127.483892,44.401842],[127.623095,44.277743],[127.591066,44.227601],[127.681609,44.167116],[127.724109,44.196723],[127.729036,44.098836],[127.862079,44.063162],[128.059796,44.110007],[128.089977,44.132342],[128.101679,44.290593],[128.049941,44.349239],[128.190375,44.367206],[128.211317,44.431757],[128.373309,44.51416],[128.46262,44.433894],[128.481714,44.375332],[128.450301,44.203157],[128.574721,44.047682],[128.584576,43.990887],[128.644938,43.936193],[128.636315,43.891366],[128.723778,43.894816],[128.760734,43.857724],[128.719467,43.816724],[128.877763,43.540213],[128.949212,43.55409],[129.014501,43.523295],[129.230696,43.59527],[129.211602,43.784336],[129.406855,43.819314],[129.467833,43.874548],[129.742542,43.875841],[129.784426,43.964623],[129.869425,44.005521],[129.869425,44.005521],[129.880512,44.000357],[129.880512,44.000357],[129.98091,44.014128],[130.017251,43.962039],[130.027106,43.851684],[130.079461,43.835285],[130.079461,43.835285],[130.189098,43.940501],[130.260547,43.948256],[130.353554,44.050262],[130.338155,43.949979],[130.338155,43.949979],[130.383119,43.906025],[130.380039,43.783904],[130.423771,43.742853],[130.4133,43.652009],[130.488444,43.655905],[130.823515,43.502901],[130.841378,43.454274],[130.907283,43.434291],[131.026775,43.508542],[131.134565,43.428643],[131.134565,43.428643],[131.294093,43.469909],[131.304564,43.502033],[131.314419,43.392567],[131.275615,43.369084],[131.255289,43.265041],[131.206014,43.23715],[131.218332,43.146853],[131.171521,43.069536],[131.102536,43.021],[131.151195,42.968485],[131.114855,42.915048],[131.034167,42.929069],[131.045869,42.866828],[130.949167,42.876913],[130.890653,42.852793],[130.801957,42.879544],[130.784095,42.842265],[130.666451,42.847968],[130.40714,42.731611],[130.464423,42.688525],[130.586995,42.67621],[130.633806,42.603586],[130.570364,42.557327],[130.558661,42.496035],[130.482285,42.626483],[130.388046,42.603145],[130.242069,42.738643],[130.265474,42.904092],[130.10225,42.922935],[130.144134,42.976365],[129.994461,42.980304],[129.98707,42.977678],[129.939642,43.01225],[129.899606,43.002187],[129.85957,42.966295],[129.858338,42.964544],[129.839244,42.879983],[129.835549,42.866828],[129.821382,42.854109],[129.816454,42.851039],[129.7641,42.716227],[129.764716,42.713149],[129.776418,42.69908],[129.794281,42.684127],[129.741926,42.580681],[129.748701,42.470884],[129.704354,42.427176],[129.612579,42.436892],[129.601492,42.42276],[129.546057,42.361336],[129.452434,42.440866],[129.344029,42.451462],[129.239935,42.36841],[129.231928,42.36001],[129.260261,42.335689],[129.183269,42.262225],[129.215914,42.20818],[129.120443,42.142111],[128.954755,42.083966],[128.930734,42.014211],[128.737945,42.050209],[128.70222,42.020434],[128.60675,42.030212],[128.569177,41.996426],[128.466316,42.020878],[128.090593,42.022656],[128.033926,42.000428],[128.106607,41.950164],[128.112766,41.79378],[128.171897,41.713882],[128.278454,41.658922],[128.317258,41.593177],[128.242114,41.501827],[128.203309,41.411246],[128.113998,41.364561],[127.932296,41.446686],[127.850376,41.422912],[127.636645,41.41349],[127.547334,41.477176],[127.40998,41.463278],[127.294183,41.48659],[127.283096,41.513925],[127.115561,41.540353],[127.179618,41.599888],[127.039184,41.671884],[127.051503,41.744693],[126.943714,41.772365],[126.931395,41.812959],[126.808207,41.748264],[126.798968,41.697354],[126.726903,41.751389],[126.688099,41.674119],[126.608643,41.670543],[126.569838,41.621809],[126.497158,41.406758],[126.539041,41.366806],[126.435564,41.351088],[126.322847,41.231054],[126.293282,41.17073],[126.157775,41.091413],[126.031507,40.927067],[125.959442,40.881845],[125.875059,40.90853],[125.817161,40.866915],[125.785132,40.895867],[125.707523,40.866915]]]]}},{type:"Feature",properties:{adcode:23e4,name:"黑龙江省",center:[126.642464,45.756967],centroid:[127.693002,48.040469],childrenNum:13,level:"province",subFeatureIndex:7,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[123.319527,46.253736],[123.319527,46.253736],[123.248078,46.273178],[123.178476,46.247944],[123.011557,46.43506],[123.002318,46.574257],[123.04605,46.617426],[123.18094,46.614138],[123.228368,46.58824],[123.276411,46.660972],[123.366338,46.677805],[123.603475,46.689299],[123.631808,46.728685],[123.625648,46.84749],[123.576989,46.891259],[123.562823,46.825797],[123.483366,46.845854],[123.52833,46.944797],[123.404526,46.935401],[123.374345,46.837668],[123.309056,46.86222],[123.221592,46.850355],[123.163694,46.740167],[123.026339,46.718841],[122.906847,46.807372],[122.895144,46.960317],[122.796594,46.938261],[122.778116,47.00277],[122.845869,47.046819],[122.679566,47.094092],[122.556378,47.17265],[122.418407,47.350503],[122.507103,47.401555],[122.543443,47.495427],[122.59395,47.547551],[122.763333,47.613338],[122.855108,47.677432],[123.166158,47.783677],[123.228983,47.840735],[123.300432,47.953861],[123.537569,48.021938],[123.746373,48.19772],[123.873256,48.281006],[124.07898,48.436058],[124.25945,48.536391],[124.25945,48.536391],[124.314269,48.503894],[124.317964,48.347856],[124.404812,48.264679],[124.418978,48.181765],[124.467637,48.178972],[124.463942,48.097518],[124.578507,48.251931],[124.579738,48.304095],[124.51876,48.378068],[124.507674,48.445584],[124.555717,48.467805],[124.520608,48.556196],[124.579122,48.596574],[124.653651,48.777089],[124.697383,48.841711],[124.709086,48.920406],[124.808252,49.020563],[124.807636,49.108769],[124.906802,49.183915],[125.117453,49.126],[125.219699,49.188999],[125.261583,49.318656],[125.264047,49.461585],[125.228323,49.486857],[125.234482,49.592077],[125.132236,49.671909],[125.219699,49.669199],[125.222779,49.799137],[125.177815,49.829637],[125.239409,49.844687],[125.231402,49.957606],[125.294228,50.029151],[125.258504,50.103659],[125.334264,50.165023],[125.448829,50.216354],[125.466075,50.297452],[125.519662,50.315795],[125.590495,50.452378],[125.632379,50.443996],[125.740784,50.523184],[125.829479,50.561589],[125.787595,50.677373],[125.825784,50.703906],[125.758646,50.746706],[125.890457,50.805729],[126.073391,50.963514],[126.033971,51.010971],[126.059225,51.043711],[125.878138,51.159431],[125.840566,51.220555],[125.756798,51.227675],[125.743248,51.275984],[125.743248,51.275984],[125.670567,51.34555],[125.670567,51.34555],[125.668103,51.347419],[125.668103,51.347419],[125.63977,51.372451],[125.63977,51.372451],[125.623756,51.387762],[125.623756,51.387762],[125.600966,51.413518],[125.600966,51.413518],[125.597886,51.414638],[125.597886,51.414638],[125.595422,51.416877],[125.595422,51.416877],[125.567089,51.455668],[125.567089,51.455668],[125.35151,51.623876],[125.130388,51.635389],[125.098975,51.658408],[125.047236,51.529801],[124.928976,51.498523],[124.942527,51.447465],[124.864302,51.379547],[124.783614,51.392243],[124.693687,51.332842],[124.62655,51.327608],[124.58713,51.363486],[124.490427,51.380294],[124.43684,51.353772],[124.406659,51.271867],[124.271769,51.308162],[124.239124,51.344429],[124.128255,51.347419],[124.071588,51.320878],[123.926227,51.300681],[123.842459,51.367595],[123.711264,51.398216],[123.661989,51.319008],[123.465504,51.287212],[123.294273,51.25427],[123.058984,51.321999],[122.978296,51.331346],[122.965977,51.387015],[122.903768,51.415384],[122.854492,51.477659],[122.85634,51.606786],[122.749167,51.746661],[122.771957,51.779619],[122.706051,51.890166],[122.726377,51.978704],[122.683877,51.974649],[122.629059,52.136529],[122.769493,52.179843],[122.76087,52.26671],[122.585943,52.266344],[122.478153,52.29636],[122.484313,52.341711],[122.342031,52.41403],[122.310618,52.475299],[122.207756,52.469103],[122.168952,52.513549],[122.091344,52.427167],[121.94783,52.298555],[121.841272,52.282818],[121.714389,52.317944],[121.63986,52.444311],[121.519136,52.456709],[121.416274,52.499346],[121.325731,52.572498],[121.182217,52.599399],[121.373158,52.683268],[121.476636,52.772043],[121.591201,52.824499],[121.610295,52.892416],[121.66265,52.912626],[121.715621,52.998054],[121.785838,53.018575],[121.817867,53.061744],[121.754425,53.146519],[121.665114,53.170556],[121.679896,53.240437],[121.612143,53.260484],[121.499426,53.337008],[121.596128,53.352368],[121.697758,53.392705],[121.754425,53.389494],[121.875765,53.426587],[122.111054,53.426944],[122.161561,53.468635],[122.227466,53.461868],[122.350038,53.50566],[122.435038,53.444766],[122.608117,53.46543],[122.894528,53.462936],[123.052209,53.506727],[123.137209,53.498186],[123.274563,53.563269],[123.454417,53.536608],[123.510468,53.509218],[123.517243,53.558293],[123.569598,53.505304],[123.58746,53.546919],[123.668764,53.533763],[123.698329,53.498542],[123.865249,53.489644],[124.058038,53.404121],[124.125791,53.348082],[124.239124,53.379501],[124.327819,53.332006],[124.375863,53.259053],[124.435609,53.223962],[124.563108,53.201389],[124.683832,53.206406],[124.734339,53.146519],[124.832889,53.145083],[124.87231,53.099123],[124.887708,53.164458],[124.970244,53.194221],[125.195062,53.198522],[125.315786,53.145083],[125.503647,53.095171],[125.530749,53.050956],[125.613901,53.083313],[125.684118,53.008136],[125.742632,52.993733],[125.737704,52.945087],[125.665023,52.913348],[125.678574,52.860999],[125.772197,52.89783],[125.855349,52.866418],[125.985312,52.758648],[126.058609,52.798098],[126.115275,52.757924],[126.045058,52.738366],[126.061688,52.673473],[125.995783,52.675287],[125.968682,52.630279],[126.030891,52.576135],[126.066616,52.60376],[126.213209,52.5252],[126.205202,52.466187],[126.266796,52.475664],[126.353644,52.389207],[126.327774,52.310628],[126.4331,52.298555],[126.300673,52.220915],[126.34502,52.192315],[126.499005,52.160394],[126.563679,52.119266],[126.514404,52.037264],[126.450962,52.027693],[126.462665,51.948473],[126.510092,51.922281],[126.622809,51.777397],[126.734294,51.711454],[126.741069,51.642073],[126.69549,51.578536],[126.837156,51.536128],[126.784185,51.44821],[126.908605,51.407174],[126.930163,51.359376],[126.837156,51.345177],[126.841468,51.258763],[126.92154,51.259512],[126.887047,51.321999],[126.978822,51.329477],[126.976358,51.291702],[126.899982,51.200689],[126.922772,51.061764],[127.143894,50.91035],[127.236285,50.781524],[127.295415,50.755035],[127.294799,50.663721],[127.370559,50.581349],[127.293567,50.46571],[127.3644,50.43828],[127.332371,50.340623],[127.371791,50.296688],[127.603385,50.23932],[127.58737,50.137802],[127.501755,50.056817],[127.495595,49.994545],[127.543638,49.944131],[127.531936,49.825777],[127.563964,49.793343],[127.660051,49.77905],[127.677913,49.697846],[127.815268,49.594017],[127.897804,49.578889],[128.001281,49.592465],[128.070882,49.55677],[128.185447,49.539301],[128.287077,49.566473],[128.343128,49.545125],[128.389939,49.590138],[128.537764,49.604487],[128.715155,49.56492],[128.744104,49.594792],[128.813089,49.558323],[128.754575,49.506676],[128.792147,49.473251],[128.871604,49.492298],[129.013886,49.457307],[129.055769,49.382188],[129.143849,49.357253],[129.215298,49.398935],[129.320623,49.358422],[129.379138,49.366995],[129.390224,49.432799],[129.448739,49.441359],[129.546057,49.395041],[129.562687,49.299541],[129.604571,49.278858],[129.714209,49.296029],[129.761636,49.257384],[129.753629,49.208547],[129.847867,49.181177],[129.866962,49.114252],[129.913157,49.108377],[129.937179,49.04057],[130.020946,49.020955],[130.059135,48.978954],[130.211272,48.901137],[130.245148,48.866514],[130.471198,48.905464],[130.501995,48.86612],[130.680617,48.881074],[130.689856,48.849586],[130.622103,48.783792],[130.538335,48.612004],[130.605473,48.5942],[130.620871,48.495964],[130.767465,48.507858],[130.740363,48.425339],[130.845073,48.296533],[130.769313,48.23121],[130.765617,48.189344],[130.673842,48.128278],[130.699711,48.044344],[130.891269,47.927006],[130.961486,47.827882],[130.966413,47.732996],[131.029855,47.694752],[131.115471,47.689919],[131.273767,47.739032],[131.456085,47.747079],[131.543548,47.735813],[131.59036,47.660912],[131.695685,47.709248],[131.825649,47.677432],[131.970394,47.671388],[132.000575,47.712066],[132.086191,47.703208],[132.272205,47.718507],[132.371987,47.76518],[132.469305,47.726154],[132.570319,47.720922],[132.599268,47.792521],[132.687348,47.885293],[132.661478,47.944643],[132.723072,47.963076],[132.819159,47.937028],[132.883216,48.002325],[132.992238,48.035142],[133.041513,48.102313],[133.15423,48.137063],[133.302055,48.103112],[133.407997,48.124684],[133.536728,48.117494],[133.59709,48.194928],[133.693177,48.186951],[133.740604,48.25472],[134.0689,48.338311],[134.131109,48.335527],[134.20379,48.38244],[134.350384,48.378466],[134.501905,48.418986],[134.696542,48.407072],[134.820961,48.376081],[134.927519,48.451537],[135.09567,48.437646],[135.082736,48.396346],[134.864077,48.332345],[134.679295,48.256314],[134.67252,48.170593],[134.632484,48.099516],[134.551796,48.032742],[134.607846,47.909362],[134.660201,47.900538],[134.678679,47.819446],[134.772918,47.763572],[134.779694,47.716091],[134.684223,47.631889],[134.685455,47.603253],[134.576434,47.519273],[134.568426,47.478445],[134.493898,47.446894],[134.339297,47.43961],[134.177305,47.32658],[134.156979,47.248656],[134.230276,47.182411],[134.222268,47.105496],[134.142812,47.093277],[134.042414,46.886761],[134.011001,46.637971],[133.919842,46.596052],[133.852089,46.449903],[133.950023,46.394634],[133.876726,46.362438],[133.922922,46.330635],[133.904444,46.25084],[133.83977,46.202825],[133.706111,46.163056],[133.745531,46.075547],[133.676546,45.942982],[133.616184,45.943398],[133.576148,45.870957],[133.51209,45.886785],[133.470822,45.838035],[133.484373,45.738737],[133.445569,45.70532],[133.491764,45.672301],[133.371656,45.576895],[133.21028,45.516975],[133.141295,45.427605],[133.095715,45.246753],[133.138215,45.178469],[133.103107,45.107147],[132.945426,45.020512],[132.867202,45.061944],[132.394161,45.163706],[132.025829,45.250545],[131.93159,45.288442],[131.917423,45.339354],[131.82996,45.31159],[131.79362,45.211778],[131.721555,45.234536],[131.650722,45.159909],[131.695685,45.132056],[131.632244,45.074621],[131.484418,44.995553],[131.464708,44.963388],[131.355687,44.98963],[131.274999,44.919766],[131.16105,44.948145],[131.090217,44.924426],[131.07913,44.881623],[130.967029,44.854059],[131.016304,44.789551],[131.064348,44.787003],[131.111775,44.71009],[131.310723,44.046392],[131.263912,44.030047],[131.267608,43.938778],[131.211557,43.826221],[131.244818,43.604369],[131.20047,43.531971],[131.304564,43.502033],[131.294093,43.469909],[131.134565,43.428643],[131.134565,43.428643],[131.026775,43.508542],[130.907283,43.434291],[130.841378,43.454274],[130.823515,43.502901],[130.488444,43.655905],[130.4133,43.652009],[130.423771,43.742853],[130.380039,43.783904],[130.383119,43.906025],[130.338155,43.949979],[130.338155,43.949979],[130.353554,44.050262],[130.260547,43.948256],[130.189098,43.940501],[130.079461,43.835285],[130.079461,43.835285],[130.027106,43.851684],[130.017251,43.962039],[129.98091,44.014128],[129.880512,44.000357],[129.880512,44.000357],[129.869425,44.005521],[129.869425,44.005521],[129.784426,43.964623],[129.742542,43.875841],[129.467833,43.874548],[129.406855,43.819314],[129.211602,43.784336],[129.230696,43.59527],[129.014501,43.523295],[128.949212,43.55409],[128.877763,43.540213],[128.719467,43.816724],[128.760734,43.857724],[128.723778,43.894816],[128.636315,43.891366],[128.644938,43.936193],[128.584576,43.990887],[128.574721,44.047682],[128.450301,44.203157],[128.481714,44.375332],[128.46262,44.433894],[128.373309,44.51416],[128.211317,44.431757],[128.190375,44.367206],[128.049941,44.349239],[128.101679,44.290593],[128.089977,44.132342],[128.059796,44.110007],[127.862079,44.063162],[127.729036,44.098836],[127.724109,44.196723],[127.681609,44.167116],[127.591066,44.227601],[127.623095,44.277743],[127.483892,44.401842],[127.483892,44.401842],[127.50853,44.437312],[127.463566,44.484713],[127.536247,44.522266],[127.557189,44.575566],[127.392733,44.632223],[127.182082,44.644144],[127.094003,44.615189],[127.049039,44.567041],[127.037336,44.72157],[126.984366,44.823936],[127.021938,44.899002],[127.085995,44.944757],[126.968351,45.074621],[126.96404,45.132056],[126.831613,45.146406],[126.567375,45.252651],[126.428172,45.2358],[126.321615,45.178891],[126.166398,45.133323],[125.915095,45.196602],[125.760494,45.291389],[125.697052,45.349447],[125.716146,45.421725],[125.687813,45.51404],[125.628067,45.522006],[125.497488,45.469161],[125.424807,45.485523],[125.398322,45.416686],[125.347815,45.395262],[125.248649,45.417526],[125.06941,45.384757],[125.025678,45.493492],[124.961005,45.49517],[124.923433,45.541286],[124.886476,45.442719],[124.625318,45.437262],[124.544014,45.412066],[124.480572,45.456151],[124.398652,45.44062],[124.354305,45.546734],[124.287783,45.539191],[124.273001,45.584014],[124.129487,45.637589],[124.13811,45.68735],[124.009379,45.78215],[124.064813,45.797586],[124.061118,45.886369],[123.996444,45.907189],[123.970574,45.971267],[124.040176,46.019484],[123.99398,46.101275],[123.982893,46.22601],[123.896046,46.303774],[123.779633,46.264078],[123.610866,46.252909],[123.565902,46.22601],[123.498765,46.259528],[123.373113,46.223112],[123.319527,46.253736]]],[[[124.43992,50.388713],[124.36416,50.360857],[124.368471,50.258068],[124.32474,50.178436],[124.278544,50.231284],[124.189233,50.216737],[124.103001,50.238555],[124.061733,50.199122],[124.007531,50.219417],[123.953944,50.186865],[123.878799,50.208696],[123.870792,50.270307],[123.777785,50.344441],[123.800575,50.455806],[123.920067,50.37307],[124.005067,50.434469],[123.983509,50.510249],[124.076516,50.564249],[124.289015,50.553226],[124.322892,50.532693],[124.43992,50.539919],[124.43992,50.388713]]]]}},{type:"Feature",properties:{adcode:31e4,name:"上海市",center:[121.472644,31.231706],centroid:[121.438732,31.072508],childrenNum:16,level:"province",subFeatureIndex:8,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[121.970004,30.789217],[121.943518,30.77688],[121.904714,30.814399],[121.601056,30.805149],[121.426129,30.730089],[121.362071,30.679673],[121.274608,30.677615],[121.217942,30.785105],[121.123087,30.778936],[121.097218,30.85704],[120.989428,30.833924],[120.991892,31.00793],[120.901349,31.017673],[120.881023,31.134513],[121.076892,31.158581],[121.063341,31.268088],[121.150188,31.275247],[121.106457,31.364697],[121.173594,31.448956],[121.25613,31.478047],[121.25613,31.478047],[121.302325,31.498966],[121.302325,31.498966],[121.343593,31.512229],[121.520984,31.394835],[121.713773,31.308992],[121.946598,31.065861],[121.990945,30.968434],[121.970004,30.789217]]],[[[121.371926,31.553028],[121.145261,31.753699],[121.200079,31.835066],[121.323267,31.86861],[121.43352,31.768452],[121.715005,31.673788],[121.974931,31.617249],[121.995873,31.493354],[121.890547,31.428537],[121.819098,31.438237],[121.547469,31.531101],[121.434136,31.59024],[121.371926,31.553028]]],[[[121.74149,31.345792],[121.509897,31.482639],[121.742106,31.407091],[121.74149,31.345792]]],[[[121.844352,31.294678],[121.792613,31.377468],[121.914569,31.343236],[121.844352,31.294678]]],[[[121.943518,31.215397],[122.008808,31.221026],[121.995873,31.160629],[121.943518,31.215397]]]]}},{type:"Feature",properties:{adcode:32e4,name:"江苏省",center:[118.767413,32.041544],centroid:[119.48196,32.985864],childrenNum:13,level:"province",subFeatureIndex:9,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[121.974931,31.617249],[121.715005,31.673788],[121.43352,31.768452],[121.323267,31.86861],[121.200079,31.835066],[121.145261,31.753699],[121.371926,31.553028],[121.343593,31.512229],[121.302325,31.498966],[121.302325,31.498966],[121.25613,31.478047],[121.25613,31.478047],[121.173594,31.448956],[121.106457,31.364697],[121.150188,31.275247],[121.063341,31.268088],[121.076892,31.158581],[120.881023,31.134513],[120.901349,31.017673],[120.698089,30.970999],[120.713487,30.885286],[120.589068,30.854472],[120.504684,30.757858],[120.423996,30.900689],[120.35809,30.88734],[120.371025,30.948424],[120.226279,30.926356],[120.13512,30.941752],[120.001461,31.026902],[119.919542,31.170868],[119.678093,31.168308],[119.623891,31.130416],[119.460051,31.156533],[119.388602,31.194415],[119.388602,31.194415],[119.379979,31.269622],[119.267878,31.250698],[119.199508,31.293655],[119.075089,31.232282],[118.781286,31.239956],[118.728931,31.281384],[118.745561,31.37287],[118.853967,31.39841],[118.876756,31.532631],[118.873061,31.53569],[118.858278,31.624382],[118.804691,31.618268],[118.77451,31.682444],[118.736938,31.634061],[118.643931,31.65138],[118.697518,31.709935],[118.638388,31.759295],[118.552772,31.729275],[118.481939,31.778117],[118.504729,31.841674],[118.363679,31.930581],[118.400019,32.077724],[118.499801,32.1203],[118.522591,32.188178],[118.642083,32.208937],[118.69567,32.31721],[118.69259,32.463224],[118.592192,32.481396],[118.563859,32.56363],[118.719076,32.614042],[118.719076,32.614042],[118.92172,32.557074],[118.922336,32.557074],[118.92172,32.557074],[118.922336,32.557074],[118.978386,32.504106],[119.041212,32.515207],[119.084944,32.452622],[119.22045,32.57674],[119.184726,32.825465],[119.104038,32.82647],[118.995017,32.958604],[118.849039,32.956596],[118.811467,32.854622],[118.74125,32.850601],[118.756648,32.737433],[118.707373,32.720319],[118.375382,32.718809],[118.250346,32.84859],[118.2331,32.914414],[118.293462,32.947056],[118.244803,32.998256],[118.221397,33.182228],[118.038463,33.134642],[117.939297,33.262813],[117.971941,33.277821],[118.050782,33.492148],[118.108064,33.475181],[118.112376,33.617302],[118.16781,33.66313],[118.116071,33.767645],[117.901724,33.719883],[117.805638,33.736304],[117.752667,33.711422],[117.758826,33.885445],[117.715095,33.879485],[117.629479,34.028872],[117.575892,33.982744],[117.514914,34.061097],[117.410205,34.026888],[117.352922,34.089842],[117.192778,34.068532],[117.025243,34.167106],[117.04988,34.242321],[116.971656,34.279409],[116.969192,34.387613],[116.828142,34.389094],[116.774555,34.452764],[116.574991,34.488773],[116.595933,34.510469],[116.491839,34.57109],[116.429629,34.652834],[116.374195,34.640036],[116.408071,34.85095],[116.445028,34.89562],[116.677853,34.939285],[116.821983,34.929475],[116.966728,34.875497],[117.000605,34.793482],[117.088069,34.702039],[117.07575,34.637575],[117.137344,34.633144],[117.175532,34.47003],[117.242669,34.445856],[117.301184,34.557294],[117.301184,34.557294],[117.322125,34.566656],[117.322125,34.566656],[117.32151,34.566656],[117.32151,34.566656],[117.322125,34.574046],[117.322125,34.574046],[117.402813,34.569612],[117.465023,34.484827],[117.592523,34.462631],[117.684298,34.547439],[117.801942,34.51885],[117.793935,34.65185],[117.902956,34.644467],[117.951615,34.678424],[118.084042,34.655788],[118.079115,34.569612],[118.185056,34.543989],[118.132702,34.483348],[118.177665,34.453257],[118.179513,34.379218],[118.290382,34.424637],[118.404947,34.427598],[118.440671,34.527724],[118.424657,34.595228],[118.460997,34.65628],[118.601431,34.714336],[118.690127,34.678424],[118.783749,34.723188],[118.719076,34.745315],[118.772047,34.794464],[118.860742,34.94419],[118.865053,35.029974],[118.928495,35.051039],[119.114509,35.054958],[119.137915,35.09609],[119.286972,35.11518],[119.306066,35.076506],[119.238929,35.04908],[119.202588,34.890222],[119.238313,34.799378],[119.378747,34.764487],[119.459435,34.770876],[119.50871,34.729089],[119.465594,34.673012],[119.582623,34.598676],[119.781571,34.515892],[119.811752,34.48532],[119.962657,34.458684],[120.311895,34.307091],[120.367329,34.091328],[120.583524,33.668608],[120.651277,33.575937],[120.741205,33.337826],[120.821893,33.298327],[120.90566,33.030366],[120.929682,32.876232],[120.974646,32.874724],[120.966638,32.770141],[120.900733,32.72334],[120.916131,32.642261],[121.153268,32.529333],[121.352216,32.47433],[121.425513,32.430909],[121.472941,32.138034],[121.524063,32.137528],[121.759352,32.059471],[121.856055,31.95546],[121.970004,31.719096],[121.974931,31.617249]]]]}},{type:"Feature",properties:{adcode:33e4,name:"浙江省",center:[120.153576,30.287459],centroid:[120.109522,29.181876],childrenNum:11,level:"province",subFeatureIndex:10,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[120.461568,27.14259],[120.401206,27.211253],[120.430155,27.258601],[120.34146,27.39946],[120.26262,27.432921],[120.13512,27.420175],[120.052584,27.338886],[120.007005,27.376084],[119.843165,27.300611],[119.770484,27.305928],[119.685485,27.438762],[119.70889,27.514141],[119.630666,27.582574],[119.644217,27.663684],[119.501319,27.649905],[119.474833,27.539079],[119.376899,27.534835],[119.267878,27.421237],[119.194581,27.418582],[118.983314,27.498751],[118.903858,27.462125],[118.869365,27.54014],[118.913713,27.61651],[118.818242,27.916697],[118.730163,27.970611],[118.719076,28.063576],[118.802228,28.117416],[118.771431,28.188634],[118.802228,28.240303],[118.700598,28.310912],[118.674728,28.271398],[118.587881,28.28299],[118.444367,28.25348],[118.433896,28.288786],[118.486867,28.328821],[118.432048,28.402003],[118.472084,28.482497],[118.426505,28.532447],[118.425273,28.537177],[118.426505,28.532447],[118.425273,28.537177],[118.421577,28.540331],[118.421577,28.541908],[118.423425,28.587626],[118.423425,28.587626],[118.431432,28.679528],[118.379077,28.785509],[118.379077,28.785509],[118.306396,28.823782],[118.270056,28.918619],[118.111144,28.997671],[118.111144,28.997671],[118.037847,29.097054],[118.027992,29.168132],[118.077883,29.290836],[118.136397,29.284052],[118.20723,29.346135],[118.193064,29.395149],[118.316252,29.422774],[118.310708,29.49623],[118.496106,29.519662],[118.500417,29.575877],[118.573714,29.638302],[118.644547,29.641942],[118.744945,29.738621],[118.755416,29.845586],[118.894619,29.93792],[118.902626,30.029133],[118.847807,30.163208],[118.929727,30.202515],[118.880452,30.31518],[118.954365,30.360106],[119.06277,30.304849],[119.201356,30.290901],[119.246936,30.341002],[119.36766,30.384885],[119.326392,30.532906],[119.237081,30.54682],[119.238929,30.60915],[119.312225,30.620993],[119.386754,30.685333],[119.416935,30.642101],[119.482841,30.70437],[119.479761,30.772253],[119.575847,30.829814],[119.585702,30.976642],[119.633746,31.019724],[119.623891,31.130416],[119.678093,31.168308],[119.919542,31.170868],[120.001461,31.026902],[120.13512,30.941752],[120.226279,30.926356],[120.371025,30.948424],[120.35809,30.88734],[120.423996,30.900689],[120.504684,30.757858],[120.589068,30.854472],[120.713487,30.885286],[120.698089,30.970999],[120.901349,31.017673],[120.991892,31.00793],[120.989428,30.833924],[121.097218,30.85704],[121.123087,30.778936],[121.217942,30.785105],[121.274608,30.677615],[121.058413,30.563823],[121.225333,30.404496],[121.328195,30.397271],[121.497578,30.258864],[121.632469,30.072119],[121.721164,29.992865],[121.78399,29.993383],[121.919497,29.920808],[121.968156,29.956584],[122.00696,29.891764],[122.140003,29.901619],[122.10243,29.859597],[121.997721,29.759919],[121.937359,29.748491],[121.833265,29.653382],[121.966308,29.635702],[122.000185,29.582642],[121.968772,29.515497],[121.993409,29.451954],[121.937975,29.384201],[121.986634,29.15507],[121.966308,29.053128],[121.884388,29.105419],[121.780294,29.109601],[121.767975,29.166565],[121.660186,29.118487],[121.774751,28.864138],[121.668193,28.873046],[121.704534,28.816443],[121.689135,28.719415],[121.540694,28.655379],[121.634317,28.56293],[121.687287,28.40095],[121.627541,28.251899],[121.499426,28.306171],[121.373774,28.133246],[121.288159,28.144854],[121.261057,28.034533],[121.140949,28.031364],[121.108304,28.13905],[121.059029,28.096305],[120.991892,27.95],[121.05595,27.900306],[121.162507,27.90718],[121.152652,27.810376],[121.153268,27.809847],[121.149572,27.801908],[121.149572,27.801379],[121.149572,27.80085],[121.13479,27.787088],[121.134174,27.787088],[121.152036,27.815139],[121.027616,27.832601],[120.942001,27.896605],[120.797871,27.779677],[120.634647,27.577271],[120.703016,27.478581],[120.673451,27.369708],[120.572437,27.313903],[120.544104,27.154303],[120.461568,27.14259]]],[[[122.301379,29.942068],[122.163408,29.988201],[122.038989,29.989756],[121.991561,30.075743],[121.990945,30.076261],[121.952757,30.183898],[122.152938,30.113015],[122.293988,30.100075],[122.347574,30.014109],[122.301379,29.942068]]],[[[122.100583,30.304333],[122.228082,30.329641],[122.22993,30.232503],[122.058083,30.291934],[122.100583,30.304333]]],[[[122.317393,30.249561],[122.40732,30.272817],[122.397465,30.225266],[122.317393,30.249561]]],[[[122.435038,29.906287],[122.391922,29.831573],[122.327248,29.922883],[122.411632,29.951918],[122.435038,29.906287]]],[[[122.353734,30.464339],[122.423335,30.408624],[122.281669,30.418944],[122.277973,30.471558],[122.353734,30.464339]]],[[[122.303843,29.832611],[122.310002,29.766671],[122.221307,29.832611],[122.303843,29.832611]]],[[[122.13138,29.673659],[122.047612,29.719396],[122.130148,29.79056],[122.200981,29.711082],[122.192358,29.655462],[122.13138,29.673659]]],[[[121.943518,30.77688],[121.970004,30.789217],[122.011271,30.669381],[121.968156,30.68842],[121.943518,30.77688]]],[[[121.874533,29.964878],[121.835113,29.992865],[121.855439,30.085062],[121.924424,30.052441],[121.933047,29.994938],[121.874533,29.964878]]],[[[122.155401,29.97058],[122.154169,29.971098],[122.152322,29.971098],[122.163408,29.988201],[122.155401,29.97058]]],[[[121.136638,27.948414],[121.041783,27.943657],[121.0695,27.984349],[121.136638,27.948414]]],[[[121.134174,27.786029],[121.134174,27.787088],[121.13479,27.787088],[121.134174,27.786029]]],[[[122.152322,29.971098],[122.154169,29.971098],[122.155401,29.97058],[122.152322,29.971098]]]]}},{type:"Feature",properties:{adcode:34e4,name:"安徽省",center:[117.283042,31.86119],centroid:[117.226894,31.849585],childrenNum:16,level:"province",subFeatureIndex:11,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[115.5088,32.468777],[115.409018,32.549005],[115.304924,32.553039],[115.20083,32.591864],[115.183584,32.665937],[115.197135,32.85613],[115.139237,32.897837],[114.943368,32.935005],[114.883006,32.990227],[114.925506,33.016821],[114.902716,33.129632],[114.966158,33.147167],[115.042534,33.08653],[115.168186,33.088535],[115.301229,33.141657],[115.365286,33.335826],[115.312931,33.376307],[115.345576,33.503125],[115.421953,33.556992],[115.639995,33.584909],[115.563003,33.771624],[115.614126,33.775603],[115.629524,33.871536],[115.546988,33.875014],[115.60735,34.030359],[115.736082,34.076957],[115.877132,34.003083],[115.95782,34.007547],[116.00032,33.964881],[115.987385,33.900842],[116.05945,33.861103],[116.074232,33.781571],[116.155536,33.709929],[116.263326,33.729835],[116.316297,33.771127],[116.437021,33.801461],[116.437637,33.846694],[116.64336,33.896869],[116.648288,33.973317],[116.575607,34.069028],[116.575607,34.069028],[116.530643,34.107183],[116.565752,34.173541],[116.516477,34.296217],[116.409303,34.273971],[116.409303,34.273971],[116.26271,34.375762],[116.213435,34.382181],[116.162312,34.459178],[116.204196,34.508497],[116.196804,34.576017],[116.240536,34.552367],[116.281188,34.60754],[116.374195,34.640036],[116.429629,34.652834],[116.491839,34.57109],[116.595933,34.510469],[116.574991,34.488773],[116.774555,34.452764],[116.828142,34.389094],[116.969192,34.387613],[116.971656,34.279409],[117.04988,34.242321],[117.025243,34.167106],[117.192778,34.068532],[117.352922,34.089842],[117.410205,34.026888],[117.514914,34.061097],[117.575892,33.982744],[117.629479,34.028872],[117.715095,33.879485],[117.758826,33.885445],[117.752667,33.711422],[117.805638,33.736304],[117.901724,33.719883],[118.116071,33.767645],[118.16781,33.66313],[118.112376,33.617302],[118.108064,33.475181],[118.050782,33.492148],[117.971941,33.277821],[117.939297,33.262813],[118.038463,33.134642],[118.221397,33.182228],[118.244803,32.998256],[118.293462,32.947056],[118.2331,32.914414],[118.250346,32.84859],[118.375382,32.718809],[118.707373,32.720319],[118.756648,32.737433],[118.74125,32.850601],[118.811467,32.854622],[118.849039,32.956596],[118.995017,32.958604],[119.104038,32.82647],[119.184726,32.825465],[119.22045,32.57674],[119.084944,32.452622],[119.041212,32.515207],[118.978386,32.504106],[118.922336,32.557074],[118.92172,32.557074],[118.922336,32.557074],[118.92172,32.557074],[118.719076,32.614042],[118.719076,32.614042],[118.563859,32.56363],[118.592192,32.481396],[118.69259,32.463224],[118.69567,32.31721],[118.642083,32.208937],[118.522591,32.188178],[118.499801,32.1203],[118.400019,32.077724],[118.363679,31.930581],[118.504729,31.841674],[118.481939,31.778117],[118.552772,31.729275],[118.638388,31.759295],[118.697518,31.709935],[118.643931,31.65138],[118.736938,31.634061],[118.77451,31.682444],[118.804691,31.618268],[118.858278,31.624382],[118.873061,31.53569],[118.866285,31.527021],[118.870597,31.526001],[118.876756,31.532631],[118.853967,31.39841],[118.745561,31.37287],[118.728931,31.281384],[118.781286,31.239956],[119.075089,31.232282],[119.199508,31.293655],[119.267878,31.250698],[119.379979,31.269622],[119.388602,31.194415],[119.388602,31.194415],[119.460051,31.156533],[119.623891,31.130416],[119.633746,31.019724],[119.585702,30.976642],[119.575847,30.829814],[119.479761,30.772253],[119.482841,30.70437],[119.416935,30.642101],[119.386754,30.685333],[119.312225,30.620993],[119.238929,30.60915],[119.237081,30.54682],[119.326392,30.532906],[119.36766,30.384885],[119.246936,30.341002],[119.201356,30.290901],[119.06277,30.304849],[118.954365,30.360106],[118.880452,30.31518],[118.929727,30.202515],[118.847807,30.163208],[118.902626,30.029133],[118.894619,29.93792],[118.755416,29.845586],[118.744945,29.738621],[118.644547,29.641942],[118.573714,29.638302],[118.500417,29.575877],[118.496106,29.519662],[118.310708,29.49623],[118.316252,29.422774],[118.193064,29.395149],[118.136397,29.419125],[118.134549,29.508728],[118.008282,29.578479],[117.872775,29.547774],[117.807486,29.573796],[117.707703,29.548815],[117.647957,29.614897],[117.545711,29.594089],[117.532161,29.651822],[117.453936,29.688214],[117.455168,29.749011],[117.384335,29.84351],[117.29256,29.822749],[117.246365,29.915104],[117.17738,29.921846],[117.073286,29.832092],[117.136728,29.7755],[117.112706,29.712121],[116.780715,29.570153],[116.651983,29.637262],[116.677237,29.66898],[116.694483,29.672099],[116.694483,29.672099],[116.717273,29.690813],[116.710498,29.69705],[116.709882,29.69757],[116.706186,29.69809],[116.698795,29.707964],[116.684012,29.72823],[116.789954,29.795233],[116.882961,29.89332],[116.900207,29.949326],[116.83307,29.957621],[116.747454,30.057101],[116.666766,30.076779],[116.586078,30.046226],[116.552201,29.909918],[116.473361,29.89747],[116.26271,29.782251],[116.207891,29.82742],[116.13521,29.819634],[116.127203,29.899544],[116.073616,29.970061],[116.091479,30.036385],[116.065609,30.204584],[115.985537,30.290901],[115.903001,30.313631],[115.921479,30.416364],[115.876516,30.582368],[115.819234,30.59782],[115.762567,30.685848],[115.782893,30.751687],[115.851262,30.756829],[115.865429,30.864231],[115.976298,30.931488],[116.071769,30.956633],[116.058834,31.012545],[115.938726,31.047409],[115.869125,31.147828],[115.763799,31.118123],[115.700973,31.201068],[115.646155,31.209768],[115.559307,31.160117],[115.516191,31.263485],[115.457677,31.281384],[115.442279,31.346303],[115.372062,31.349368],[115.373909,31.405559],[115.371446,31.495905],[115.496481,31.674297],[115.660937,31.760822],[115.767495,31.787272],[115.816154,31.762348],[115.909777,31.791849],[115.893146,31.833033],[115.931334,31.994541],[115.941805,32.166402],[115.912856,32.227666],[115.899306,32.391005],[115.845719,32.501583],[115.789052,32.468777],[115.706517,32.494014],[115.667712,32.409696],[115.567314,32.421819],[115.509416,32.466758],[115.510648,32.467768],[115.510648,32.468272],[115.510648,32.468777],[115.5088,32.468777]]],[[[116.717273,29.690813],[116.694483,29.672099],[116.694483,29.672099],[116.677237,29.66898],[116.684012,29.72823],[116.698795,29.707964],[116.706186,29.69809],[116.709882,29.69757],[116.710498,29.69705],[116.709882,29.69757],[116.717273,29.690813]]],[[[118.873061,31.53569],[118.876756,31.532631],[118.870597,31.526001],[118.866285,31.527021],[118.873061,31.53569]]],[[[115.510648,32.468777],[115.510648,32.468272],[115.510648,32.467768],[115.509416,32.466758],[115.5088,32.468777],[115.510648,32.468777]]]]}},{type:"Feature",properties:{adcode:35e4,name:"福建省",center:[119.306239,26.075302],centroid:[118.005928,26.070282],childrenNum:9,level:"province",subFeatureIndex:12,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[120.461568,27.14259],[120.393199,27.081343],[120.287257,27.094128],[120.29588,27.035519],[120.231823,26.907006],[120.117258,26.916609],[120.047041,26.824809],[120.1382,26.79704],[120.165917,26.73133],[120.110483,26.692848],[120.1382,26.637775],[119.967585,26.597657],[119.896136,26.516306],[119.827767,26.524872],[119.851788,26.595516],[119.949107,26.624404],[120.052584,26.786892],[119.942947,26.784756],[119.86965,26.642588],[119.83023,26.69071],[119.711354,26.686433],[119.665159,26.725986],[119.577695,26.622264],[119.788346,26.58321],[119.876426,26.359867],[119.962657,26.373269],[119.8986,26.308388],[119.841317,26.322333],[119.668854,26.256887],[119.604181,26.168853],[119.668854,26.025924],[119.723673,26.011406],[119.688564,25.897892],[119.632514,25.884436],[119.635594,25.746011],[119.601101,25.683479],[119.472986,25.662448],[119.586934,25.592317],[119.634362,25.475161],[119.716898,25.550758],[119.716898,25.551838],[119.683637,25.592856],[119.785883,25.667841],[119.790194,25.614439],[119.883817,25.54644],[119.812368,25.523225],[119.864107,25.479482],[119.764325,25.433562],[119.773564,25.395732],[119.646064,25.460576],[119.649144,25.34275],[119.549362,25.367082],[119.48592,25.364919],[119.490232,25.447069],[119.438493,25.412487],[119.452044,25.490824],[119.36458,25.521065],[119.354725,25.427077],[119.288204,25.410865],[119.256175,25.488664],[119.14469,25.388165],[119.299291,25.32869],[119.380595,25.250247],[119.293131,25.23347],[119.26911,25.15984],[119.131755,25.223187],[119.165632,25.145217],[119.119436,25.012447],[119.107118,25.075327],[119.035669,25.125717],[119.081248,25.218856],[118.989473,25.202075],[118.996864,25.266481],[118.911249,25.241589],[118.981466,25.19612],[118.975923,25.118133],[118.868133,25.082372],[118.928495,25.025459],[119.02335,25.04877],[118.989473,24.973944],[119.032589,24.962011],[119.032589,24.961468],[118.918024,24.924034],[118.96114,24.871933],[118.86259,24.886589],[118.650707,24.808949],[118.786213,24.776358],[118.703677,24.665485],[118.675344,24.57628],[118.558316,24.512602],[118.557084,24.573016],[118.444367,24.614907],[118.355056,24.534376],[118.242955,24.512602],[118.134549,24.575736],[118.12531,24.571927],[118.048934,24.418385],[118.088354,24.409123],[118.158571,24.270111],[118.001507,24.176805],[117.762522,23.88718],[117.671979,23.877879],[117.612849,23.71364],[117.500132,23.703232],[117.463791,23.58539],[117.387415,23.555228],[117.192778,23.561809],[117.192778,23.629799],[117.053576,23.696657],[117.012308,23.855446],[116.980279,23.881709],[116.981511,23.999282],[116.939627,24.033713],[116.9347,24.127123],[116.998757,24.178988],[116.933468,24.21992],[116.903903,24.369888],[116.860787,24.462507],[116.789338,24.50988],[116.761005,24.58281],[116.815207,24.655154],[116.778867,24.680165],[116.597165,24.65461],[116.525716,24.604572],[116.486912,24.71876],[116.44626,24.714412],[116.376659,24.820353],[116.245464,24.793197],[116.18079,24.87519],[116.068073,24.849675],[116.014486,24.905584],[115.89253,24.937056],[115.873436,25.020038],[115.928255,25.050396],[115.880212,25.092126],[115.855574,25.209654],[115.929487,25.234553],[116.008327,25.319496],[116.005247,25.490284],[116.063145,25.563173],[116.067457,25.703967],[116.18079,25.774571],[116.131515,25.82413],[116.176478,25.893048],[116.258398,25.902736],[116.36434,25.960312],[116.383434,26.029687],[116.489375,26.113529],[116.471513,26.175296],[116.396985,26.166168],[116.412999,26.298197],[116.519557,26.410251],[116.601476,26.372733],[116.610716,26.477216],[116.539267,26.559129],[116.566368,26.650075],[116.516477,26.69071],[116.557745,26.774073],[116.548506,26.839758],[116.679085,26.978479],[116.910062,27.034453],[117.05296,27.100519],[117.043721,27.139928],[117.171836,27.290509],[117.100387,27.338886],[117.133032,27.4223],[117.084989,27.564011],[117.01662,27.563481],[117.040641,27.670043],[117.096692,27.626582],[117.118865,27.694416],[117.204481,27.683819],[117.296872,27.764854],[117.27901,27.870161],[117.341836,27.855879],[117.52169,27.982236],[117.608537,27.863814],[117.740348,27.800321],[117.78716,27.896076],[117.856145,27.945772],[117.999043,27.991218],[118.096977,27.96744],[118.155491,28.061992],[118.356288,28.091555],[118.37415,28.188106],[118.314404,28.22238],[118.433896,28.288786],[118.444367,28.25348],[118.587881,28.28299],[118.674728,28.271398],[118.700598,28.310912],[118.802228,28.240303],[118.771431,28.188634],[118.802228,28.117416],[118.719076,28.063576],[118.730163,27.970611],[118.818242,27.916697],[118.913713,27.61651],[118.869365,27.54014],[118.903858,27.462125],[118.983314,27.498751],[119.194581,27.418582],[119.267878,27.421237],[119.376899,27.534835],[119.474833,27.539079],[119.501319,27.649905],[119.644217,27.663684],[119.630666,27.582574],[119.70889,27.514141],[119.685485,27.438762],[119.770484,27.305928],[119.843165,27.300611],[120.007005,27.376084],[120.052584,27.338886],[120.13512,27.420175],[120.26262,27.432921],[120.34146,27.39946],[120.430155,27.258601],[120.401206,27.211253],[120.461568,27.14259]]],[[[118.412338,24.514235],[118.477012,24.437452],[118.335962,24.385148],[118.316252,24.487557],[118.374766,24.458695],[118.412338,24.514235]]],[[[119.532116,25.203158],[119.549362,25.162007],[119.444036,25.202075],[119.473601,25.259988],[119.532116,25.203158]]],[[[118.079115,24.444533],[118.093281,24.540907],[118.142557,24.561588],[118.20723,24.487012],[118.143173,24.421109],[118.079115,24.444533]]],[[[119.737224,26.646332],[119.668238,26.628683],[119.673782,26.681087],[119.737224,26.646332]]]]}},{type:"Feature",properties:{adcode:36e4,name:"江西省",center:[115.892151,28.676493],centroid:[115.732937,27.636129],childrenNum:11,level:"province",subFeatureIndex:13,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[113.94185,29.047374],[113.952321,29.092871],[114.061959,29.204176],[114.252284,29.234985],[114.259059,29.344049],[114.519602,29.325271],[114.660652,29.393585],[114.759818,29.363345],[114.931049,29.422252],[114.860216,29.475917],[114.940904,29.494147],[115.00065,29.572235],[115.154019,29.51029],[115.142316,29.651822],[115.359127,29.646623],[115.471844,29.742777],[115.511264,29.839877],[115.667712,29.850257],[115.837096,29.748491],[115.965827,29.724593],[116.13521,29.819634],[116.207891,29.82742],[116.26271,29.782251],[116.473361,29.89747],[116.552201,29.909918],[116.586078,30.046226],[116.666766,30.076779],[116.747454,30.057101],[116.83307,29.957621],[116.900207,29.949326],[116.882961,29.89332],[116.789954,29.795233],[116.684012,29.72823],[116.677237,29.66898],[116.651983,29.637262],[116.780715,29.570153],[117.112706,29.712121],[117.136728,29.7755],[117.073286,29.832092],[117.17738,29.921846],[117.246365,29.915104],[117.29256,29.822749],[117.384335,29.84351],[117.455168,29.749011],[117.453936,29.688214],[117.532161,29.651822],[117.545711,29.594089],[117.647957,29.614897],[117.707703,29.548815],[117.807486,29.573796],[117.872775,29.547774],[118.008282,29.578479],[118.134549,29.508728],[118.136397,29.419125],[118.193064,29.395149],[118.20723,29.346135],[118.136397,29.284052],[118.077883,29.290836],[118.027992,29.168132],[118.037847,29.097054],[118.111144,28.997671],[118.111144,28.997671],[118.270056,28.918619],[118.306396,28.823782],[118.379077,28.785509],[118.379077,28.785509],[118.431432,28.679528],[118.423425,28.587626],[118.423425,28.587626],[118.421577,28.541908],[118.421577,28.540331],[118.425273,28.537177],[118.426505,28.532447],[118.425273,28.537177],[118.426505,28.532447],[118.472084,28.482497],[118.432048,28.402003],[118.486867,28.328821],[118.433896,28.288786],[118.314404,28.22238],[118.37415,28.188106],[118.356288,28.091555],[118.155491,28.061992],[118.096977,27.96744],[117.999043,27.991218],[117.856145,27.945772],[117.78716,27.896076],[117.740348,27.800321],[117.608537,27.863814],[117.52169,27.982236],[117.341836,27.855879],[117.27901,27.870161],[117.296872,27.764854],[117.204481,27.683819],[117.118865,27.694416],[117.096692,27.626582],[117.040641,27.670043],[117.01662,27.563481],[117.084989,27.564011],[117.133032,27.4223],[117.100387,27.338886],[117.171836,27.290509],[117.043721,27.139928],[117.05296,27.100519],[116.910062,27.034453],[116.679085,26.978479],[116.548506,26.839758],[116.557745,26.774073],[116.516477,26.69071],[116.566368,26.650075],[116.539267,26.559129],[116.610716,26.477216],[116.601476,26.372733],[116.519557,26.410251],[116.412999,26.298197],[116.396985,26.166168],[116.471513,26.175296],[116.489375,26.113529],[116.383434,26.029687],[116.36434,25.960312],[116.258398,25.902736],[116.176478,25.893048],[116.131515,25.82413],[116.18079,25.774571],[116.067457,25.703967],[116.063145,25.563173],[116.005247,25.490284],[116.008327,25.319496],[115.929487,25.234553],[115.855574,25.209654],[115.880212,25.092126],[115.928255,25.050396],[115.873436,25.020038],[115.89253,24.937056],[115.907313,24.880075],[115.822313,24.90884],[115.756408,24.749192],[115.845103,24.563221],[115.688038,24.545261],[115.67264,24.604028],[115.573474,24.617083],[115.556227,24.682883],[115.412714,24.792654],[115.358511,24.735064],[115.308004,24.758429],[115.095505,24.674184],[115.056701,24.703541],[114.909491,24.661679],[114.868839,24.562132],[114.729637,24.608924],[114.704999,24.526211],[114.664963,24.583898],[114.589819,24.537642],[114.534384,24.558867],[114.428443,24.486468],[114.391486,24.562677],[114.308334,24.574104],[114.258443,24.641558],[114.169132,24.689407],[114.27261,24.700279],[114.33482,24.747562],[114.403189,24.877361],[114.395798,24.951161],[114.506051,24.999975],[114.561485,25.077495],[114.640326,25.073702],[114.735796,25.121925],[114.679746,25.194495],[114.743188,25.274597],[114.63663,25.324364],[114.535616,25.41681],[114.381015,25.31571],[114.31511,25.338424],[114.262755,25.29191],[114.13156,25.30922],[114.039785,25.250789],[114.051488,25.348699],[113.94493,25.441667],[113.983118,25.599332],[113.913517,25.701272],[113.971416,25.835979],[114.028082,25.893586],[114.007756,26.007104],[114.044096,26.076452],[114.237501,26.152204],[114.181451,26.214489],[114.088444,26.168316],[113.944314,26.16402],[114.029314,26.266545],[114.030546,26.376485],[114.085364,26.4065],[114.073046,26.480965],[114.106306,26.576254],[113.915365,26.613706],[113.860546,26.663978],[113.834677,26.803983],[113.927068,26.949149],[113.821126,27.037651],[113.779242,27.137265],[113.848844,27.225087],[113.872865,27.385116],[113.616635,27.345264],[113.632033,27.405303],[113.583374,27.524754],[113.607395,27.625522],[113.763228,27.799262],[113.729967,27.887086],[113.752141,27.933614],[113.864242,28.004954],[113.914133,27.991218],[114.047176,28.05724],[113.992357,28.161207],[114.107538,28.182833],[114.25598,28.323554],[114.252284,28.395687],[114.172212,28.432524],[114.218407,28.484601],[114.08598,28.558201],[114.157429,28.761384],[114.152502,28.83479],[114.076741,28.834266],[114.008988,28.955273],[113.966488,28.945326],[113.94185,29.047374]]]]}},{type:"Feature",properties:{adcode:37e4,name:"山东省",center:[117.000923,36.675807],centroid:[118.186283,36.374485],childrenNum:17,level:"province",subFeatureIndex:14,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[121.362071,37.634292],[121.4791,37.474914],[121.565331,37.440242],[121.635548,37.49438],[121.66573,37.47349],[121.923808,37.473015],[122.08888,37.554171],[122.166488,37.439292],[122.234857,37.469216],[122.284133,37.426464],[122.41656,37.414585],[122.487393,37.434541],[122.553914,37.406981],[122.670942,37.429315],[122.573624,37.296159],[122.629059,37.194708],[122.581015,37.147508],[122.505871,37.149892],[122.467067,37.03726],[122.575472,37.054452],[122.532356,36.901497],[122.344495,36.828257],[122.174495,36.842623],[122.141235,36.93833],[122.051923,36.904846],[122.008808,36.962238],[121.767975,36.874698],[121.762432,36.846454],[121.627541,36.795683],[121.647867,36.723301],[121.492035,36.789933],[121.454462,36.75255],[121.209318,36.671489],[121.028848,36.573046],[120.847146,36.618682],[120.983269,36.546133],[120.890878,36.373375],[120.828668,36.466779],[120.759683,36.462448],[120.694393,36.390234],[120.7449,36.330969],[120.66298,36.331933],[120.712255,36.126809],[120.478199,36.091522],[120.343308,36.04219],[120.290337,36.061539],[120.362402,36.19637],[120.181316,36.204095],[120.108635,36.127292],[120.241062,36.047995],[120.213345,35.998152],[120.292801,36.017512],[120.262004,35.965712],[120.062439,35.870739],[120.011317,35.713006],[119.926317,35.759631],[119.923237,35.635238],[119.718129,35.615785],[119.665775,35.57005],[119.543819,35.347815],[119.411392,35.231581],[119.373819,35.078464],[119.306066,35.076506],[119.286972,35.11518],[119.137915,35.09609],[119.114509,35.054958],[118.928495,35.051039],[118.865053,35.029974],[118.860742,34.94419],[118.772047,34.794464],[118.719076,34.745315],[118.783749,34.723188],[118.690127,34.678424],[118.601431,34.714336],[118.460997,34.65628],[118.424657,34.595228],[118.440671,34.527724],[118.404947,34.427598],[118.290382,34.424637],[118.179513,34.379218],[118.177665,34.453257],[118.132702,34.483348],[118.185056,34.543989],[118.079115,34.569612],[118.084042,34.655788],[117.951615,34.678424],[117.902956,34.644467],[117.793935,34.65185],[117.801942,34.51885],[117.684298,34.547439],[117.592523,34.462631],[117.465023,34.484827],[117.402813,34.569612],[117.322125,34.574046],[117.322125,34.574046],[117.32151,34.566656],[117.32151,34.566656],[117.322125,34.566656],[117.322125,34.566656],[117.301184,34.557294],[117.301184,34.557294],[117.242669,34.445856],[117.175532,34.47003],[117.137344,34.633144],[117.07575,34.637575],[117.088069,34.702039],[117.000605,34.793482],[116.966728,34.875497],[116.821983,34.929475],[116.677853,34.939285],[116.445028,34.89562],[116.408071,34.85095],[116.374195,34.640036],[116.281188,34.60754],[116.240536,34.552367],[116.196804,34.576017],[116.134594,34.559758],[116.101334,34.605571],[115.83032,34.562714],[115.697278,34.594243],[115.667096,34.557294],[115.515575,34.582421],[115.461373,34.637083],[115.42688,34.805273],[115.317243,34.859297],[115.256265,34.845549],[115.251953,34.906416],[115.189128,34.914757],[115.12815,35.004493],[115.028983,34.97165],[114.923658,34.968709],[114.824492,35.012335],[114.883006,35.098537],[114.841738,35.151389],[114.932281,35.197362],[114.929817,35.248196],[115.02036,35.364406],[115.093657,35.41611],[115.237171,35.422937],[115.357895,35.498475],[115.383148,35.569076],[115.48601,35.710091],[115.693582,35.75429],[115.773654,35.854252],[115.875284,35.859102],[115.911624,35.960385],[116.048979,35.970071],[116.099486,36.111826],[115.989849,36.045576],[115.646155,35.920663],[115.496481,35.885283],[115.498329,35.897401],[115.503257,35.91194],[115.503257,35.91194],[115.487242,35.903702],[115.473692,35.896917],[115.473692,35.896917],[115.467532,35.889646],[115.467532,35.889646],[115.464452,35.882859],[115.464452,35.88092],[115.464452,35.882859],[115.463837,35.882859],[115.464452,35.88092],[115.463837,35.88092],[115.463837,35.882859],[115.463837,35.88092],[115.460141,35.86783],[115.363438,35.78002],[115.335105,35.796522],[115.362822,35.972008],[115.447822,36.012672],[115.483547,36.149036],[115.466916,36.259115],[115.466916,36.259115],[115.366518,36.308793],[115.308004,36.461967],[115.308004,36.461967],[115.283366,36.486505],[115.365902,36.622043],[115.479851,36.76022],[115.683727,36.808139],[115.71206,36.883313],[115.79706,36.968931],[115.776734,36.992829],[115.868509,37.076414],[115.909777,37.206622],[115.969523,37.239497],[115.984921,37.326616],[116.051443,37.367998],[116.169087,37.384164],[116.236224,37.361816],[116.2855,37.404604],[116.226369,37.428365],[116.240536,37.489633],[116.240536,37.489633],[116.27626,37.466841],[116.291659,37.557966],[116.337238,37.580255],[116.379738,37.521909],[116.38097,37.522858],[116.379738,37.521909],[116.38097,37.522858],[116.433941,37.47349],[116.724664,37.744139],[116.788106,37.843429],[117.023395,37.832561],[117.093612,37.849571],[117.267923,37.838704],[117.34122,37.863271],[117.438538,37.853823],[117.513067,37.94353],[117.5839,38.070819],[117.70216,38.075529],[117.771761,38.136734],[117.808718,38.228445],[117.895565,38.30173],[117.997811,38.211992],[118.045238,38.207761],[118.143788,38.297035],[118.07234,38.170139],[118.331034,38.124968],[118.504729,38.114141],[118.552156,38.055744],[118.607591,38.129204],[118.726467,38.154144],[118.853967,38.155085],[118.974075,38.094367],[119.004872,37.992114],[119.110813,37.921349],[119.12806,37.814601],[119.217371,37.810347],[119.259871,37.702492],[119.080016,37.696337],[118.99748,37.632396],[118.939582,37.527129],[118.983314,37.349926],[119.054147,37.254738],[119.12806,37.254738],[119.298675,37.197567],[119.329472,37.115548],[119.489616,37.13463],[119.566608,37.100755],[119.744615,37.135107],[119.89244,37.263786],[119.843781,37.376557],[120.144359,37.482036],[120.246605,37.556543],[120.215192,37.621023],[120.272475,37.636661],[120.227511,37.693497],[120.367945,37.697758],[120.466496,37.757858],[120.595227,37.767318],[120.733197,37.833506],[120.938305,37.821219],[121.037471,37.718585],[121.136022,37.723318],[121.153884,37.613914],[121.217326,37.582626],[121.354064,37.595901],[121.362071,37.634292]]],[[[115.498329,35.897401],[115.496481,35.885283],[115.460141,35.86783],[115.463837,35.88092],[115.463837,35.882859],[115.463837,35.88092],[115.464452,35.88092],[115.463837,35.882859],[115.464452,35.882859],[115.464452,35.88092],[115.464452,35.882859],[115.467532,35.889646],[115.467532,35.889646],[115.473692,35.896917],[115.473692,35.896917],[115.487242,35.903702],[115.498329,35.897401]]],[[[121.487723,37.578833],[121.487723,37.577884],[121.487107,37.577884],[121.485875,37.578359],[121.485875,37.578833],[121.487723,37.578833]]],[[[121.487723,37.578833],[121.488339,37.578833],[121.488339,37.578833],[121.487723,37.57741],[121.487723,37.577884],[121.487723,37.578833]]]]}},{type:"Feature",properties:{adcode:41e4,name:"河南省",center:[113.665412,34.757975],centroid:[113.619918,33.902738],childrenNum:18,level:"province",subFeatureIndex:15,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[116.196804,34.576017],[116.204196,34.508497],[116.162312,34.459178],[116.213435,34.382181],[116.26271,34.375762],[116.409303,34.273971],[116.409303,34.273971],[116.516477,34.296217],[116.565752,34.173541],[116.530643,34.107183],[116.575607,34.069028],[116.575607,34.069028],[116.648288,33.973317],[116.64336,33.896869],[116.437637,33.846694],[116.437021,33.801461],[116.316297,33.771127],[116.263326,33.729835],[116.155536,33.709929],[116.074232,33.781571],[116.05945,33.861103],[115.987385,33.900842],[116.00032,33.964881],[115.95782,34.007547],[115.877132,34.003083],[115.736082,34.076957],[115.60735,34.030359],[115.546988,33.875014],[115.629524,33.871536],[115.614126,33.775603],[115.563003,33.771624],[115.639995,33.584909],[115.421953,33.556992],[115.345576,33.503125],[115.312931,33.376307],[115.365286,33.335826],[115.301229,33.141657],[115.168186,33.088535],[115.042534,33.08653],[114.966158,33.147167],[114.902716,33.129632],[114.925506,33.016821],[114.883006,32.990227],[114.943368,32.935005],[115.139237,32.897837],[115.197135,32.85613],[115.183584,32.665937],[115.20083,32.591864],[115.304924,32.553039],[115.409018,32.549005],[115.5088,32.468777],[115.509416,32.466758],[115.567314,32.421819],[115.667712,32.409696],[115.706517,32.494014],[115.789052,32.468777],[115.845719,32.501583],[115.899306,32.391005],[115.912856,32.227666],[115.941805,32.166402],[115.931334,31.994541],[115.893146,31.833033],[115.909777,31.791849],[115.816154,31.762348],[115.767495,31.787272],[115.660937,31.760822],[115.496481,31.674297],[115.371446,31.495905],[115.373909,31.405559],[115.301229,31.384109],[115.22054,31.426494],[115.235323,31.556597],[115.12507,31.598904],[115.088729,31.507638],[115.024056,31.528551],[114.830035,31.458654],[114.778912,31.5209],[114.696376,31.526001],[114.641558,31.582085],[114.560869,31.561185],[114.549783,31.642721],[114.586123,31.762348],[114.448769,31.728257],[114.292936,31.752173],[114.195002,31.850315],[114.135871,31.843707],[114.088444,31.781677],[113.988662,31.750138],[113.954785,31.856413],[113.838373,31.854889],[113.791561,32.036142],[113.728735,32.0833],[113.783554,32.186153],[113.749677,32.272196],[113.761996,32.268149],[113.757069,32.29243],[113.758301,32.296476],[113.752757,32.388478],[113.664062,32.422324],[113.624642,32.361191],[113.425693,32.269161],[113.211962,32.431919],[113.118956,32.375846],[113.025949,32.425354],[112.992072,32.378373],[112.860877,32.395552],[112.733993,32.363718],[112.729066,32.366245],[112.544284,32.403635],[112.451893,32.344511],[112.390915,32.371298],[112.328089,32.321761],[112.228923,32.385447],[112.014576,32.450098],[111.948671,32.517225],[111.890157,32.503097],[111.640701,32.634703],[111.577875,32.593376],[111.380159,32.828984],[111.293311,32.859145],[111.242804,32.930486],[111.273601,32.971656],[111.238493,33.040899],[111.151029,33.053438],[111.179363,33.115601],[111.056791,33.192743],[111.032769,33.209265],[110.984726,33.255308],[111.025994,33.330327],[110.996429,33.435745],[111.02661,33.474183],[111.02661,33.478675],[111.00382,33.578429],[110.877552,33.635238],[110.782698,33.795494],[110.587445,33.887929],[110.669365,33.939072],[110.590525,34.096778],[110.642264,34.16067],[110.43962,34.24331],[110.426685,34.275454],[110.503677,34.337234],[110.403279,34.43352],[110.403279,34.43352],[110.360779,34.516878],[110.379257,34.600646],[110.474728,34.617389],[110.533242,34.583406],[110.710017,34.605078],[110.749437,34.652342],[110.883712,34.642498],[110.929907,34.731548],[110.966248,34.70499],[111.118385,34.756622],[111.148566,34.80773],[111.232949,34.789551],[111.346282,34.831798],[111.570484,34.843094],[111.66965,34.988319],[111.900012,35.079933],[112.062004,35.055937],[112.078634,35.219362],[112.058924,35.279951],[112.513487,35.218384],[112.637291,35.225716],[112.628052,35.263342],[112.766022,35.203718],[112.818377,35.258457],[112.911384,35.24673],[112.992072,35.296068],[112.997,35.362455],[113.126347,35.332197],[113.189789,35.449261],[113.298194,35.427325],[113.31236,35.481424],[113.485439,35.520879],[113.578446,35.63378],[113.604316,35.797008],[113.656671,35.836792],[113.637576,35.98847],[113.694859,36.026707],[113.651743,36.172224],[113.716417,36.262492],[113.731199,36.363257],[113.819894,36.330969],[113.881488,36.354102],[113.911054,36.314578],[113.982502,36.358921],[114.055799,36.330005],[114.060727,36.276482],[114.169132,36.243675],[114.169132,36.243675],[114.345291,36.255738],[114.591666,36.130192],[114.912571,36.140339],[114.914419,36.051865],[114.996955,36.06831],[115.064092,36.178985],[115.201446,36.210371],[115.201446,36.210371],[115.312931,36.088137],[115.483547,36.149036],[115.447822,36.012672],[115.362822,35.972008],[115.335105,35.796522],[115.363438,35.78002],[115.460141,35.86783],[115.496481,35.885283],[115.646155,35.920663],[115.989849,36.045576],[116.099486,36.111826],[116.048979,35.970071],[115.911624,35.960385],[115.875284,35.859102],[115.773654,35.854252],[115.693582,35.75429],[115.48601,35.710091],[115.383148,35.569076],[115.357895,35.498475],[115.237171,35.422937],[115.093657,35.41611],[115.02036,35.364406],[114.929817,35.248196],[114.932281,35.197362],[114.841738,35.151389],[114.883006,35.098537],[114.824492,35.012335],[114.923658,34.968709],[115.028983,34.97165],[115.12815,35.004493],[115.189128,34.914757],[115.251953,34.906416],[115.256265,34.845549],[115.317243,34.859297],[115.42688,34.805273],[115.461373,34.637083],[115.515575,34.582421],[115.667096,34.557294],[115.697278,34.594243],[115.83032,34.562714],[116.101334,34.605571],[116.134594,34.559758],[116.196804,34.576017]]],[[[115.498329,35.897401],[115.487242,35.903702],[115.503257,35.91194],[115.503257,35.91194],[115.498329,35.897401]]],[[[113.749677,32.272196],[113.758301,32.296476],[113.757069,32.29243],[113.761996,32.268149],[113.749677,32.272196]]]]}},{type:"Feature",properties:{adcode:42e4,name:"湖北省",center:[114.298572,30.584355],centroid:[112.271042,30.98802],childrenNum:17,level:"province",subFeatureIndex:16,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[109.232378,29.119533],[109.110422,29.215143],[109.11227,29.360737],[108.919481,29.326314],[108.927488,29.435281],[108.880677,29.442576],[108.91209,29.571714],[108.844337,29.658582],[108.785822,29.633622],[108.690968,29.689773],[108.666946,29.842472],[108.602273,29.865824],[108.504338,29.707964],[108.437201,29.741218],[108.424266,29.816],[108.371295,29.841434],[108.516041,29.885539],[108.542526,29.998047],[108.513577,30.057619],[108.56778,30.157517],[108.581947,30.255763],[108.460606,30.35959],[108.402092,30.376626],[108.42673,30.492184],[108.56778,30.468464],[108.688504,30.587519],[108.743939,30.494762],[108.808612,30.491153],[108.971836,30.627686],[109.114734,30.64416],[109.09256,30.578762],[109.103647,30.565883],[109.143683,30.521052],[109.299516,30.630775],[109.36111,30.550942],[109.35495,30.487028],[109.435638,30.59576],[109.590855,30.693566],[109.780564,30.848822],[109.893897,30.899662],[110.008462,30.883746],[110.082375,30.799496],[110.172918,30.978694],[110.135961,30.986902],[110.119947,31.088409],[110.189548,31.129391],[110.140273,31.390238],[110.054042,31.410666],[109.946252,31.506108],[109.848934,31.552008],[109.719586,31.555067],[109.76455,31.602981],[109.731289,31.700263],[109.585928,31.726731],[109.638282,31.811172],[109.584696,31.900617],[109.631507,31.962059],[109.590855,32.012807],[109.621652,32.106617],[109.592703,32.219568],[109.495385,32.300522],[109.502776,32.389489],[109.575457,32.506629],[109.637051,32.540935],[109.631507,32.599929],[109.726978,32.608498],[109.816905,32.577244],[109.910528,32.592872],[110.017701,32.546987],[110.085454,32.613034],[110.153824,32.593376],[110.206179,32.633191],[110.156903,32.683061],[110.159367,32.767122],[110.10886,32.82999],[109.988752,32.886281],[109.76455,32.909391],[109.794731,33.066977],[109.688174,33.116603],[109.576073,33.110088],[109.438718,33.152177],[109.537268,33.2438],[109.619804,33.27532],[109.732521,33.231288],[109.852013,33.247803],[110.031252,33.191742],[110.164911,33.209265],[110.218497,33.163197],[110.468569,33.181226],[110.54125,33.255809],[110.59422,33.168706],[110.702626,33.097057],[110.745741,33.147167],[110.824582,33.158188],[110.984726,33.255308],[111.032769,33.209265],[111.037081,33.187235],[111.031537,33.17722],[111.056791,33.192743],[111.179363,33.115601],[111.151029,33.053438],[111.238493,33.040899],[111.273601,32.971656],[111.242804,32.930486],[111.293311,32.859145],[111.380159,32.828984],[111.577875,32.593376],[111.640701,32.634703],[111.890157,32.503097],[111.948671,32.517225],[112.014576,32.450098],[112.228923,32.385447],[112.328089,32.321761],[112.390915,32.371298],[112.451893,32.344511],[112.544284,32.403635],[112.729066,32.366245],[112.730914,32.363212],[112.732146,32.362707],[112.733993,32.363718],[112.860877,32.395552],[112.992072,32.378373],[113.025949,32.425354],[113.118956,32.375846],[113.211962,32.431919],[113.425693,32.269161],[113.624642,32.361191],[113.664062,32.422324],[113.752757,32.388478],[113.758301,32.296476],[113.749677,32.272196],[113.783554,32.186153],[113.728735,32.0833],[113.791561,32.036142],[113.838373,31.854889],[113.954785,31.856413],[113.988662,31.750138],[114.088444,31.781677],[114.135871,31.843707],[114.195002,31.850315],[114.292936,31.752173],[114.448769,31.728257],[114.586123,31.762348],[114.549783,31.642721],[114.560869,31.561185],[114.641558,31.582085],[114.696376,31.526001],[114.778912,31.5209],[114.830035,31.458654],[115.024056,31.528551],[115.088729,31.507638],[115.12507,31.598904],[115.235323,31.556597],[115.22054,31.426494],[115.301229,31.384109],[115.373909,31.405559],[115.372062,31.349368],[115.442279,31.346303],[115.457677,31.281384],[115.516191,31.263485],[115.559307,31.160117],[115.646155,31.209768],[115.700973,31.201068],[115.763799,31.118123],[115.869125,31.147828],[115.938726,31.047409],[116.058834,31.012545],[116.071769,30.956633],[115.976298,30.931488],[115.865429,30.864231],[115.851262,30.756829],[115.782893,30.751687],[115.762567,30.685848],[115.819234,30.59782],[115.876516,30.582368],[115.921479,30.416364],[115.903001,30.313631],[115.985537,30.290901],[116.065609,30.204584],[116.091479,30.036385],[116.073616,29.970061],[116.127203,29.899544],[116.13521,29.819634],[115.965827,29.724593],[115.837096,29.748491],[115.667712,29.850257],[115.511264,29.839877],[115.471844,29.742777],[115.359127,29.646623],[115.142316,29.651822],[115.154019,29.51029],[115.00065,29.572235],[114.940904,29.494147],[114.860216,29.475917],[114.931049,29.422252],[114.759818,29.363345],[114.660652,29.393585],[114.519602,29.325271],[114.259059,29.344049],[114.252284,29.234985],[114.061959,29.204176],[113.952321,29.092871],[113.94185,29.047374],[113.877793,29.035343],[113.816199,29.105419],[113.749677,29.060973],[113.66283,29.1697],[113.689931,29.230808],[113.606779,29.253779],[113.686236,29.392021],[113.753373,29.43997],[113.630801,29.523307],[113.736743,29.576918],[113.664678,29.683536],[113.547033,29.675219],[113.566127,29.846105],[113.37765,29.703287],[113.145441,29.449349],[113.078304,29.438407],[113.057362,29.522265],[112.950188,29.472792],[112.912,29.607095],[113.004391,29.692892],[113.020405,29.772384],[112.937869,29.783809],[112.939101,29.768229],[112.926782,29.763036],[112.861493,29.78329],[112.79374,29.736023],[112.788812,29.681457],[112.687182,29.592528],[112.439574,29.633622],[112.369973,29.542048],[112.281278,29.536842],[112.303452,29.585244],[112.111279,29.659622],[112.07617,29.740179],[111.95483,29.796791],[111.962222,29.837282],[111.862439,29.856484],[111.807005,29.904213],[111.723853,29.909399],[111.723853,29.909399],[111.709686,29.897988],[111.709686,29.897988],[111.39063,29.914585],[111.244036,30.039492],[110.929907,30.063316],[110.924364,30.111463],[110.746973,30.113015],[110.712481,30.033277],[110.650887,30.077814],[110.497518,30.05503],[110.557264,29.988201],[110.498134,29.910955],[110.60038,29.839877],[110.642264,29.777578],[110.507373,29.691853],[110.360779,29.635702],[110.219729,29.746413],[110.113788,29.789521],[110.02386,29.769788],[109.869876,29.774462],[109.775637,29.755244],[109.714043,29.673139],[109.717739,29.614897],[109.516326,29.62582],[109.458428,29.513414],[109.343863,29.369602],[109.352487,29.284574],[109.258248,29.21932],[109.274262,29.122146],[109.232378,29.119533]]],[[[113.020405,29.772384],[112.926782,29.692372],[112.926782,29.763036],[112.939101,29.768229],[112.937869,29.783809],[113.020405,29.772384]]],[[[111.032769,33.209265],[111.056791,33.192743],[111.031537,33.17722],[111.037081,33.187235],[111.032769,33.209265]]],[[[109.106111,30.57052],[109.09872,30.579277],[109.100567,30.580823],[109.106727,30.572066],[109.106111,30.57052]]],[[[112.732146,32.362707],[112.730914,32.363212],[112.729066,32.366245],[112.733993,32.363718],[112.732146,32.362707]]]]}},{type:"Feature",properties:{adcode:43e4,name:"湖南省",center:[112.982279,28.19409],centroid:[111.754313,27.655081],childrenNum:14,level:"province",subFeatureIndex:17,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[109.965962,26.195699],[110.017701,26.343246],[109.932701,26.476145],[109.856325,26.465433],[109.892665,26.525408],[109.82676,26.605681],[109.946252,26.685899],[109.838463,26.72759],[109.821216,26.781017],[109.652449,26.76232],[109.660456,26.709419],[109.590855,26.686433],[109.529261,26.740414],[109.548971,26.737208],[109.548971,26.737208],[109.528029,26.744689],[109.52187,26.748964],[109.504624,26.805051],[109.500928,26.828546],[109.486761,26.895267],[109.555131,26.947015],[109.520022,27.058433],[109.454733,27.069622],[109.472595,27.135136],[109.415928,27.15377],[109.267487,27.128746],[109.164625,27.065893],[109.07901,27.115965],[108.87575,26.999273],[108.791366,27.084539],[108.878829,27.106378],[108.907162,27.2054],[109.040821,27.276151],[109.142451,27.418051],[109.202197,27.449913],[109.300132,27.423893],[109.303211,27.475396],[109.461508,27.567724],[109.470747,27.68011],[109.332777,27.782853],[109.345711,27.840537],[109.30198,27.956342],[109.378972,28.032948],[109.298284,28.036117],[109.340168,28.190216],[109.388211,28.268236],[109.27303,28.310386],[109.274262,28.494592],[109.321074,28.581322],[109.304443,28.623871],[109.201581,28.598133],[109.2989,28.747221],[109.241002,28.776594],[109.235458,28.882476],[109.319842,29.042667],[109.232378,29.119533],[109.274262,29.122146],[109.258248,29.21932],[109.352487,29.284574],[109.343863,29.369602],[109.458428,29.513414],[109.516326,29.62582],[109.717739,29.614897],[109.714043,29.673139],[109.775637,29.755244],[109.869876,29.774462],[110.02386,29.769788],[110.113788,29.789521],[110.219729,29.746413],[110.360779,29.635702],[110.507373,29.691853],[110.642264,29.777578],[110.60038,29.839877],[110.498134,29.910955],[110.557264,29.988201],[110.497518,30.05503],[110.650887,30.077814],[110.712481,30.033277],[110.746973,30.113015],[110.924364,30.111463],[110.929907,30.063316],[111.244036,30.039492],[111.39063,29.914585],[111.709686,29.897988],[111.709686,29.897988],[111.723853,29.909399],[111.723853,29.909399],[111.807005,29.904213],[111.862439,29.856484],[111.962222,29.837282],[111.95483,29.796791],[112.07617,29.740179],[112.111279,29.659622],[112.303452,29.585244],[112.281278,29.536842],[112.369973,29.542048],[112.439574,29.633622],[112.687182,29.592528],[112.788812,29.681457],[112.79374,29.736023],[112.861493,29.78329],[112.926782,29.763036],[112.926782,29.692372],[113.020405,29.772384],[113.004391,29.692892],[112.912,29.607095],[112.950188,29.472792],[113.057362,29.522265],[113.078304,29.438407],[113.145441,29.449349],[113.37765,29.703287],[113.566127,29.846105],[113.547033,29.675219],[113.664678,29.683536],[113.736743,29.576918],[113.630801,29.523307],[113.753373,29.43997],[113.686236,29.392021],[113.606779,29.253779],[113.689931,29.230808],[113.66283,29.1697],[113.749677,29.060973],[113.816199,29.105419],[113.877793,29.035343],[113.94185,29.047374],[113.966488,28.945326],[114.008988,28.955273],[114.076741,28.834266],[114.152502,28.83479],[114.157429,28.761384],[114.08598,28.558201],[114.218407,28.484601],[114.172212,28.432524],[114.252284,28.395687],[114.25598,28.323554],[114.107538,28.182833],[113.992357,28.161207],[114.047176,28.05724],[113.914133,27.991218],[113.864242,28.004954],[113.752141,27.933614],[113.729967,27.887086],[113.763228,27.799262],[113.607395,27.625522],[113.583374,27.524754],[113.632033,27.405303],[113.616635,27.345264],[113.872865,27.385116],[113.848844,27.225087],[113.779242,27.137265],[113.821126,27.037651],[113.927068,26.949149],[113.834677,26.803983],[113.860546,26.663978],[113.915365,26.613706],[114.106306,26.576254],[114.073046,26.480965],[114.085364,26.4065],[114.030546,26.376485],[114.029314,26.266545],[113.944314,26.16402],[114.088444,26.168316],[114.181451,26.214489],[114.237501,26.152204],[114.044096,26.076452],[114.007756,26.007104],[114.028082,25.893586],[113.971416,25.835979],[113.913517,25.701272],[113.983118,25.599332],[113.94493,25.441667],[113.887032,25.436804],[113.822974,25.331935],[113.753373,25.362756],[113.611707,25.326527],[113.611707,25.326527],[113.535946,25.368704],[113.449715,25.359512],[113.373338,25.402758],[113.311129,25.490284],[113.248919,25.514045],[113.11834,25.445449],[113.080151,25.3833],[112.900297,25.311383],[112.867036,25.249706],[112.992688,25.247],[113.034572,25.198285],[112.96805,25.141426],[113.018557,25.082914],[112.979137,25.034133],[113.011782,24.946279],[112.871348,24.895816],[112.780805,24.896901],[112.712436,25.083456],[112.660081,25.132759],[112.414937,25.142509],[112.369357,25.189081],[112.3053,25.157132],[112.187039,25.182584],[112.155626,25.026544],[112.119902,24.963638],[112.175337,24.92729],[112.171025,24.86379],[112.097112,24.826327],[112.024431,24.739955],[111.951135,24.769839],[111.68936,24.778531],[111.570484,24.644821],[111.431282,24.687776],[111.479325,24.797543],[111.470086,24.928917],[111.43313,24.97991],[111.435593,25.09321],[111.321645,25.10513],[111.274833,25.151175],[111.200921,25.074786],[111.101754,25.035218],[111.100522,24.945736],[110.991501,24.924034],[110.951465,25.043891],[110.998892,25.161465],[111.112841,25.217232],[111.103602,25.284877],[111.301319,25.450851],[111.343202,25.602569],[111.30871,25.72014],[111.442369,25.771877],[111.43313,25.84621],[111.49226,25.868824],[111.346282,25.906504],[111.252043,25.864517],[111.189834,25.953318],[111.267442,26.058716],[111.279761,26.271911],[111.204616,26.307852],[111.092515,26.306779],[110.94469,26.373805],[110.939146,26.28425],[110.76114,26.248838],[110.612083,26.333594],[110.555416,26.286396],[110.516612,26.186035],[110.373098,26.08935],[110.325671,25.975373],[110.257301,25.961388],[110.201251,26.066241],[110.165527,26.023773],[110.065128,26.051191],[110.099005,26.16939],[109.965962,26.195699]]],[[[109.48245,26.029687],[109.449805,26.101709],[109.486761,26.148445],[109.486761,26.148445],[109.439334,26.238641],[109.466435,26.314288],[109.340784,26.264399],[109.285965,26.296052],[109.326001,26.427398],[109.407305,26.532902],[109.35495,26.693383],[109.454117,26.761252],[109.52187,26.748964],[109.528029,26.744689],[109.529261,26.740414],[109.590855,26.686433],[109.660456,26.709419],[109.652449,26.76232],[109.821216,26.781017],[109.838463,26.72759],[109.946252,26.685899],[109.82676,26.605681],[109.892665,26.525408],[109.856325,26.465433],[109.932701,26.476145],[110.017701,26.343246],[109.965962,26.195699],[109.906832,26.143611],[109.864332,26.027537],[109.783028,25.988282],[109.806434,25.874746],[109.685094,25.880129],[109.730057,25.989895],[109.635203,26.047428],[109.513247,25.997962],[109.48245,26.029687]]]]}},{type:"Feature",properties:{adcode:44e4,name:"广东省",center:[113.280637,23.125178],centroid:[113.429877,23.334664],childrenNum:22,level:"province",subFeatureIndex:18,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[109.785492,21.457116],[109.742992,21.61629],[109.898209,21.649661],[109.940709,21.734723],[109.94502,21.844172],[110.051578,21.856945],[110.119947,21.901918],[110.200019,21.898587],[110.200019,21.898587],[110.388497,21.89026],[110.355236,22.061709],[110.355236,22.061709],[110.350924,22.072799],[110.350924,22.072799],[110.414366,22.20858],[110.488895,22.144863],[110.560344,22.196393],[110.629329,22.149296],[110.646575,22.222982],[110.725415,22.295522],[110.785777,22.294415],[110.711249,22.369684],[110.778386,22.585304],[111.055559,22.648268],[111.056791,22.72776],[111.202152,22.740452],[111.358601,22.889362],[111.363528,22.968713],[111.433746,23.036456],[111.377695,23.082149],[111.388782,23.210337],[111.353673,23.28895],[111.399869,23.469638],[111.479941,23.532738],[111.487332,23.62651],[111.615448,23.639117],[111.667187,23.718023],[111.621607,23.725692],[111.664723,23.83465],[111.8107,23.806735],[111.812548,23.887727],[111.940664,23.987803],[111.878454,24.110195],[111.877838,24.229196],[111.939432,24.230287],[112.029975,24.297925],[112.057692,24.387327],[111.985011,24.467953],[112.007185,24.534376],[111.937584,24.595323],[111.961606,24.720934],[112.024431,24.739955],[112.097112,24.826327],[112.171025,24.86379],[112.175337,24.92729],[112.119902,24.963638],[112.155626,25.026544],[112.187039,25.182584],[112.3053,25.157132],[112.369357,25.189081],[112.414937,25.142509],[112.660081,25.132759],[112.712436,25.083456],[112.780805,24.896901],[112.871348,24.895816],[113.011782,24.946279],[112.979137,25.034133],[113.018557,25.082914],[112.96805,25.141426],[113.034572,25.198285],[112.992688,25.247],[112.867036,25.249706],[112.900297,25.311383],[113.080151,25.3833],[113.11834,25.445449],[113.248919,25.514045],[113.311129,25.490284],[113.373338,25.402758],[113.449715,25.359512],[113.535946,25.368704],[113.611707,25.326527],[113.611707,25.326527],[113.753373,25.362756],[113.822974,25.331935],[113.887032,25.436804],[113.94493,25.441667],[114.051488,25.348699],[114.039785,25.250789],[114.13156,25.30922],[114.262755,25.29191],[114.31511,25.338424],[114.381015,25.31571],[114.535616,25.41681],[114.63663,25.324364],[114.743188,25.274597],[114.679746,25.194495],[114.735796,25.121925],[114.640326,25.073702],[114.561485,25.077495],[114.506051,24.999975],[114.395798,24.951161],[114.403189,24.877361],[114.33482,24.747562],[114.27261,24.700279],[114.169132,24.689407],[114.258443,24.641558],[114.308334,24.574104],[114.391486,24.562677],[114.428443,24.486468],[114.534384,24.558867],[114.589819,24.537642],[114.664963,24.583898],[114.704999,24.526211],[114.729637,24.608924],[114.868839,24.562132],[114.909491,24.661679],[115.056701,24.703541],[115.095505,24.674184],[115.308004,24.758429],[115.358511,24.735064],[115.412714,24.792654],[115.556227,24.682883],[115.573474,24.617083],[115.67264,24.604028],[115.688038,24.545261],[115.845103,24.563221],[115.756408,24.749192],[115.822313,24.90884],[115.907313,24.880075],[115.89253,24.937056],[116.014486,24.905584],[116.068073,24.849675],[116.18079,24.87519],[116.245464,24.793197],[116.376659,24.820353],[116.44626,24.714412],[116.486912,24.71876],[116.525716,24.604572],[116.597165,24.65461],[116.778867,24.680165],[116.815207,24.655154],[116.761005,24.58281],[116.789338,24.50988],[116.860787,24.462507],[116.903903,24.369888],[116.933468,24.21992],[116.998757,24.178988],[116.9347,24.127123],[116.939627,24.033713],[116.981511,23.999282],[116.980279,23.881709],[117.012308,23.855446],[117.053576,23.696657],[117.192778,23.629799],[117.192778,23.561809],[117.054192,23.542064],[117.01046,23.502564],[116.921765,23.53219],[116.874953,23.447683],[116.874338,23.447683],[116.871258,23.416391],[116.871874,23.415842],[116.782563,23.313679],[116.806584,23.200989],[116.74499,23.215286],[116.550969,23.109668],[116.576839,23.014429],[116.50539,22.930696],[116.382818,22.919124],[116.317528,22.952736],[116.226985,22.914715],[116.106877,22.817685],[116.073616,22.8425],[115.883291,22.785142],[115.796444,22.739349],[115.788437,22.809964],[115.654162,22.865657],[115.542677,22.76142],[115.606119,22.754799],[115.57409,22.650477],[115.471844,22.697956],[115.381301,22.684156],[115.338185,22.776867],[115.230396,22.776867],[115.236555,22.825406],[115.054853,22.777419],[115.04007,22.712307],[114.87623,22.589724],[114.747499,22.581437],[114.728405,22.651029],[114.749963,22.764179],[114.709927,22.7879],[114.512826,22.655446],[114.603369,22.63888],[114.559022,22.583094],[114.616304,22.54276],[114.611377,22.481959],[114.485109,22.446572],[114.467863,22.533365],[114.41058,22.599667],[114.232574,22.539997],[114.185762,22.551601],[114.185762,22.551601],[114.045944,22.502413],[114.044096,22.502413],[114.031778,22.504071],[113.959097,22.505177],[113.891959,22.442701],[113.733663,22.73659],[113.678228,22.726104],[113.740438,22.53447],[113.631417,22.475877],[113.669605,22.416154],[113.558736,22.213012],[113.553809,22.107727],[113.442324,22.009575],[113.330223,21.961861],[113.246455,21.880266],[113.091854,22.065591],[113.032724,22.072799],[113.037652,21.935223],[112.944645,21.84195],[112.795587,21.923567],[112.651458,21.761954],[112.523342,21.760842],[112.439574,21.803624],[112.415553,21.734723],[112.24001,21.701371],[112.192583,21.78918],[112.036134,21.761398],[111.951135,21.671904],[112.026895,21.633533],[111.811316,21.558985],[111.810084,21.604609],[111.693672,21.590144],[111.677658,21.52949],[111.382623,21.495534],[111.257587,21.413675],[111.28284,21.485513],[111.061102,21.44932],[110.929291,21.375792],[110.799328,21.374678],[110.626249,21.215797],[110.422373,21.190695],[110.388497,21.125968],[110.296722,21.093594],[110.180925,20.981905],[110.201251,20.867337],[110.390344,20.820367],[110.392192,20.682727],[110.466105,20.680488],[110.548025,20.477715],[110.545561,20.42726],[110.452554,20.311151],[110.349076,20.258958],[110.118099,20.219661],[110.082375,20.258958],[109.910528,20.224152],[109.916071,20.316762],[109.861252,20.376789],[109.888354,20.475473],[109.839695,20.489485],[109.793499,20.61554],[109.74484,20.62114],[109.730057,20.719667],[109.654913,20.903673],[109.674623,21.136572],[109.763934,21.226395],[109.757775,21.346816],[109.868644,21.365763],[109.894513,21.44208],[109.785492,21.457116]]],[[[117.100387,23.401566],[116.946402,23.421881],[117.129336,23.483358],[117.100387,23.401566]]],[[[112.853486,21.74028],[112.804826,21.686361],[112.817145,21.590144],[112.730914,21.613509],[112.782037,21.665788],[112.70566,21.679133],[112.831312,21.77529],[112.853486,21.74028]]],[[[112.625588,21.616847],[112.535045,21.628527],[112.663776,21.714157],[112.625588,21.616847]]],[[[110.495054,21.075171],[110.560344,21.061213],[110.535706,20.923235],[110.47288,20.983022],[110.347845,20.984698],[110.201251,20.938324],[110.211106,20.986933],[110.305961,21.088012],[110.495054,21.075171]]],[[[110.501829,21.142711],[110.431612,21.181211],[110.634256,21.21022],[110.582517,21.094711],[110.501829,21.142711]]],[[[116.769628,20.771704],[116.88604,20.77562],[116.934084,20.67657],[116.862635,20.588657],[116.749302,20.600979],[116.849084,20.62842],[116.87249,20.738134],[116.769628,20.771704]]],[[[110.598532,20.857273],[110.548641,20.908703],[110.584365,20.948941],[110.646575,20.917087],[110.598532,20.857273]]],[[[115.943037,21.097502],[116.044051,21.11034],[116.067457,21.040552],[115.989233,21.035526],[115.943037,21.097502]]]]}},{type:"Feature",properties:{adcode:45e4,name:"广西壮族自治区",center:[108.320004,22.82402],centroid:[108.794237,23.833575],childrenNum:14,level:"province",subFeatureIndex:19,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[112.024431,24.739955],[111.961606,24.720934],[111.937584,24.595323],[112.007185,24.534376],[111.985011,24.467953],[112.057692,24.387327],[112.029975,24.297925],[111.939432,24.230287],[111.877838,24.229196],[111.878454,24.110195],[111.940664,23.987803],[111.812548,23.887727],[111.8107,23.806735],[111.664723,23.83465],[111.621607,23.725692],[111.667187,23.718023],[111.615448,23.639117],[111.487332,23.62651],[111.479941,23.532738],[111.399869,23.469638],[111.353673,23.28895],[111.388782,23.210337],[111.377695,23.082149],[111.433746,23.036456],[111.363528,22.968713],[111.358601,22.889362],[111.202152,22.740452],[111.056791,22.72776],[111.055559,22.648268],[110.778386,22.585304],[110.711249,22.369684],[110.785777,22.294415],[110.725415,22.295522],[110.646575,22.222982],[110.629329,22.149296],[110.560344,22.196393],[110.488895,22.144863],[110.414366,22.20858],[110.350924,22.072799],[110.350924,22.072799],[110.355236,22.061709],[110.355236,22.061709],[110.388497,21.89026],[110.200019,21.898587],[110.200019,21.898587],[110.119947,21.901918],[110.051578,21.856945],[109.94502,21.844172],[109.940709,21.734723],[109.898209,21.649661],[109.742992,21.61629],[109.785492,21.457116],[109.704188,21.462684],[109.612413,21.55676],[109.540964,21.466025],[109.245929,21.425929],[109.138756,21.389163],[109.042669,21.464355],[109.150459,21.523924],[109.142451,21.56455],[108.937959,21.589588],[108.881293,21.627415],[108.74517,21.599046],[108.710062,21.646881],[108.591802,21.677465],[108.479085,21.546743],[108.338651,21.541177],[108.230245,21.49108],[108.235173,21.60294],[108.106441,21.508895],[108.030681,21.546186],[107.956768,21.535055],[107.860066,21.651886],[107.546553,21.58625],[107.46956,21.659671],[107.388256,21.594039],[107.310648,21.733611],[107.247206,21.703039],[107.088294,21.805291],[107.011917,21.826399],[107.05996,21.915241],[106.999598,21.947433],[106.73844,22.007911],[106.681158,21.995152],[106.717498,22.074463],[106.673151,22.182543],[106.7021,22.206918],[106.663296,22.330948],[106.562282,22.34589],[106.562282,22.462608],[106.61402,22.601876],[106.710723,22.57536],[106.768621,22.739349],[106.841302,22.799484],[106.606013,22.925737],[106.366413,22.857939],[106.286957,22.86676],[106.206885,22.978629],[106.019639,22.990747],[105.994385,22.93786],[105.893987,22.936758],[105.724604,23.062332],[105.574931,23.066186],[105.542902,23.18449],[105.531815,23.248275],[105.694423,23.363122],[105.699966,23.401566],[105.815763,23.506953],[105.89214,23.525058],[105.999929,23.447683],[106.141595,23.569487],[106.120653,23.605129],[106.157609,23.724048],[106.136667,23.795238],[106.192102,23.824798],[106.04982,24.089986],[105.933407,24.123847],[105.89214,24.040271],[105.704278,24.066497],[105.649459,24.033167],[105.628518,24.126577],[105.529967,24.129308],[105.481924,24.018958],[105.320548,24.116202],[105.260186,24.061033],[105.20044,24.105279],[105.229389,24.165888],[105.164715,24.288109],[105.188121,24.346995],[105.063085,24.429281],[105.063085,24.429281],[104.979933,24.412937],[104.83642,24.446712],[104.72863,24.446167],[104.70892,24.321372],[104.610986,24.376973],[104.492109,24.656241],[104.529682,24.73126],[104.63316,24.65896],[104.743413,24.621978],[104.841963,24.676359],[104.899245,24.752996],[105.03352,24.787765],[105.077868,24.918065],[105.082179,24.915895],[105.096346,24.928375],[105.09573,24.928375],[105.198592,24.995095],[105.265729,24.930003],[105.365511,24.943566],[105.445584,24.918608],[105.500402,24.807862],[105.70551,24.768752],[105.827466,24.702997],[105.942031,24.724738],[106.023335,24.632313],[106.045508,24.681796],[106.173008,24.760059],[106.206269,24.851304],[106.146522,24.948449],[106.215508,24.982079],[106.304819,24.973944],[106.590615,25.087791],[106.684238,25.178252],[106.732281,25.162548],[106.900432,25.194495],[106.912751,25.243212],[107.013765,25.275138],[107.012533,25.353024],[106.963874,25.437884],[107.066736,25.509186],[107.064272,25.559395],[107.228728,25.604728],[107.336517,25.461116],[107.318039,25.401677],[107.420901,25.393029],[107.432604,25.289205],[107.481263,25.300024],[107.472024,25.213984],[107.599523,25.250789],[107.659885,25.316251],[107.700537,25.193954],[107.741805,25.239965],[107.841587,25.115966],[108.001732,25.196661],[108.115065,25.210195],[108.152021,25.324364],[108.142782,25.390867],[108.348506,25.536183],[108.418723,25.443287],[108.471693,25.458955],[108.625062,25.308138],[108.6072,25.491904],[108.68912,25.623072],[108.763649,25.637097],[108.781511,25.554537],[108.949046,25.557236],[109.025423,25.512426],[109.088249,25.550758],[109.030966,25.629545],[109.07901,25.720679],[109.000785,25.73631],[108.953974,25.686714],[108.953974,25.686714],[108.896076,25.71421],[108.989698,25.778881],[109.143683,25.795044],[109.147995,25.7417],[109.3414,25.732537],[109.339552,25.834363],[109.435022,25.933411],[109.408537,25.967305],[109.48245,26.029687],[109.513247,25.997962],[109.635203,26.047428],[109.730057,25.989895],[109.685094,25.880129],[109.806434,25.874746],[109.783028,25.988282],[109.864332,26.027537],[109.906832,26.143611],[109.965962,26.195699],[110.099005,26.16939],[110.065128,26.051191],[110.165527,26.023773],[110.201251,26.066241],[110.257301,25.961388],[110.325671,25.975373],[110.373098,26.08935],[110.516612,26.186035],[110.555416,26.286396],[110.612083,26.333594],[110.76114,26.248838],[110.939146,26.28425],[110.94469,26.373805],[111.092515,26.306779],[111.204616,26.307852],[111.279761,26.271911],[111.267442,26.058716],[111.189834,25.953318],[111.252043,25.864517],[111.346282,25.906504],[111.49226,25.868824],[111.43313,25.84621],[111.442369,25.771877],[111.30871,25.72014],[111.343202,25.602569],[111.301319,25.450851],[111.103602,25.284877],[111.112841,25.217232],[110.998892,25.161465],[110.951465,25.043891],[110.991501,24.924034],[111.100522,24.945736],[111.101754,25.035218],[111.200921,25.074786],[111.274833,25.151175],[111.321645,25.10513],[111.435593,25.09321],[111.43313,24.97991],[111.470086,24.928917],[111.479325,24.797543],[111.431282,24.687776],[111.570484,24.644821],[111.68936,24.778531],[111.951135,24.769839],[112.024431,24.739955]]],[[[105.082179,24.915895],[105.077868,24.918065],[105.09573,24.928375],[105.096346,24.928375],[105.082179,24.915895]]]]}},{type:"Feature",properties:{adcode:46e4,name:"海南省",center:[110.33119,20.031971],centroid:[109.754777,19.189617],childrenNum:19,level:"province",subFeatureIndex:20,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[109.231147,19.863293],[109.300748,19.917868],[109.498464,19.873422],[109.585312,19.98817],[109.712195,20.017406],[109.76147,19.981422],[109.965346,19.993792],[110.106396,20.026963],[110.144585,20.074176],[110.291178,20.056754],[110.318279,20.109015],[110.526467,20.0753],[110.562191,20.109577],[110.717408,20.148901],[110.744509,20.074176],[110.871393,20.011784],[110.969327,20.010097],[111.071573,19.629025],[110.920668,19.552926],[110.844292,19.450278],[110.729727,19.378611],[110.619474,19.152118],[110.578206,18.78489],[110.499366,18.751466],[110.495054,18.65002],[110.329366,18.64265],[110.246215,18.609764],[110.117483,18.507666],[110.090382,18.399262],[110.022629,18.360083],[109.919767,18.375415],[109.785492,18.339639],[109.749767,18.193617],[109.584696,18.143589],[109.355566,18.215216],[109.287813,18.264655],[109.138756,18.268064],[109.117814,18.322032],[108.944735,18.31408],[108.888068,18.412319],[108.68912,18.447513],[108.644772,18.486672],[108.663866,18.673261],[108.593033,18.809246],[108.637997,18.920785],[108.591186,19.14477],[108.609048,19.276417],[108.663866,19.374095],[108.765496,19.401187],[109.048829,19.620007],[109.169553,19.736628],[109.159082,19.790684],[109.231147,19.863293]]],[[[113.896887,7.607259],[114.029314,7.670119],[114.211632,7.786918],[114.268298,7.870496],[114.414892,7.952872],[114.540543,7.945761],[114.540543,7.862199],[114.419819,7.765577],[114.368696,7.63869],[114.157429,7.56159],[113.98743,7.536085],[113.896887,7.607259]]],[[[111.660411,16.258092],[111.606825,16.17766],[111.569252,16.195472],[111.660411,16.258092]]],[[[113.976959,8.872658],[114.060111,8.816493],[114.037321,8.781016],[113.976959,8.872658]]],[[[112.067547,16.319543],[111.97454,16.323563],[112.047221,16.360309],[112.067547,16.319543]]],[[[115.837712,9.709358],[115.925791,9.7813],[115.901153,9.671021],[115.837712,9.709358]]],[[[109.463972,7.344453],[109.536037,7.448882],[109.653065,7.559218],[109.72205,7.575825],[109.904984,7.551507],[109.938861,7.504647],[109.791651,7.524815],[109.654297,7.479138],[109.513247,7.320122],[109.463972,7.344453]]],[[[112.527654,16.058099],[112.607726,16.066724],[112.570154,16.010945],[112.448814,16.005194],[112.527654,16.058099]]],[[[114.469095,10.83618],[114.587355,10.90904],[114.565181,10.836767],[114.469095,10.83618]]],[[[112.383524,16.266134],[112.528886,16.318395],[112.538741,16.289107],[112.383524,16.266134]]],[[[116.48876,10.395704],[116.514629,10.349208],[116.637817,10.3651],[116.566368,10.304472],[116.467202,10.309182],[116.48876,10.395704]]],[[[115.16757,8.386402],[115.315395,8.356213],[115.285214,8.314772],[115.18112,8.345557],[115.16757,8.386402]]],[[[109.936397,7.848566],[109.953027,7.888869],[110.078063,7.949317],[110.050346,7.846195],[109.988136,7.812408],[109.936397,7.848566]]],[[[114.696992,11.004203],[114.766593,11.110489],[114.793079,11.076435],[114.696992,11.004203]]],[[[110.459946,8.116389],[110.568351,8.172657],[110.554184,8.09388],[110.471032,8.071962],[110.459946,8.116389]]],[[[117.266691,10.691581],[117.369553,10.742727],[117.404661,10.671002],[117.266691,10.691581]]],[[[113.80696,19.223319],[113.920293,19.223319],[113.874097,19.151553],[113.80696,19.223319]]]]}},{type:"Feature",properties:{adcode:5e5,name:"重庆市",center:[106.504962,29.533155],centroid:[107.88398,30.067321],childrenNum:38,level:"province",subFeatureIndex:21,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[109.09256,30.578762],[109.114734,30.64416],[108.971836,30.627686],[108.808612,30.491153],[108.743939,30.494762],[108.688504,30.587519],[108.56778,30.468464],[108.42673,30.492184],[108.402092,30.376626],[108.460606,30.35959],[108.581947,30.255763],[108.56778,30.157517],[108.513577,30.057619],[108.542526,29.998047],[108.516041,29.885539],[108.371295,29.841434],[108.424266,29.816],[108.437201,29.741218],[108.504338,29.707964],[108.602273,29.865824],[108.666946,29.842472],[108.690968,29.689773],[108.785822,29.633622],[108.844337,29.658582],[108.91209,29.571714],[108.880677,29.442576],[108.927488,29.435281],[108.919481,29.326314],[109.11227,29.360737],[109.110422,29.215143],[109.232378,29.119533],[109.319842,29.042667],[109.235458,28.882476],[109.241002,28.776594],[109.2989,28.747221],[109.201581,28.598133],[109.304443,28.623871],[109.321074,28.581322],[109.274262,28.494592],[109.191726,28.470927],[109.152306,28.349885],[109.081473,28.249264],[109.086401,28.184942],[109.026655,28.220271],[109.006329,28.163317],[108.922561,28.217635],[108.772888,28.21289],[108.726692,28.282463],[108.764881,28.306698],[108.779663,28.425158],[108.710678,28.500902],[108.640461,28.457251],[108.688504,28.422527],[108.668178,28.334614],[108.611512,28.324607],[108.577019,28.534024],[108.636149,28.621245],[108.565316,28.662204],[108.471077,28.627548],[108.332491,28.679528],[108.385462,28.772398],[108.352817,28.815395],[108.350353,28.933282],[108.268433,29.089734],[108.256115,29.040574],[108.068253,29.086597],[108.024521,29.038482],[107.930899,29.035343],[107.867457,28.960508],[107.784921,29.04842],[107.810791,29.138348],[107.751044,29.199997],[107.701769,29.142006],[107.589052,29.149845],[107.570574,29.218276],[107.486806,29.174402],[107.404271,29.187984],[107.412894,29.095485],[107.36485,29.010753],[107.441227,28.943755],[107.383945,28.848417],[107.219489,28.772923],[107.191156,28.888763],[107.057497,28.895049],[106.983584,28.851561],[106.986664,28.793899],[106.986664,28.793899],[106.926302,28.809104],[106.824056,28.756139],[106.883186,28.69265],[106.866556,28.624397],[106.73844,28.554522],[106.7446,28.465667],[106.632499,28.503531],[106.564745,28.485127],[106.63681,28.623346],[106.562897,28.753516],[106.45326,28.816968],[106.504999,28.662204],[106.484057,28.530344],[106.395978,28.570287],[106.37442,28.525613],[106.304203,28.650653],[106.248152,28.829024],[106.173008,28.92019],[106.048588,28.906573],[106.043661,28.954226],[105.970364,28.966267],[105.88906,28.909716],[105.762176,28.991391],[105.693807,29.267351],[105.518264,29.264219],[105.427721,29.316924],[105.428337,29.417562],[105.380294,29.456643],[105.380294,29.456643],[105.324859,29.448828],[105.289751,29.552979],[105.38399,29.67002],[105.476996,29.674699],[105.575547,29.745374],[105.619894,29.846624],[105.709206,29.840396],[105.70243,29.924957],[105.753553,30.018254],[105.687648,30.038974],[105.582938,30.123884],[105.582938,30.127507],[105.580474,30.129577],[105.574315,30.130611],[105.56138,30.183898],[105.571235,30.17976],[105.642684,30.186484],[105.624822,30.275917],[105.720292,30.252662],[105.720292,30.252662],[105.714749,30.322927],[105.792357,30.427199],[105.881053,30.387465],[106.031958,30.373529],[106.10587,30.310531],[106.17116,30.306399],[106.180399,30.23302],[106.256776,30.19631],[106.262935,30.211306],[106.428623,30.254729],[106.451412,30.307949],[106.451412,30.307949],[106.610941,30.292451],[106.610941,30.292451],[106.612789,30.235605],[106.612789,30.235605],[106.612173,30.235605],[106.612173,30.235605],[106.611557,30.235605],[106.612173,30.235605],[106.611557,30.235605],[106.677462,30.157],[106.726121,30.033277],[106.825904,30.031205],[106.825904,30.031205],[106.913367,30.025506],[106.974345,30.082992],[106.976193,30.083509],[106.980504,30.085062],[106.981736,30.085062],[107.053801,30.043636],[107.054417,30.041046],[107.055649,30.040528],[107.058113,30.043118],[107.221337,30.213891],[107.359923,30.456087],[107.516987,30.644675],[107.424597,30.740889],[107.514524,30.854986],[107.645103,30.821079],[107.739957,30.884259],[107.763979,30.816968],[107.85329,30.793842],[107.994956,30.90839],[107.943833,30.989466],[108.053471,31.040745],[108.009123,31.10839],[108.083652,31.185713],[108.095354,31.268088],[108.185898,31.337104],[108.153869,31.371338],[108.216079,31.410666],[108.191441,31.492333],[108.34173,31.509679],[108.391621,31.593298],[108.517889,31.665131],[108.535135,31.757769],[108.343578,31.860987],[108.259194,31.966628],[108.373759,32.077217],[108.447672,32.07164],[108.369447,32.173493],[108.509882,32.201343],[108.67249,32.104083],[108.734084,32.106617],[108.902235,31.984899],[108.988466,31.979317],[109.164009,31.877247],[109.195422,31.817782],[109.273646,31.801003],[109.281654,31.717061],[109.585928,31.726731],[109.731289,31.700263],[109.76455,31.602981],[109.719586,31.555067],[109.848934,31.552008],[109.946252,31.506108],[110.054042,31.410666],[110.140273,31.390238],[110.189548,31.129391],[110.119947,31.088409],[110.135961,30.986902],[110.172918,30.978694],[110.082375,30.799496],[110.008462,30.883746],[109.893897,30.899662],[109.780564,30.848822],[109.590855,30.693566],[109.435638,30.59576],[109.35495,30.487028],[109.36111,30.550942],[109.299516,30.630775],[109.143683,30.521052],[109.103647,30.565883],[109.106111,30.57052],[109.106727,30.572066],[109.108575,30.576702],[109.102415,30.580308],[109.100567,30.580823],[109.09872,30.579277],[109.09256,30.578762]]],[[[105.574315,30.130611],[105.580474,30.129577],[105.582938,30.127507],[105.582938,30.123884],[105.574315,30.130611]]],[[[109.09256,30.578762],[109.09872,30.579277],[109.106111,30.57052],[109.103647,30.565883],[109.09256,30.578762]]],[[[109.102415,30.580308],[109.108575,30.576702],[109.106727,30.572066],[109.100567,30.580823],[109.102415,30.580308]]],[[[107.053801,30.043636],[107.058113,30.043118],[107.055649,30.040528],[107.054417,30.041046],[107.053801,30.043636]]]]}},{type:"Feature",properties:{adcode:51e4,name:"四川省",center:[104.065735,30.659462],centroid:[102.693438,30.674548],childrenNum:21,level:"province",subFeatureIndex:22,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[105.720292,30.252662],[105.720292,30.252662],[105.624822,30.275917],[105.642684,30.186484],[105.571235,30.17976],[105.56138,30.188035],[105.558916,30.18545],[105.56138,30.183898],[105.574315,30.130611],[105.582938,30.123884],[105.687648,30.038974],[105.753553,30.018254],[105.70243,29.924957],[105.709206,29.840396],[105.619894,29.846624],[105.575547,29.745374],[105.476996,29.674699],[105.38399,29.67002],[105.289751,29.552979],[105.324859,29.448828],[105.380294,29.456643],[105.380294,29.456643],[105.428337,29.417562],[105.427721,29.316924],[105.518264,29.264219],[105.693807,29.267351],[105.762176,28.991391],[105.88906,28.909716],[105.970364,28.966267],[106.043661,28.954226],[106.048588,28.906573],[106.173008,28.92019],[106.248152,28.829024],[106.304203,28.650653],[106.37442,28.525613],[106.330688,28.481971],[106.2925,28.537177],[106.103407,28.636476],[105.966668,28.76086],[105.891524,28.672179],[105.884748,28.594981],[105.749242,28.614943],[105.683952,28.535601],[105.62359,28.518253],[105.639604,28.32408],[105.730147,28.271925],[105.826234,28.304064],[105.88906,28.238722],[105.860111,28.165955],[105.975907,28.107917],[106.126812,28.16701],[106.206885,28.134302],[106.328225,27.952643],[106.304819,27.899249],[106.343007,27.821489],[106.193334,27.754265],[106.120653,27.779677],[106.023335,27.746851],[105.78435,27.719312],[105.62359,27.666333],[105.605112,27.715605],[105.508409,27.769089],[105.353809,27.74897],[105.308229,27.705011],[105.273736,27.795028],[105.308229,27.810376],[105.308229,27.810376],[105.244171,27.823077],[105.233084,27.895547],[105.284823,27.935729],[105.270657,27.99703],[105.186273,27.995445],[105.186889,28.0546],[105.05939,28.097889],[104.872144,27.905594],[104.743413,27.901892],[104.573413,27.840537],[104.40095,27.952114],[104.354139,28.019744],[104.44653,28.112666],[104.44961,28.269817],[104.384936,28.329874],[104.314103,28.306698],[104.254357,28.408844],[104.261748,28.537177],[104.318415,28.538229],[104.425588,28.626497],[104.314719,28.615468],[104.12501,28.637526],[103.940844,28.606013],[103.844757,28.660104],[103.838598,28.587101],[103.781931,28.525613],[103.877402,28.311966],[103.721569,28.201817],[103.639649,28.261912],[103.573128,28.230815],[103.471498,28.123221],[103.430846,28.044039],[103.488128,28.03242],[103.515846,27.965326],[103.487512,27.795028],[103.29226,27.632943],[103.295955,27.568785],[103.222043,27.566133],[103.111789,27.401054],[102.989833,27.368114],[102.941174,27.405303],[102.882044,27.293168],[102.913457,27.133538],[102.870957,27.026992],[102.898674,26.908073],[102.991681,26.775675],[103.018783,26.593911],[103.056971,26.525943],[102.989833,26.483108],[102.998457,26.371661],[102.739762,26.268691],[102.674473,26.205363],[102.60056,26.250448],[102.638748,26.307852],[102.567915,26.36362],[102.392372,26.296588],[102.349257,26.244545],[102.245163,26.212341],[102.107808,26.068391],[102.005562,26.091499],[102.005562,26.091499],[101.917483,26.108156],[101.86328,26.052266],[101.799223,26.109231],[101.807846,26.156501],[101.690202,26.241861],[101.630455,26.224687],[101.586724,26.279422],[101.660636,26.346999],[101.636615,26.395245],[101.506652,26.499708],[101.458608,26.495424],[101.400094,26.605146],[101.451833,26.600867],[101.453065,26.692848],[101.512195,26.756443],[101.389623,26.723314],[101.357594,26.770868],[101.399478,26.841893],[101.267667,26.902737],[101.264587,26.955549],[101.136472,27.023794],[101.170349,27.195821],[101.057016,27.20061],[101.021907,27.332508],[100.936908,27.469026],[100.848212,27.670573],[100.782307,27.691767],[100.707162,27.80085],[100.681293,27.923041],[100.633866,27.915111],[100.54517,27.809318],[100.442924,27.866459],[100.327744,27.720372],[100.295099,27.869633],[100.210715,27.877037],[100.196549,27.936257],[100.086296,28.030836],[100.033941,28.184942],[100.157129,28.210254],[100.176223,28.324607],[100.054267,28.376737],[100.073977,28.42621],[99.990209,28.476712],[99.987129,28.524561],[99.793724,28.699473],[99.733362,28.719415],[99.717964,28.846321],[99.625573,28.814871],[99.615718,28.741975],[99.532566,28.681628],[99.463581,28.549266],[99.403219,28.546638],[99.437095,28.398318],[99.374886,28.181778],[99.306516,28.227652],[99.280647,28.298269],[99.174705,28.402003],[99.183944,28.588677],[99.126662,28.699473],[99.103872,28.842128],[99.132206,28.948467],[99.113727,29.221409],[99.075539,29.314316],[99.052133,29.563908],[98.993003,29.656502],[99.0238,29.846105],[99.068148,29.93118],[99.044742,30.079885],[98.989308,30.151826],[98.907388,30.698196],[98.957895,30.765056],[98.901844,30.785105],[98.774345,30.907877],[98.806374,30.995621],[98.736772,31.049459],[98.709671,31.118635],[98.602498,31.192367],[98.64007,31.337615],[98.691809,31.333016],[98.773113,31.249163],[98.88583,31.376446],[98.837787,31.436705],[98.713367,31.510189],[98.553839,31.656473],[98.543983,31.718588],[98.414636,31.832525],[98.434962,32.007734],[98.301919,32.12334],[98.218768,32.234752],[98.218768,32.342489],[97.937283,32.484425],[97.730944,32.527315],[97.543698,32.621602],[97.42359,32.704713],[97.386018,32.779196],[97.373699,32.956094],[97.523988,32.988721],[97.542466,33.036385],[97.487648,33.10658],[97.487648,33.168205],[97.576343,33.221779],[97.621306,33.334327],[97.676125,33.340825],[97.753733,33.410277],[97.625618,33.461705],[97.552321,33.465698],[97.52522,33.575937],[97.415583,33.605343],[97.435293,33.680558],[97.388481,33.884452],[97.458698,33.886935],[97.660111,33.956444],[97.70261,34.036805],[97.665654,34.126997],[97.834421,34.208186],[97.937283,34.196804],[97.937283,34.196804],[98.051848,34.115604],[98.21076,34.078444],[98.401702,34.08786],[98.440506,33.981255],[98.406629,33.867065],[98.462064,33.849178],[98.539056,33.746752],[98.6567,33.647193],[98.61728,33.63723],[98.648077,33.549014],[98.742316,33.477677],[98.734309,33.409278],[98.779272,33.37181],[98.759562,33.277321],[98.858728,33.150674],[99.002242,33.08252],[99.179633,33.044912],[99.235067,32.982197],[99.268328,32.878744],[99.385973,32.900349],[99.558436,32.839039],[99.607711,32.780705],[99.763543,32.778693],[99.788181,32.956596],[99.854086,32.945048],[99.877492,33.045915],[99.956332,32.948061],[100.038252,32.928979],[100.123252,32.837028],[100.139266,32.724346],[100.088143,32.668959],[100.208252,32.606482],[100.258759,32.742466],[100.339447,32.719313],[100.399809,32.756556],[100.516837,32.630168],[100.54517,32.569681],[100.645568,32.526306],[100.690532,32.678025],[100.93198,32.600433],[101.075494,32.683061],[101.157414,32.661404],[101.22332,32.725856],[101.237486,32.824962],[101.124153,32.909893],[101.129081,32.989725],[101.183899,32.984204],[101.169733,33.100566],[101.11553,33.194746],[101.183283,33.270317],[101.297232,33.262313],[101.393935,33.157687],[101.405022,33.225783],[101.486326,33.227285],[101.625528,33.100566],[101.739477,33.265815],[101.64955,33.323328],[101.695745,33.433748],[101.769658,33.447728],[101.769042,33.538541],[101.844186,33.602353],[101.907012,33.542032],[101.9452,33.437742],[101.885454,33.380804],[101.878063,33.315829],[101.769658,33.268816],[101.841723,33.184731],[101.865744,33.103072],[101.935345,33.186734],[102.08933,33.204759],[102.112736,33.287324],[102.217446,33.248303],[102.186649,33.332327],[102.264873,33.417269],[102.396684,33.40678],[102.462589,33.449724],[102.440416,33.57494],[102.33817,33.614313],[102.342481,33.725357],[102.299981,33.782566],[102.239619,33.788036],[102.234076,33.870046],[102.136142,33.965377],[102.237772,33.963392],[102.315996,33.994154],[102.391756,33.970836],[102.437336,34.087364],[102.471213,34.072993],[102.655994,34.113623],[102.599328,34.145321],[102.798276,34.272982],[102.911609,34.313022],[102.978747,34.249246],[102.973203,34.205217],[103.124108,34.16166],[103.178927,34.079931],[103.119797,34.034822],[103.124108,33.968354],[103.181391,33.900842],[103.153057,33.814884],[103.279325,33.806433],[103.349542,33.74327],[103.525085,33.798975],[103.520157,33.678566],[103.626099,33.727347],[103.778236,33.658648],[103.871243,33.68255],[104.046169,33.686533],[104.168741,33.611821],[104.155191,33.542531],[104.22048,33.404782],[104.292545,33.336326],[104.432979,33.325828],[104.303632,33.304328],[104.378161,33.109086],[104.337509,33.038392],[104.426204,33.0108],[104.378161,32.953081],[104.288234,32.94304],[104.294393,32.83552],[104.363994,32.822448],[104.458849,32.748504],[104.582653,32.722333],[104.643015,32.661908],[104.739717,32.635711],[104.845659,32.653848],[104.881999,32.600938],[105.026745,32.650322],[105.111128,32.59388],[105.347033,32.682558],[105.455439,32.737433],[105.391381,32.835017],[105.414171,32.921948],[105.49917,32.911902],[105.563844,32.72485],[105.596489,32.699175],[105.719061,32.759575],[105.822538,32.770141],[105.825002,32.824962],[106.025798,32.85814],[106.093552,32.823956],[106.07261,32.764103],[106.076305,32.753537],[106.17424,32.697664],[106.347935,32.670974],[106.421231,32.616562],[106.585687,32.688097],[106.663296,32.690615],[106.733513,32.739446],[106.82344,32.705217],[107.066736,32.708741],[107.108004,32.600938],[107.080286,32.542448],[107.127098,32.482406],[107.263836,32.403129],[107.313727,32.489976],[107.382097,32.54043],[107.436299,32.529837],[107.456625,32.417778],[107.533002,32.383426],[107.680211,32.398078],[107.707929,32.331873],[107.75474,32.338445],[107.812022,32.24791],[107.979558,32.14614],[108.070717,32.233234],[108.179122,32.222099],[108.251187,32.273208],[108.312781,32.232222],[108.46923,32.270173],[108.509882,32.201343],[108.369447,32.173493],[108.447672,32.07164],[108.373759,32.077217],[108.259194,31.966628],[108.343578,31.860987],[108.535135,31.757769],[108.517889,31.665131],[108.391621,31.593298],[108.34173,31.509679],[108.191441,31.492333],[108.216079,31.410666],[108.153869,31.371338],[108.185898,31.337104],[108.095354,31.268088],[108.083652,31.185713],[108.009123,31.10839],[108.053471,31.040745],[107.943833,30.989466],[107.994956,30.90839],[107.85329,30.793842],[107.763979,30.816968],[107.739957,30.884259],[107.645103,30.821079],[107.514524,30.854986],[107.424597,30.740889],[107.516987,30.644675],[107.359923,30.456087],[107.221337,30.213891],[107.058113,30.043118],[107.053801,30.043636],[106.981736,30.085062],[106.980504,30.087651],[106.980504,30.087651],[106.980504,30.085062],[106.978041,30.087133],[106.978041,30.087651],[106.978041,30.087133],[106.978041,30.087651],[106.978041,30.087133],[106.976193,30.083509],[106.976193,30.087651],[106.976193,30.087651],[106.974345,30.082992],[106.913367,30.025506],[106.825904,30.031205],[106.825904,30.031205],[106.726121,30.033277],[106.677462,30.157],[106.611557,30.235605],[106.612173,30.235605],[106.611557,30.235605],[106.612173,30.235605],[106.612173,30.235605],[106.612789,30.235605],[106.612789,30.235605],[106.610941,30.292451],[106.610941,30.292451],[106.451412,30.307949],[106.451412,30.307949],[106.428623,30.254729],[106.262935,30.211306],[106.261703,30.205101],[106.260471,30.204067],[106.256776,30.19631],[106.180399,30.23302],[106.17116,30.306399],[106.10587,30.310531],[106.031958,30.373529],[105.881053,30.387465],[105.792357,30.427199],[105.714749,30.322927],[105.720292,30.252662]]],[[[106.262935,30.211306],[106.256776,30.19631],[106.260471,30.204067],[106.261703,30.205101],[106.262935,30.211306]]],[[[105.571235,30.17976],[105.56138,30.183898],[105.558916,30.18545],[105.56138,30.188035],[105.571235,30.17976]]],[[[106.981736,30.085062],[106.980504,30.085062],[106.980504,30.087651],[106.981736,30.085062]]],[[[106.980504,30.085062],[106.976193,30.083509],[106.978041,30.087133],[106.980504,30.085062]]],[[[106.976193,30.083509],[106.974345,30.082992],[106.976193,30.087651],[106.976193,30.083509]]]]}},{type:"Feature",properties:{adcode:52e4,name:"贵州省",center:[106.713478,26.578343],centroid:[106.88108,26.826362],childrenNum:9,level:"province",subFeatureIndex:23,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[109.52187,26.748964],[109.454117,26.761252],[109.35495,26.693383],[109.407305,26.532902],[109.326001,26.427398],[109.285965,26.296052],[109.340784,26.264399],[109.466435,26.314288],[109.439334,26.238641],[109.486761,26.148445],[109.486761,26.148445],[109.449805,26.101709],[109.48245,26.029687],[109.408537,25.967305],[109.435022,25.933411],[109.339552,25.834363],[109.3414,25.732537],[109.147995,25.7417],[109.143683,25.795044],[108.989698,25.778881],[108.896076,25.71421],[108.953974,25.686714],[108.953974,25.686714],[109.000785,25.73631],[109.07901,25.720679],[109.030966,25.629545],[109.088249,25.550758],[109.025423,25.512426],[108.949046,25.557236],[108.781511,25.554537],[108.763649,25.637097],[108.68912,25.623072],[108.6072,25.491904],[108.625062,25.308138],[108.471693,25.458955],[108.418723,25.443287],[108.348506,25.536183],[108.142782,25.390867],[108.152021,25.324364],[108.115065,25.210195],[108.001732,25.196661],[107.841587,25.115966],[107.741805,25.239965],[107.700537,25.193954],[107.659885,25.316251],[107.599523,25.250789],[107.472024,25.213984],[107.481263,25.300024],[107.432604,25.289205],[107.420901,25.393029],[107.318039,25.401677],[107.336517,25.461116],[107.228728,25.604728],[107.064272,25.559395],[107.066736,25.509186],[106.963874,25.437884],[107.012533,25.353024],[107.013765,25.275138],[106.912751,25.243212],[106.900432,25.194495],[106.732281,25.162548],[106.684238,25.178252],[106.590615,25.087791],[106.304819,24.973944],[106.215508,24.982079],[106.146522,24.948449],[106.206269,24.851304],[106.173008,24.760059],[106.045508,24.681796],[106.023335,24.632313],[105.942031,24.724738],[105.827466,24.702997],[105.70551,24.768752],[105.500402,24.807862],[105.445584,24.918608],[105.365511,24.943566],[105.265729,24.930003],[105.198592,24.995095],[105.09573,24.928375],[105.077868,24.918065],[105.03352,24.787765],[104.899245,24.752996],[104.841963,24.676359],[104.743413,24.621978],[104.63316,24.65896],[104.529682,24.73126],[104.539537,24.813836],[104.713232,24.996179],[104.667652,25.05961],[104.750804,25.215067],[104.822869,25.17013],[104.816094,25.262152],[104.639935,25.298942],[104.646094,25.356809],[104.543232,25.400597],[104.556783,25.524845],[104.434827,25.47246],[104.420661,25.585301],[104.332581,25.598792],[104.309791,25.648964],[104.328886,25.760561],[104.373233,25.731459],[104.441602,25.869362],[104.414501,25.909733],[104.499501,26.070541],[104.592508,26.317506],[104.683667,26.377557],[104.554935,26.590701],[104.487798,26.579465],[104.421276,26.712091],[104.354139,26.621194],[104.120082,26.636705],[104.052329,26.507204],[103.865699,26.512023],[103.764685,26.584816],[103.773308,26.716901],[103.705555,26.794904],[103.779468,26.874454],[103.77454,26.951815],[103.675374,27.051506],[103.638418,27.013133],[103.624251,27.112237],[103.711714,27.14259],[103.903271,27.347921],[103.932221,27.444072],[104.015372,27.429204],[104.01722,27.383523],[104.113307,27.338354],[104.174285,27.262856],[104.363378,27.467964],[104.497653,27.411677],[104.546312,27.330382],[104.609754,27.306991],[104.808702,27.35483],[104.871528,27.291041],[105.067397,27.418051],[105.184425,27.393085],[105.260186,27.514672],[105.232469,27.546506],[105.305149,27.612799],[105.308229,27.705011],[105.353809,27.74897],[105.508409,27.769089],[105.605112,27.715605],[105.62359,27.666333],[105.78435,27.719312],[106.023335,27.746851],[106.120653,27.779677],[106.193334,27.754265],[106.343007,27.821489],[106.304819,27.899249],[106.328225,27.952643],[106.206885,28.134302],[106.126812,28.16701],[105.975907,28.107917],[105.860111,28.165955],[105.88906,28.238722],[105.826234,28.304064],[105.730147,28.271925],[105.639604,28.32408],[105.62359,28.518253],[105.683952,28.535601],[105.749242,28.614943],[105.884748,28.594981],[105.891524,28.672179],[105.966668,28.76086],[106.103407,28.636476],[106.2925,28.537177],[106.330688,28.481971],[106.37442,28.525613],[106.395978,28.570287],[106.484057,28.530344],[106.504999,28.662204],[106.45326,28.816968],[106.562897,28.753516],[106.63681,28.623346],[106.564745,28.485127],[106.632499,28.503531],[106.7446,28.465667],[106.73844,28.554522],[106.866556,28.624397],[106.883186,28.69265],[106.824056,28.756139],[106.926302,28.809104],[106.986664,28.793899],[106.986664,28.793899],[106.983584,28.851561],[107.057497,28.895049],[107.191156,28.888763],[107.219489,28.772923],[107.383945,28.848417],[107.441227,28.943755],[107.36485,29.010753],[107.412894,29.095485],[107.404271,29.187984],[107.486806,29.174402],[107.570574,29.218276],[107.589052,29.149845],[107.701769,29.142006],[107.751044,29.199997],[107.810791,29.138348],[107.784921,29.04842],[107.867457,28.960508],[107.930899,29.035343],[108.024521,29.038482],[108.068253,29.086597],[108.256115,29.040574],[108.268433,29.089734],[108.350353,28.933282],[108.352817,28.815395],[108.385462,28.772398],[108.332491,28.679528],[108.471077,28.627548],[108.565316,28.662204],[108.636149,28.621245],[108.577019,28.534024],[108.611512,28.324607],[108.668178,28.334614],[108.688504,28.422527],[108.640461,28.457251],[108.710678,28.500902],[108.779663,28.425158],[108.764881,28.306698],[108.726692,28.282463],[108.772888,28.21289],[108.922561,28.217635],[109.006329,28.163317],[109.026655,28.220271],[109.086401,28.184942],[109.081473,28.249264],[109.152306,28.349885],[109.191726,28.470927],[109.274262,28.494592],[109.27303,28.310386],[109.388211,28.268236],[109.340168,28.190216],[109.298284,28.036117],[109.378972,28.032948],[109.30198,27.956342],[109.345711,27.840537],[109.332777,27.782853],[109.470747,27.68011],[109.461508,27.567724],[109.303211,27.475396],[109.300132,27.423893],[109.202197,27.449913],[109.142451,27.418051],[109.040821,27.276151],[108.907162,27.2054],[108.878829,27.106378],[108.791366,27.084539],[108.87575,26.999273],[109.07901,27.115965],[109.164625,27.065893],[109.267487,27.128746],[109.415928,27.15377],[109.472595,27.135136],[109.454733,27.069622],[109.520022,27.058433],[109.555131,26.947015],[109.486761,26.895267],[109.500928,26.828546],[109.481218,26.838156],[109.473211,26.828546],[109.504624,26.805051],[109.52187,26.748964]]],[[[109.529261,26.740414],[109.528029,26.744689],[109.548971,26.737208],[109.548971,26.737208],[109.529261,26.740414]]],[[[109.500928,26.828546],[109.504624,26.805051],[109.473211,26.828546],[109.481218,26.838156],[109.500928,26.828546]]]]}},{type:"Feature",properties:{adcode:53e4,name:"云南省",center:[102.712251,25.040609],centroid:[101.485108,25.008649],childrenNum:16,level:"province",subFeatureIndex:24,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[105.542902,23.18449],[105.445584,23.292797],[105.372903,23.317525],[105.325475,23.390034],[105.238012,23.264217],[105.093266,23.260919],[104.886311,23.169088],[104.804391,23.110218],[104.860441,22.970917],[104.737869,22.825957],[104.579573,22.84636],[104.375697,22.690228],[104.272219,22.738245],[104.274067,22.828163],[104.117618,22.808861],[104.045553,22.728312],[104.009213,22.51789],[103.964249,22.502966],[103.825047,22.615685],[103.642113,22.795071],[103.566969,22.698508],[103.53494,22.594143],[103.436389,22.697404],[103.441317,22.753144],[103.323057,22.807758],[103.283021,22.678635],[103.195557,22.648268],[103.183854,22.557679],[103.081608,22.506835],[103.079761,22.448784],[102.930703,22.482512],[102.880196,22.586961],[102.688639,22.700164],[102.603024,22.731623],[102.570379,22.700164],[102.510633,22.774661],[102.384365,22.679739],[102.420706,22.636119],[102.322771,22.554364],[102.25625,22.457631],[102.270416,22.419472],[102.046214,22.457631],[101.907628,22.43717],[101.862665,22.389048],[101.76473,22.506282],[101.672339,22.474772],[101.625528,22.282789],[101.547304,22.237936],[101.596579,22.160933],[101.573789,22.114933],[101.626144,22.006247],[101.606434,21.967965],[101.701288,21.938553],[101.777049,21.826954],[101.747484,21.730276],[101.780129,21.640763],[101.754875,21.585137],[101.745636,21.29721],[101.833715,21.252606],[101.76473,21.147733],[101.672339,21.195158],[101.605818,21.172285],[101.604586,21.229741],[101.532521,21.252606],[101.387775,21.225837],[101.290457,21.178422],[101.222088,21.234203],[101.244877,21.302227],[101.142631,21.409218],[101.194986,21.425372],[101.209153,21.557316],[101.117378,21.689141],[101.123537,21.771956],[101.015132,21.70693],[100.870386,21.672461],[100.730568,21.518914],[100.558105,21.450434],[100.48296,21.459343],[100.437381,21.532829],[100.351765,21.52949],[100.247056,21.463798],[100.199628,21.512791],[100.126948,21.508338],[100.107853,21.585137],[100.169447,21.663564],[100.095535,21.704151],[99.991441,21.703595],[99.944014,21.821955],[99.999448,21.970184],[99.972347,22.052837],[99.871333,22.0667],[99.870101,22.029544],[99.486987,22.12879],[99.400139,22.099966],[99.220901,22.111053],[99.156227,22.160933],[99.235683,22.250673],[99.282495,22.401219],[99.381661,22.503519],[99.385973,22.57094],[99.31514,22.737693],[99.385973,22.761972],[99.457421,22.84636],[99.456806,22.932901],[99.563363,22.925737],[99.517168,23.006719],[99.528255,23.065635],[99.3484,23.128927],[99.255393,23.077746],[99.106336,23.086552],[98.889525,23.209238],[98.936953,23.309833],[98.872279,23.484456],[98.826084,23.470187],[98.808221,23.547549],[98.877823,23.59197],[98.786048,23.781551],[98.669019,23.800713],[98.701664,23.834103],[98.701048,23.946251],[98.899996,24.109102],[98.875975,24.150056],[98.716446,24.12767],[98.611737,24.08507],[98.550759,24.125485],[98.360434,24.097087],[98.225543,24.113471],[98.110978,24.092171],[97.902175,24.01404],[97.894168,23.973589],[97.769748,23.933126],[97.711234,23.861465],[97.5283,23.926563],[97.634241,24.046828],[97.730944,24.113471],[97.729712,24.227013],[97.767284,24.258656],[97.658879,24.326279],[97.716161,24.358987],[97.669966,24.452703],[97.531995,24.43146],[97.570799,24.602396],[97.570183,24.766579],[97.701379,24.842617],[97.764204,24.824155],[97.785762,24.875733],[97.716777,24.978283],[97.839349,25.27081],[97.914494,25.211278],[98.014892,25.305433],[98.06971,25.311924],[98.15779,25.457334],[98.131304,25.510266],[98.189818,25.569111],[98.170724,25.620374],[98.247717,25.607965],[98.314854,25.543201],[98.402317,25.593936],[98.457752,25.68294],[98.476846,25.777265],[98.553839,25.845672],[98.640686,25.798815],[98.704744,25.852133],[98.686881,25.925877],[98.614201,25.968919],[98.575396,26.118364],[98.634527,26.145759],[98.662244,26.0872],[98.735541,26.183351],[98.672715,26.240251],[98.733693,26.350753],[98.753403,26.559129],[98.781736,26.62066],[98.746012,26.697125],[98.757098,26.87819],[98.732461,27.002472],[98.765722,27.050973],[98.712135,27.077081],[98.696121,27.211253],[98.734309,27.35111],[98.706591,27.362269],[98.674563,27.582044],[98.583404,27.571437],[98.444201,27.665274],[98.429419,27.548628],[98.317318,27.519448],[98.278514,27.659974],[98.234166,27.690707],[98.222463,27.812493],[98.169492,27.851118],[98.205217,27.88973],[98.133152,27.99069],[98.160253,28.101056],[98.139311,28.142216],[98.168876,28.204454],[98.266195,28.24083],[98.208913,28.35831],[98.301303,28.384633],[98.37768,28.246101],[98.389383,28.114777],[98.428803,28.10475],[98.559382,28.182833],[98.626519,28.165427],[98.712135,28.229233],[98.752787,28.333561],[98.677026,28.463563],[98.627751,28.487756],[98.638222,28.55242],[98.594491,28.667979],[98.683802,28.739877],[98.652389,28.816968],[98.657932,28.93014],[98.765722,29.006044],[98.815613,28.948991],[98.828547,28.820113],[98.912931,28.800715],[98.972677,28.832693],[98.917243,28.888239],[98.925866,28.978306],[99.009018,29.031158],[98.967134,29.128418],[98.976373,29.204698],[99.113727,29.221409],[99.132206,28.948467],[99.103872,28.842128],[99.126662,28.699473],[99.183944,28.588677],[99.174705,28.402003],[99.280647,28.298269],[99.306516,28.227652],[99.374886,28.181778],[99.437095,28.398318],[99.403219,28.546638],[99.463581,28.549266],[99.532566,28.681628],[99.615718,28.741975],[99.625573,28.814871],[99.717964,28.846321],[99.733362,28.719415],[99.793724,28.699473],[99.987129,28.524561],[99.990209,28.476712],[100.073977,28.42621],[100.054267,28.376737],[100.176223,28.324607],[100.157129,28.210254],[100.033941,28.184942],[100.086296,28.030836],[100.196549,27.936257],[100.210715,27.877037],[100.295099,27.869633],[100.327744,27.720372],[100.442924,27.866459],[100.54517,27.809318],[100.633866,27.915111],[100.681293,27.923041],[100.707162,27.80085],[100.782307,27.691767],[100.848212,27.670573],[100.936908,27.469026],[101.021907,27.332508],[101.057016,27.20061],[101.170349,27.195821],[101.136472,27.023794],[101.264587,26.955549],[101.267667,26.902737],[101.399478,26.841893],[101.357594,26.770868],[101.389623,26.723314],[101.512195,26.756443],[101.453065,26.692848],[101.451833,26.600867],[101.400094,26.605146],[101.458608,26.495424],[101.506652,26.499708],[101.636615,26.395245],[101.660636,26.346999],[101.586724,26.279422],[101.630455,26.224687],[101.690202,26.241861],[101.807846,26.156501],[101.799223,26.109231],[101.86328,26.052266],[101.917483,26.108156],[102.005562,26.091499],[102.005562,26.091499],[102.107808,26.068391],[102.245163,26.212341],[102.349257,26.244545],[102.392372,26.296588],[102.567915,26.36362],[102.638748,26.307852],[102.60056,26.250448],[102.674473,26.205363],[102.739762,26.268691],[102.998457,26.371661],[102.989833,26.483108],[103.056971,26.525943],[103.018783,26.593911],[102.991681,26.775675],[102.898674,26.908073],[102.870957,27.026992],[102.913457,27.133538],[102.882044,27.293168],[102.941174,27.405303],[102.989833,27.368114],[103.111789,27.401054],[103.222043,27.566133],[103.295955,27.568785],[103.29226,27.632943],[103.487512,27.795028],[103.515846,27.965326],[103.488128,28.03242],[103.430846,28.044039],[103.471498,28.123221],[103.573128,28.230815],[103.639649,28.261912],[103.721569,28.201817],[103.877402,28.311966],[103.781931,28.525613],[103.838598,28.587101],[103.844757,28.660104],[103.940844,28.606013],[104.12501,28.637526],[104.314719,28.615468],[104.425588,28.626497],[104.318415,28.538229],[104.261748,28.537177],[104.254357,28.408844],[104.314103,28.306698],[104.384936,28.329874],[104.44961,28.269817],[104.44653,28.112666],[104.354139,28.019744],[104.40095,27.952114],[104.573413,27.840537],[104.743413,27.901892],[104.872144,27.905594],[105.05939,28.097889],[105.186889,28.0546],[105.186273,27.995445],[105.270657,27.99703],[105.284823,27.935729],[105.233084,27.895547],[105.244171,27.823077],[105.308229,27.810376],[105.308229,27.810376],[105.273736,27.795028],[105.308229,27.705011],[105.305149,27.612799],[105.232469,27.546506],[105.260186,27.514672],[105.184425,27.393085],[105.067397,27.418051],[104.871528,27.291041],[104.808702,27.35483],[104.609754,27.306991],[104.546312,27.330382],[104.497653,27.411677],[104.363378,27.467964],[104.174285,27.262856],[104.113307,27.338354],[104.01722,27.383523],[104.015372,27.429204],[103.932221,27.444072],[103.903271,27.347921],[103.711714,27.14259],[103.624251,27.112237],[103.638418,27.013133],[103.675374,27.051506],[103.77454,26.951815],[103.779468,26.874454],[103.705555,26.794904],[103.773308,26.716901],[103.764685,26.584816],[103.865699,26.512023],[104.052329,26.507204],[104.120082,26.636705],[104.354139,26.621194],[104.421276,26.712091],[104.487798,26.579465],[104.554935,26.590701],[104.683667,26.377557],[104.592508,26.317506],[104.499501,26.070541],[104.414501,25.909733],[104.441602,25.869362],[104.373233,25.731459],[104.328886,25.760561],[104.309791,25.648964],[104.332581,25.598792],[104.420661,25.585301],[104.434827,25.47246],[104.556783,25.524845],[104.543232,25.400597],[104.646094,25.356809],[104.639935,25.298942],[104.816094,25.262152],[104.822869,25.17013],[104.750804,25.215067],[104.667652,25.05961],[104.713232,24.996179],[104.539537,24.813836],[104.529682,24.73126],[104.492109,24.656241],[104.610986,24.376973],[104.70892,24.321372],[104.72863,24.446167],[104.83642,24.446712],[104.979933,24.412937],[105.063085,24.429281],[105.063085,24.429281],[105.188121,24.346995],[105.164715,24.288109],[105.229389,24.165888],[105.20044,24.105279],[105.260186,24.061033],[105.320548,24.116202],[105.481924,24.018958],[105.529967,24.129308],[105.628518,24.126577],[105.649459,24.033167],[105.704278,24.066497],[105.89214,24.040271],[105.933407,24.123847],[106.04982,24.089986],[106.192102,23.824798],[106.136667,23.795238],[106.157609,23.724048],[106.120653,23.605129],[106.141595,23.569487],[105.999929,23.447683],[105.89214,23.525058],[105.815763,23.506953],[105.699966,23.401566],[105.694423,23.363122],[105.531815,23.248275],[105.542902,23.18449]]]]}},{type:"Feature",properties:{adcode:54e4,name:"西藏自治区",center:[91.132212,29.660361],centroid:[88.388277,31.56375],childrenNum:7,level:"province",subFeatureIndex:25,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[79.039649,34.33427],[79.0107,34.399956],[79.161605,34.441416],[79.229358,34.413778],[79.504683,34.454737],[79.675914,34.451284],[79.801566,34.478909],[79.906892,34.683837],[79.947544,34.820993],[80.034391,34.902],[80.031311,35.034384],[80.118159,35.066222],[80.23026,35.147476],[80.257977,35.20323],[80.362687,35.209096],[80.268448,35.294114],[80.321419,35.386848],[80.412578,35.433663],[80.516672,35.392214],[80.65649,35.394165],[80.689135,35.33903],[80.844351,35.345375],[81.026053,35.312181],[81.031597,35.380506],[81.09935,35.407333],[81.219458,35.319016],[81.362356,35.354647],[81.494167,35.292161],[81.513261,35.235002],[81.675253,35.233536],[81.736847,35.262365],[81.927789,35.271158],[82.05344,35.350255],[82.033114,35.450236],[82.328149,35.559342],[82.336156,35.651284],[82.424852,35.713006],[82.628727,35.692114],[82.731589,35.63767],[82.788872,35.684824],[82.960719,35.671702],[82.998907,35.484348],[83.067892,35.462908],[83.127022,35.398554],[83.242203,35.420011],[83.451006,35.38197],[83.622238,35.335614],[83.677672,35.360991],[83.885244,35.367334],[84.005968,35.422449],[84.095895,35.362943],[84.1618,35.359039],[84.335495,35.414647],[84.45314,35.473141],[84.448828,35.55058],[84.729081,35.613353],[85.053065,35.751862],[85.159006,35.745549],[85.271107,35.788757],[85.372121,35.701346],[85.613569,35.652257],[85.65299,35.731465],[85.811286,35.779049],[85.949256,35.779049],[86.060125,35.846008],[86.132806,35.979271],[86.199944,36.032513],[86.187625,36.131158],[86.392733,36.206992],[86.515305,36.205543],[86.701318,36.245122],[86.746282,36.291916],[86.862078,36.300114],[86.887332,36.262492],[86.996353,36.308793],[87.149106,36.29722],[87.193454,36.349283],[87.306787,36.363739],[87.361605,36.419128],[87.460155,36.409498],[87.470626,36.354102],[87.570409,36.342536],[87.731785,36.384936],[87.949211,36.401312],[87.983088,36.437903],[88.134609,36.427313],[88.241782,36.468704],[88.365586,36.457636],[88.470912,36.482175],[88.573158,36.461005],[88.623665,36.389271],[88.783809,36.291916],[88.802903,36.337717],[88.926091,36.364221],[88.964279,36.318917],[89.10225,36.281305],[89.127503,36.249465],[89.232213,36.295774],[89.287647,36.235954],[89.375727,36.228231],[89.490291,36.150969],[89.711414,36.092972],[89.638117,36.04993],[89.476125,36.021868],[89.418843,36.04606],[89.429929,35.916302],[89.549422,35.858132],[89.801957,35.847948],[89.747138,35.751862],[89.765616,35.599732],[89.700327,35.537435],[89.744058,35.479963],[89.68616,35.414647],[89.497067,35.361479],[89.532175,35.285323],[89.449639,35.226693],[89.513081,35.139158],[89.593153,35.104412],[89.560509,34.938794],[89.654747,34.883351],[89.707102,34.919663],[89.821667,34.902981],[89.867862,34.810677],[89.799493,34.74384],[89.732356,34.732039],[89.72558,34.660709],[89.798877,34.628714],[89.823515,34.455231],[89.801957,34.390575],[89.872174,34.335752],[89.825362,34.293746],[89.818587,34.174037],[89.655979,34.096778],[89.635037,34.0492],[89.691704,33.957933],[89.795181,33.865575],[89.837065,33.869052],[89.933768,33.796986],[89.907282,33.74128],[90.008296,33.688026],[89.984275,33.61232],[90.01076,33.553501],[90.080977,33.530561],[90.092064,33.469691],[90.246665,33.42426],[90.332896,33.310829],[90.405577,33.260311],[90.486881,33.266815],[90.70554,33.135645],[90.805938,33.114599],[91.001807,33.116102],[91.001807,33.116102],[91.134849,33.073495],[91.262349,33.141156],[91.436044,33.065974],[91.49887,33.109086],[91.58079,33.039395],[91.785281,32.944044],[91.896766,32.907884],[91.955897,32.820437],[92.145606,32.885779],[92.227526,32.820939],[92.198577,32.755046],[92.255243,32.720823],[92.355641,32.764606],[92.63651,32.720319],[92.686401,32.765109],[92.877342,32.697161],[93.019624,32.737433],[93.069515,32.626137],[93.239514,32.662411],[93.385492,32.525297],[93.4631,32.556065],[93.516687,32.475844],[93.618933,32.522775],[93.654657,32.57321],[93.820345,32.549509],[93.861613,32.466253],[93.958931,32.484929],[94.136322,32.433939],[94.196684,32.516216],[94.371611,32.524793],[94.395016,32.594385],[94.53853,32.599425],[94.614291,32.673492],[94.772587,32.555057],[94.80708,32.486444],[94.889616,32.472311],[94.912405,32.415758],[94.985086,32.421819],[95.081789,32.384942],[95.218527,32.397067],[95.261643,32.348049],[95.096571,32.322267],[95.10581,32.259042],[95.241317,32.32075],[95.26965,32.194761],[95.312766,32.148673],[95.406389,32.182102],[95.454432,32.062006],[95.360809,31.959013],[95.439649,31.831508],[95.546823,31.739961],[95.618272,31.783712],[95.779648,31.74912],[95.825227,31.681935],[95.89914,31.817273],[95.982908,31.816765],[96.041422,31.734364],[96.135661,31.702299],[96.160298,31.600943],[96.204646,31.598904],[96.252689,31.69619],[96.176313,31.777608],[96.253921,31.929566],[96.389428,31.919917],[96.468268,31.769978],[96.576057,31.712989],[96.616093,31.736908],[96.775006,31.673788],[96.840295,31.720623],[96.760223,31.856922],[96.81073,31.894521],[96.722651,32.013314],[96.894498,32.013822],[97.008447,32.067076],[97.130403,32.04375],[97.308409,32.074682],[97.264062,32.183621],[97.299786,32.294959],[97.371235,32.273208],[97.424822,32.323278],[97.387865,32.427374],[97.341054,32.441009],[97.388481,32.501583],[97.334895,32.514198],[97.448843,32.586823],[97.472249,32.54497],[97.670582,32.517225],[97.730944,32.527315],[97.937283,32.484425],[98.218768,32.342489],[98.218768,32.234752],[98.301919,32.12334],[98.434962,32.007734],[98.414636,31.832525],[98.543983,31.718588],[98.553839,31.656473],[98.713367,31.510189],[98.837787,31.436705],[98.88583,31.376446],[98.773113,31.249163],[98.691809,31.333016],[98.64007,31.337615],[98.602498,31.192367],[98.709671,31.118635],[98.736772,31.049459],[98.806374,30.995621],[98.774345,30.907877],[98.901844,30.785105],[98.957895,30.765056],[98.907388,30.698196],[98.989308,30.151826],[99.044742,30.079885],[99.068148,29.93118],[99.0238,29.846105],[98.993003,29.656502],[99.052133,29.563908],[99.075539,29.314316],[99.113727,29.221409],[98.976373,29.204698],[98.967134,29.128418],[99.009018,29.031158],[98.925866,28.978306],[98.917243,28.888239],[98.972677,28.832693],[98.912931,28.800715],[98.828547,28.820113],[98.815613,28.948991],[98.765722,29.006044],[98.657932,28.93014],[98.652389,28.816968],[98.683802,28.739877],[98.594491,28.667979],[98.638222,28.55242],[98.627751,28.487756],[98.677026,28.463563],[98.752787,28.333561],[98.712135,28.229233],[98.626519,28.165427],[98.559382,28.182833],[98.428803,28.10475],[98.389383,28.114777],[98.37768,28.246101],[98.301303,28.384633],[98.208913,28.35831],[98.266195,28.24083],[98.168876,28.204454],[98.139311,28.142216],[98.090036,28.195489],[98.03337,28.187052],[98.020435,28.25348],[97.907718,28.363575],[97.801161,28.326714],[97.738335,28.396213],[97.737103,28.465667],[97.68598,28.51983],[97.569567,28.541382],[97.506126,28.471453],[97.485184,28.386212],[97.518445,28.327767],[97.460546,28.268236],[97.42359,28.297742],[97.350909,28.23714],[97.321344,28.054071],[97.413119,28.013406],[97.386634,27.882855],[97.303482,27.913525],[97.062649,27.742615],[97.049099,27.814081],[96.972722,27.861169],[96.849534,27.874393],[96.784245,27.9315],[96.690622,27.948943],[96.572978,28.058296],[96.499681,28.067271],[96.46334,28.143271],[96.398667,28.118471],[96.297037,28.141161],[96.275479,28.228179],[95.989067,28.198126],[95.874502,28.297742],[95.674322,28.254007],[95.371896,28.110028],[95.28628,27.939957],[95.015267,27.828897],[94.88592,27.743145],[94.524979,27.596362],[94.277372,27.580983],[93.970634,27.305396],[93.849294,27.168676],[93.841903,27.045645],[93.56781,26.937948],[93.232739,26.907006],[93.111399,26.880325],[92.909371,26.914475],[92.802813,26.895267],[92.682089,26.948082],[92.57122,26.946482],[92.404916,26.902737],[92.109265,26.854705],[92.124664,26.959815],[92.043976,27.052572],[92.032273,27.168144],[92.125896,27.27296],[92.010715,27.474866],[91.839484,27.489728],[91.753868,27.462656],[91.585101,27.54014],[91.570934,27.650965],[91.642383,27.766442],[91.611586,27.891316],[91.486551,27.937314],[91.464993,28.002841],[91.309776,28.057768],[91.251878,27.970611],[91.162567,27.968497],[91.113292,27.846357],[90.96485,27.900306],[90.96177,27.9537],[90.896481,27.9463],[90.802242,28.040342],[90.701844,28.076246],[90.591591,28.021329],[90.513983,28.061992],[90.384019,28.060936],[90.296556,28.15435],[90.231882,28.144854],[90.124709,28.190743],[90.03355,28.13694],[89.976268,28.189161],[89.906051,28.180723],[89.789638,28.24083],[89.720037,28.170175],[89.605472,28.161735],[89.461958,28.031892],[89.375727,27.875979],[89.238988,27.796616],[89.184786,27.673752],[89.131815,27.633474],[89.163228,27.574619],[89.095474,27.471681],[89.182938,27.373959],[89.077612,27.287319],[89.057286,27.234663],[88.975982,27.217106],[88.911924,27.274024],[88.920548,27.325598],[88.809063,27.405834],[88.770874,27.567724],[88.852178,27.671103],[88.888519,27.846886],[88.842939,28.006539],[88.764099,28.068327],[88.67602,28.068327],[88.645223,28.111083],[88.565151,28.083109],[88.554064,28.027667],[88.478919,28.034005],[88.401311,27.976952],[88.254101,27.939429],[88.156783,27.957928],[88.111819,27.864872],[87.826639,27.927799],[87.727473,27.802967],[87.590119,27.848473],[87.45954,27.82096],[87.420735,27.859053],[87.364069,27.824135],[87.280917,27.845299],[87.227946,27.813022],[87.118309,27.840537],[87.035157,27.9463],[86.935375,27.955285],[86.864542,28.022385],[86.756753,28.032948],[86.700086,28.101583],[86.647732,28.069383],[86.568891,28.103167],[86.514689,27.954757],[86.450015,27.908766],[86.231972,27.97431],[86.19132,28.16701],[86.082915,28.01816],[86.125415,27.923041],[86.053966,27.900306],[85.949256,27.937314],[85.980053,27.984349],[85.901213,28.053543],[85.854402,28.172284],[85.753388,28.227652],[85.720743,28.371999],[85.682555,28.375684],[85.650526,28.283517],[85.526106,28.324607],[85.415853,28.321447],[85.272339,28.282463],[85.209513,28.338827],[85.113427,28.34462],[85.108499,28.461459],[85.189803,28.545062],[85.195963,28.623871],[85.126361,28.675854],[85.05676,28.674279],[84.981616,28.586576],[84.857196,28.56766],[84.698284,28.633325],[84.650856,28.714692],[84.483321,28.735155],[84.408176,28.854182],[84.234481,28.889287],[84.248648,29.030635],[84.194445,29.044759],[84.20738,29.118487],[84.116837,29.286661],[84.002272,29.291358],[83.917273,29.324749],[83.727563,29.244383],[83.656114,29.167088],[83.548941,29.201042],[83.266841,29.571194],[83.12887,29.62374],[83.088834,29.605014],[82.9484,29.704846],[82.830756,29.687694],[82.703872,29.847662],[82.6238,29.834687],[82.560974,29.955547],[82.498148,29.947771],[82.412533,30.012037],[82.246845,30.071601],[82.17786,30.067976],[82.207425,30.143548],[82.114418,30.226816],[82.104563,30.346682],[81.99123,30.322927],[81.872354,30.373012],[81.759021,30.385401],[81.63029,30.446802],[81.566232,30.428747],[81.555761,30.369399],[81.406704,30.40398],[81.427646,30.305366],[81.393769,30.199413],[81.335871,30.150791],[81.269349,30.153378],[81.293371,30.094899],[81.225618,30.005301],[81.131995,30.016181],[81.034677,30.246977],[80.81725,30.321378],[80.719316,30.414816],[80.633084,30.458665],[80.549316,30.448866],[80.322035,30.564338],[80.214245,30.585974],[80.124934,30.558671],[80.04363,30.603485],[79.970333,30.685848],[79.961094,30.771225],[79.890877,30.854986],[79.835443,30.850876],[79.75845,30.93662],[79.668523,30.980233],[79.59769,30.925843],[79.505915,31.027415],[79.427075,31.018186],[79.421531,31.067399],[79.316206,31.017673],[79.33222,30.96946],[79.227511,30.94945],[79.181931,31.015622],[79.0957,30.993057],[79.010084,31.044333],[78.997765,31.159093],[78.865338,31.313082],[78.841933,31.288542],[78.755085,31.3555],[78.792041,31.436195],[78.729832,31.478047],[78.740303,31.532631],[78.845628,31.610115],[78.763092,31.668696],[78.706426,31.778626],[78.654071,31.821849],[78.739687,31.885376],[78.762476,31.946829],[78.599868,32.024982],[78.519796,32.123847],[78.469905,32.127901],[78.430485,32.211975],[78.511173,32.308108],[78.458818,32.379889],[78.472985,32.435454],[78.395377,32.530342],[78.518564,32.605978],[78.628202,32.630168],[78.741534,32.703706],[78.781571,32.607994],[78.760629,32.56363],[78.81052,32.436464],[78.970664,32.331873],[79.005772,32.375341],[79.103091,32.369782],[79.135736,32.472311],[79.252148,32.51672],[79.308199,32.596905],[79.27309,32.678025],[79.301423,32.728877],[79.224431,32.784729],[79.255844,32.942537],[79.162837,33.011804],[79.139431,33.117606],[79.162221,33.166202],[79.072294,33.228286],[79.022403,33.323328],[78.84686,33.421264],[78.74215,33.553501],[78.755085,33.623281],[78.692259,33.676575],[78.779723,33.732323],[78.758165,33.791019],[78.744614,33.980759],[78.656535,34.030359],[78.661462,34.086868],[78.750158,34.092815],[78.793273,34.132445],[78.9257,34.155719],[78.981751,34.318458],[79.039649,34.33427]]]]}},{type:"Feature",properties:{adcode:61e4,name:"陕西省",center:[108.948024,34.263161],centroid:[108.887567,35.263665],childrenNum:10,level:"province",subFeatureIndex:26,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[107.288474,37.00812],[107.288474,37.00812],[107.268764,37.099324],[107.336517,37.165628],[107.257677,37.337082],[107.284162,37.482036],[107.342061,37.515265],[107.348836,37.608226],[107.484959,37.706279],[107.499125,37.7659],[107.620465,37.775832],[107.65003,37.864688],[107.982022,37.787181],[108.025137,37.649926],[108.134159,37.621971],[108.219158,37.661295],[108.304158,37.638556],[108.440896,37.654663],[108.532671,37.690656],[108.611512,37.65419],[108.777815,37.683554],[108.799989,37.783871],[108.798141,37.93362],[108.82709,37.989285],[108.797525,38.047735],[108.871438,38.027471],[108.938575,37.920877],[109.017416,37.969949],[109.069155,38.091071],[108.963829,38.155085],[108.938575,38.207291],[109.051908,38.432146],[109.178792,38.520675],[109.276726,38.623121],[109.367269,38.627328],[109.338936,38.70161],[109.404226,38.720752],[109.511399,38.833633],[109.549587,38.805662],[109.624116,38.854603],[109.683862,38.935631],[109.665384,38.981691],[109.961035,39.191608],[110.217881,39.28105],[110.146432,39.455434],[110.243751,39.42355],[110.39096,39.31161],[110.434692,39.381016],[110.528315,39.380091],[110.604075,39.277345],[110.702626,39.27364],[110.740198,39.351874],[110.892335,39.509927],[111.134399,39.586513],[111.148566,39.531619],[111.064182,39.400899],[111.125776,39.366678],[111.247732,39.302351],[111.163348,39.152644],[111.138711,39.064897],[110.980414,38.970063],[111.009363,38.847614],[110.880016,38.618446],[110.920052,38.581973],[110.874473,38.453702],[110.77777,38.44105],[110.746973,38.366029],[110.661358,38.308773],[110.57759,38.297035],[110.565887,38.215283],[110.509221,38.192245],[110.501213,38.031713],[110.522771,37.954853],[110.59422,37.921821],[110.663821,37.803256],[110.758676,37.744139],[110.706321,37.705332],[110.796248,37.66319],[110.795017,37.566029],[110.745125,37.450693],[110.644111,37.435017],[110.630561,37.373228],[110.695234,37.34945],[110.690307,37.287115],[110.53509,37.137969],[110.444547,37.007164],[110.382953,37.021975],[110.425453,36.960325],[110.416214,36.790892],[110.447011,36.737687],[110.394656,36.676768],[110.496902,36.582175],[110.503677,36.487948],[110.45933,36.330969],[110.474112,36.248018],[110.447011,36.164495],[110.511684,35.879951],[110.549257,35.877527],[110.57759,35.701346],[110.609619,35.632321],[110.525851,35.44195],[110.477808,35.413672],[110.45009,35.327803],[110.39404,35.271647],[110.325671,35.014785],[110.257301,34.93487],[110.232664,34.803308],[110.241287,34.682361],[110.310272,34.608033],[110.379257,34.600646],[110.360779,34.516878],[110.403279,34.43352],[110.403279,34.43352],[110.503677,34.337234],[110.426685,34.275454],[110.43962,34.24331],[110.642264,34.16067],[110.590525,34.096778],[110.669365,33.939072],[110.587445,33.887929],[110.782698,33.795494],[110.877552,33.635238],[111.00382,33.578429],[111.02661,33.478675],[111.022914,33.475181],[111.022914,33.474682],[111.02661,33.474183],[110.996429,33.435745],[111.025994,33.330327],[110.984726,33.255308],[110.824582,33.158188],[110.745741,33.147167],[110.702626,33.097057],[110.59422,33.168706],[110.54125,33.255809],[110.468569,33.181226],[110.218497,33.163197],[110.164911,33.209265],[110.031252,33.191742],[109.852013,33.247803],[109.732521,33.231288],[109.619804,33.27532],[109.537268,33.2438],[109.438718,33.152177],[109.576073,33.110088],[109.688174,33.116603],[109.794731,33.066977],[109.76455,32.909391],[109.988752,32.886281],[110.10886,32.82999],[110.159367,32.767122],[110.156903,32.683061],[110.206179,32.633191],[110.153824,32.593376],[110.085454,32.613034],[110.017701,32.546987],[109.910528,32.592872],[109.816905,32.577244],[109.726978,32.608498],[109.631507,32.599929],[109.637051,32.540935],[109.575457,32.506629],[109.502776,32.389489],[109.495385,32.300522],[109.592703,32.219568],[109.621652,32.106617],[109.590855,32.012807],[109.631507,31.962059],[109.584696,31.900617],[109.638282,31.811172],[109.585928,31.726731],[109.281654,31.717061],[109.273646,31.801003],[109.195422,31.817782],[109.164009,31.877247],[108.988466,31.979317],[108.902235,31.984899],[108.734084,32.106617],[108.67249,32.104083],[108.509882,32.201343],[108.46923,32.270173],[108.312781,32.232222],[108.251187,32.273208],[108.179122,32.222099],[108.070717,32.233234],[107.979558,32.14614],[107.812022,32.24791],[107.75474,32.338445],[107.707929,32.331873],[107.680211,32.398078],[107.533002,32.383426],[107.456625,32.417778],[107.436299,32.529837],[107.382097,32.54043],[107.313727,32.489976],[107.263836,32.403129],[107.127098,32.482406],[107.080286,32.542448],[107.108004,32.600938],[107.066736,32.708741],[106.82344,32.705217],[106.733513,32.739446],[106.663296,32.690615],[106.585687,32.688097],[106.421231,32.616562],[106.347935,32.670974],[106.17424,32.697664],[106.076305,32.753537],[106.076305,32.758065],[106.076921,32.764103],[106.07261,32.764103],[106.093552,32.823956],[106.025798,32.85814],[105.825002,32.824962],[105.822538,32.770141],[105.719061,32.759575],[105.596489,32.699175],[105.563844,32.72485],[105.49917,32.911902],[105.590329,32.876734],[105.735691,32.905372],[105.917393,32.993739],[105.930944,33.177721],[105.965436,33.204759],[105.862574,33.234291],[105.74801,33.298827],[105.723372,33.390796],[105.82993,33.382802],[105.842248,33.490152],[105.956197,33.612818],[106.129276,33.604347],[106.187174,33.54652],[106.303587,33.604347],[106.447101,33.613316],[106.456956,33.533055],[106.54134,33.513103],[106.58076,33.575937],[106.539492,33.691013],[106.480362,33.715403],[106.461883,33.789528],[106.493296,33.846197],[106.41076,33.906304],[106.474202,33.970836],[106.501919,34.104706],[106.585071,34.149282],[106.526557,34.291768],[106.663912,34.24331],[106.717498,34.369342],[106.624491,34.410323],[106.610325,34.454244],[106.455108,34.531667],[106.334384,34.517864],[106.314058,34.578973],[106.419384,34.643482],[106.505615,34.74679],[106.575216,34.769893],[106.493296,34.941247],[106.494528,35.005964],[106.494528,35.005964],[106.5746,35.089236],[106.710723,35.100495],[106.838222,35.079933],[106.901664,35.094621],[107.08275,35.024095],[107.089526,34.976553],[107.189308,34.893166],[107.252134,34.880896],[107.286626,34.931927],[107.523763,34.909851],[107.561951,34.966747],[107.634016,34.950565],[107.804631,34.95694],[107.863761,34.996161],[107.757204,35.076016],[107.686371,35.217895],[107.651878,35.239889],[107.745501,35.311693],[107.867457,35.256014],[108.049159,35.254059],[108.174811,35.305345],[108.2401,35.256014],[108.352817,35.285812],[108.48894,35.275066],[108.614591,35.32878],[108.631222,35.418548],[108.618287,35.556908],[108.539447,35.605569],[108.517273,35.715921],[108.524664,35.839703],[108.498179,35.876072],[108.588722,35.950214],[108.656475,35.952636],[108.712526,36.13889],[108.646004,36.25429],[108.651548,36.384936],[108.618903,36.434052],[108.510498,36.474478],[108.495099,36.422498],[108.407636,36.458117],[108.340498,36.55911],[108.262274,36.549497],[108.194521,36.625405],[108.163724,36.563916],[108.007891,36.61628],[108.004811,36.683006],[107.939522,36.655651],[107.907493,36.751591],[107.720863,36.802391],[107.540393,36.828736],[107.478183,36.908674],[107.310032,36.912501],[107.288474,37.00812]]],[[[106.076305,32.753537],[106.07261,32.764103],[106.076921,32.764103],[106.076305,32.758065],[106.076305,32.753537]]],[[[111.022914,33.474682],[111.022914,33.475181],[111.02661,33.478675],[111.02661,33.474183],[111.022914,33.474682]]]]}},{type:"Feature",properties:{adcode:62e4,name:"甘肃省",center:[103.823557,36.058039],childrenNum:14,level:"province",subFeatureIndex:27,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[106.494528,35.005964],[106.494528,35.005964],[106.493296,34.941247],[106.575216,34.769893],[106.505615,34.74679],[106.419384,34.643482],[106.314058,34.578973],[106.334384,34.517864],[106.455108,34.531667],[106.610325,34.454244],[106.624491,34.410323],[106.717498,34.369342],[106.663912,34.24331],[106.526557,34.291768],[106.585071,34.149282],[106.501919,34.104706],[106.474202,33.970836],[106.41076,33.906304],[106.493296,33.846197],[106.461883,33.789528],[106.480362,33.715403],[106.539492,33.691013],[106.58076,33.575937],[106.54134,33.513103],[106.456956,33.533055],[106.447101,33.613316],[106.303587,33.604347],[106.187174,33.54652],[106.129276,33.604347],[105.956197,33.612818],[105.842248,33.490152],[105.82993,33.382802],[105.723372,33.390796],[105.74801,33.298827],[105.862574,33.234291],[105.965436,33.204759],[105.930944,33.177721],[105.917393,32.993739],[105.735691,32.905372],[105.590329,32.876734],[105.49917,32.911902],[105.414171,32.921948],[105.391381,32.835017],[105.455439,32.737433],[105.347033,32.682558],[105.111128,32.59388],[105.026745,32.650322],[104.881999,32.600938],[104.845659,32.653848],[104.739717,32.635711],[104.643015,32.661908],[104.582653,32.722333],[104.458849,32.748504],[104.363994,32.822448],[104.294393,32.83552],[104.288234,32.94304],[104.378161,32.953081],[104.426204,33.0108],[104.337509,33.038392],[104.378161,33.109086],[104.303632,33.304328],[104.432979,33.325828],[104.292545,33.336326],[104.22048,33.404782],[104.155191,33.542531],[104.168741,33.611821],[104.046169,33.686533],[103.871243,33.68255],[103.778236,33.658648],[103.626099,33.727347],[103.520157,33.678566],[103.525085,33.798975],[103.349542,33.74327],[103.279325,33.806433],[103.153057,33.814884],[103.181391,33.900842],[103.124108,33.968354],[103.119797,34.034822],[103.178927,34.079931],[103.124108,34.16166],[102.973203,34.205217],[102.978747,34.249246],[102.911609,34.313022],[102.798276,34.272982],[102.599328,34.145321],[102.655994,34.113623],[102.471213,34.072993],[102.437336,34.087364],[102.391756,33.970836],[102.315996,33.994154],[102.237772,33.963392],[102.136142,33.965377],[102.234076,33.870046],[102.239619,33.788036],[102.299981,33.782566],[102.342481,33.725357],[102.33817,33.614313],[102.440416,33.57494],[102.462589,33.449724],[102.396684,33.40678],[102.264873,33.417269],[102.186649,33.332327],[102.217446,33.248303],[102.112736,33.287324],[102.08933,33.204759],[101.935345,33.186734],[101.865744,33.103072],[101.841723,33.184731],[101.769658,33.268816],[101.878063,33.315829],[101.885454,33.380804],[101.9452,33.437742],[101.907012,33.542032],[101.844186,33.602353],[101.769042,33.538541],[101.735781,33.49614],[101.622448,33.502127],[101.582412,33.675081],[101.501724,33.70296],[101.385312,33.644702],[101.238718,33.685039],[101.166653,33.660142],[101.191907,33.786047],[101.153718,33.844706],[100.999118,33.889419],[100.806329,34.155224],[100.764445,34.178987],[100.821727,34.317469],[100.895024,34.375268],[100.986799,34.374774],[101.054552,34.322905],[101.235022,34.325376],[101.331109,34.245289],[101.530057,34.21066],[101.622448,34.178492],[101.736397,34.079931],[101.84665,34.150272],[101.955055,34.10966],[101.965526,34.167601],[102.062229,34.227976],[102.067772,34.293746],[102.149692,34.271993],[102.189728,34.355018],[102.237156,34.343163],[102.237772,34.343163],[102.237156,34.343163],[102.237772,34.343163],[102.210054,34.399462],[102.210054,34.399462],[102.155852,34.507511],[102.003715,34.538074],[101.919947,34.621821],[101.917483,34.875497],[102.048062,34.910832],[102.094874,34.986848],[102.218677,35.058386],[102.29567,35.071609],[102.310452,35.128883],[102.402227,35.191006],[102.370814,35.262854],[102.279655,35.304857],[102.317228,35.433663],[102.407155,35.408308],[102.447807,35.437563],[102.504473,35.583189],[102.742226,35.495065],[102.808747,35.560315],[102.686175,35.772253],[102.78411,35.862496],[102.955957,35.861041],[102.971971,35.995247],[102.882044,36.082335],[102.941174,36.105058],[102.98737,36.193956],[103.068058,36.203612],[103.024326,36.257185],[102.830305,36.358439],[102.832153,36.357957],[102.831537,36.360848],[102.830305,36.362294],[102.769943,36.472072],[102.761936,36.568721],[102.606719,36.682526],[102.704654,36.792329],[102.587009,36.869912],[102.56114,36.919676],[102.450271,36.968453],[102.506321,37.019108],[102.488459,37.079278],[102.642444,37.099801],[102.599944,37.174687],[102.457662,37.24807],[102.428097,37.308534],[102.19712,37.420287],[102.102881,37.48441],[102.130598,37.544684],[102.035743,37.627184],[102.036359,37.684974],[101.946432,37.728051],[101.815853,37.65419],[101.791832,37.695864],[101.659405,37.733256],[101.597195,37.828308],[101.459224,37.866105],[101.362522,37.791437],[101.150639,37.876969],[100.887633,38.050562],[100.93814,38.160261],[100.825423,38.158849],[100.74843,38.239724],[100.619083,38.265567],[100.546402,38.246773],[100.474953,38.289052],[100.318505,38.329428],[100.261222,38.366498],[100.24028,38.441519],[100.064122,38.518802],[100.001296,38.466821],[100.093071,38.4073],[100.157744,38.309712],[100.182998,38.221864],[100.126332,38.231735],[99.937238,38.34163],[99.826985,38.370251],[99.65945,38.449017],[99.555972,38.520207],[99.50916,38.608628],[99.450646,38.60442],[99.361951,38.718418],[99.222133,38.788875],[99.068764,38.896991],[99.1088,38.946334],[98.951735,38.987737],[98.816845,39.085799],[98.743548,39.086728],[98.584635,38.930046],[98.457752,38.952849],[98.383839,39.029581],[98.280977,39.027257],[98.251412,38.891403],[98.094964,38.786077],[98.009348,38.859262],[97.828878,38.930046],[97.701379,38.963085],[97.679205,39.010522],[97.371235,39.14058],[97.220946,39.192999],[96.962867,39.198564],[97.012142,39.141972],[96.969643,39.097873],[96.940693,38.907701],[96.983809,38.869046],[97.009063,38.702544],[97.057722,38.672654],[97.055874,38.5946],[96.975802,38.559519],[96.7941,38.60816],[96.780549,38.504289],[96.6666,38.483684],[96.698013,38.422302],[96.626564,38.356177],[96.665369,38.230325],[96.46334,38.27778],[96.335841,38.246303],[96.313051,38.162142],[96.221892,38.148969],[96.109175,38.187072],[96.063596,38.172962],[95.856024,38.284355],[95.83693,38.343977],[95.702039,38.400736],[95.51849,38.295156],[95.320157,38.32051],[95.261027,38.301261],[95.121825,38.417615],[94.973999,38.430271],[94.810775,38.385261],[94.67958,38.387137],[94.527443,38.36556],[94.511429,38.445268],[94.370379,38.762753],[93.885018,38.720752],[93.800019,38.750622],[93.769838,38.821047],[93.884403,38.826175],[93.729186,38.92446],[93.453245,38.915615],[93.274007,38.89606],[93.179152,38.923994],[93.198246,39.045847],[93.131725,39.108088],[93.142196,39.160531],[92.978356,39.143364],[92.938936,39.169809],[92.866871,39.138723],[92.489916,39.09973],[92.41046,39.038412],[92.366728,39.059322],[92.339011,39.236575],[92.52564,39.368528],[92.639589,39.514543],[92.745531,39.868137],[92.796654,40.15364],[92.906907,40.310773],[92.928465,40.572609],[93.506216,40.648464],[93.760599,40.664804],[93.820961,40.793574],[93.809874,40.879583],[94.01067,41.114857],[94.184365,41.268392],[94.534219,41.50586],[94.750413,41.538114],[94.861898,41.668309],[95.135991,41.772811],[95.29552,41.569456],[95.39407,41.693333],[95.57146,41.796011],[95.677402,41.830795],[95.855408,41.849516],[96.038342,41.924794],[96.117183,41.985753],[96.13874,42.054207],[96.077147,42.149652],[96.178161,42.217929],[96.040806,42.3264],[96.06606,42.414367],[95.978596,42.436892],[96.02356,42.54234],[96.103632,42.604026],[96.386348,42.727655],[96.742361,42.757096],[96.968411,42.756218],[97.172903,42.795305],[97.307177,42.565259],[97.84674,41.656687],[97.613915,41.477176],[97.629314,41.440407],[97.971776,41.097726],[98.25018,40.939271],[98.333332,40.918929],[98.344419,40.568518],[98.627751,40.677965],[98.569853,40.746901],[98.668403,40.772734],[98.689345,40.691576],[98.801446,40.609411],[98.790975,40.705185],[98.984996,40.782701],[99.041662,40.693844],[99.102025,40.676603],[99.172858,40.747354],[99.174705,40.858317],[99.565827,40.846551],[99.673,40.932943],[100.057346,40.908077],[100.107853,40.875511],[100.237201,40.716977],[100.242744,40.618495],[100.169447,40.541242],[100.169447,40.277458],[100.002528,40.197528],[99.927383,40.063947],[99.488218,39.875943],[99.672384,39.887881],[99.822058,39.85987],[99.904593,39.785886],[100.040716,39.756913],[100.128179,39.702155],[100.250135,39.68512],[100.314193,39.606799],[100.326512,39.509003],[100.500823,39.4813],[100.498975,39.400437],[100.619699,39.38749],[100.842053,39.405523],[100.842669,39.199955],[100.864227,39.106695],[100.835278,39.025863],[100.961545,39.005873],[100.969553,38.9468],[101.117378,38.97518],[101.228863,39.02075],[101.198682,38.943077],[101.24303,38.86066],[101.334189,38.848545],[101.307087,38.802865],[101.562702,38.712816],[101.601506,38.6549],[101.679115,38.690869],[101.777049,38.660507],[101.941505,38.808926],[102.075164,38.891403],[101.926106,39.000758],[101.830636,39.093229],[102.280887,39.190217],[102.45335,39.25511],[102.601792,39.172129],[103.007696,39.09973],[103.344615,39.331514],[103.595302,39.386565],[103.839214,39.460516],[103.964865,39.455434],[104.091133,39.418466],[104.047401,39.297721],[104.177364,39.15218],[104.207546,39.083941],[104.168125,38.940285],[104.044322,38.895128],[103.85954,38.64462],[103.416063,38.404956],[103.507838,38.281068],[103.53494,38.156497],[103.369868,38.089658],[103.362477,38.037368],[103.401897,37.861854],[103.676606,37.783871],[103.948235,37.564606],[104.183524,37.406981],[104.287002,37.42789],[104.437907,37.445943],[104.679971,37.407931],[104.713848,37.32947],[104.632544,37.299015],[104.600515,37.242831],[104.638087,37.201857],[104.775442,37.246641],[104.85613,37.211864],[104.95468,37.040125],[105.165331,36.995218],[105.190585,36.886185],[105.244787,36.894798],[105.334714,36.800953],[105.319932,36.742961],[105.218302,36.730494],[105.22015,36.631167],[105.281744,36.522575],[105.319932,36.536038],[105.398156,36.430683],[105.401236,36.370002],[105.473301,36.298185],[105.460366,36.223887],[105.513337,36.150003],[105.343954,36.033965],[105.333483,35.887707],[105.392613,35.865405],[105.481924,35.727094],[105.570003,35.716407],[105.671017,35.749434],[105.754785,35.730494],[105.690727,35.698431],[105.847176,35.490681],[105.868734,35.53987],[106.015943,35.52234],[106.070762,35.491655],[106.057827,35.488245],[105.897683,35.451698],[105.894603,35.413672],[106.054132,35.449261],[106.061523,35.457547],[106.064603,35.431225],[106.073226,35.421474],[106.079385,35.427325],[106.107102,35.364894],[106.174856,35.438538],[106.319601,35.265296],[106.472354,35.310716],[106.503767,35.415135],[106.440941,35.526723],[106.476666,35.580756],[106.434782,35.688712],[106.501304,35.737779],[106.501304,35.735836],[106.503767,35.736322],[106.504383,35.738265],[106.737208,35.689198],[106.86594,35.737779],[106.92199,35.803316],[106.849925,35.887707],[106.950939,36.004444],[106.957715,36.091522],[106.858548,36.206992],[106.858548,36.206992],[106.599238,36.274552],[106.599238,36.274552],[106.505615,36.265869],[106.488369,36.400348],[106.521014,36.479289],[106.401521,36.546133],[106.471738,36.581214],[106.519782,36.708912],[106.519782,36.708912],[106.589383,36.750153],[106.631883,36.723301],[106.658368,36.811972],[106.595542,36.940243],[106.666991,37.01672],[106.605397,37.127475],[106.750143,37.098847],[106.777244,37.156569],[106.777244,37.156569],[106.891193,37.098369],[107.030395,37.140831],[107.095685,37.115548],[107.180685,37.143692],[107.268764,37.099324],[107.288474,37.00812],[107.288474,37.00812],[107.310032,36.912501],[107.478183,36.908674],[107.540393,36.828736],[107.720863,36.802391],[107.907493,36.751591],[107.939522,36.655651],[108.004811,36.683006],[108.007891,36.61628],[108.163724,36.563916],[108.194521,36.625405],[108.262274,36.549497],[108.340498,36.55911],[108.407636,36.458117],[108.495099,36.422498],[108.510498,36.474478],[108.618903,36.434052],[108.651548,36.384936],[108.646004,36.25429],[108.712526,36.13889],[108.656475,35.952636],[108.588722,35.950214],[108.498179,35.876072],[108.524664,35.839703],[108.517273,35.715921],[108.539447,35.605569],[108.618287,35.556908],[108.631222,35.418548],[108.614591,35.32878],[108.48894,35.275066],[108.352817,35.285812],[108.2401,35.256014],[108.174811,35.305345],[108.049159,35.254059],[107.867457,35.256014],[107.745501,35.311693],[107.651878,35.239889],[107.686371,35.217895],[107.757204,35.076016],[107.863761,34.996161],[107.804631,34.95694],[107.634016,34.950565],[107.561951,34.966747],[107.523763,34.909851],[107.286626,34.931927],[107.252134,34.880896],[107.189308,34.893166],[107.089526,34.976553],[107.08275,35.024095],[106.901664,35.094621],[106.838222,35.079933],[106.710723,35.100495],[106.5746,35.089236],[106.494528,35.005964]]],[[[106.070762,35.491655],[106.078153,35.489707],[106.078153,35.489707],[106.071994,35.463395],[106.061523,35.457547],[106.054132,35.449261],[106.057827,35.488245],[106.070762,35.491655]]],[[[106.073226,35.421474],[106.064603,35.431225],[106.061523,35.457547],[106.071994,35.463395],[106.06953,35.458034],[106.071378,35.449261],[106.079385,35.427325],[106.073226,35.421474]]],[[[102.831537,36.360848],[102.832153,36.357957],[102.830305,36.358439],[102.830305,36.362294],[102.831537,36.360848]]],[[[106.503767,35.736322],[106.501304,35.735836],[106.501304,35.737779],[106.504383,35.738265],[106.503767,35.736322]]]]}},{type:"Feature",properties:{adcode:63e4,name:"青海省",center:[101.778916,36.623178],centroid:[96.043531,35.726402],childrenNum:8,level:"province",subFeatureIndex:28,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[91.001807,33.116102],[91.001807,33.116102],[90.805938,33.114599],[90.70554,33.135645],[90.486881,33.266815],[90.405577,33.260311],[90.332896,33.310829],[90.246665,33.42426],[90.092064,33.469691],[90.080977,33.530561],[90.01076,33.553501],[89.984275,33.61232],[90.008296,33.688026],[89.907282,33.74128],[89.933768,33.796986],[89.837065,33.869052],[89.795181,33.865575],[89.691704,33.957933],[89.635037,34.0492],[89.655979,34.096778],[89.818587,34.174037],[89.825362,34.293746],[89.872174,34.335752],[89.801957,34.390575],[89.823515,34.455231],[89.798877,34.628714],[89.72558,34.660709],[89.732356,34.732039],[89.799493,34.74384],[89.867862,34.810677],[89.821667,34.902981],[89.707102,34.919663],[89.654747,34.883351],[89.560509,34.938794],[89.593153,35.104412],[89.513081,35.139158],[89.449639,35.226693],[89.532175,35.285323],[89.497067,35.361479],[89.68616,35.414647],[89.744058,35.479963],[89.700327,35.537435],[89.765616,35.599732],[89.747138,35.751862],[89.801957,35.847948],[89.549422,35.858132],[89.429929,35.916302],[89.418843,36.04606],[89.476125,36.021868],[89.638117,36.04993],[89.711414,36.092972],[89.941159,36.067343],[89.937463,36.130675],[89.999057,36.169809],[90.028006,36.25815],[90.145651,36.238849],[90.128405,36.208923],[90.234962,36.161597],[90.430215,36.133091],[90.526917,36.148553],[90.66304,36.134058],[90.776373,36.086203],[90.841046,36.01848],[90.922966,36.029126],[90.979017,36.106992],[91.09235,36.088621],[91.124994,36.115693],[91.07264,36.299149],[91.026444,36.323738],[91.05293,36.432608],[91.035683,36.529788],[90.7388,36.58746],[90.720938,36.708912],[90.735105,36.827778],[90.853981,36.915371],[90.983944,36.913458],[91.181045,37.025318],[91.303617,37.01242],[91.280211,37.163721],[91.1909,37.205669],[91.192132,37.27807],[91.134849,37.32614],[91.099741,37.447843],[91.057241,37.483936],[90.958075,37.477763],[90.863836,37.534246],[90.882314,37.575513],[90.776373,37.6504],[90.519526,37.73089],[90.516446,38.207291],[90.530613,38.32004],[90.361846,38.300322],[90.352607,38.233615],[90.280542,38.238315],[90.137644,38.340692],[90.111774,38.477595],[90.315034,38.501948],[90.424671,38.492114],[90.463476,38.556711],[90.610685,38.596003],[90.619308,38.664245],[90.831191,38.667982],[91.307928,38.751089],[91.446515,38.813588],[91.87952,38.884417],[91.966368,38.930976],[92.173323,38.960758],[92.263866,39.002153],[92.38459,39.000758],[92.41046,39.038412],[92.489916,39.09973],[92.866871,39.138723],[92.938936,39.169809],[92.978356,39.143364],[93.142196,39.160531],[93.131725,39.108088],[93.198246,39.045847],[93.179152,38.923994],[93.274007,38.89606],[93.453245,38.915615],[93.729186,38.92446],[93.884403,38.826175],[93.769838,38.821047],[93.800019,38.750622],[93.885018,38.720752],[94.370379,38.762753],[94.511429,38.445268],[94.527443,38.36556],[94.67958,38.387137],[94.810775,38.385261],[94.973999,38.430271],[95.121825,38.417615],[95.261027,38.301261],[95.320157,38.32051],[95.51849,38.295156],[95.702039,38.400736],[95.83693,38.343977],[95.856024,38.284355],[96.063596,38.172962],[96.109175,38.187072],[96.221892,38.148969],[96.313051,38.162142],[96.335841,38.246303],[96.46334,38.27778],[96.665369,38.230325],[96.626564,38.356177],[96.698013,38.422302],[96.6666,38.483684],[96.780549,38.504289],[96.7941,38.60816],[96.975802,38.559519],[97.055874,38.5946],[97.057722,38.672654],[97.009063,38.702544],[96.983809,38.869046],[96.940693,38.907701],[96.969643,39.097873],[97.012142,39.141972],[96.962867,39.198564],[97.220946,39.192999],[97.371235,39.14058],[97.679205,39.010522],[97.701379,38.963085],[97.828878,38.930046],[98.009348,38.859262],[98.094964,38.786077],[98.251412,38.891403],[98.280977,39.027257],[98.383839,39.029581],[98.457752,38.952849],[98.584635,38.930046],[98.743548,39.086728],[98.816845,39.085799],[98.951735,38.987737],[99.1088,38.946334],[99.068764,38.896991],[99.222133,38.788875],[99.361951,38.718418],[99.450646,38.60442],[99.50916,38.608628],[99.555972,38.520207],[99.65945,38.449017],[99.826985,38.370251],[99.937238,38.34163],[100.126332,38.231735],[100.182998,38.221864],[100.157744,38.309712],[100.093071,38.4073],[100.001296,38.466821],[100.064122,38.518802],[100.24028,38.441519],[100.261222,38.366498],[100.318505,38.329428],[100.474953,38.289052],[100.546402,38.246773],[100.619083,38.265567],[100.74843,38.239724],[100.825423,38.158849],[100.93814,38.160261],[100.887633,38.050562],[101.150639,37.876969],[101.362522,37.791437],[101.459224,37.866105],[101.597195,37.828308],[101.659405,37.733256],[101.791832,37.695864],[101.815853,37.65419],[101.946432,37.728051],[102.036359,37.684974],[102.035743,37.627184],[102.130598,37.544684],[102.102881,37.48441],[102.19712,37.420287],[102.428097,37.308534],[102.457662,37.24807],[102.599944,37.174687],[102.642444,37.099801],[102.488459,37.079278],[102.506321,37.019108],[102.450271,36.968453],[102.56114,36.919676],[102.587009,36.869912],[102.704654,36.792329],[102.606719,36.682526],[102.761936,36.568721],[102.769943,36.472072],[102.830305,36.362294],[102.830305,36.358439],[103.024326,36.257185],[103.068058,36.203612],[102.98737,36.193956],[102.941174,36.105058],[102.882044,36.082335],[102.971971,35.995247],[102.955957,35.861041],[102.78411,35.862496],[102.686175,35.772253],[102.808747,35.560315],[102.742226,35.495065],[102.504473,35.583189],[102.447807,35.437563],[102.407155,35.408308],[102.317228,35.433663],[102.279655,35.304857],[102.370814,35.262854],[102.402227,35.191006],[102.310452,35.128883],[102.29567,35.071609],[102.218677,35.058386],[102.094874,34.986848],[102.048062,34.910832],[101.917483,34.875497],[101.919947,34.621821],[102.003715,34.538074],[102.155852,34.507511],[102.210054,34.399462],[102.210054,34.399462],[102.237772,34.343163],[102.237156,34.343163],[102.237772,34.343163],[102.237156,34.343163],[102.189728,34.355018],[102.149692,34.271993],[102.067772,34.293746],[102.062229,34.227976],[101.965526,34.167601],[101.955055,34.10966],[101.84665,34.150272],[101.736397,34.079931],[101.622448,34.178492],[101.530057,34.21066],[101.331109,34.245289],[101.235022,34.325376],[101.054552,34.322905],[100.986799,34.374774],[100.895024,34.375268],[100.821727,34.317469],[100.764445,34.178987],[100.806329,34.155224],[100.999118,33.889419],[101.153718,33.844706],[101.191907,33.786047],[101.166653,33.660142],[101.238718,33.685039],[101.385312,33.644702],[101.501724,33.70296],[101.582412,33.675081],[101.622448,33.502127],[101.735781,33.49614],[101.769042,33.538541],[101.769658,33.447728],[101.695745,33.433748],[101.64955,33.323328],[101.739477,33.265815],[101.625528,33.100566],[101.486326,33.227285],[101.405022,33.225783],[101.393935,33.157687],[101.297232,33.262313],[101.183283,33.270317],[101.11553,33.194746],[101.169733,33.100566],[101.183899,32.984204],[101.129081,32.989725],[101.124153,32.909893],[101.237486,32.824962],[101.22332,32.725856],[101.157414,32.661404],[101.075494,32.683061],[100.93198,32.600433],[100.690532,32.678025],[100.645568,32.526306],[100.54517,32.569681],[100.516837,32.630168],[100.399809,32.756556],[100.339447,32.719313],[100.258759,32.742466],[100.208252,32.606482],[100.088143,32.668959],[100.139266,32.724346],[100.123252,32.837028],[100.038252,32.928979],[99.956332,32.948061],[99.877492,33.045915],[99.854086,32.945048],[99.788181,32.956596],[99.763543,32.778693],[99.607711,32.780705],[99.558436,32.839039],[99.385973,32.900349],[99.268328,32.878744],[99.235067,32.982197],[99.179633,33.044912],[99.002242,33.08252],[98.858728,33.150674],[98.759562,33.277321],[98.779272,33.37181],[98.734309,33.409278],[98.742316,33.477677],[98.648077,33.549014],[98.61728,33.63723],[98.6567,33.647193],[98.539056,33.746752],[98.462064,33.849178],[98.406629,33.867065],[98.440506,33.981255],[98.401702,34.08786],[98.21076,34.078444],[98.051848,34.115604],[97.937283,34.196804],[97.937283,34.196804],[97.834421,34.208186],[97.665654,34.126997],[97.70261,34.036805],[97.660111,33.956444],[97.458698,33.886935],[97.388481,33.884452],[97.435293,33.680558],[97.415583,33.605343],[97.52522,33.575937],[97.552321,33.465698],[97.625618,33.461705],[97.753733,33.410277],[97.676125,33.340825],[97.621306,33.334327],[97.576343,33.221779],[97.487648,33.168205],[97.487648,33.10658],[97.542466,33.036385],[97.523988,32.988721],[97.373699,32.956094],[97.386018,32.779196],[97.42359,32.704713],[97.543698,32.621602],[97.730944,32.527315],[97.670582,32.517225],[97.472249,32.54497],[97.448843,32.586823],[97.334895,32.514198],[97.388481,32.501583],[97.341054,32.441009],[97.387865,32.427374],[97.424822,32.323278],[97.371235,32.273208],[97.299786,32.294959],[97.264062,32.183621],[97.308409,32.074682],[97.130403,32.04375],[97.008447,32.067076],[96.894498,32.013822],[96.722651,32.013314],[96.81073,31.894521],[96.760223,31.856922],[96.840295,31.720623],[96.775006,31.673788],[96.616093,31.736908],[96.576057,31.712989],[96.468268,31.769978],[96.389428,31.919917],[96.253921,31.929566],[96.176313,31.777608],[96.252689,31.69619],[96.204646,31.598904],[96.160298,31.600943],[96.135661,31.702299],[96.041422,31.734364],[95.982908,31.816765],[95.89914,31.817273],[95.825227,31.681935],[95.779648,31.74912],[95.618272,31.783712],[95.546823,31.739961],[95.439649,31.831508],[95.360809,31.959013],[95.454432,32.062006],[95.406389,32.182102],[95.312766,32.148673],[95.26965,32.194761],[95.241317,32.32075],[95.10581,32.259042],[95.096571,32.322267],[95.261643,32.348049],[95.218527,32.397067],[95.081789,32.384942],[94.985086,32.421819],[94.912405,32.415758],[94.889616,32.472311],[94.80708,32.486444],[94.772587,32.555057],[94.614291,32.673492],[94.53853,32.599425],[94.395016,32.594385],[94.371611,32.524793],[94.196684,32.516216],[94.136322,32.433939],[93.958931,32.484929],[93.861613,32.466253],[93.820345,32.549509],[93.654657,32.57321],[93.618933,32.522775],[93.516687,32.475844],[93.4631,32.556065],[93.385492,32.525297],[93.239514,32.662411],[93.069515,32.626137],[93.019624,32.737433],[92.877342,32.697161],[92.686401,32.765109],[92.63651,32.720319],[92.355641,32.764606],[92.255243,32.720823],[92.198577,32.755046],[92.227526,32.820939],[92.145606,32.885779],[91.955897,32.820437],[91.896766,32.907884],[91.785281,32.944044],[91.58079,33.039395],[91.49887,33.109086],[91.436044,33.065974],[91.262349,33.141156],[91.134849,33.073495],[91.001807,33.116102]]]]}},{type:"Feature",properties:{adcode:64e4,name:"宁夏回族自治区",center:[106.278179,38.46637],centroid:[106.169867,37.291331],childrenNum:5,level:"province",subFeatureIndex:29,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[106.06953,35.458034],[106.071994,35.463395],[106.078153,35.489707],[106.078153,35.489707],[106.070762,35.491655],[106.015943,35.52234],[105.868734,35.53987],[105.847176,35.490681],[105.690727,35.698431],[105.754785,35.730494],[105.671017,35.749434],[105.570003,35.716407],[105.481924,35.727094],[105.392613,35.865405],[105.333483,35.887707],[105.343954,36.033965],[105.513337,36.150003],[105.460366,36.223887],[105.473301,36.298185],[105.401236,36.370002],[105.398156,36.430683],[105.319932,36.536038],[105.281744,36.522575],[105.22015,36.631167],[105.218302,36.730494],[105.319932,36.742961],[105.334714,36.800953],[105.244787,36.894798],[105.190585,36.886185],[105.165331,36.995218],[104.95468,37.040125],[104.85613,37.211864],[104.775442,37.246641],[104.638087,37.201857],[104.600515,37.242831],[104.632544,37.299015],[104.713848,37.32947],[104.679971,37.407931],[104.437907,37.445943],[104.287002,37.42789],[104.407726,37.464467],[104.419429,37.511943],[104.801311,37.538516],[104.866601,37.566503],[105.024281,37.579781],[105.111128,37.633818],[105.315004,37.702018],[105.598952,37.699178],[105.622974,37.778669],[105.760944,37.799947],[105.80406,37.861854],[105.799749,37.940227],[105.840401,38.003902],[105.780655,38.084949],[105.775111,38.186601],[105.86627,38.296565],[105.821307,38.366967],[105.874277,38.593197],[105.852719,38.641349],[105.90569,38.731488],[105.897683,38.788875],[106.003625,38.874636],[105.97098,38.909097],[106.060907,38.968667],[106.096631,39.08487],[106.145907,39.153108],[106.283877,39.14522],[106.284493,39.270397],[106.402753,39.291701],[106.506231,39.269934],[106.602318,39.375466],[106.683622,39.357426],[106.751375,39.381478],[106.806809,39.318554],[106.795723,39.214327],[106.859164,39.107623],[106.96757,39.054676],[106.954019,38.941215],[106.709491,38.718885],[106.66268,38.601614],[106.647897,38.470569],[106.601702,38.392295],[106.482825,38.319571],[106.546883,38.269794],[106.768621,38.174843],[107.014997,38.120261],[107.19054,38.154144],[107.329742,38.087774],[107.438147,37.992586],[107.419669,37.940699],[107.49235,37.944945],[107.65003,37.864688],[107.620465,37.775832],[107.499125,37.7659],[107.484959,37.706279],[107.348836,37.608226],[107.342061,37.515265],[107.284162,37.482036],[107.257677,37.337082],[107.336517,37.165628],[107.268764,37.099324],[107.180685,37.143692],[107.095685,37.115548],[107.030395,37.140831],[106.891193,37.098369],[106.777244,37.156569],[106.777244,37.156569],[106.750143,37.098847],[106.605397,37.127475],[106.666991,37.01672],[106.595542,36.940243],[106.658368,36.811972],[106.631883,36.723301],[106.589383,36.750153],[106.519782,36.708912],[106.519782,36.708912],[106.471738,36.581214],[106.401521,36.546133],[106.521014,36.479289],[106.488369,36.400348],[106.505615,36.265869],[106.599238,36.274552],[106.599238,36.274552],[106.858548,36.206992],[106.858548,36.206992],[106.957715,36.091522],[106.950939,36.004444],[106.849925,35.887707],[106.92199,35.803316],[106.86594,35.737779],[106.737208,35.689198],[106.504383,35.738265],[106.501304,35.737779],[106.434782,35.688712],[106.476666,35.580756],[106.440941,35.526723],[106.503767,35.415135],[106.472354,35.310716],[106.319601,35.265296],[106.174856,35.438538],[106.107102,35.364894],[106.079385,35.427325],[106.071378,35.449261],[106.073226,35.450236],[106.073842,35.45511],[106.06953,35.458034]]],[[[106.057827,35.488245],[106.054132,35.449261],[105.894603,35.413672],[105.897683,35.451698],[106.057827,35.488245]]],[[[106.071378,35.449261],[106.06953,35.458034],[106.073842,35.45511],[106.073226,35.450236],[106.071378,35.449261]]]]}},{type:"Feature",properties:{adcode:65e4,name:"新疆维吾尔自治区",center:[87.617733,43.792818],centroid:[85.294712,41.371801],childrenNum:23,level:"province",subFeatureIndex:30,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[79.039649,34.33427],[78.958961,34.386132],[78.878273,34.391563],[78.742766,34.454737],[78.708274,34.522301],[78.634977,34.538074],[78.58139,34.505539],[78.542586,34.574539],[78.436029,34.543496],[78.427405,34.594243],[78.280812,34.623298],[78.267261,34.705482],[78.213059,34.717778],[78.237696,34.882369],[78.182262,34.936832],[78.201972,34.974592],[78.123131,35.036833],[78.124979,35.108327],[78.062769,35.11469],[78.01719,35.22816],[78.013494,35.36587],[78.136066,35.49263],[78.009799,35.491655],[77.914944,35.464857],[77.816394,35.518445],[77.690742,35.448287],[77.518895,35.481912],[77.396939,35.467781],[77.307628,35.540356],[77.195527,35.519419],[77.072339,35.590974],[76.967013,35.591947],[76.83705,35.66198],[76.76129,35.65566],[76.69292,35.747492],[76.593754,35.772253],[76.566037,35.819328],[76.59745,35.895947],[76.54879,35.919209],[76.365857,35.82418],[76.298719,35.841643],[76.147198,35.833397],[76.16506,35.909033],[76.104082,36.018964],[75.961184,36.051381],[75.942706,36.137923],[76.016619,36.165461],[76.011691,36.229197],[76.060967,36.225335],[75.989518,36.340127],[76.035097,36.409017],[75.945786,36.588421],[75.871873,36.66621],[75.724048,36.750632],[75.537418,36.773161],[75.536802,36.730015],[75.458578,36.720903],[75.425933,36.778912],[75.413614,36.954588],[75.244847,36.963194],[75.130898,37.010987],[75.032348,37.01672],[74.893762,36.939764],[74.84695,37.056839],[74.739161,37.028185],[74.70898,37.084529],[74.56793,37.032961],[74.498944,37.072595],[74.465068,37.147031],[74.511263,37.239973],[74.665864,37.235686],[74.727458,37.282831],[74.816153,37.216629],[74.911008,37.23378],[74.927022,37.277594],[75.125971,37.322334],[75.153072,37.414109],[75.069304,37.513367],[75.035428,37.501026],[74.940573,37.558914],[74.891914,37.668399],[75.006478,37.771102],[74.917167,37.844847],[74.911008,37.967118],[74.821697,38.102842],[74.789668,38.324734],[74.868508,38.404018],[74.862965,38.484152],[74.792747,38.536121],[74.717603,38.542205],[74.639995,38.599744],[74.506336,38.63761],[74.229779,38.656302],[74.147859,38.676858],[74.068403,38.585714],[74.090577,38.542205],[73.926121,38.536121],[73.89902,38.579166],[73.799237,38.610966],[73.757353,38.719818],[73.769056,38.775815],[73.699455,38.857865],[73.767824,38.941215],[73.826339,38.917012],[73.820179,39.041665],[73.743187,39.029581],[73.719781,39.108088],[73.639709,39.220353],[73.542391,39.269471],[73.554094,39.350023],[73.502355,39.383791],[73.592898,39.412457],[73.61076,39.466059],[73.745651,39.461902],[73.868223,39.482686],[73.953838,39.600345],[73.905795,39.742193],[73.841737,39.756453],[73.845433,39.831389],[73.907027,39.873647],[73.910722,39.934693],[73.980324,40.004851],[73.943367,40.015849],[74.023439,40.085008],[74.26304,40.125281],[74.356662,40.089128],[74.442894,40.137175],[74.577169,40.260567],[74.673255,40.278828],[74.697893,40.344527],[74.908544,40.339055],[74.795211,40.443412],[74.819233,40.505767],[74.891914,40.507587],[74.973218,40.460258],[75.102565,40.439769],[75.13521,40.463445],[75.242383,40.448876],[75.355716,40.538059],[75.432093,40.563518],[75.550353,40.648917],[75.636584,40.624399],[75.646439,40.516684],[75.733287,40.474369],[75.669845,40.363678],[75.709265,40.28111],[75.831221,40.327196],[75.921764,40.291151],[75.986438,40.381911],[76.176147,40.381455],[76.279625,40.439314],[76.333212,40.343615],[76.442233,40.391482],[76.539551,40.4639],[76.556798,40.542606],[76.657196,40.620312],[76.676906,40.696113],[76.646725,40.760045],[76.731724,40.818935],[76.761905,40.954185],[76.85368,40.976323],[76.885709,41.027348],[77.002122,41.073373],[77.091433,41.062546],[77.169041,41.009291],[77.296541,41.004776],[77.363062,41.040888],[77.476395,40.999357],[77.591576,40.992132],[77.829328,41.059388],[77.814546,41.134238],[77.905089,41.185141],[77.972842,41.172982],[78.129291,41.228354],[78.162551,41.382521],[78.324544,41.384316],[78.458818,41.41349],[78.580774,41.481659],[78.650375,41.467314],[78.739071,41.555578],[78.825302,41.560503],[78.959577,41.652663],[79.021787,41.657134],[79.138199,41.722814],[79.21704,41.725493],[79.326061,41.809391],[79.361169,41.796457],[79.462799,41.848625],[79.550879,41.833915],[79.640806,41.884717],[79.776313,41.892734],[79.852689,42.015544],[79.918594,42.041322],[80.14218,42.034656],[80.193303,42.081301],[80.139717,42.151427],[80.168666,42.200202],[80.28631,42.232993],[80.283847,42.320649],[80.229028,42.358241],[80.206238,42.428943],[80.265368,42.502211],[80.164354,42.627363],[80.228412,42.692923],[80.261673,42.825592],[80.417505,42.838755],[80.500041,42.879544],[80.602903,42.89445],[80.487106,42.94878],[80.378701,43.031497],[80.593048,43.133319],[80.79446,43.137248],[80.777214,43.30816],[80.69283,43.32035],[80.761199,43.446456],[80.75504,43.49422],[80.522215,43.816724],[80.511128,43.906887],[80.453846,43.989596],[80.449534,44.077778],[80.3941,44.127189],[80.413194,44.264461],[80.350368,44.484713],[80.411962,44.605392],[80.313412,44.704987],[80.200695,44.75642],[80.169898,44.844727],[79.999283,44.793797],[79.969102,44.877383],[79.887798,44.909173],[80.144644,45.058985],[80.24381,45.031507],[80.328194,45.069973],[80.404571,45.049264],[80.493882,45.126991],[80.599207,45.10588],[80.731634,45.156111],[80.897938,45.127413],[80.93551,45.16033],[81.024821,45.162862],[81.111669,45.218522],[81.170183,45.210935],[81.44982,45.265707],[81.575471,45.307803],[81.634601,45.357856],[81.78797,45.383497],[81.921013,45.233272],[82.052824,45.25602],[82.109491,45.211357],[82.294272,45.247596],[82.487061,45.181],[82.58746,45.224001],[82.60101,45.346083],[82.546808,45.425925],[82.281954,45.538772],[82.266555,45.620015],[82.289961,45.7166],[82.340468,45.772552],[82.342932,45.935076],[82.461808,45.979999],[82.518474,46.153938],[82.726662,46.494818],[82.829524,46.772551],[82.876335,46.82375],[82.937929,47.014193],[82.993364,47.06557],[83.02724,47.215341],[83.15474,47.236063],[83.257602,47.173057],[83.370318,47.178751],[83.418978,47.118934],[83.463325,47.131961],[83.576042,47.059049],[83.766367,47.026838],[83.932671,46.970117],[84.002888,46.990527],[84.086656,46.965217],[84.195061,47.003586],[84.37122,46.993384],[84.425422,47.00889],[84.506726,46.972975],[84.748175,47.009706],[84.849189,46.95705],[84.934188,46.863857],[84.987159,46.918239],[85.082014,46.939895],[85.276651,47.068831],[85.325926,47.044781],[85.545816,47.057826],[85.582772,47.14295],[85.682555,47.222655],[85.675163,47.318063],[85.701649,47.384138],[85.614801,47.497853],[85.617881,47.550781],[85.547048,48.00833],[85.529186,48.02714],[85.587084,48.191738],[85.678243,48.266272],[85.695489,48.335129],[85.791576,48.418986],[85.916612,48.438043],[86.225813,48.432485],[86.305269,48.491999],[86.416138,48.481688],[86.579978,48.538768],[86.640956,48.629012],[86.780774,48.73133],[86.754289,48.78458],[86.822042,48.849193],[86.757985,48.894844],[86.732731,48.995444],[86.836209,49.051159],[86.88918,49.132656],[87.088128,49.13383],[87.112766,49.155748],[87.239033,49.114644],[87.388707,49.098193],[87.43675,49.075073],[87.511894,49.101718],[87.49896,49.141268],[87.821096,49.173745],[87.867291,49.108769],[87.833415,49.050374],[87.911639,48.980132],[87.87653,48.949099],[87.763198,48.926697],[87.742256,48.881074],[87.93874,48.757765],[88.029283,48.75027],[88.089645,48.695009],[88.027436,48.62743],[87.96153,48.599344],[88.041602,48.548275],[88.10874,48.545898],[88.196819,48.493982],[88.363123,48.460267],[88.443811,48.391579],[88.503557,48.413029],[88.605803,48.337914],[88.575006,48.277423],[88.663085,48.172189],[88.79736,48.133869],[88.824461,48.106708],[88.939026,48.115497],[89.078228,47.98711],[89.231597,47.980301],[89.38127,48.046344],[89.569132,48.037943],[89.651052,47.913774],[89.735435,47.897329],[89.761921,47.835916],[89.957789,47.842743],[89.960253,47.885694],[90.086521,47.865628],[90.07605,47.777646],[90.13518,47.723337],[90.331665,47.68146],[90.398186,47.547551],[90.468403,47.497853],[90.468403,47.404795],[90.526301,47.378871],[90.488113,47.317252],[90.56141,47.207212],[90.767134,46.992568],[90.901408,46.960725],[90.958075,46.8794],[90.942676,46.825797],[91.054161,46.71761],[91.017821,46.582483],[91.079415,46.558626],[90.983328,46.374823],[90.900177,46.31204],[91.021517,46.121185],[91.028292,46.023224],[90.850285,45.888035],[90.714779,45.728714],[90.676591,45.582339],[90.671047,45.48762],[90.772677,45.432223],[90.804706,45.294756],[90.877387,45.280865],[90.881698,45.191964],[91.007966,45.218522],[91.129922,45.215993],[91.242023,45.137544],[91.37753,45.110947],[91.448978,45.156533],[91.561695,45.075466],[91.694738,45.065325],[91.803144,45.082649],[92.100026,45.081381],[92.240461,45.015859],[92.315605,45.02897],[92.501003,45.001054],[92.779407,45.050532],[92.884117,45.046727],[92.932776,45.017551],[93.174225,45.015436],[93.434767,44.955343],[93.509296,44.968044],[93.716251,44.89434],[93.723642,44.86551],[94.215162,44.667978],[94.329727,44.582811],[94.359292,44.51544],[94.470777,44.509466],[94.606283,44.448418],[94.722696,44.340681],[94.945666,44.292734],[94.998637,44.25332],[95.398381,44.294447],[95.326932,44.028756],[95.527113,44.007243],[95.623199,43.855567],[95.735916,43.597437],[95.857872,43.417779],[95.880046,43.280289],[95.921314,43.22974],[96.363558,42.900586],[96.386348,42.727655],[96.103632,42.604026],[96.02356,42.54234],[95.978596,42.436892],[96.06606,42.414367],[96.040806,42.3264],[96.178161,42.217929],[96.077147,42.149652],[96.13874,42.054207],[96.117183,41.985753],[96.038342,41.924794],[95.855408,41.849516],[95.677402,41.830795],[95.57146,41.796011],[95.39407,41.693333],[95.29552,41.569456],[95.135991,41.772811],[94.861898,41.668309],[94.750413,41.538114],[94.534219,41.50586],[94.184365,41.268392],[94.01067,41.114857],[93.809874,40.879583],[93.820961,40.793574],[93.760599,40.664804],[93.506216,40.648464],[92.928465,40.572609],[92.906907,40.310773],[92.796654,40.15364],[92.745531,39.868137],[92.639589,39.514543],[92.52564,39.368528],[92.339011,39.236575],[92.366728,39.059322],[92.41046,39.038412],[92.38459,39.000758],[92.263866,39.002153],[92.173323,38.960758],[91.966368,38.930976],[91.87952,38.884417],[91.446515,38.813588],[91.307928,38.751089],[90.831191,38.667982],[90.619308,38.664245],[90.610685,38.596003],[90.463476,38.556711],[90.424671,38.492114],[90.315034,38.501948],[90.111774,38.477595],[90.137644,38.340692],[90.280542,38.238315],[90.352607,38.233615],[90.361846,38.300322],[90.530613,38.32004],[90.516446,38.207291],[90.519526,37.73089],[90.776373,37.6504],[90.882314,37.575513],[90.863836,37.534246],[90.958075,37.477763],[91.057241,37.483936],[91.099741,37.447843],[91.134849,37.32614],[91.192132,37.27807],[91.1909,37.205669],[91.280211,37.163721],[91.303617,37.01242],[91.181045,37.025318],[90.983944,36.913458],[90.853981,36.915371],[90.735105,36.827778],[90.720938,36.708912],[90.7388,36.58746],[91.035683,36.529788],[91.05293,36.432608],[91.026444,36.323738],[91.07264,36.299149],[91.124994,36.115693],[91.09235,36.088621],[90.979017,36.106992],[90.922966,36.029126],[90.841046,36.01848],[90.776373,36.086203],[90.66304,36.134058],[90.526917,36.148553],[90.430215,36.133091],[90.234962,36.161597],[90.128405,36.208923],[90.145651,36.238849],[90.028006,36.25815],[89.999057,36.169809],[89.937463,36.130675],[89.941159,36.067343],[89.711414,36.092972],[89.490291,36.150969],[89.375727,36.228231],[89.287647,36.235954],[89.232213,36.295774],[89.127503,36.249465],[89.10225,36.281305],[88.964279,36.318917],[88.926091,36.364221],[88.802903,36.337717],[88.783809,36.291916],[88.623665,36.389271],[88.573158,36.461005],[88.470912,36.482175],[88.365586,36.457636],[88.241782,36.468704],[88.134609,36.427313],[87.983088,36.437903],[87.949211,36.401312],[87.731785,36.384936],[87.570409,36.342536],[87.470626,36.354102],[87.460155,36.409498],[87.361605,36.419128],[87.306787,36.363739],[87.193454,36.349283],[87.149106,36.29722],[86.996353,36.308793],[86.887332,36.262492],[86.862078,36.300114],[86.746282,36.291916],[86.701318,36.245122],[86.515305,36.205543],[86.392733,36.206992],[86.187625,36.131158],[86.199944,36.032513],[86.132806,35.979271],[86.060125,35.846008],[85.949256,35.779049],[85.811286,35.779049],[85.65299,35.731465],[85.613569,35.652257],[85.372121,35.701346],[85.271107,35.788757],[85.159006,35.745549],[85.053065,35.751862],[84.729081,35.613353],[84.448828,35.55058],[84.45314,35.473141],[84.335495,35.414647],[84.1618,35.359039],[84.095895,35.362943],[84.005968,35.422449],[83.885244,35.367334],[83.677672,35.360991],[83.622238,35.335614],[83.451006,35.38197],[83.242203,35.420011],[83.127022,35.398554],[83.067892,35.462908],[82.998907,35.484348],[82.960719,35.671702],[82.788872,35.684824],[82.731589,35.63767],[82.628727,35.692114],[82.424852,35.713006],[82.336156,35.651284],[82.328149,35.559342],[82.033114,35.450236],[82.05344,35.350255],[81.927789,35.271158],[81.736847,35.262365],[81.675253,35.233536],[81.513261,35.235002],[81.494167,35.292161],[81.362356,35.354647],[81.219458,35.319016],[81.09935,35.407333],[81.031597,35.380506],[81.026053,35.312181],[80.844351,35.345375],[80.689135,35.33903],[80.65649,35.394165],[80.516672,35.392214],[80.412578,35.433663],[80.321419,35.386848],[80.268448,35.294114],[80.362687,35.209096],[80.257977,35.20323],[80.23026,35.147476],[80.118159,35.066222],[80.031311,35.034384],[80.034391,34.902],[79.947544,34.820993],[79.906892,34.683837],[79.801566,34.478909],[79.675914,34.451284],[79.504683,34.454737],[79.229358,34.413778],[79.161605,34.441416],[79.0107,34.399956],[79.039649,34.33427]]]]}},{type:"Feature",properties:{adcode:71e4,name:"台湾省",center:[121.509062,25.044332],centroid:[120.971486,23.749452],childrenNum:0,level:"province",subFeatureIndex:31,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[120.443706,22.441042],[120.297112,22.531154],[120.20041,22.721137],[120.131425,23.002313],[120.018708,23.073342],[120.108019,23.34115],[120.12157,23.504758],[120.095084,23.587583],[120.102476,23.70104],[120.175156,23.807282],[120.245989,23.84067],[120.278018,23.927657],[120.68885,24.600764],[120.82374,24.68832],[120.89211,24.767665],[120.914899,24.864876],[121.024537,25.040639],[121.209318,25.127342],[121.371926,25.15984],[121.444607,25.27081],[121.53515,25.307597],[121.62323,25.294614],[121.745186,25.162007],[121.917033,25.137634],[121.947214,25.031965],[122.012503,25.001602],[121.844968,24.836101],[121.841272,24.733977],[121.892395,24.618171],[121.88562,24.529477],[121.809243,24.338818],[121.643556,24.097633],[121.65957,24.006934],[121.621382,23.920547],[121.522832,23.538772],[121.479716,23.32247],[121.415042,23.196039],[121.430441,23.137181],[121.370695,23.084351],[121.324499,22.945574],[121.170514,22.723345],[121.03316,22.650477],[120.914899,22.302718],[120.907508,22.033426],[120.86624,21.98461],[120.873016,21.897477],[120.701784,21.926898],[120.651277,22.033426],[120.640806,22.241259],[120.569973,22.361938],[120.443706,22.441042]]],[[[119.646064,23.55084],[119.609108,23.503661],[119.566608,23.584842],[119.678093,23.600195],[119.646064,23.55084]]],[[[123.491374,25.747089],[123.496917,25.739005],[123.495069,25.737927],[123.494453,25.737927],[123.492606,25.737388],[123.480903,25.737927],[123.480287,25.737388],[123.46612,25.732537],[123.465504,25.732537],[123.491374,25.747089]]],[[[123.549272,25.724991],[123.549272,25.724991],[123.546192,25.729303],[123.546192,25.728764],[123.549272,25.724991]]],[[[123.690322,25.923187],[123.691554,25.921572],[123.690938,25.917267],[123.690938,25.916729],[123.690322,25.923187]]],[[[123.559743,25.718523],[123.559743,25.717984],[123.548656,25.720679],[123.549272,25.720679],[123.559743,25.718523]]],[[[121.510513,22.087215],[121.573339,22.086106],[121.594281,21.995152],[121.510513,22.087215]]],[[[123.559743,25.718523],[123.560359,25.718523],[123.560359,25.717984],[123.559743,25.717984],[123.559743,25.718523]]]]}},{type:"Feature",properties:{adcode:81e4,name:"香港特别行政区",center:[114.173355,22.320048],centroid:[114.134394,22.377371],childrenNum:18,level:"province",subFeatureIndex:32,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[114.031778,22.504071],[114.044096,22.502413],[114.045944,22.502413],[114.185762,22.551601],[114.185762,22.551601],[114.232574,22.539997],[114.232574,22.528944],[114.263371,22.541654],[114.263987,22.541654],[114.271994,22.535023],[114.28924,22.522864],[114.355762,22.434958],[114.406269,22.433299],[114.406269,22.432746],[114.356994,22.340356],[114.323733,22.384622],[114.315726,22.299951],[114.315726,22.298843],[114.248588,22.274484],[114.265835,22.200825],[114.195002,22.232951],[114.120473,22.272269],[114.121089,22.320985],[114.034857,22.301058],[114.026234,22.229628],[113.848844,22.191961],[113.898119,22.308808],[114.015763,22.332054],[113.920293,22.368024],[113.918445,22.418366],[114.031778,22.504071]]],[[[114.350834,22.260087],[114.355146,22.268393],[114.355762,22.268393],[114.350834,22.260087]]],[[[114.320037,22.381303],[114.320037,22.381856],[114.319421,22.382409],[114.323733,22.384622],[114.320037,22.381303]]],[[[114.372392,22.322645],[114.372392,22.323752],[114.37424,22.323199],[114.372392,22.322645]]]]}},{type:"Feature",properties:{adcode:82e4,name:"澳门特别行政区",center:[113.54909,22.198951],centroid:[113.56642,22.159262],childrenNum:8,level:"province",subFeatureIndex:33,acroutes:[1e5],parent:{adcode:1e5}},geometry:{type:"MultiPolygon",coordinates:[[[[113.558736,22.213012],[113.6037,22.132116],[113.553809,22.107727],[113.558736,22.213012]]]]}},{type:"Feature",properties:{adcode:1e5,name:"",adchar:"JD"},geometry:{type:"MultiPolygon",coordinates:[[[[122.51865306,23.46078502],[122.51742454,23.45790762],[122.51536697,23.45555069],[122.51268178,23.45394494],[122.50963181,23.45324755],[122.5065156,23.45352678],[122.5036382,23.45475531],[122.50128127,23.45681287],[122.49967552,23.45949807],[122.49897813,23.46254804],[122.49925737,23.46566424],[122.77921829,24.57855302],[122.78044682,24.58143041],[122.78250438,24.58378734],[122.78518957,24.5853931],[122.78823955,24.58609049],[122.79135575,24.58581125],[122.79423315,24.58458272],[122.79659008,24.58252516],[122.79819583,24.57983997],[122.79889322,24.57678999],[122.79861399,24.57367379],[122.51865306,23.46078502]]],[[[121.17202617,20.8054593],[121.16966862,20.80340244],[121.16679085,20.80217478],[121.16367457,20.80189649],[121.1606248,20.8025948],[121.1579401,20.80420136],[121.15588324,20.80655891],[121.15465558,20.80943668],[121.15437729,20.81255297],[121.1550756,20.81560273],[121.15668216,20.81828744],[121.89404403,21.70026162],[121.89640158,21.70231847],[121.89927934,21.70354613],[121.90239563,21.70382443],[121.9054454,21.70312611],[121.9081301,21.70151955],[121.91018696,21.699162],[121.91141462,21.69628423],[121.91169291,21.69316794],[121.9109946,21.69011818],[121.90938804,21.68743347],[121.17202617,20.8054593]]],[[[119.47366172,18.00707291],[119.47175735,18.00459056],[119.46917909,18.0028182],[119.46617933,18.0019293],[119.4630517,18.00201089],[119.46010237,18.00305497],[119.45762002,18.00495935],[119.45584765,18.00753761],[119.45495876,18.01053737],[119.45504035,18.01366499],[119.45608443,18.01661433],[120.00812005,19.0335793],[120.01002443,19.03606165],[120.01260269,19.03783401],[120.01560245,19.03872291],[120.01873007,19.03864132],[120.02167941,19.03759723],[120.02416175,19.03569286],[120.02593412,19.0331146],[120.02682302,19.03011484],[120.02674143,19.02698721],[120.02569734,19.02403788],[119.47366172,18.00707291]]],[[[119.0726757,15.04098494],[119.0726746,15.04083704],[119.07218171,15.00751424],[119.07164663,15.00443165],[119.07018516,15.00166528],[119.06794036,14.99948592],[119.06513198,14.99810691],[119.06203491,14.99766324],[119.05895232,14.99819832],[119.05618595,14.99965979],[119.05400659,15.00190458],[119.05262758,15.00471297],[119.0521839,15.00781004],[119.0526757,15.04105889],[119.0526757,16.04388528],[119.05316513,16.04697545],[119.05458553,16.04976313],[119.05679784,16.05197545],[119.05958553,16.05339584],[119.0626757,16.05388528],[119.06576587,16.05339584],[119.06855355,16.05197545],[119.07076587,16.04976313],[119.07218626,16.04697545],[119.0726757,16.04388528],[119.0726757,15.04098494]]],[[[118.68646749,11.18959191],[118.85557939,11.6136711],[118.9698053,11.99151854],[118.97116801,11.99433487],[118.97333431,11.99659227],[118.97609216,11.99806975],[118.9791716,11.99862269],[118.98227119,11.99819697],[118.98508753,11.99683427],[118.98734492,11.99466796],[118.9888224,11.99191011],[118.98937534,11.98883067],[118.98894963,11.98573108],[118.87459939,11.60747236],[118.87431591,11.606662],[118.70476212,11.18147468],[118.70409227,11.18010771],[118.54242469,10.9053354],[118.54043581,10.90292022],[118.53779795,10.90123786],[118.53476931,10.90045298],[118.53164636,10.90064241],[118.5287348,10.90178762],[118.52631962,10.9037765],[118.52463726,10.90641436],[118.52385237,10.909443],[118.52404181,10.91256595],[118.52518702,10.91547751],[118.68646749,11.18959191]]],[[[115.54466883,7.14672265],[115.54229721,7.14468204],[115.53941108,7.14347417],[115.53629295,7.14321728],[115.53324806,7.14393652],[115.53057445,7.14556148],[115.52853383,7.1479331],[115.52732596,7.15081924],[115.52706908,7.15393736],[115.52778832,7.15698226],[115.52941328,7.15965587],[116.23523025,7.99221221],[116.23760187,7.99425282],[116.240488,7.99546069],[116.24360613,7.99571758],[116.24665102,7.99499834],[116.24932463,7.99337338],[116.25136525,7.99100176],[116.25257312,7.98811563],[116.25283001,7.9849975],[116.25211077,7.98195261],[116.2504858,7.979279],[115.54466883,7.14672265]]],[[[112.30705249,3.53487257],[112.51501594,3.59753306],[112.84361424,3.7506962],[112.84662187,3.75155809],[112.84974864,3.7514484],[112.85268847,3.75037785],[112.8551536,3.74845124],[112.85690272,3.74585715],[112.85776462,3.74284952],[112.85765492,3.73972276],[112.85658437,3.73678292],[112.85465776,3.7343178],[112.85206367,3.73256867],[112.52281386,3.57910186],[112.52147408,3.5785908],[112.31248917,3.51562254],[112.31181658,3.51544515],[111.79132585,3.39736822],[111.78820398,3.39716187],[111.78517113,3.39793033],[111.78252419,3.39959839],[111.78052226,3.40200275],[111.77936129,3.40490807],[111.77915495,3.40802995],[111.77992341,3.41106279],[111.78159146,3.41370973],[111.78399583,3.41571167],[111.78690114,3.41687263],[112.30705249,3.53487257]]],[[[108.26055972,6.08912451],[108.26004031,6.09098419],[108.23638164,6.22427602],[108.23630689,6.22476797],[108.19687578,6.53630242],[108.19679674,6.53760583],[108.1987683,6.95072469],[108.19897125,6.95268198],[108.22460147,7.07791743],[108.22570055,7.08084671],[108.22765103,7.083293],[108.230262,7.08501682],[108.23327786,7.08584944],[108.23640341,7.08570936],[108.2393327,7.08461028],[108.24177899,7.0826598],[108.24350281,7.08004883],[108.24433543,7.07703297],[108.24419535,7.07390742],[108.21876335,6.94964057],[108.21679964,6.53816468],[108.25611734,6.22752625],[108.279563,6.09543449],[108.30878645,6.01987736],[108.30944469,6.0168187],[108.30912553,6.01370633],[108.30786022,6.01084492],[108.30577262,6.00851455],[108.30306706,6.00694335],[108.3000084,6.00628511],[108.29689603,6.00660426],[108.29403462,6.00786957],[108.29170425,6.00995718],[108.29013305,6.01266273],[108.26055972,6.08912451]]],[[[110.12822847,11.36894451],[110.18898148,11.48996382],[110.23982347,11.61066468],[110.28485499,11.78705054],[110.3083549,11.94803461],[110.3142445,12.14195265],[110.312278,12.23998238],[110.31270536,12.24308175],[110.31406956,12.24589736],[110.31623706,12.2481536],[110.3189957,12.24962962],[110.32207543,12.25018094],[110.32517479,12.24975358],[110.3279904,12.24838938],[110.33024665,12.24622187],[110.33172267,12.24346324],[110.33227398,12.24038351],[110.33424553,12.14210167],[110.33424294,12.14159753],[110.32832827,11.94685414],[110.32822801,11.94571326],[110.30456934,11.78364161],[110.30436343,11.7826124],[110.25901765,11.60499559],[110.25854422,11.60358735],[110.20728377,11.48189306],[110.20700505,11.48128846],[110.14588682,11.35954163],[110.14541497,11.35870461],[110.07246741,11.24270688],[110.07040803,11.24035153],[110.0677216,11.23874785],[110.06467109,11.23805281],[110.0615551,11.23833444],[110.05867865,11.23956519],[110.05632331,11.24162456],[110.05471962,11.24431099],[110.05402458,11.2473615],[110.05430621,11.25047749],[110.05553696,11.25335394],[110.12822847,11.36894451]]],[[[109.82951587,15.22896754],[109.77065019,15.44468789],[109.67264555,15.66561455],[109.57455994,15.82609887],[109.51574449,15.91095759],[109.29314007,16.19491896],[109.29161878,16.19765288],[109.29101677,16.20072311],[109.29139298,16.2038291],[109.29271057,16.20666681],[109.29484059,16.20895848],[109.29757451,16.21047978],[109.30064474,16.21108179],[109.30375073,16.21070558],[109.30658844,16.20938798],[109.30888011,16.20725797],[109.53166592,15.92306523],[109.53201478,15.92259221],[109.59116145,15.8372556],[109.59147511,15.83677407],[109.6900529,15.67548445],[109.69066131,15.67432448],[109.7892391,15.45210582],[109.78974541,15.45068337],[109.84889209,15.23393326],[109.84903675,15.23333003],[109.8648092,15.15722425],[109.86495704,15.15409906],[109.86413191,15.15108113],[109.86241457,15.1484659],[109.85997314,15.14650935],[109.85704658,15.145403],[109.85392139,15.14525516],[109.85090347,15.14608029],[109.84828823,15.14779763],[109.84633168,15.15023907],[109.84522534,15.15316562],[109.82951587,15.22896754]]]]}}]},xm=function(e){var t,n,r,i=mm(e),s=i.center,a=i.scale,o=i.translate,l=i.clipExtent,c=null;function h(){var s=af*a(),o=i(function(e){function t(t){return(t=e(t[0]*uf,t[1]*uf))[0]*=hf,t[1]*=hf,t}return e=Ff(e[0]*uf,e[1]*uf,e.length>2?e[2]*uf:0),t.invert=function(t){return(t=e.invert(t[0]*uf,t[1]*uf))[0]*=hf,t[1]*=hf,t},t}(i.rotate()).invert([0,0]));return l(null==c?[[o[0]-s,o[1]-s],[o[0]+s,o[1]+s]]:e===gm?[[Math.max(o[0]-s,c),t],[Math.min(o[0]+s,n),r]]:[[c,Math.max(o[1]-s,t)],[n,Math.min(o[1]+s,r)]])}return i.scale=function(e){return arguments.length?(a(e),h()):a()},i.translate=function(e){return arguments.length?(o(e),h()):o()},i.center=function(e){return arguments.length?(s(e),h()):s()},i.clipExtent=function(e){return arguments.length?(null==e?c=t=n=r=null:(c=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),h()):null==c?null:[[c,t],[n,r]]},h()}(gm).scale(961/cf).center([104,37.5]).scale(80).translate([0,0]);class ym{constructor(e){t(this,"DEPTH",2),this.long=null,this.container=e,this.width=e.offsetWidth,this.height=e.offsetHeight,this.group=null,this.provinceMouseOn=null}init(){this.scene=new Dh,this.scene.background=null,this.camera=new Wo(75,this.width/this.height,.1,5e3),this.camera.position.set(0,-20,70);const e=new yp(16777215,1);this.scene.add(e),this.renderer||(this.renderer=new Oh),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=2,this.renderer.outputEncoding=3001,this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.setClearColor(16777215,0),this.renderer.setSize(this.width,this.height),this.container.appendChild(this.renderer.domElement),this.renderer.render(this.scene,this.camera),this.setController(),this.setLight(),this.setRaycaster(),this.setPlayGround(),this.animate(),this.setTag(),this.loadMapData(),this.setResize()}setController(){this.controller=new tf(this.camera,this.renderer.domElement),this.controller.enableDamping=!0,this.controller.enabled=!0,this.controller.update()}setLight(){const e=new xp(882387,1);e.position.set(20,-50,20),e.castShadow=!0,e.shadow.mapSize.width=1024,e.shadow.mapSize.height=1024,this.scene.add(e);const t=new vp(16777215,1);t.position.set(20,-50,50),t.castShadow=!0,t.shadow.mapSize.width=1024,t.shadow.mapSize.height=1024,this.scene.add(t)}setRaycaster(){this.raycaster=new kp,this.mouse=new gs(1,2);this.container.addEventListener("mousemove",(e=>{this.mouse.x=e.offsetX/this.renderer.domElement.clientWidth*2-1,this.mouse.y=-e.offsetY/this.renderer.domElement.clientHeight*2+1,this.moveHandle&&this.moveHandle(this.mouse),this.raycaster.setFromCamera({x:this.mouse.x,y:this.mouse.y},this.camera);const t=this.raycaster.intersectObjects(this.map.children);t[0]&&(this.provinceMouseOn&&this.provinceMouseOn.scale.setZ(1),this.provinceMouseOn=t[0].object.parent,this.provinceMouseOn.scale.setZ(1.5))}),!1),this.container.addEventListener("click",(()=>{this.raycaster.setFromCamera({x:this.mouse.x,y:this.mouse.y},this.camera);const e=this.raycaster.intersectObjects(this.map.children);if(e[0]){const t=e[0].object.parent;this.clickHandle&&this.clickHandle(t.properties)}}),!1)}setPlayGround(){const e=new Td({color:7103588,metalness:0,roughness:1,opacity:.5,transparent:!0}),t=new No(new il(2e3,2e3,1,1),e);t.position.z=0,t.receiveShadow=!0,this.scene.add(t)}loadMapData(){this.map=new Va,_m.features.forEach(((e,t)=>{const n=new Va,r=e.geometry.coordinates,i="#FCFCFC";if(r.forEach((e=>{const r=new qu;e.forEach((e=>{for(let t=0;t<e.length;t++){let[n,i]=xm(e[t]);0===t&&r.moveTo(n,-i),r.lineTo(n,-i)}}));const s={depth:this.DEPTH,bevelEnabled:!0,bevelSegments:1,bevelThickness:.2},a=new wd(r,s),o=new Td({metalness:1,color:i}),l=new Td({metalness:1,roughness:.5,color:i}),c=new No(a,[o,l]);t%2==0&&c.scale.set(1,1,1.2),c.castShadow=!0,c.receiveShadow=!0,n.add(c)})),n.properties=e.properties,n.name=e.properties.name,e.properties.centorid){const[t,r]=xm(e.properties.centorid);n.properties._centroid=[t,r]}this.map.add(n)})),this.map.name="地图",this.scene.add(this.map)}setResize(){this.sizeObserver=new ResizeObserver((e=>{this.height=e[0].contentRect.height,this.width=e[0].contentRect.width,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height),this.renderer.render(this.scene,this.camera)})),this.sizeObserver.observe(this.container)}animate(){this.controller.update(),this.renderer.render(this.scene,this.camera),this.long=requestAnimationFrame(this.animate.bind(this))}setTag(e=[]){if(!e||0===e.length)return;this.scene.remove(this.group),this.group=new Va;((t=1)=>{const n=(new ip).load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABgCAYAAACkLtSSAAAAAXNSR0IArs4c6QAADidJREFUeF7tnA2QXFWVx3/n9TATM/I1GCBZIIARFxMSQbMCgYVJ9yzIR8RFp3TlwxmT6de1AoW6EV0WiwXUEgQMku7OxGhisQXjCgK7YXF6ZggLGDAoSYyAWZYkCKFgk4CSD5Lud7buS092JtPvq/v1TIraWzU1U/PO5//dd++55557Zf2CKYfs4t3TGdIsS0pTv7ypb+j/3it/r1sw+VQHZ8JQfxoOSvzh5MyGDeZ/svauYz+ujv56KIGI7Drl6lfe914BYagfa39wzMMKFw3zzbK+Mf2qTd91AVmz8LjDpaR/M6yHqJSmXr3pX9+LgKxbcOzZjjBpqG9KYvX0qza84ALyXnS6Fp/+H5D90BtVQLTAUVhMw+HDKCcAhyIcDCSAP7s/wh+BF7F4Xlr5r1redjW8dQVEFYt+zkX5W5TZwMkRjdwMDCAs5zAekI+zIyJ/ZPK6AKIrOYQ/8xWEL6EcE9mqSgzCOyg/o4Fv17PnxAqIrqORzdjAP6F8IBYg9hci7EHJM56bZBZvxK0jFkBUEfr5HMrNKCfGbWRFeeKOObcygdtlBtvj0lkzILqaZt5kKcqlcRkVUc7zNDAnrs+oJkC0l+OAB4GPRnQiXnJhGxafldnUvNyoGhDtZxYl7geODO2doCjPIjwNvIbwmvvbYTcWE1E3gjQ/H0FpBZoiyC4iXCtJfhiapwJhVYBoP+dR4iGgMZRyoQA8QIKHpNWNMwKbPsHBvMv5KJ8Cd9oOu7a6Rdq4PlCBB0FkQLSfD+OwEuWwEEpXYDFfkjwTgtaTRJ9gEru4EaWjHMT5ixMukxT3VKMzEiA6wGGUeBrlJF9lwkso10gb/16NUV48WuAjwJ0obQH6dyGcU82LCA2IKgn6eCSEMQWaaJez2RYnGIOy3Oi3wC3AdQHyN2MxU5K8GsWO8IAUuAHlRl/hFncxm2tFKEUxohpaLfAFYDHKOE9+4XFJcU4U+aEA0QGOpugutJp9hNc0mEUxel9vKZACt9c2+IDyaUnxi7DywwHSSxbckLxyEx4gyaViptVRbtrHl3G4y0ftC6SYFrbXBgJSnlV+5/kWhNVMYFac4XNUTLVAHqXL54WlJcWiMHKDAenl524cUKkJRZPfkNm8GEZZvWh0FQexjXXAhzx0bOZwpoRJH/gCon1MRnkZs3ir3HLSRqZejkaRqwU+46YHvJpFpyT5cZDMIED+EYebPYRsp4Ep0srrQUpG67n2shL4hEdvfkxS7nLAt/kDUsCMHVM9FHxHUnwzSMFoPtd+kpTcZcLIZgb8Rv5C/hqThfMZbjweladaP+bp0sba0XQ4SJebl+njNZSjPUAJDOk9e4j28nfgsR4Q/ltSfDDIwLF4rr3ubDLPA5AlkuJL1fWQPm7H4dqKzBZ3SJKvjIXDQTq1nwsoea6h1kob06sDpNcVeoEH0p+UFP8RZNxYPNf1NLHBzc5bI/QLu0jSLILjZZvfJ7MemOIByFRJ8fuxcDiMTu11E08TPXr38ZJkY3RACmxFObwiYwOHSytvhTFuLGi0wLMop3kA8jFJ8ptqADHp/pGLJmGnpBg/Fo6G1akFHkb32+EfZE5wrsxmRSRAdIAGiuzx+FxelVRMm09hPYxIpwV+gnJlRbYE58tsHo0EiCHWXt4GDqk0MEkqdH4zoivxkGsv/wZc6PG5z5RWVlUDyB88F0vjaKlXRiwOSLTAb1BO9ZA1WdrYVA0g/wmc5dHtzArXrC4PyKYFXkc5qqJxxzNOPsS71QDivexPcKHMZvmBiIY+xfvYzjsV4xB4W9r8dwv84pBbga95DKwLJMU1ByQg/cyh5O4mjmzCbyXlMR2Xqb0BKbibRI94CN4oKY4/IAEp8COUTg/bbpM2/sHPbm9AVjGebWz13E5s4FRp5bkDCZTyFoXJzwwru9xno8V5kuSXVQHiTr0F+sqVP5VkBKI92mCpf6/exXha5Ex2Vg9IH1/Hwa3fHNGEnSQ4Kexebb3BKedCVnmG7EKvpBhWflrZLR9L9XEm8i4ve342QmB+od5ADMr3zd8YIot2SfrkXIMG1X2K/FP8Dg3MkFZ+N1qOV9JTXvI/D25lY6W2nhR/6bfsH2QK3oYYYApFd5thZH5hr5TnOZjT5XT+NFagaMGtYLrCU79FlyTpDmNfICDu4NrLfUC7j8DlpLg4zBsIY1QUGu11p9Hv+fBs5nhO8ItOh/KGA6SPD6I8h/J+T8XC7ZLiq1GcqZVWC1yEukGYV+81xeuBieXIgLi9pI95OAHbgcISJpKRqeyu1dkgftce5W6Ug3xe0n2S4nNBsqoCxAWlwEMoFwcoeILxXFqPGlLXBlOn0s8dOFzla4fwKk2cEnVVHuqTGVSsT3IkO9wZpXIk+H8WvkKCr8lseqK8nSBa7eM01K0gOjsADFOFcJ6k6A2Suf/zSICUB1hTBBeu3kL4Ncp8aeOxqIYNpdcVnMBubkHc4uBgmy3ukiRXV6MzWHgFqeq/gBrJIfwK4X4aeFDOwWTzA5sWOIK9J58uQd3tkHAVj/ACzZwWFKJ7GVAdIKZkcierfQIhP4dNALUScfdY99aqVq5TPTNUxeHwEbFIgjP8UoRBb6IqQMqfjsmmmey195QXpD3u58INkuKmWsRWDUh51vkuytdrMSBG3qdJMSts6VSsn8y+WWfvcZBnUGbE6Fg1onbQyEfDjk9+CmrqIW4vGWAaRTetH74uvRqX/XgsMpIkF4fYmgEpfzpfRbktDoMiyxAekZTHpnxkYTEdUy2n7vohWpFsFfYOZxG20MgpQVVBUfTE0kPcXmIK9BzWVNzti2JRFFrhs5Ii1gPXsQFS/nSuRPlJFJ9qoP2ptPnkQKoUHCsg5fjEe4OrSiMrsJmtSFPjZvafY23xAzLAByix1rPwrVbz95aPJyXFQK2iKvHHDki5l5idd7MDH3+rcyKqLoCUx5McSjpWRIR1TOZjYdOB1eiuHyCradY3ZI2gsZzjVShKA6a2o667hXUDZPHixdMmNPz+0Ysm3THJktpPjTyzZc6e3751weW2bZuEd91aXQDJ5XJnAI+q6sFnTbj3j9MOXVHT+f+39hy5+d6N35poFtaWZV2bTqfvrBcisQPS3d19TKlUWqWqR4nIPWec8GR6euKnj3tuMQZ5Zi5BgBmLXsp/0nGcBYbcsqw56XQ61gOOg2bECsjy5cubNm7c+CvgVBH5ZUtLywXt7e0lXcHJ7HHLnLzPx3kBYzFPkiw2j/P5/HWO43wH+FMikZjZ1dVlyr5ibbECks1mTSn47SKyvqmp6a86Ojr21bJqgWvcBHGUJjwsKeYMZcnlcv+iqp8XkeW2bVcurIuiYz/a2ADJ5/OHOo7zEnBEIpE4v6ura1jpo7s7X3Cz4MmQ9r7JeKbtv52xdOnSI3bu3PmSqh4KtGYymZoS2PvbEhsguVzuelW9SUT6bNs2pyVHNB3gmHIUG3wqXPA8TZnL5b6hqt8Wkcds2w48FBTyBbhkcQLynKrOsCzrvHQ67VmlE1i2sNf6H0ubZ1kUy5Yta96+ffubJinV3Nw88YorrojtYpVYAOnu7j6qWCy+LiJvi8iEdDpduQq6/Kp8N8+FDYxjupzlXpji2XK53EOqerGIzLVt+0dReoEfbSyA5HK581XVFOjdm8lkPh9knD5FC9vd01jDLlgDHIRzJYWpkfVt+Xx+ruM4psQhlM4geYPPYwEkm81eDiwTkW/Ztv3PYZSXr9wYfuZG+J6kwmXxFy1adGapVHoSeCqTycwKozMMTSyA5HK5a1T1Tsuy5qXTaTdmCNO0wA9R/r48mq1hIjPDVg5ks1lTFvqyiGywbdurciiMGcNo4gLkBlW9UUQusW27ctFsBdPUlH6+5QZsxrmZUQ419vT0vH/Lli1mnHknk8mYy+FiabEAMiQg67RtO/Cw8FDLtcBMhFmSjBa05fP54xzH2Sgim2zbnhwLGnFNuwsXLrxSREwu9fpMJmPu9qh7y+fzn3AcZ6WIPG3b9rD7YGtRHksPyefzFzqOYzJkSzOZzBdrMSgs76JFiy4vlUrLgJ9nMpnPhOULoosFkLvvvvtYy7JM4vdN27aPFhHPU49BBoV9nsvl7lNVUwh4VSaTqelmqqE6YwHECMzlci+q6kmWZZ2dTqefCOtYNXQ9PT2NW7du/R+Tb2lqajqus7PzlWrkVOKJDZBsNmuW5deJyP22bdf11rt8Pp9xHGehiKyybXtmXGAYObEBYsL3UqlkVqHNDQ0NZ8ybN8/c1BB7M+uYHTt2GD0mARVpmg9jTGyAlD+bG1X1BuDZcePGndXR0bErjBFRaLLZ7A+Aq0XkSdu2Kx+BiyJwP9pYASkHS6bU6kSTPrRt+7IabBvBmsvlOlR1iYiYOthZtm17nq6sVm+sgJR7ibl8baUZ8ETktnQ6PV+k9rR7Pp+/RFXNzGKK7zoymUxd9pBjB8SAUo5LTOlmg4g82NLScll7e7tJFlfV8vn8N1X1ZlUVEbnVtu35VQkKwVQXQIzebDZ7LrilCqa80oTY16fT6Xui9Jbu7u7Ti8WiKew3hbqOZVnz0+n090P4VTVJ3QAxFi1ZsuTE3bt3/0xVBy8mWGNZ1rJEIvHg3LlzK97IvXjx4pZisWjqU9tVdTCJ/EYikfhiV1dX5UORVbs/krGugBh1ppvn8/kvmC4PDF2EmV5jAipztYUZJCeq6iQROUlVzbXmiIi5Wvj7LS0tt9byyUXBq+6ADBpj9mw2bdp0oapeIiLmd0slQ8szSL+q/qKpqen+zs5OkzsdtTZqgAz1qKenJ7Ft27YjRaTFcZwjVLUhkUhsVdWtjY2Nb9QjfgmL6JgAEta4saD7X49xnZ2JnmwaAAAAAElFTkSuQmCC");e.forEach((e=>{const r=new Fh({map:n,color:16777215}),{value:i}=e,s=new Qh(r);if(i&&0!==i.length){let[e,t]=xm(i);s.position.set(e,2-t,this.DEPTH+2)}s._data=e,s.scale.set(2*t,3*t,8*t),this.group.add(s)})),n.dispose()})(2),this.scene.add(this.group)}bindClickCallback(e){this.clickHandle=e}bindMoveCallback(e){this.moveHandle=e}destory(){this.renderer&&(this.renderer.forceContextLoss(),this.renderer.dispose(),this.renderer.domElement=null,this.renderer=null,window.cancelAnimationFrame(this.long),this.sizeObserver.disconnect(this.container))}}const bm={class:"info"},wm=Wi({__name:"index",setup(e){let t;const n=ft(),r=ft(null);function i(e){n.value=e}function s(){t.setTag([{value:[103,25],name:"foo"},{value:[83,32],name:"bar"},{value:[112,33],name:"baz"}])}return Cn((()=>{t=new ym(r.value),t.init(),t.bindClickCallback(i)})),On((()=>{t.destory()})),(e,t)=>(Or(),Ir("div",{class:"container",ref_key:"container",ref:r},[jr("div",bm,h(n.value),1),jr("div",{class:"btn",onClick:s},"setTag")],512))}},[["__scopeId","data-v-5cf4a7ab"]]),Sm=Object.freeze(Object.defineProperty({__proto__:null,default:wm},Symbol.toStringTag,{value:"Module"}));class Mm extends Qd{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new tp(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(e){const n=i.parse(JSON.parse(e));t&&t(n)}),n,r)}parse(e){return new Em(e)}}class Em{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100){const n=[],r=function(e,t,n){const r=Array.from(e),i=t/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[];let o=0,l=0;for(let c=0;c<r.length;c++){const e=r[c];if("\n"===e)o=0,l-=s;else{const t=Tm(e,i,o,l,n);o+=t.offsetX,a.push(t.path)}}return a}(e,t,this.data);for(let i=0,s=r.length;i<s;i++)n.push(...r[i].toShapes());return n}}function Tm(e,t,n,r,i){const s=i.glyphs[e]||i.glyphs["?"];if(!s)return;const a=new Kp;let o,l,c,h,u,d,p,f;if(s.o){const e=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let i=0,s=e.length;i<s;){switch(e[i++]){case"m":o=e[i++]*t+n,l=e[i++]*t+r,a.moveTo(o,l);break;case"l":o=e[i++]*t+n,l=e[i++]*t+r,a.lineTo(o,l);break;case"q":c=e[i++]*t+n,h=e[i++]*t+r,u=e[i++]*t+n,d=e[i++]*t+r,a.quadraticCurveTo(u,d,c,h);break;case"b":c=e[i++]*t+n,h=e[i++]*t+r,u=e[i++]*t+n,d=e[i++]*t+r,p=e[i++]*t+n,f=e[i++]*t+r,a.bezierCurveTo(u,d,p,f,c,h)}}}return{offsetX:s.ha*t,path:a}}class Am extends wd{constructor(e,t={}){const n=t.font;if(void 0===n)super();else{const r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(r,t)}this.type="TextGeometry"}}function Cm(e,t){var n=e.__state.conversionName.toString(),r=Math.round(e.r),i=Math.round(e.g),s=Math.round(e.b),a=e.a,o=Math.round(e.h),l=e.s.toFixed(1),c=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var h=e.hex.toString(16);h.length<6;)h="0"+h;return"#"+h}return"CSS_RGB"===n?"rgb("+r+","+i+","+s+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+s+","+a+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+s+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+s+","+a+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+s+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+s+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+o+",s:"+l+",v:"+c+"}":"HSVA_OBJ"===n?"{h:"+o+",s:"+l+",v:"+c+",a:"+a+"}":"unknown format"}var Pm=Array.prototype.forEach,Rm=Array.prototype.slice,Lm={BREAK:{},extend:function(e){return this.each(Rm.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))}),this),e},defaults:function(e){return this.each(Rm.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))}),this),e},compose:function(){var e=Rm.call(arguments);return function(){for(var t=Rm.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(Pm&&e.forEach&&e.forEach===Pm)e.forEach(t,n);else if(e.length===e.length+0){var r,i=void 0;for(i=0,r=e.length;i<r;i++)if(i in e&&t.call(n,e[i],i)===this.BREAK)return}else for(var s in e)if(t.call(n,e[s],s)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r=void 0;return function(){var i=this,s=arguments;function a(){r=null,n||e.apply(i,s)}var o=n||!r;clearTimeout(r),r=setTimeout(a,t),o&&e.apply(i,s)}},toArray:function(e){return e.toArray?e.toArray():Rm.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return isNaN(e)})),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return e instanceof Function}},Om=[{litmus:Lm.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:Cm},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:Cm},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:Cm},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:Cm}}},{litmus:Lm.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:Lm.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:Lm.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(Lm.isNumber(e.r)&&Lm.isNumber(e.g)&&Lm.isNumber(e.b)&&Lm.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(Lm.isNumber(e.r)&&Lm.isNumber(e.g)&&Lm.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(Lm.isNumber(e.h)&&Lm.isNumber(e.s)&&Lm.isNumber(e.v)&&Lm.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(Lm.isNumber(e.h)&&Lm.isNumber(e.s)&&Lm.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],zm=void 0,Dm=void 0,km=function(){Dm=!1;var e=arguments.length>1?Lm.toArray(arguments):arguments[0];return Lm.each(Om,(function(t){if(t.litmus(e))return Lm.each(t.conversions,(function(t,n){if(zm=t.read(e),!1===Dm&&!1!==zm)return Dm=zm,zm.conversionName=n,zm.conversion=t,Lm.BREAK})),Lm.BREAK})),Dm},Im=void 0,Nm={hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),s=n*(1-t),a=n*(1-i*t),o=n*(1-(1-i)*t),l=[[n,o,s],[a,n,s],[s,n,o],[s,a,n],[o,s,n],[n,s,a]][r];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var r=Math.min(e,t,n),i=Math.max(e,t,n),s=i-r,a=void 0;return 0===i?{h:NaN,s:0,v:0}:(a=e===i?(t-n)/s:t===i?2+(n-e)/s:4+(e-t)/s,(a/=6)<0&&(a+=1),{h:360*a,s:s/i,v:i/255})},rgb_to_hex:function(e,t,n){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(Im=8*t)|e&~(255<<Im)}},Fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Um=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Bm=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Hm=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},Gm=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},jm=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Vm=function(){function e(){if(Um(this,e),this.__state=km.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return Bm(e,[{key:"toString",value:function(){return Cm(this)}},{key:"toHexString",value:function(){return Cm(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function Wm(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space||Vm.recalculateRGB(this,t,n),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(Vm.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function Xm(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space||Vm.recalculateHSV(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(Vm.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}Vm.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=Nm.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");Lm.extend(e.__state,Nm.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},Vm.recalculateHSV=function(e){var t=Nm.rgb_to_hsv(e.r,e.g,e.b);Lm.extend(e.__state,{s:t.s,v:t.v}),Lm.isNaN(t.h)?Lm.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},Vm.COMPONENTS=["r","g","b","h","s","v","hex","a"],Wm(Vm.prototype,"r",2),Wm(Vm.prototype,"g",1),Wm(Vm.prototype,"b",0),Xm(Vm.prototype,"h"),Xm(Vm.prototype,"s"),Xm(Vm.prototype,"v"),Object.defineProperty(Vm.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(Vm.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=Nm.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var qm=function(){function e(t,n){Um(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return Bm(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),Ym={};Lm.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(e,t){Lm.each(e,(function(e){Ym[e]=t}))}));var Zm=/(\d+(\.\d+)?)px/;function Km(e){if("0"===e||Lm.isUndefined(e))return 0;var t=e.match(Zm);return Lm.isNull(t)?0:parseFloat(t[1])}var Jm={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var r=n,i=t;Lm.isUndefined(i)&&(i=!0),Lm.isUndefined(r)&&(r=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,r){var i=n||{},s=Ym[t];if(!s)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(s);switch(s){case"MouseEvents":var o=i.x||i.clientX||0,l=i.y||i.clientY||0;a.initMouseEvent(t,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,o,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=a.initKeyboardEvent||a.initKeyEvent;Lm.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(t,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(t,i.bubbles||!1,i.cancelable||!0)}Lm.defaults(a,r),e.dispatchEvent(a)},bind:function(e,t,n,r){var i=r||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n),Jm},unbind:function(e,t,n,r){var i=r||!1;return e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n),Jm},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return Jm},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),r=n.indexOf(t);-1!==r&&(n.splice(r,1),e.className=n.join(" "))}else e.className=void 0;return Jm},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return Km(t["border-left-width"])+Km(t["border-right-width"])+Km(t["padding-left"])+Km(t["padding-right"])+Km(t.width)},getHeight:function(e){var t=getComputedStyle(e);return Km(t["border-top-width"])+Km(t["border-bottom-width"])+Km(t["padding-top"])+Km(t["padding-bottom"])+Km(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},Qm=function(e){function t(e,n){Um(this,t);var r=jm(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),Jm.bind(r.__checkbox,"change",(function(){i.setValue(!i.__prev)}),!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return Gm(t,qm),Bm(t,[{key:"setValue",value:function(e){var n=Hm(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),Hm(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(),$m=function(e){function t(e,n,r){Um(this,t);var i=jm(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=r,a=i;if(i.__select=document.createElement("select"),Lm.isArray(s)){var o={};Lm.each(s,(function(e){o[e]=e})),s=o}return Lm.each(s,(function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)})),i.updateDisplay(),Jm.bind(i.__select,"change",(function(){var e=this.options[this.selectedIndex].value;a.setValue(e)})),i.domElement.appendChild(i.__select),i}return Gm(t,qm),Bm(t,[{key:"setValue",value:function(e){var n=Hm(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return Jm.isActive(this.__select)?this:(this.__select.value=this.getValue(),Hm(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(),eg=function(e){function t(e,n){Um(this,t);var r=jm(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r;function s(){i.setValue(i.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),Jm.bind(r.__input,"keyup",s),Jm.bind(r.__input,"change",s),Jm.bind(r.__input,"blur",(function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())})),Jm.bind(r.__input,"keydown",(function(e){13===e.keyCode&&this.blur()})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return Gm(t,qm),Bm(t,[{key:"updateDisplay",value:function(){return Jm.isActive(this.__input)||(this.__input.value=this.getValue()),Hm(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}();function tg(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var ng=function(e){function t(e,n,r){Um(this,t);var i=jm(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=r||{};return i.__min=s.min,i.__max=s.max,i.__step=s.step,Lm.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=tg(i.__impliedStep),i}return Gm(t,qm),Bm(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),Hm(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=tg(e),this}}]),t}();var rg=function(e){function t(e,n,r){Um(this,t);var i=jm(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));i.__truncationSuspended=!1;var s=i,a=void 0;function o(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function l(e){var t=a-e.clientY;s.setValue(s.getValue()+t*s.__impliedStep),a=e.clientY}function c(){Jm.unbind(window,"mousemove",l),Jm.unbind(window,"mouseup",c),o()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),Jm.bind(i.__input,"change",(function(){var e=parseFloat(s.__input.value);Lm.isNaN(e)||s.setValue(e)})),Jm.bind(i.__input,"blur",(function(){o()})),Jm.bind(i.__input,"mousedown",(function(e){Jm.bind(window,"mousemove",l),Jm.bind(window,"mouseup",c),a=e.clientY})),Jm.bind(i.__input,"keydown",(function(e){13===e.keyCode&&(s.__truncationSuspended=!0,this.blur(),s.__truncationSuspended=!1,o())})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return Gm(t,ng),Bm(t,[{key:"updateDisplay",value:function(){var e,n,r;return this.__input.value=this.__truncationSuspended?this.getValue():(e=this.getValue(),n=this.__precision,r=Math.pow(10,n),Math.round(e*r)/r),Hm(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}();function ig(e,t,n,r,i){return r+(e-t)/(n-t)*(i-r)}var sg=function(e){function t(e,n,r,i,s){Um(this,t);var a=jm(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:r,max:i,step:s})),o=a;function l(e){e.preventDefault();var t=o.__background.getBoundingClientRect();return o.setValue(ig(e.clientX,t.left,t.right,o.__min,o.__max)),!1}function c(){Jm.unbind(window,"mousemove",l),Jm.unbind(window,"mouseup",c),o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function h(e){var t=e.touches[0].clientX,n=o.__background.getBoundingClientRect();o.setValue(ig(t,n.left,n.right,o.__min,o.__max))}function u(){Jm.unbind(window,"touchmove",h),Jm.unbind(window,"touchend",u),o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),Jm.bind(a.__background,"mousedown",(function(e){document.activeElement.blur(),Jm.bind(window,"mousemove",l),Jm.bind(window,"mouseup",c),l(e)})),Jm.bind(a.__background,"touchstart",(function(e){if(1!==e.touches.length)return;Jm.bind(window,"touchmove",h),Jm.bind(window,"touchend",u),h(e)})),Jm.addClass(a.__background,"slider"),Jm.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return Gm(t,ng),Bm(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",Hm(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(),ag=function(e){function t(e,n,r){Um(this,t);var i=jm(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===r?"Fire":r,Jm.bind(i.__button,"click",(function(e){return e.preventDefault(),s.fire(),!1})),Jm.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return Gm(t,qm),Bm(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(),og=function(e){function t(e,n){Um(this,t);var r=jm(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.__color=new Vm(r.getValue()),r.__temp=new Vm(0);var i=r;r.domElement=document.createElement("div"),Jm.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",Jm.bind(r.__input,"keydown",(function(e){13===e.keyCode&&u.call(this)})),Jm.bind(r.__input,"blur",u),Jm.bind(r.__selector,"mousedown",(function(){Jm.addClass(this,"drag").bind(window,"mouseup",(function(){Jm.removeClass(i.__selector,"drag")}))})),Jm.bind(r.__selector,"touchstart",(function(){Jm.addClass(this,"drag").bind(window,"touchend",(function(){Jm.removeClass(i.__selector,"drag")}))}));var s,a=document.createElement("div");function o(e){p(e),Jm.bind(window,"mousemove",p),Jm.bind(window,"touchmove",p),Jm.bind(window,"mouseup",c),Jm.bind(window,"touchend",c)}function l(e){f(e),Jm.bind(window,"mousemove",f),Jm.bind(window,"touchmove",f),Jm.bind(window,"mouseup",h),Jm.bind(window,"touchend",h)}function c(){Jm.unbind(window,"mousemove",p),Jm.unbind(window,"touchmove",p),Jm.unbind(window,"mouseup",c),Jm.unbind(window,"touchend",c),d()}function h(){Jm.unbind(window,"mousemove",f),Jm.unbind(window,"touchmove",f),Jm.unbind(window,"mouseup",h),Jm.unbind(window,"touchend",h),d()}function u(){var e=km(this.value);!1!==e?(i.__color.__state=e,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function d(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function p(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,r=n.clientX,s=n.clientY,a=(r-t.left)/(t.right-t.left),o=1-(s-t.top)/(t.bottom-t.top);return o>1?o=1:o<0&&(o=0),a>1?a=1:a<0&&(a=0),i.__color.v=o,i.__color.s=a,i.setValue(i.__color.toOriginal()),!1}function f(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),i.__color.h=360*n,i.setValue(i.__color.toOriginal()),!1}return Lm.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),Lm.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),Lm.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),Lm.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),Lm.extend(a.style,{width:"100%",height:"100%",background:"none"}),cg(a,"top","rgba(0,0,0,0)","#000"),Lm.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(s=r.__hue_field).style.background="",s.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",s.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",Lm.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),Jm.bind(r.__saturation_field,"mousedown",o),Jm.bind(r.__saturation_field,"touchstart",o),Jm.bind(r.__field_knob,"mousedown",o),Jm.bind(r.__field_knob,"touchstart",o),Jm.bind(r.__hue_field,"mousedown",l),Jm.bind(r.__hue_field,"touchstart",l),r.__saturation_field.appendChild(a),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return Gm(t,qm),Bm(t,[{key:"updateDisplay",value:function(){var e=km(this.getValue());if(!1!==e){var t=!1;Lm.each(Vm.COMPONENTS,(function(n){if(!Lm.isUndefined(e[n])&&!Lm.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}}),this),t&&Lm.extend(this.__color.__state,e)}Lm.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;Lm.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,cg(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),Lm.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),t}(),lg=["-moz-","-o-","-webkit-","-ms-",""];function cg(e,t,n,r){e.style.background="",Lm.each(lg,(function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+r+" 100%); "}))}var hg=function(e,t){var n=t||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(s){}},ug='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',dg=function(e,t){var n=e[t];return Lm.isArray(arguments[2])||Lm.isObject(arguments[2])?new $m(e,t,arguments[2]):Lm.isNumber(n)?Lm.isNumber(arguments[2])&&Lm.isNumber(arguments[3])?Lm.isNumber(arguments[4])?new sg(e,t,arguments[2],arguments[3],arguments[4]):new sg(e,t,arguments[2],arguments[3]):Lm.isNumber(arguments[4])?new rg(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new rg(e,t,{min:arguments[2],max:arguments[3]}):Lm.isString(n)?new eg(e,t):Lm.isFunction(n)?new ag(e,t,""):Lm.isBoolean(n)?new Qm(e,t):null};var pg=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},fg=function(){function e(){Um(this,e),this.backgroundElement=document.createElement("div"),Lm.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),Jm.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),Lm.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;Jm.bind(this.backgroundElement,"click",(function(){t.hide()}))}return Bm(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),Lm.defer((function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",Jm.unbind(e.domElement,"webkitTransitionEnd",t),Jm.unbind(e.domElement,"transitionend",t),Jm.unbind(e.domElement,"oTransitionEnd",t)};Jm.bind(this.domElement,"webkitTransitionEnd",t),Jm.bind(this.domElement,"transitionend",t),Jm.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-Jm.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-Jm.getHeight(this.domElement)/2+"px"}}]),e}();hg(function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var mg=function(){try{return!!window.localStorage}catch(e){return!1}}(),gg=void 0,vg=!0,_g=void 0,xg=!1,yg=[],bg=function e(t){var n=this,r=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),Jm.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=Lm.defaults(r,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),r=Lm.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),Lm.isUndefined(r.load)?r.load={preset:"Default"}:r.preset&&(r.load.preset=r.preset),Lm.isUndefined(r.parent)&&r.hideable&&yg.push(this),r.resizable=Lm.isUndefined(r.parent)&&r.resizable,r.autoPlace&&Lm.isUndefined(r.scrollable)&&(r.scrollable=!0);var i,s=mg&&"true"===localStorage.getItem(Ag(this,"isLocal")),a=void 0,o=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(e){n.parent?n.getRoot().preset=e:r.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),n.revert()}},width:{get:function(){return r.width},set:function(e){r.width=e,Lg(n,e)}},name:{get:function(){return r.name},set:function(e){r.name=e,o&&(o.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(t){r.closed=t,r.closed?Jm.addClass(n.__ul,e.CLASS_CLOSED):Jm.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return s},set:function(e){mg&&(s=e,e?Jm.bind(window,"unload",a):Jm.unbind(window,"unload",a),localStorage.setItem(Ag(n,"isLocal"),e))}}}),Lm.isUndefined(r.parent)){if(this.closed=r.closed||!1,Jm.addClass(this.domElement,e.CLASS_MAIN),Jm.makeSelectable(this.domElement,!1),mg&&s){n.useLocalStorage=!0;var l=localStorage.getItem(Ag(this,"gui"));l&&(r.load=JSON.parse(l))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,Jm.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),r.closeOnTop?(Jm.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(Jm.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),Jm.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===r.closed&&(r.closed=!0);var c=document.createTextNode(r.name);Jm.addClass(c,"controller-name"),o=wg(n,c);Jm.addClass(this.__ul,e.CLASS_CLOSED),Jm.addClass(o,"title"),Jm.bind(o,"click",(function(e){return e.preventDefault(),n.closed=!n.closed,!1})),r.closed||(this.closed=!1)}r.autoPlace&&(Lm.isUndefined(r.parent)&&(vg&&(_g=document.createElement("div"),Jm.addClass(_g,"dg"),Jm.addClass(_g,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(_g),vg=!1),_g.appendChild(this.domElement),Jm.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||Lg(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},Jm.bind(window,"resize",this.__resizeHandler),Jm.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),Jm.bind(this.__ul,"transitionend",this.__resizeHandler),Jm.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&function(e){var t=void 0;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function r(){Jm.removeClass(e.__closeButton,bg.CLASS_DRAG),Jm.unbind(window,"mousemove",n),Jm.unbind(window,"mouseup",r)}function i(i){return i.preventDefault(),t=i.clientX,Jm.addClass(e.__closeButton,bg.CLASS_DRAG),Jm.bind(window,"mousemove",n),Jm.bind(window,"mouseup",r),!1}e.__resize_handle=document.createElement("div"),Lm.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),Jm.bind(e.__resize_handle,"mousedown",i),Jm.bind(e.__closeButton,"mousedown",i),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}(this),a=function(){mg&&"true"===localStorage.getItem(Ag(n,"isLocal"))&&localStorage.setItem(Ag(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=a,r.parent||((i=n.getRoot()).width+=1,Lm.defer((function(){i.width-=1})))};function wg(e,t,n){var r=document.createElement("li");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,n):e.__ul.appendChild(r),e.onResize(),r}function Sg(e){Jm.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&Jm.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function Mg(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function Eg(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[t.property]=t,n.load&&n.load.remembered){var s=n.load.remembered,a=void 0;if(s[e.preset])a=s[e.preset];else{if(!s.Default)return;a=s.Default}if(a[r]&&void 0!==a[r][t.property]){var o=a[r][t.property];t.initialValue=o,t.setValue(o)}}}}function Tg(e,t,n,r){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new og(t,n);else{var s=[t,n].concat(r.factoryArgs);i=dg.apply(e,s)}r.before instanceof qm&&(r.before=r.before.__li),Eg(e,i),Jm.addClass(i.domElement,"c");var a=document.createElement("span");Jm.addClass(a,"property-name"),a.innerHTML=i.property;var o=document.createElement("div");o.appendChild(a),o.appendChild(i.domElement);var l=wg(e,o,r.before);return Jm.addClass(l,bg.CLASS_CONTROLLER_ROW),i instanceof og?Jm.addClass(l,"color"):Jm.addClass(l,Fm(i.getValue())),function(e,t,n){if(n.__li=t,n.__gui=e,Lm.extend(n,{options:function(t){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),Tg(e,n.object,n.property,{before:r,factoryArgs:[Lm.toArray(arguments)]})}if(Lm.isArray(t)||Lm.isObject(t)){var i=n.__li.nextElementSibling;return n.remove(),Tg(e,n.object,n.property,{before:i,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof sg){var r=new rg(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});Lm.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(e){var t=n[e],i=r[e];n[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return i.apply(r,e),t.apply(n,e)}})),Jm.addClass(t,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof rg){var i=function(t){if(Lm.isNumber(n.__min)&&Lm.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var s=Tg(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return s.name(r),i&&s.listen(),s}return t};n.min=Lm.compose(i,n.min),n.max=Lm.compose(i,n.max)}else n instanceof Qm?(Jm.bind(t,"click",(function(){Jm.fakeEvent(n.__checkbox,"click")})),Jm.bind(n.__checkbox,"click",(function(e){e.stopPropagation()}))):n instanceof ag?(Jm.bind(t,"click",(function(){Jm.fakeEvent(n.__button,"click")})),Jm.bind(t,"mouseover",(function(){Jm.addClass(n.__button,"hover")})),Jm.bind(t,"mouseout",(function(){Jm.removeClass(n.__button,"hover")}))):n instanceof og&&(Jm.addClass(t,"color"),n.updateDisplay=Lm.compose((function(e){return t.style.borderLeftColor=n.__color.toString(),e}),n.updateDisplay),n.updateDisplay());n.setValue=Lm.compose((function(t){return e.getRoot().__preset_select&&n.isModified()&&Mg(e.getRoot(),!0),t}),n.setValue)}(e,l,i),e.__controllers.push(i),i}function Ag(e,t){return document.location.href+"."+t}function Cg(e,t,n){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function Pg(e,t){t.style.display=e.useLocalStorage?"block":"none"}function Rg(e){var t=e.__save_row=document.createElement("li");Jm.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),Jm.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",Jm.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",Jm.addClass(r,"button"),Jm.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",Jm.addClass(i,"button"),Jm.addClass(i,"save-as");var s=document.createElement("span");s.innerHTML="Revert",Jm.addClass(s,"button"),Jm.addClass(s,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?Lm.each(e.load.remembered,(function(t,n){Cg(e,n,n===e.preset)})):Cg(e,"Default",!1),Jm.bind(a,"change",(function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value})),t.appendChild(a),t.appendChild(n),t.appendChild(r),t.appendChild(i),t.appendChild(s),mg){var o=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(Ag(0,"isLocal"))&&l.setAttribute("checked","checked"),Pg(e,o),Jm.bind(l,"change",(function(){e.useLocalStorage=!e.useLocalStorage,Pg(e,o)}))}var c=document.getElementById("dg-new-constructor");Jm.bind(c,"keydown",(function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||gg.hide()})),Jm.bind(n,"click",(function(){c.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),gg.show(),c.focus(),c.select()})),Jm.bind(r,"click",(function(){e.save()})),Jm.bind(i,"click",(function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)})),Jm.bind(s,"click",(function(){e.revert()}))}function Lg(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function Og(e,t){var n={};return Lm.each(e.__rememberedObjects,(function(r,i){var s={},a=e.__rememberedObjectIndecesToControllers[i];Lm.each(a,(function(e,n){s[n]=t?e.initialValue:e.getValue()})),n[i]=s})),n}function zg(e){0!==e.length&&pg.call(window,(function(){zg(e)})),Lm.each(e,(function(e){e.updateDisplay()}))}bg.toggleHide=function(){xg=!xg,Lm.each(yg,(function(e){e.domElement.style.display=xg?"none":""}))},bg.CLASS_AUTO_PLACE="a",bg.CLASS_AUTO_PLACE_CONTAINER="ac",bg.CLASS_MAIN="main",bg.CLASS_CONTROLLER_ROW="cr",bg.CLASS_TOO_TALL="taller-than-window",bg.CLASS_CLOSED="closed",bg.CLASS_CLOSE_BUTTON="close-button",bg.CLASS_CLOSE_TOP="close-top",bg.CLASS_CLOSE_BOTTOM="close-bottom",bg.CLASS_DRAG="drag",bg.DEFAULT_WIDTH=245,bg.TEXT_CLOSED="Close Controls",bg.TEXT_OPEN="Open Controls",bg._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||bg.toggleHide()},Jm.bind(window,"keydown",bg._keydownHandler,!1),Lm.extend(bg.prototype,{add:function(e,t){return Tg(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return Tg(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;Lm.defer((function(){t.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&_g.removeChild(this.domElement);var e=this;Lm.each(this.__folders,(function(t){e.removeFolder(t)})),Jm.unbind(window,"keydown",bg._keydownHandler,!1),Sg(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new bg(t);this.__folders[e]=n;var r=wg(this,n.domElement);return Jm.addClass(r,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],Sg(e);var t=this;Lm.each(e.__folders,(function(t){e.removeFolder(t)})),Lm.defer((function(){t.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=Jm.getOffset(e.__ul).top,n=0;Lm.each(e.__ul.childNodes,(function(t){e.autoPlace&&t===e.__save_row||(n+=Jm.getHeight(t))})),window.innerHeight-t-20<n?(Jm.addClass(e.domElement,bg.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(Jm.removeClass(e.domElement,bg.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&Lm.defer((function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"})),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:Lm.debounce((function(){this.onResize()}),50),remember:function(){if(Lm.isUndefined(gg)&&((gg=new fg).domElement.innerHTML=ug),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;Lm.each(Array.prototype.slice.call(arguments),(function(t){0===e.__rememberedObjects.length&&Rg(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)})),this.autoPlace&&Lg(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=Og(this)),e.folders={},Lm.each(this.__folders,(function(t,n){e.folders[n]=t.getSaveObject()})),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=Og(this),Mg(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=Og(this,!0)),this.load.remembered[e]=Og(this),this.preset=e,Cg(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){Lm.each(this.__controllers,(function(t){this.getRoot().load.remembered?Eg(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())}),this),Lm.each(this.__folders,(function(e){e.revert(e)})),e||Mg(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&zg(this.__listening)},updateDisplay:function(){Lm.each(this.__controllers,(function(e){e.updateDisplay()})),Lm.each(this.__folders,(function(e){e.updateDisplay()}))}});var Dg={color:{Color:Vm,math:Nm,interpret:km},controllers:{Controller:qm,BooleanController:Qm,OptionController:$m,StringController:eg,NumberController:ng,NumberControllerBox:rg,NumberControllerSlider:sg,FunctionController:ag,ColorController:og},dom:{dom:Jm},gui:{GUI:bg},GUI:bg},kg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ig(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ng,Fg={exports:{}};const Ug=Fg.exports=(Ng=function(){function e(e){return r.appendChild(e.dom),e}function t(e){for(var t=0;t<r.children.length;t++)r.children[t].style.display=t===e?"block":"none";n=e}var n=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",(function(e){e.preventDefault(),t(++n%r.children.length)}),!1);var i=(performance||Date).now(),s=i,a=0,o=e(new Ng.Panel("FPS","#0ff","#002")),l=e(new Ng.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=e(new Ng.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:r,addPanel:e,showPanel:t,begin:function(){i=(performance||Date).now()},end:function(){a++;var e=(performance||Date).now();if(l.update(e-i,200),e>s+1e3&&(o.update(1e3*a/(e-s),100),s=e,a=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){i=this.end()},domElement:r,setMode:t}},Ng.Panel=function(e,t,n){var r=1/0,i=0,s=Math.round,a=s(window.devicePixelRatio||1),o=80*a,l=48*a,c=3*a,h=2*a,u=3*a,d=15*a,p=74*a,f=30*a,m=document.createElement("canvas");m.width=o,m.height=l,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*a+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,o,l),g.fillStyle=t,g.fillText(e,c,h),g.fillRect(u,d,p,f),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(u,d,p,f),{dom:m,update:function(l,v){r=Math.min(r,l),i=Math.max(i,l),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,o,d),g.fillStyle=t,g.fillText(s(l)+" "+e+" ("+s(r)+"-"+s(i)+")",c,h),g.drawImage(m,u+a,d,p-a,f,u,d,p-a,f),g.fillRect(u+p-a,d,a,f),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(u+p-a,d,a,s((1-l/v)*f))}}},Ng);class Bg{constructor(e){this.long=null,this.container=e,this.width=e.offsetWidth,this.height=e.offsetHeight,this.sizeObserver=null,this.scene=null,this.camera=null,this.renderer=null,this.clock=null,this.gui=null,this.textMaterial=null,this.textGeometry=null,this.textMesh=null,this.textString="Cccatmint",this.textSize=2,this.textHeight=.1,this.bevelEnabled=!0,this.bevelThickness=.03,this.bevelSize=.01,this.bevelSegments=5,this.castShadow=!0,this.textColor=11286584,this.isWireframe=!1,this.init()}init(){this.scene=new Dh,this.scene.background=new Rs(0),this.camera=new Wo(75,this.width/this.height,.1,5e3),this.camera.lookAt(0,0,10),this.camera.position.set(-1,1,5),this.renderer||(this.renderer=new Oh),this.renderer.outputEncoding=3001,this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=1,this.renderer.setClearColor(16777215,0),this.renderer.setSize(this.width,this.height),this.container.appendChild(this.renderer.domElement),this.renderer.render(this.scene,this.camera),this.clock=new Sp,this.planeMaterial=new Td({color:13421772,side:2}),this.planeGeometry=new il(10,10,1,1),this.plane=new No(this.planeGeometry,this.planeMaterial),this.plane.rotation.x=-Math.PI/2,this.plane.receiveShadow=!0,this.plane.position.y=-1,this.scene.add(this.plane),this.fontLoader=new Mm,this.fontLoader.load("https://images.cccatmint.fun/textures%2FSmiley_Regular.json",(e=>{this.font=e,this.generateText()})),this.initLight(),this.initControl(),this.setResize(),this.showFPS(),this.initGui(),this.animate()}generateText(){this.textMaterial&&this.textMaterial.dispose(),this.textGeometry&&this.textGeometry.dispose(),this.textMesh&&this.scene.remove(this.textMesh),this.textMaterial=new Td({color:this.textColor,wireframe:this.isWireframe}),this.textGeometry=new Am(this.textString,{font:this.font,size:this.textSize,height:this.textHeight,curveSegments:this.curveSegments,bevelEnabled:this.bevelThickness,bevelThickness:this.bevelThickness,bevelSize:this.bevelSize,bevelSegments:this.bevelSegments}),this.textGeometry.center(),this.textMesh=new No(this.textGeometry,this.textMaterial),this.textMesh.castShadow=this.castShadow,this.scene.add(this.textMesh)}initLight(){const e=new yp(16777215,1);this.scene.add(e),this.pointLight=new vp(61695,1,10),this.pointLight.position.set(0,5,5),this.pointLight.castShadow=!0,this.pointLight.shadow.mapSize.set(1024,1024),this.scene.add(this.pointLight)}initControl(){this.controls=new tf(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.enabled=!0,this.controls.update()}setResize(){this.sizeObserver=new ResizeObserver((e=>{this.height=e[0].contentRect.height,this.width=e[0].contentRect.width,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height),this.renderer.render(this.scene,this.camera)})),this.sizeObserver.observe(this.container)}showFPS(){this.stats=new Ug,this.container.appendChild(this.stats.dom),this.stats.dom.className="stats-class",this.stats.dom.style.position="absolute",this.stats.dom.style.left="150px",this.stats.dom.style.top="20px"}destoryFPS(){this.stats&&(this.stats.dom.remove(),this.stats=null)}initGui(){this.gui=new Dg.GUI,this.gui.add(this,"textString").onFinishChange((()=>this.generateText())),this.gui.add(this,"isWireframe").onFinishChange((()=>this.generateText())),this.gui.addColor(this,"textColor").onFinishChange((()=>this.generateText())),this.gui.add(this,"castShadow").onFinishChange((()=>this.generateText())),this.gui.add(this,"textSize").min(.5).max(10).step(.1).onFinishChange((()=>this.generateText())),this.gui.add(this,"textHeight").min(.01).max(2).step(.01).onFinishChange((()=>this.generateText())),this.gui.add(this,"bevelEnabled").onFinishChange((()=>this.generateText())),this.gui.add(this,"bevelThickness").min(.001).max(.1).step(.001).onFinishChange((()=>this.generateText())),this.gui.add(this,"bevelSize").min(.001).max(.08).step(.001).onFinishChange((()=>this.generateText())),this.gui.add(this,"bevelSegments").min(1).max(20).step(1).onFinishChange((()=>this.generateText()))}animate(){this.renderer.render(this.scene,this.camera),this.controls.update(),this.stats.update(),this.long=requestAnimationFrame(this.animate.bind(this))}destory(){this.sizeObserver&&(this.sizeObserver.disconnect(this.container),this.sizeObserver=null),window.cancelAnimationFrame(this.long),this.renderer&&(this.renderer.forceContextLoss(),this.renderer.dispose(),this.renderer.domElement=null,this.renderer=null),this.clock=null,this.gui.destroy()}debug(){this.scene.add(new Zp(10)),this.debugbox=new No(new Uo(1,1,1),new Td({color:0})),this.debugbox.castShadow=!0,this.scene.add(this.debugbox)}}const Hg=Wi({__name:"index",setup(e){const t=ft(null);let n=null;return Cn((()=>{n=new Bg(t.value)})),On((()=>{n.destory()})),(e,n)=>(Or(),Ir("div",{class:"container",ref_key:"container",ref:t},null,512))}},[["__scopeId","data-v-974fbe0b"]]),Gg=Object.freeze(Object.defineProperty({__proto__:null,default:Hg},Symbol.toStringTag,{value:"Module"}));var jg,Vg={exports:{}},Wg={exports:{}},Xg=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},qg=Xg,Yg=Object.prototype.toString,Zg=(jg=Object.create(null),function(e){var t=Yg.call(e);return jg[t]||(jg[t]=t.slice(8,-1).toLowerCase())});function Kg(e){return e=e.toLowerCase(),function(t){return Zg(t)===e}}function Jg(e){return Array.isArray(e)}function Qg(e){return void 0===e}var $g=Kg("ArrayBuffer");function ev(e){return null!==e&&"object"==typeof e}function tv(e){if("object"!==Zg(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var nv=Kg("Date"),rv=Kg("File"),iv=Kg("Blob"),sv=Kg("FileList");function av(e){return"[object Function]"===Yg.call(e)}var ov=Kg("URLSearchParams");function lv(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),Jg(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var cv,hv=(cv="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return cv&&e instanceof cv}),uv={isArray:Jg,isArrayBuffer:$g,isBuffer:function(e){return null!==e&&!Qg(e)&&null!==e.constructor&&!Qg(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||Yg.call(e)===t||av(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&$g(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:ev,isPlainObject:tv,isUndefined:Qg,isDate:nv,isFile:rv,isBlob:iv,isFunction:av,isStream:function(e){return ev(e)&&av(e.pipe)},isURLSearchParams:ov,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:lv,merge:function e(){var t={};function n(n,r){tv(t[r])&&tv(n)?t[r]=e(t[r],n):tv(n)?t[r]=e({},n):Jg(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)lv(arguments[r],n);return t},extend:function(e,t,n){return lv(t,(function(t,r){e[r]=n&&"function"==typeof t?qg(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var r,i,s,a={};t=t||{};do{for(i=(r=Object.getOwnPropertyNames(e)).length;i-- >0;)a[s=r[i]]||(t[s]=e[s],a[s]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Zg,kindOfTest:Kg,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;var t=e.length;if(Qg(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:hv,isFileList:sv},dv=uv;function pv(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var fv=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(dv.isURLSearchParams(t))r=t.toString();else{var i=[];dv.forEach(t,(function(e,t){null!=e&&(dv.isArray(e)?t+="[]":e=[e],dv.forEach(e,(function(e){dv.isDate(e)?e=e.toISOString():dv.isObject(e)&&(e=JSON.stringify(e)),i.push(pv(t)+"="+pv(e))})))})),r=i.join("&")}if(r){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e},mv=uv;function gv(){this.handlers=[]}gv.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},gv.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},gv.prototype.forEach=function(e){mv.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var vv=gv,_v=uv,xv=uv;function yv(e,t,n,r,i){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}xv.inherits(yv,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var bv=yv.prototype,wv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){wv[e]={value:e}})),Object.defineProperties(yv,wv),Object.defineProperty(bv,"isAxiosError",{value:!0}),yv.from=function(e,t,n,r,i,s){var a=Object.create(bv);return xv.toFlatObject(e,a,(function(e){return e!==Error.prototype})),yv.call(a,e.message,t,n,r,i),a.name=e.name,s&&Object.assign(a,s),a};var Sv=yv,Mv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ev=uv;var Tv,Av,Cv,Pv,Rv=function(e,t){t=t||new FormData;var n=[];function r(e){return null===e?"":Ev.isDate(e)?e.toISOString():Ev.isArrayBuffer(e)||Ev.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(i,s){if(Ev.isPlainObject(i)||Ev.isArray(i)){if(-1!==n.indexOf(i))throw Error("Circular reference detected in "+s);n.push(i),Ev.forEach(i,(function(n,i){if(!Ev.isUndefined(n)){var a,o=s?s+"."+i:i;if(n&&!s&&"object"==typeof n)if(Ev.endsWith(i,"{}"))n=JSON.stringify(n);else if(Ev.endsWith(i,"[]")&&(a=Ev.toArray(n)))return void a.forEach((function(e){!Ev.isUndefined(e)&&t.append(o,r(e))}));e(n,o)}})),n.pop()}else t.append(s,r(i))}(e),t};var Lv,Ov,zv,Dv,kv,Iv,Nv,Fv,Uv,Bv,Hv,Gv,jv=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},Vv=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},Wv=function(e,t){return e&&!jv(t)?Vv(e,t):t};function Xv(){if(Iv)return kv;Iv=1;var e=Sv;function t(t){e.call(this,null==t?"canceled":t,e.ERR_CANCELED),this.name="CanceledError"}return uv.inherits(t,e,{__CANCEL__:!0}),kv=t}function qv(){if(Bv)return Uv;Bv=1;var e=uv,t=function(){if(Av)return Tv;Av=1;var e=Sv;return Tv=function(t,n,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?n(new e("Request failed with status code "+r.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):t(r)}}(),n=function(){if(Pv)return Cv;Pv=1;var e=uv;return Cv=e.isStandardBrowserEnv()?{write:function(t,n,r,i,s,a){var o=[];o.push(t+"="+encodeURIComponent(n)),e.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),e.isString(i)&&o.push("path="+i),e.isString(s)&&o.push("domain="+s),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}}(),r=fv,i=Wv,s=function(){if(Ov)return Lv;Ov=1;var e=uv,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Lv=function(n){var r,i,s,a={};return n?(e.forEach(n.split("\n"),(function(n){if(s=n.indexOf(":"),r=e.trim(n.substr(0,s)).toLowerCase(),i=e.trim(n.substr(s+1)),r){if(a[r]&&t.indexOf(r)>=0)return;a[r]="set-cookie"===r?(a[r]?a[r]:[]).concat([i]):a[r]?a[r]+", "+i:i}})),a):a}}(),a=function(){if(Dv)return zv;Dv=1;var e=uv;return zv=e.isStandardBrowserEnv()?function(){var t,n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var t=e;return n&&(r.setAttribute("href",t),t=r.href),r.setAttribute("href",t),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=i(window.location.href),function(n){var r=e.isString(n)?i(n):n;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0}}(),o=Mv,l=Sv,c=Xv(),h=Fv?Nv:(Fv=1,Nv=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""});return Uv=function(u){return new Promise((function(d,p){var f,m=u.data,g=u.headers,v=u.responseType;function _(){u.cancelToken&&u.cancelToken.unsubscribe(f),u.signal&&u.signal.removeEventListener("abort",f)}e.isFormData(m)&&e.isStandardBrowserEnv()&&delete g["Content-Type"];var x=new XMLHttpRequest;if(u.auth){var y=u.auth.username||"",b=u.auth.password?unescape(encodeURIComponent(u.auth.password)):"";g.Authorization="Basic "+btoa(y+":"+b)}var w=i(u.baseURL,u.url);function S(){if(x){var e="getAllResponseHeaders"in x?s(x.getAllResponseHeaders()):null,n={data:v&&"text"!==v&&"json"!==v?x.response:x.responseText,status:x.status,statusText:x.statusText,headers:e,config:u,request:x};t((function(e){d(e),_()}),(function(e){p(e),_()}),n),x=null}}if(x.open(u.method.toUpperCase(),r(w,u.params,u.paramsSerializer),!0),x.timeout=u.timeout,"onloadend"in x?x.onloadend=S:x.onreadystatechange=function(){x&&4===x.readyState&&(0!==x.status||x.responseURL&&0===x.responseURL.indexOf("file:"))&&setTimeout(S)},x.onabort=function(){x&&(p(new l("Request aborted",l.ECONNABORTED,u,x)),x=null)},x.onerror=function(){p(new l("Network Error",l.ERR_NETWORK,u,x,x)),x=null},x.ontimeout=function(){var e=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded",t=u.transitional||o;u.timeoutErrorMessage&&(e=u.timeoutErrorMessage),p(new l(e,t.clarifyTimeoutError?l.ETIMEDOUT:l.ECONNABORTED,u,x)),x=null},e.isStandardBrowserEnv()){var M=(u.withCredentials||a(w))&&u.xsrfCookieName?n.read(u.xsrfCookieName):void 0;M&&(g[u.xsrfHeaderName]=M)}"setRequestHeader"in x&&e.forEach(g,(function(e,t){void 0===m&&"content-type"===t.toLowerCase()?delete g[t]:x.setRequestHeader(t,e)})),e.isUndefined(u.withCredentials)||(x.withCredentials=!!u.withCredentials),v&&"json"!==v&&(x.responseType=u.responseType),"function"==typeof u.onDownloadProgress&&x.addEventListener("progress",u.onDownloadProgress),"function"==typeof u.onUploadProgress&&x.upload&&x.upload.addEventListener("progress",u.onUploadProgress),(u.cancelToken||u.signal)&&(f=function(e){x&&(p(!e||e&&e.type?new c:e),x.abort(),x=null)},u.cancelToken&&u.cancelToken.subscribe(f),u.signal&&(u.signal.aborted?f():u.signal.addEventListener("abort",f))),m||(m=null);var E=h(w);E&&-1===["http","https","file"].indexOf(E)?p(new l("Unsupported protocol "+E+":",l.ERR_BAD_REQUEST,u)):x.send(m)}))}}var Yv=uv,Zv=function(e,t){_v.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},Kv=Sv,Jv=Rv,Qv={"Content-Type":"application/x-www-form-urlencoded"};function $v(e,t){!Yv.isUndefined(e)&&Yv.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var e_,t_={transitional:Mv,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e_=qv()),e_),transformRequest:[function(e,t){if(Zv(t,"Accept"),Zv(t,"Content-Type"),Yv.isFormData(e)||Yv.isArrayBuffer(e)||Yv.isBuffer(e)||Yv.isStream(e)||Yv.isFile(e)||Yv.isBlob(e))return e;if(Yv.isArrayBufferView(e))return e.buffer;if(Yv.isURLSearchParams(e))return $v(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,r=Yv.isObject(e),i=t&&t["Content-Type"];if((n=Yv.isFileList(e))||r&&"multipart/form-data"===i){var s=this.env&&this.env.FormData;return Jv(n?{"files[]":e}:e,s&&new s)}return r||"application/json"===i?($v(t,"application/json"),function(e,t,n){if(Yv.isString(e))try{return(t||JSON.parse)(e),Yv.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||t_.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,i=!n&&"json"===this.responseType;if(i||r&&Yv.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(i){if("SyntaxError"===s.name)throw Kv.from(s,Kv.ERR_BAD_RESPONSE,this,null,this.response);throw s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gv?Hv:(Gv=1,Hv=null)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Yv.forEach(["delete","get","head"],(function(e){t_.headers[e]={}})),Yv.forEach(["post","put","patch"],(function(e){t_.headers[e]=Yv.merge(Qv)}));var n_,r_,i_=t_,s_=uv,a_=i_;function o_(){return r_?n_:(r_=1,n_=function(e){return!(!e||!e.__CANCEL__)})}var l_=uv,c_=function(e,t,n){var r=this||a_;return s_.forEach(n,(function(n){e=n.call(r,e,t)})),e},h_=o_(),u_=i_,d_=Xv();function p_(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new d_}var f_,m_,g_=uv,v_=function(e,t){t=t||{};var n={};function r(e,t){return g_.isPlainObject(e)&&g_.isPlainObject(t)?g_.merge(e,t):g_.isPlainObject(t)?g_.merge({},t):g_.isArray(t)?t.slice():t}function i(n){return g_.isUndefined(t[n])?g_.isUndefined(e[n])?void 0:r(void 0,e[n]):r(e[n],t[n])}function s(e){if(!g_.isUndefined(t[e]))return r(void 0,t[e])}function a(n){return g_.isUndefined(t[n])?g_.isUndefined(e[n])?void 0:r(void 0,e[n]):r(void 0,t[n])}function o(n){return n in t?r(e[n],t[n]):n in e?r(void 0,e[n]):void 0}var l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o};return g_.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||i,r=t(e);g_.isUndefined(r)&&t!==o||(n[e]=r)})),n};function __(){return m_?f_:(m_=1,f_={version:"0.27.2"})}var x_=__().version,y_=Sv,b_={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){b_[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var w_={};b_.transitional=function(e,t,n){return function(r,i,s){if(!1===e)throw new y_(function(e,t){return"[Axios v"+x_+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}(i," has been removed"+(t?" in "+t:"")),y_.ERR_DEPRECATED);return t&&!w_[i]&&(w_[i]=!0),!e||e(r,i,s)}};var S_,M_,E_,T_,A_,C_,P_=uv,R_=fv,L_=vv,O_=function(e){return p_(e),e.headers=e.headers||{},e.data=c_.call(e,e.data,e.headers,e.transformRequest),e.headers=l_.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),l_.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||u_.adapter)(e).then((function(t){return p_(e),t.data=c_.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return h_(t)||(p_(e),t&&t.response&&(t.response.data=c_.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},z_=v_,D_=Wv,k_={assertOptions:function(e,t,n){if("object"!=typeof e)throw new y_("options must be an object",y_.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var s=r[i],a=t[s];if(a){var o=e[s],l=void 0===o||a(o,s,e);if(!0!==l)throw new y_("option "+s+" must be "+l,y_.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new y_("Unknown option "+s,y_.ERR_BAD_OPTION)}},validators:b_},I_=k_.validators;function N_(e){this.defaults=e,this.interceptors={request:new L_,response:new L_}}N_.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=z_(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&k_.assertOptions(n,{silentJSONParsing:I_.transitional(I_.boolean),forcedJSONParsing:I_.transitional(I_.boolean),clarifyTimeoutError:I_.transitional(I_.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var s,a=[];if(this.interceptors.response.forEach((function(e){a.push(e.fulfilled,e.rejected)})),!i){var o=[O_,void 0];for(Array.prototype.unshift.apply(o,r),o=o.concat(a),s=Promise.resolve(t);o.length;)s=s.then(o.shift(),o.shift());return s}for(var l=t;r.length;){var c=r.shift(),h=r.shift();try{l=c(l)}catch(u){h(u);break}}try{s=O_(l)}catch(u){return Promise.reject(u)}for(;a.length;)s=s.then(a.shift(),a.shift());return s},N_.prototype.getUri=function(e){e=z_(this.defaults,e);var t=D_(e.baseURL,e.url);return R_(t,e.params,e.paramsSerializer)},P_.forEach(["delete","get","head","options"],(function(e){N_.prototype[e]=function(t,n){return this.request(z_(n||{},{method:e,url:t,data:(n||{}).data}))}})),P_.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(z_(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}N_.prototype[e]=t(),N_.prototype[e+"Form"]=t(!0)}));var F_=uv,U_=Xg,B_=N_,H_=v_;var G_=function e(t){var n=new B_(t),r=U_(B_.prototype.request,n);return F_.extend(r,B_.prototype,n),F_.extend(r,n),r.create=function(n){return e(H_(t,n))},r}(i_);G_.Axios=B_,G_.CanceledError=Xv(),G_.CancelToken=function(){if(M_)return S_;M_=1;var e=Xv();function t(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){var t,n=r._listeners.length;for(t=0;t<n;t++)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(t){r.reason||(r.reason=new e(t),n(r.reason))}))}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},t.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},t.source=function(){var e;return{token:new t((function(t){e=t})),cancel:e}},S_=t}(),G_.isCancel=o_(),G_.VERSION=__().version,G_.toFormData=Rv,G_.AxiosError=Sv,G_.Cancel=G_.CanceledError,G_.all=function(e){return Promise.all(e)},G_.spread=T_?E_:(T_=1,E_=function(e){return function(t){return e.apply(null,t)}}),G_.isAxiosError=function(){if(C_)return A_;C_=1;var e=uv;return A_=function(t){return e.isObject(t)&&!0===t.isAxiosError}}(),Wg.exports=G_,Wg.exports.default=G_;const j_=Ig(Vg.exports=Wg.exports);var V_={},W_={},X_={};Object.defineProperty(X_,"__esModule",{value:!0}),X_.default=function(e){var t=new Uint32Array(1);return t[0]=1664525*e[0]+1013904223,t},Object.defineProperty(W_,"__esModule",{value:!0}),W_.makeNoise2D=void 0;var q_=X_,Y_=(Math.sqrt(3)-1)/2,Z_=(1/Math.sqrt(3)-1)/2;function K_(e,t,n){return{dx:-t-e*Y_,dy:-n-e*Y_,xsb:t,ysb:n}}W_.makeNoise2D=function(e){for(var t=[],n=0;n<ex.length;n+=4){for(var r=J_[ex[n]],i=null,s=null,a=0;a<r.length;a+=3)s=K_(r[a],r[a+1],r[a+2]),null===i?t[n/4]=s:i.next=s,i=s;s.next=K_(ex[n+1],ex[n+2],ex[n+3])}var o=[];for(n=0;n<$_.length;n+=2)o[$_[n]]=t[$_[n+1]];var l=new Uint8Array(256),c=new Uint8Array(256),h=new Uint8Array(256);for(n=0;n<256;n++)h[n]=n;var u=new Uint32Array(1);for(u[0]=e,u=q_.default(q_.default(q_.default(u))),n=255;n>=0;n--){u=q_.default(u);var d=new Uint32Array(1);d[0]=(u[0]+31)%(n+1),d[0]<0&&(d[0]+=n+1),l[n]=h[d[0]],c[n]=14&l[n],h[d[0]]=h[n]}return function(e,t){for(var n=(e+t)*Z_,r=e+n,i=t+n,s=Math.floor(r),a=Math.floor(i),h=(s+a)*Y_,u=e-(s+h),d=t-(a+h),p=r-s,f=i-a,m=p+f,g=0,v=o[p-f+1|m<<1|m+f<<2|m+p<<4];void 0!==v;v=v.next){var _=u+v.dx,x=d+v.dy,y=2-_*_-x*x;if(y>0){var b=s+v.xsb,w=a+v.ysb,S=l[255&b],M=c[S+w&255];g+=y*y*y*y*(Q_[M]*_+Q_[M+1]*x)}}return.02127659574468085*g}};var J_=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],Q_=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],$_=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],ex=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],tx={};Object.defineProperty(tx,"__esModule",{value:!0}),tx.makeNoise3D=void 0;var nx=X_,rx=(Math.sqrt(4)-1)/3,ix=(1/Math.sqrt(4)-1)/3;function sx(e,t,n,r){return{dx:-t-e*rx,dy:-n-e*rx,dz:-r-e*rx,xsb:t,ysb:n,zsb:r}}tx.makeNoise3D=function(e){for(var t=[],n=0;n<cx.length;n+=9){for(var r=ax[cx[n]],i=null,s=null,a=0;a<r.length;a+=4)s=sx(r[a],r[a+1],r[a+2],r[a+3]),null===i?t[n/9]=s:i.next=s,i=s;s.next=sx(cx[n+1],cx[n+2],cx[n+3],cx[n+4]),s.next.next=sx(cx[n+5],cx[n+6],cx[n+7],cx[n+8])}var o=[];for(n=0;n<lx.length;n+=2)o[lx[n]]=t[lx[n+1]];var l=new Uint8Array(256),c=new Uint8Array(256),h=new Uint8Array(256);for(n=0;n<256;n++)h[n]=n;var u=new Uint32Array(1);for(u[0]=e,u=nx.default(nx.default(nx.default(u))),n=255;n>=0;n--){u=nx.default(u);var d=new Uint32Array(1);d[0]=(u[0]+31)%(n+1),d[0]<0&&(d[0]+=n+1),l[n]=h[d[0]],c[n]=l[n]%24*3,h[d[0]]=h[n]}return function(e,t,n){for(var r=(e+t+n)*ix,i=e+r,s=t+r,a=n+r,h=Math.floor(i),u=Math.floor(s),d=Math.floor(a),p=(h+u+d)*rx,f=e-(h+p),m=t-(u+p),g=n-(d+p),v=i-h,_=s-u,x=a-d,y=v+_+x,b=0,w=o[_-x+1|v-_+1<<1|v-x+1<<2|y<<3|y+x<<5|y+_<<7|y+v<<9];void 0!==w;w=w.next){var S=f+w.dx,M=m+w.dy,E=g+w.dz,T=2-S*S-M*M-E*E;if(T>0){var A=h+w.xsb,C=u+w.ysb,P=d+w.zsb,R=l[255&A],L=l[R+C&255],O=c[L+P&255];b+=T*T*T*T*(ox[O]*S+ox[O+1]*M+ox[O+2]*E)}}return.009708737864077669*b}};var ax=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],ox=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],lx=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],cx=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],hx={};Object.defineProperty(hx,"__esModule",{value:!0}),hx.makeNoise4D=void 0;var ux=X_,dx=(Math.sqrt(5)-1)/4,px=(1/Math.sqrt(5)-1)/4;function fx(e,t,n,r,i){return{dx:-t-e*dx,dy:-n-e*dx,dz:-r-e*dx,dw:-i-e*dx,xsb:t,ysb:n,zsb:r,wsb:i}}hx.makeNoise4D=function(e){for(var t=[],n=0;n<_x.length;n+=16){for(var r=mx[_x[n]],i=null,s=null,a=0;a<r.length;a+=5)s=fx(r[a],r[a+1],r[a+2],r[a+3],r[a+4]),null===i?t[n/16]=s:i.next=s,i=s;s.next=fx(_x[n+1],_x[n+2],_x[n+3],_x[n+4],_x[n+5]),s.next.next=fx(_x[n+6],_x[n+7],_x[n+8],_x[n+9],_x[n+10]),s.next.next.next=fx(_x[n+11],_x[n+12],_x[n+13],_x[n+14],_x[n+15])}var o=[];for(n=0;n<vx.length;n+=2)o[vx[n]]=t[vx[n+1]];var l=new Uint8Array(256),c=new Uint8Array(256),h=new Uint8Array(256);for(n=0;n<256;n++)h[n]=n;var u=new Uint32Array(1);for(u[0]=e,u=ux.default(ux.default(ux.default(u))),n=255;n>=0;n--){u=ux.default(u);var d=new Uint32Array(1);d[0]=(u[0]+31)%(n+1),d[0]<0&&(d[0]+=n+1),l[n]=h[d[0]],c[n]=252&l[n],h[d[0]]=h[n]}return function(e,t,n,r){for(var i=(e+t+n+r)*px,s=e+i,a=t+i,h=n+i,u=r+i,d=Math.floor(s),p=Math.floor(a),f=Math.floor(h),m=Math.floor(u),g=(d+p+f+m)*dx,v=e-(d+g),_=t-(p+g),x=n-(f+g),y=r-(m+g),b=s-d,w=a-p,S=h-f,M=u-m,E=b+w+S+M,T=0,A=o[S-M+1|w-S+1<<1|w-M+1<<2|b-w+1<<3|b-S+1<<4|b-M+1<<5|E<<6|E+M<<8|E+S<<11|E+w<<14|E+b<<17];void 0!==A;A=A.next){var C=v+A.dx,P=_+A.dy,R=x+A.dz,L=y+A.dw,O=2-C*C-P*P-R*R-L*L;if(O>0){var z=d+A.xsb,D=p+A.ysb,k=f+A.zsb,I=m+A.wsb,N=l[255&z],F=l[N+D&255],U=l[F+k&255],B=c[U+I&255];T+=O*O*O*O*(gx[B]*C+gx[B+1]*P+gx[B+2]*R+gx[B+3]*L)}}return.03333333333333333*T}};var mx=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],gx=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],vx=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],_x=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.makeNoise4D=e.makeNoise3D=e.makeNoise2D=void 0;var t=W_;Object.defineProperty(e,"makeNoise2D",{enumerable:!0,get:function(){return t.makeNoise2D}});var n=tx;Object.defineProperty(e,"makeNoise3D",{enumerable:!0,get:function(){return n.makeNoise3D}});var r=hx;Object.defineProperty(e,"makeNoise4D",{enumerable:!0,get:function(){return r.makeNoise4D}})}(V_);
/**
 * postprocessing v6.28.7 build Wed Aug 31 2022
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2022 Raoul van Rüschen
 * @license Zlib
 */
var xx="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",yx=0,bx=1,wx=2,Sx=3,Mx=4,Ex=5,Tx=6,Ax=7,Cx=8,Px=9,Rx=10,Lx=11,Ox=12,zx=13,Dx=14,kx=15,Ix=16,Nx=17,Fx=18,Ux=19,Bx=20,Hx=21,Gx=22,jx=23,Vx=24,Wx=25,Xx=26,qx=27,Yx=28,Zx=29,Kx=30,Jx=31,Qx=32,$x=0,ey=1,ty=2,ny={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},ry=2,iy=3,sy=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],ay=class extends jo{constructor(e=new Ns){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Dp(null),texelSize:new Dp(new Ns),scale:new Dp(1),kernel:new Dp(0)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <encodings_fragment>\n}",vertexShader:"uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1,this.setTexelSize(e.x,e.y),this.kernelSize=ry}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get kernelSequence(){return sy[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t,.5*e,.5*t)}setSize(e,t){const n=1/e,r=1/t;this.uniforms.texelSize.value.set(n,r,.5*n,.5*r)}},oy=class extends jo{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Dp(null),opacity:new Dp(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <encodings_fragment>\n#include <dithering_fragment>\n}",vertexShader:xx}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},ly=class extends jo{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new Dp(null),texelSize:new Dp(new gs)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#define WEIGHT_INNER 0.125\n#define WEIGHT_OUTER 0.0555555\nvarying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;\n#include <encodings_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},cy=class extends jo{constructor(e,t,n,r,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:"144".replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Dp(null),depthBuffer:new Dp(null),resolution:new Dp(new gs),texelSize:new Dp(new gs),cameraNear:new Dp(.3),cameraFar:new Dp(1e3),aspect:new Dp(1),time:new Dp(0)},blending:0,depthWrite:!1,depthTest:!1,dithering:i}),this.toneMapped=!1,e&&this.setShaderParts(e),t&&this.setDefines(t),n&&this.setUniforms(n),this.adoptCameraSettings(r)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=3200){this.depthBuffer=e,this.depthPacking=t}setShaderData(e){this.setShaderParts(e.shaderParts),this.setDefines(e.defines),this.setUniforms(e.uniforms),this.setExtensions(e.extensions)}setShaderParts(e){var t,n,r,i,s;return this.fragmentShader="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if THREE_REVISION >= 137\nvec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <encodings_fragment>\n#endif\n#include <dithering_fragment>\n}".replace(ny.FRAGMENT_HEAD,null!=(t=e.get(ny.FRAGMENT_HEAD))?t:"").replace(ny.FRAGMENT_MAIN_UV,null!=(n=e.get(ny.FRAGMENT_MAIN_UV))?n:"").replace(ny.FRAGMENT_MAIN_IMAGE,null!=(r=e.get(ny.FRAGMENT_MAIN_IMAGE))?r:""),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}".replace(ny.VERTEX_HEAD,null!=(i=e.get(ny.VERTEX_HEAD))?i:"").replace(ny.VERTEX_MAIN_SUPPORT,null!=(s=e.get(ny.VERTEX_MAIN_SUPPORT))?s:""),this.needsUpdate=!0,this}setDefines(e){for(const t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(const t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(const t of e)this.extensions[t]=!0;return this}get encodeOutput(){return void 0!==this.defines.ENCODE_OUTPUT}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Wo?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){const n=this.uniforms;n.resolution.value.set(e,t),n.texelSize.value.set(1/e,1/t),n.aspect.value=e/t}static get Section(){return ny}},hy=class extends jo{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:"144".replace(/\D+/g,"")},uniforms:{inputBuffer:new Dp(null),threshold:new Dp(0),smoothing:new Dp(1),range:new Dp(null)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\n#elif defined(THRESHOLD)\nl=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=vec4(texel.rgb*l,l);\n#else\ngl_FragColor=vec4(l);\n#endif\n}",vertexShader:xx}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return void 0!==this.defines.COLOR}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return null!==this.luminanceRange}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){null!==e?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},uy=class extends jo{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new Dp(null),supportBuffer:new Dp(null),texelSize:new Dp(new gs),radius:new Dp(.85)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;\n#else\nuniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;\n#endif\nuniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);\n#include <encodings_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}set supportBuffer(e){this.uniforms.supportBuffer.value=e}get radius(){return this.uniforms.radius.value}set radius(e){this.uniforms.radius.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},dy=new Vo,py=null;var fy=class{constructor(e="Pass",t=new Dh,n=dy){this.name=e,this.renderer=null,this.scene=t,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;null!==t&&(t.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return null!==this.screen?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;null!==t?t.material=e:(t=new No(function(){if(null===py){const e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);void 0!==(py=new xo).setAttribute?(py.setAttribute("position",new oo(e,3)),py.setAttribute("uv",new oo(t,2))):(py.addAttribute("position",new oo(e,3)),py.addAttribute("uv",new oo(t,2)))}return py}(),e),t.frustumCulled=!1,null===this.scene&&(this.scene=new Dh),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=3200){}render(e,t,n,r,i){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,n){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof Fs||t instanceof ro||t instanceof Is||t instanceof fy)&&this[e].dispose()}}},my=class extends fy{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new oy,this.needsSwap=!1,this.renderTarget=e,void 0===e&&(this.renderTarget=new Fs(1,1,{minFilter:1006,magFilter:1006,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,n,r,i){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,n){void 0!==n&&(this.renderTarget.texture.type=n,1009!==n?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":3001===e.outputEncoding&&(this.renderTarget.texture.encoding=3001))}},gy=class extends fy{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,n,r,i){const s=e.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},vy=new Rs,_y=class extends fy{constructor(e=!0,t=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,n){this.color=e,this.depth=t,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,n,r,i){const s=this.overrideClearColor,a=this.overrideClearAlpha,o=e.getClearAlpha(),l=null!==s,c=a>=0;l?(vy.copy(e.getClearColor(vy)),e.setClearColor(s,c?a:o)):c&&e.setClearAlpha(a),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(vy,o):c&&e.setClearAlpha(o)}},xy=class extends ts{constructor(e,t=-1,n=-1,r=1){super(),this.resizable=e,this.baseSize=new gs(1,1),this.preferredSize=new gs(t,n),this.target=this.preferredSize,this.s=r,this.effectiveSize=new gs,this.addEventListener("change",(()=>this.updateEffectiveSize())),this.updateEffectiveSize()}updateEffectiveSize(){const e=this.baseSize,t=this.preferredSize,n=this.effectiveSize,r=this.scale;-1!==t.width?n.width=t.width:-1!==t.height?n.width=Math.round(t.height*(e.width/Math.max(e.height,1))):n.width=Math.round(e.width*r),-1!==t.height?n.height=t.height:-1!==t.width?n.height=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):n.height=Math.round(e.height*r)}get width(){return this.effectiveSize.width}set width(e){this.preferredWidth=e}get height(){return this.effectiveSize.height}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferredSize.setScalar(-1),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.baseSize.width}set baseWidth(e){this.baseSize.width!==e&&(this.baseSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(e){this.baseWidth=e}get baseHeight(){return this.baseSize.height}set baseHeight(e){this.baseSize.height!==e&&(this.baseSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){this.baseSize.width===e&&this.baseSize.height===t||(this.baseSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(e){this.preferredSize.width!==e&&(this.preferredSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferredSize.height}set preferredHeight(e){this.preferredSize.height!==e&&(this.preferredSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){this.preferredSize.width===e&&this.preferredSize.height===t||(this.preferredSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(e){this.s=e.scale,this.baseSize.set(e.getBaseWidth(),e.getBaseHeight()),this.preferredSize.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return-1}},yy=!1,by=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case 2:t=this.materialsFlatShadedDoubleSide;break;case 1:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded}else switch(e.material.side){case 2:t=this.materialsDoubleSide;break;case 1:t=this.materialsBackSide;break;default:t=this.materials}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,null!==e){const t=this.materials=[e.clone(),e.clone(),e.clone()];for(const n of t)n.uniforms=Object.assign({},e.uniforms),n.side=0;t[2].skinning=!0,this.materialsBackSide=t.map((t=>{const n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.side=1,n})),this.materialsDoubleSide=t.map((t=>{const n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.side=2,n})),this.materialsFlatShaded=t.map((t=>{const n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n})),this.materialsFlatShadedBackSide=t.map((t=>{const n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=1,n})),this.materialsFlatShadedDoubleSide=t.map((t=>{const n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=2,n}))}}render(e,t,n){const r=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,yy){const r=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,n);for(const e of r)e[0].material=e[1];this.meshCount!==r.size&&r.clear()}else{const r=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,n),t.overrideMaterial=r}e.shadowMap.enabled=r}disposeMaterials(){if(null!==this.material){const e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return yy}static set workaroundEnabled(e){yy=e}},wy=class extends fy{constructor(e,t,n=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new _y,this.overrideMaterialManager=null===n?null:new by(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){const e=this.overrideMaterialManager;return null!==e?e.material:null}set overrideMaterial(e){const t=this.overrideMaterialManager;null!==e?null!==t?t.setMaterial(e):this.overrideMaterialManager=new by(e):null!==t&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,n,r,i){const s=this.scene,a=this.camera,o=this.selection,l=a.layers.mask,c=s.background,h=e.shadowMap.autoUpdate,u=this.renderToScreen?null:t;null!==o&&a.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(u),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,s,a):e.render(s,a),a.layers.mask=l,s.background=c,e.shadowMap.autoUpdate=h}};function Sy(e,t,n){for(const r of t){const t="$1"+e+r.charAt(0).toUpperCase()+r.slice(1),i=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const e of n.entries())null!==e[1]&&n.set(e[0],e[1].replace(i,t))}}function My(e,t,n){var r,i,s,a,o;let l=t.getFragmentShader(),c=t.getVertexShader();const h=void 0!==l&&/mainImage/.test(l),u=void 0!==l&&/mainUv/.test(l);if(n.attributes|=t.getAttributes(),void 0===l)throw new Error(`Missing fragment shader (${t.name})`);if(u&&0!=(n.attributes&ty))throw new Error(`Effects that transform UVs are incompatible with convolution effects (${t.name})`);if(!h&&!u)throw new Error(`Could not find mainImage or mainUv function (${t.name})`);{const d=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,p=n.shaderParts;let f=null!=(r=p.get(ny.FRAGMENT_HEAD))?r:"",m=null!=(i=p.get(ny.FRAGMENT_MAIN_UV))?i:"",g=null!=(s=p.get(ny.FRAGMENT_MAIN_IMAGE))?s:"",v=null!=(a=p.get(ny.VERTEX_HEAD))?a:"",_=null!=(o=p.get(ny.VERTEX_MAIN_SUPPORT))?o:"";const x=new Set,y=new Set;if(u&&(m+=`\t${e}MainUv(UV);\n`,n.uvTransformation=!0),null!==c&&/mainSupport/.test(c)){const t=/mainSupport *\([\w\s]*?uv\s*?\)/.test(c);_+=`\t${e}MainSupport(`,_+=t?"vUv);\n":");\n";for(const e of c.matchAll(/(?:varying\s+\w+\s+(\w*))/g))n.varyings.add(e[1]),x.add(e[1]),y.add(e[1]);for(const e of c.matchAll(d))y.add(e[1])}for(const e of l.matchAll(d))y.add(e[1]);for(const e of t.defines.keys())y.add(e.replace(/\([\w\s,]*\)/g,""));for(const e of t.uniforms.keys())y.add(e);y.delete("while"),y.delete("for"),y.delete("if"),t.uniforms.forEach(((t,r)=>n.uniforms.set(e+r.charAt(0).toUpperCase()+r.slice(1),t))),t.defines.forEach(((t,r)=>n.defines.set(e+r.charAt(0).toUpperCase()+r.slice(1),t)));const b=new Map([["fragment",l],["vertex",c]]);Sy(e,y,n.defines),Sy(e,y,b),l=b.get("fragment"),c=b.get("vertex");const w=t.blendMode;if(n.blendModes.set(w.blendFunction,w),h){null!==t.inputColorSpace&&t.inputColorSpace!==n.colorSpace&&(g+=3001===t.inputColorSpace?"color0 = LinearTosRGB(color0);\n\t":"color0 = sRGBToLinear(color0);\n\t"),null!==t.outputColorSpace?n.colorSpace=t.outputColorSpace:null!==t.inputColorSpace&&(n.colorSpace=t.inputColorSpace);const r=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;g+=`${e}MainImage(color0, UV, `,0!=(n.attributes&ey)&&r.test(l)&&(g+="depth, ",n.readDepth=!0),g+="color1);\n\t";const i=e+"BlendOpacity";n.uniforms.set(i,w.opacity),g+=`color0 = blend${w.blendFunction}(color0, color1, ${i});\n\n\t`,f+=`uniform float ${i};\n\n`}if(f+=l+"\n",null!==c&&(v+=c+"\n"),p.set(ny.FRAGMENT_HEAD,f),p.set(ny.FRAGMENT_MAIN_UV,m),p.set(ny.FRAGMENT_MAIN_IMAGE,g),p.set(ny.VERTEX_HEAD,v),p.set(ny.VERTEX_MAIN_SUPPORT,_),null!==t.extensions)for(const e of t.extensions)n.extensions.add(e)}}var Ey=class extends fy{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new cy(null,null,null,e),this.listener=e=>this.handleEvent(e),this.effects=[],this.setEffects(t),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){const t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}setEffects(e){for(const t of this.effects)t.removeEventListener("change",this.listener);this.effects=e.sort(((e,t)=>t.attributes-e.attributes));for(const t of this.effects)t.addEventListener("change",this.listener)}updateMaterial(){const e=new Ry;let t=0;for(const a of this.effects)if(a.blendMode.blendFunction===Px)e.attributes|=a.getAttributes()&ey;else{if(0!=(e.attributes&a.getAttributes()&ty))throw new Error(`Convolution effects cannot be merged (${a.name})`);My("e"+t++,a,e)}let n=e.shaderParts.get(ny.FRAGMENT_HEAD),r=e.shaderParts.get(ny.FRAGMENT_MAIN_IMAGE),i=e.shaderParts.get(ny.FRAGMENT_MAIN_UV);const s=/\bblend\b/g;for(const a of e.blendModes.values())n+=a.getShaderCode().replace(s,`blend${a.blendFunction}`)+"\n";0!=(e.attributes&ey)?(e.readDepth&&(r="float depth = readDepth(UV);\n\n\t"+r),this.needsDepthTexture=null===this.getDepthTexture()):this.needsDepthTexture=!1,3001===e.colorSpace&&(r+="color0 = sRGBToLinear(color0);\n\t"),e.uvTransformation?(i="vec2 transformedUv = vUv;\n"+i,e.defines.set("UV","transformedUv")):e.defines.set("UV","vUv"),e.shaderParts.set(ny.FRAGMENT_HEAD,n),e.shaderParts.set(ny.FRAGMENT_MAIN_IMAGE,r),e.shaderParts.set(ny.FRAGMENT_MAIN_UV,i),e.shaderParts.forEach(((e,t,n)=>n.set(t,null==e?void 0:e.trim().replace(/^#/,"\n#")))),this.skipRendering=0===t,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(e)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=3200){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(const n of this.effects)n.setDepthTexture(e,t)}render(e,t,n,r,i){for(const s of this.effects)s.update(e,t,r);if(!this.skipRendering||this.renderToScreen){const i=this.fullscreenMaterial;i.inputBuffer=t.texture,i.time+=r,e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(const n of this.effects)n.setSize(e,t)}initialize(e,t,n){this.renderer=e;for(const r of this.effects)r.initialize(e,t,n);this.updateMaterial(),void 0!==n&&1009!==n&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const e of this.effects)e.removeEventListener("change",this.listener),e.dispose()}handleEvent(e){if("change"===e.type)this.recompile()}},Ty=class extends fy{constructor({kernelSize:e=ry,resolutionScale:t=.5,width:n=xy.AUTO_SIZE,height:r=xy.AUTO_SIZE,resolutionX:i=n,resolutionY:s=r}={}){super("KawaseBlurPass"),this.renderTargetA=new Fs(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const a=this.resolution=new xy(this,i,s,t);a.addEventListener("change",(e=>this.setSize(a.baseWidth,a.baseHeight))),this.blurMaterial=new ay,this.copyMaterial=new oy}getResolution(){return this.resolution}get dithering(){return this.copyMaterial.dithering}set dithering(e){this.copyMaterial.dithering=e}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(e){this.blurMaterial.kernelSize=e}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,r,i){const s=this.scene,a=this.camera,o=this.renderTargetA,l=this.renderTargetB,c=this.blurMaterial,h=c.kernelSequence;let u=t;this.fullscreenMaterial=c;for(let d=0,p=h.length;d<p;++d){const t=0==(1&d)?o:l;c.kernel=h[d],c.inputBuffer=u.texture,e.setRenderTarget(t),e.render(s,a),u=t}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=u.texture,e.setRenderTarget(this.renderToScreen?null:n),e.render(s,a)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t);const r=n.width,i=n.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(e,t)}initialize(e,t,n){void 0!==n&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,1009!==n?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):3001===e.outputEncoding&&(this.renderTargetA.texture.encoding=3001,this.renderTargetB.texture.encoding=3001))}static get AUTO_SIZE(){return xy.AUTO_SIZE}},Ay=class extends fy{constructor({renderTarget:e,luminanceRange:t,colorOutput:n,resolutionScale:r=1,width:i=xy.AUTO_SIZE,height:s=xy.AUTO_SIZE,resolutionX:a=i,resolutionY:o=s}={}){super("LuminancePass"),this.fullscreenMaterial=new hy(n,t),this.needsSwap=!1,this.renderTarget=e,void 0===this.renderTarget&&(this.renderTarget=new Fs(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new xy(this,a,o,r);l.addEventListener("change",(e=>this.setSize(l.baseWidth,l.baseHeight)))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,n,r,i){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}initialize(e,t,n){void 0!==n&&1009!==n&&(this.renderTarget.texture.type=n,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Cy=class extends fy{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new _y(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,n,r,i){const s=e.getContext(),a=e.state.buffers,o=this.scene,l=this.camera,c=this.clearPass,h=this.inverted?0:1,u=1-h;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),a.stencil.setFunc(s.ALWAYS,h,4294967295),a.stencil.setClear(u),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(e,null):(c.render(e,t),c.render(e,n))),this.renderToScreen?(e.setRenderTarget(null),e.render(o,l)):(e.setRenderTarget(t),e.render(o,l),e.setRenderTarget(n),e.render(o,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(s.EQUAL,1,4294967295),a.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),a.stencil.setLocked(!0)}},Py=class extends fy{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Fs(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new ly,this.upsamplingMaterial=new uy,this.resolution=new gs}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(e){if(this.levels!==e){const t=this.renderTarget;this.dispose();for(let n=0;n<e;++n){const e=t.clone();e.texture.name="Downsampling.Mipmap"+n,this.downsamplingMipmaps.push(e)}this.upsamplingMipmaps.push(t);for(let n=1,r=e-1;n<r;++n){const e=t.clone();e.texture.name="Upsampling.Mipmap"+n,this.upsamplingMipmaps.push(e)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(e){this.upsamplingMaterial.radius=e}render(e,t,n,r,i){const{scene:s,camera:a}=this,{downsamplingMaterial:o,upsamplingMaterial:l}=this,{downsamplingMipmaps:c,upsamplingMipmaps:h}=this;let u=t;this.fullscreenMaterial=o;for(let d=0,p=c.length;d<p;++d){const t=c[d];o.setSize(u.width,u.height),o.inputBuffer=u.texture,e.setRenderTarget(t),e.render(s,a),u=t}this.fullscreenMaterial=l;for(let d=h.length-1;d>=0;--d){const t=h[d];l.setSize(u.width,u.height),l.inputBuffer=u.texture,l.supportBuffer=c[d].texture,e.setRenderTarget(t),e.render(s,a),u=t}}setSize(e,t){const n=this.resolution;n.set(e,t);let r=n.width,i=n.height;for(let s=0,a=this.downsamplingMipmaps.length;s<a;++s)r=Math.round(.5*r),i=Math.round(.5*i),this.downsamplingMipmaps[s].setSize(r,i),s<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[s].setSize(r,i)}initialize(e,t,n){if(void 0!==n){const t=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const e of t)e.texture.type=n;if(1009!==n)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(3001===e.outputEncoding)for(const e of t)e.texture.encoding=3001}}dispose(){super.dispose();for(const e of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))e.dispose()}},Ry=class{constructor(){this.shaderParts=new Map([[ny.FRAGMENT_HEAD,null],[ny.FRAGMENT_MAIN_UV,null],[ny.FRAGMENT_MAIN_IMAGE,null],[ny.VERTEX_HEAD,null],[ny.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=$x,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=3e3}},Ly=new Map([[yx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}"],[bx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}"],[wx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}"],[Sx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[Mx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}"],[Ex,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}"],[Tx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}"],[Ax,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}"],[Cx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}"],[Px,null],[Rx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}"],[Lx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}"],[Ox,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}"],[zx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}"],[Dx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}"],[kx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}"],[Ix,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}"],[Nx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}"],[Fx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}"],[Ux,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}"],[Bx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[Hx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}"],[Gx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}"],[jx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}"],[Vx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}"],[Wx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}"],[Xx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}"],[qx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[Yx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}"],[Zx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}"],[Kx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}"],[Jx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}"],[Qx,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}"]]),Oy=class extends ts{constructor(e,t=1){super(),this._blendFunction=e,this.opacity=new Dp(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this._blendFunction}set blendFunction(e){this._blendFunction=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return Ly.get(this.blendFunction)}},zy=class extends ts{constructor(e,t,{attributes:n=$x,blendFunction:r=jx,defines:i=new Map,uniforms:s=new Map,extensions:a=null,vertexShader:o=null}={}){super(),this.name=e,this.renderer=null,this.attributes=n,this.fragmentShader=t,this.vertexShader=o,this.defines=i,this.uniforms=s,this.extensions=a,this.blendMode=new Oy(r),this.blendMode.addEventListener("change",(e=>this.setChanged())),this._inputColorSpace=3e3,this._outputColorSpace=null}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(e){this._inputColorSpace=e,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e,this.setChanged()}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=3200){}update(e,t,n){}setSize(e,t){}initialize(e,t,n){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof Fs||t instanceof ro||t instanceof Is||t instanceof fy)&&this[e].dispose()}}},Dy=class extends zy{constructor({blendFunction:e=Yx,luminanceThreshold:t=.9,luminanceSmoothing:n=.025,mipmapBlur:r=!1,intensity:i=1,radius:s=.85,levels:a=8,kernelSize:o=iy,resolutionScale:l=.5,width:c=xy.AUTO_SIZE,height:h=xy.AUTO_SIZE,resolutionX:u=c,resolutionY:d=h}={}){super("BloomEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}",{blendFunction:e,uniforms:new Map([["map",new Dp(null)],["intensity",new Dp(i)]])}),this.renderTarget=new Fs(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new Ty({kernelSize:o}),this.luminancePass=new Ay({colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=n,this.mipmapBlurPass=new Py,this.mipmapBlurPass.enabled=r,this.mipmapBlurPass.radius=s,this.mipmapBlurPass.levels=a,this.uniforms.get("map").value=r?this.mipmapBlurPass.texture:this.renderTarget.texture;const p=this.resolution=new xy(this,u,d,l);p.addEventListener("change",(e=>this.setSize(p.baseWidth,p.baseHeight)))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return 1}set distinction(e){}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,n){const r=this.renderTarget,i=this.luminancePass;i.enabled?(i.render(e,t),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,i.renderTarget):this.blurPass.render(e,i.renderTarget,r)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,t):this.blurPass.render(e,t,r)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n),this.luminancePass.setSize(e,t),this.mipmapBlurPass.setSize(e,t)}initialize(e,t,n){this.blurPass.initialize(e,t,n),this.luminancePass.initialize(e,t,n),this.mipmapBlurPass.initialize(e,t,n),void 0!==n&&(this.renderTarget.texture.type=n,3001===e.outputEncoding&&(this.renderTarget.texture.encoding=3001))}};new Gs,new xa,new Rs,new Gs,new Gs;class ky{constructor(e,n){t(this,"FOV",75),t(this,"CAMERA_DISTANCE",100),t(this,"TERRAIN_SIZE",64),t(this,"TERRAIN_GENERATION_SPEED",20),t(this,"SUN_RADIUS",80),t(this,"VISUALIZER_LINE_WIDTH",25),this.sizes={width:e.clientWidth||200,height:e.clientHeight||100},this.canvas=e,this.scene=null,this.camera=null,this.renderer=null,this.noise2d=V_.makeNoise2D(Date.now()),this.tick=0,this.clock=null,this.sources=[],this.audioCtx=null,this.gainNode=null,this.splitterNode=null,this.mergerNode=null,this.analyserLNode=null,this.analyserRNode=null,this.filterLFNode=null,this.analyserLFNode=null,this.dataArray=null,this.loading=!1,this.options=Object.assign({sunColor:15654297,barColor:2197738},n),this.terrainGeometry=null,this.terrainMaterial=null,this.terrain=null,this.sunGeometry=null,this.sunMaterial=null,this.sun=null,this.lineMaterial=null,this.composer=null,this.terrain=null,this.visualizerLeft=[],this.visualizerRight=[]}initializeAudio(){this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.gainNode=this.audioCtx.createGain(),this.splitterNode=this.audioCtx.createChannelSplitter(2),this.mergerNode=this.audioCtx.createChannelMerger(2),this.analyserLNode=this.audioCtx.createAnalyser(),this.analyserRNode=this.audioCtx.createAnalyser(),this.splitterNode.connect(this.analyserLNode,0),this.splitterNode.connect(this.analyserRNode,1),this.analyserLNode.connect(this.mergerNode,0,0),this.analyserRNode.connect(this.mergerNode,0,1),this.mergerNode.connect(this.gainNode),this.gainNode.connect(this.audioCtx.destination),this.filterLFNode=this.audioCtx.createBiquadFilter(),this.analyserLFNode=this.audioCtx.createAnalyser(),this.filterLFNode.connect(this.analyserLFNode),this.filterLFNode.type="lowpass",this.filterLFNode.frequency.setValueAtTime(250,this.audioCtx.currentTime),this.filterLFNode.gain.setValueAtTime(25,this.audioCtx.currentTime),this.analyserLFNode.fftSize=2048;const e=this.analyserLFNode.frequencyBinCount;this.dataArray=new Uint8Array(e)}getMusic(e){return new Promise(((t,n)=>{this.sources&&this.sources.forEach((e=>e.stop(0))),this.loading=!0,this.sources=new Array(2);for(let e=0;e<this.sources.length;e++)this.sources[e]=this.audioCtx.createBufferSource();const r=new FileReader;r.onload=e=>{const n=e.target.result;this.audioCtx.decodeAudioData(n,(e=>{for(let t=0;t<this.sources.length;t++){switch(this.sources[t].buffer=e,t){case 0:this.sources[t].connect(this.splitterNode);break;case 1:this.sources[t].connect(this.filterLFNode)}this.sources[t].start(0)}this.sources[0].onended=()=>{this.loading||(this.sources=void 0)},this.loading=!1,t(!0)}))},j_.get(e,{responseType:"blob"}).then((e=>{r.readAsArrayBuffer(e.data)})).catch((e=>{n(e)}))}))}initializeThree(){this.clock=new Sp,this.noise2d=V_.makeNoise2D(Date.now()),this.scene=new Dh,this.camera=new Wo(this.FOV,this.sizes.width/this.sizes.height,.1,1e3),this.camera.position.set(0,0,this.CAMERA_DISTANCE),this.camera.lookAt(0,0,0),this.terrainGeometry=new il(1250,500,this.TERRAIN_SIZE-1,this.TERRAIN_SIZE-1),this.terrainMaterial=new Td({color:65280,emissiveIntensity:.5,flatShading:!0,side:2}),this.terrain=new No(this.terrainGeometry,this.terrainMaterial),this.terrain.rotation.x=-Math.PI/2,this.terrain.position.y=-100,this.scene.add(this.terrain),this.sunGeometry=new Xu(this.SUN_RADIUS,32),this.sunMaterial=new io({color:this.options.sunColor}),this.sun=new No(this.sunGeometry,this.sunMaterial),this.sun.position.z=-250,this.sun.position.y=80,this.scene.add(this.sun);const e=Math.tan(this.camera.fov*Math.PI/180/2)*(250+this.CAMERA_DISTANCE)*2,t=e/1.75,n=e*this.camera.aspect/2-2*this.SUN_RADIUS-10,r=Math.floor(n/(1.75*this.VISUALIZER_LINE_WIDTH));this.visualizerLeft=new Array(r),this.visualizerRight=new Array(r),this.lineMaterial=new io({color:this.options.barColor});for(let i=0;i<r;i++){const e=new il(this.VISUALIZER_LINE_WIDTH,t),n=new il(this.VISUALIZER_LINE_WIDTH,t);this.visualizerLeft[i]=new No(e,this.lineMaterial),this.visualizerRight[i]=new No(n,this.lineMaterial),this.visualizerLeft[i].position.set(2*-this.SUN_RADIUS-1.25*this.VISUALIZER_LINE_WIDTH-1.75*this.VISUALIZER_LINE_WIDTH*(r-1-i),50,-250),this.visualizerRight[i].position.set(2*this.SUN_RADIUS+1.25*this.VISUALIZER_LINE_WIDTH+1.75*this.VISUALIZER_LINE_WIDTH*(r-1-i),50,-250),this.scene.add(this.visualizerLeft[i]),this.scene.add(this.visualizerRight[i])}this.directionalLight=new xp(16777215,.9),this.directionalLight.position.set(0,10,25),this.directionalLight.target.position.set(-5,0,0),this.scene.add(this.directionalLight),this.scene.add(this.directionalLight.target),this.renderer=new Oh({canvas:this.canvas,alpha:!0}),this.renderer.setClearColor(0,0),this.renderer.setSize(this.sizes.width,this.sizes.height),this.composer=new class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:n=!1,multisampling:r=0,frameBufferType:i}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,n,i,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new my,this.depthTexture=null,this.passes=[],this.timer=new class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return"undefined"!=typeof document&&void 0!==document.hidden&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return.001*this.delta}getFixedDelta(){return.001*this.fixedDelta}setFixedDelta(e){return this.fixedDelta=1e3*e,this}getElapsed(){return.001*this.elapsed}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=void 0!==e?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,n=this.multisampling;n>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,null!==e){const t=e.getSize(new gs),n=e.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;1009===r&&3001===e.outputEncoding&&(this.inputBuffer.texture.encoding=3001,this.outputBuffer.texture.encoding=3001,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const i of this.passes)i.initialize(e,n,r)}}replaceRenderer(e,t=!0){const n=this.renderer,r=n.domElement.parentNode;return this.setRenderer(e),t&&null!==r&&(r.removeChild(n.domElement),r.appendChild(e.domElement)),n}createDepthTexture(){const e=this.depthTexture=new Ch;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=1027,e.type=1020):e.type=1014,e}deleteDepthTexture(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,n,r){const i=this.renderer,s=null===i?new gs:i.getDrawingBufferSize(new gs),a={minFilter:1006,magFilter:1006,stencilBuffer:t,depthBuffer:e,type:n};let o;return r>0?(o=Number("144".replace(/\D+/g,""))<138?new Jp(s.width,s.height,a):new Fs(s.width,s.height,a),o.ignoreDepthForMultisampleCopy=!1,o.samples=r):o=new Fs(s.width,s.height,a),1009===n&&null!==i&&3001===i.outputEncoding&&(o.texture.encoding=3001),o.texture.name="EffectComposer.Buffer",o.texture.generateMipmaps=!1,o}addPass(e,t){const n=this.passes,r=this.renderer,i=r.getDrawingBufferSize(new gs),s=r.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(e.setRenderer(r),e.setSize(i.width,i.height),e.initialize(r,s,a),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==t?n.splice(t,0,e):n.push(e),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){const t=this.createDepthTexture();for(e of n)e.setDepthTexture(t)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,n=t.indexOf(e);if(-1!==n&&t.splice(n,1).length>0){if(null!==this.depthTexture){const n=(e,t)=>e||t.needsDepthTexture;t.reduce(n,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,n=this.copyPass;let r,i,s,a=this.inputBuffer,o=this.outputBuffer,l=!1;void 0===e&&(e=this.timer.update().getDelta());for(const c of this.passes)c.enabled&&(c.render(t,a,o,e,l),c.needsSwap&&(l&&(n.renderToScreen=c.renderToScreen,r=t.getContext(),i=t.state.buffers.stencil,i.setFunc(r.NOTEQUAL,1,4294967295),n.render(t,a,o,e,l),i.setFunc(r.EQUAL,1,4294967295)),s=a,a=o,o=s),c instanceof Cy?l=!0:c instanceof gy&&(l=!1))}setSize(e,t,n){const r=this.renderer;if(void 0===e||void 0===t){const n=r.getSize(new gs);e=n.width,t=n.height}r.setSize(e,t,n);const i=r.getDrawingBufferSize(new gs);this.inputBuffer.setSize(i.width,i.height),this.outputBuffer.setSize(i.width,i.height);for(const s of this.passes)s.setSize(i.width,i.height)}reset(){const e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(const e of this.passes)e.dispose();this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}}(this.renderer),this.composer.addPass(new wy(this.scene,this.camera)),this.composer.addPass(new Ey(this.camera,new Dy({luminanceThreshold:.7}))),this.renderer.render(this.scene,this.camera)}animateThree(){this.analyserLFNode.getByteTimeDomainData(this.dataArray);const e=(Math.max(...this.dataArray)-128)/128;this.sun.scale.x=Math.max(this.sun.scale.x-.025,1+e),this.sun.scale.y=Math.max(this.sun.scale.x-.025,1+e),this.analyserLNode.getByteFrequencyData(this.dataArray);for(let t=0;t<this.visualizerLeft.length;t++){const e=this.visualizerLeft[t],n=Math.floor(this.dataArray.length/this.visualizerLeft.length);let r=0;for(let s=0;s<n;s++)r+=this.dataArray[t*n+s];const i=r/n;e.scale.setY(i/255)}this.analyserRNode.getByteFrequencyData(this.dataArray);for(let t=0;t<this.visualizerRight.length;t++){const e=this.visualizerRight[t],n=Math.floor(this.dataArray.length/this.visualizerRight.length);let r=0;for(let s=0;s<n;s++)r+=this.dataArray[t*n+s];const i=r/n;e.scale.setY(i/255)}if("suspended"!=this.audioCtx.state&&void 0!==this.sources&&this.tick++,this.tick%(60/this.TERRAIN_GENERATION_SPEED)==0){for(let t=0;t<this.TERRAIN_SIZE;t++)for(let e=0;e<this.TERRAIN_SIZE;e++){const n=(this.TERRAIN_SIZE-e)/this.TERRAIN_SIZE*75*(this.noise2d(t/this.TERRAIN_SIZE*4,(e-Math.floor(this.tick/(60/this.TERRAIN_GENERATION_SPEED)))/this.TERRAIN_SIZE*4)+1)/2;this.terrain.geometry.attributes.position.setZ(e*this.TERRAIN_SIZE+t,n),this.terrain.geometry.attributes.position.needsUpdate=!0}this.terrain.material.color.setHSL(this.tick/1200%1,1,.5);const e=this.terrain.material.color;this.canvas.style.background=`linear-gradient(0deg, rgba(10, 10, 10,1) 0%, rgba(${255-255*e.r},${255-255*e.g},${255-255*e.b},1) 100%)`}this.composer.render(this.clock.getDelta())}resize(){}destory(){this.sizes=null,this.canvas=null,this.scene=null,this.camera=null,this.renderer=null,this.noise2d=null,this.tick=null,this.clock=null,this.sources&&this.sources.forEach((e=>e.stop(0))),this.sources=null,this.audioCtx=null,this.gainNode=null,this.splitterNode=null,this.mergerNode=null,this.analyserLNode=null,this.analyserRNode=null,this.filterLFNode=null,this.analyserLFNode=null,this.dataArray=null,this.loading=!1,this.options=null,this.terrainGeometry=null,this.terrainMaterial=null,this.terrain=null,this.sunGeometry=null,this.sunMaterial=null,this.sun=null,this.lineMaterial=null,this.composer=null,this.terrain=null,this.visualizerLeft=[],this.visualizerRight=[]}}const Iy={class:"container"},Ny=Wi({__name:"index",setup(e){let t,n;const r=ft(!1),i=ft(!1),s=ft(null);async function a(){r.value||(r.value=!0,t.initializeAudio(),await t.getMusic("//images.cccatmint.fun/music/test-music.mp3"),r.value=!1,i.value=!0,o())}function o(){n=requestAnimationFrame(o),null==t||t.animateThree()}return Cn((()=>{t=new ky(s.value,{}),t.initializeThree()})),On((()=>{t.destory(),t=null,window.cancelAnimationFrame(n)})),(e,t)=>(Or(),Ir("div",Iy,[i.value?qr("",!0):(Or(),Ir("div",{key:0,class:"play-btn",onClickOnce:a},h(r.value?"...":"▶️ Play"),33)),jr("canvas",{class:"webgl",ref_key:"webgl",ref:s},null,512)]))}},[["__scopeId","data-v-619b8a00"]]),Fy=Object.freeze(Object.defineProperty({__proto__:null,default:Ny},Symbol.toStringTag,{value:"Module"}));let Uy,By,Hy,Gy,jy,Vy,Wy,Xy,qy,Yy,Zy,Ky,Jy,Qy,$y,eb,tb,nb,rb,ib,sb,ab;const ob={width:0,height:0},lb=new ResizeObserver((e=>{ob.height=e[0].target.height,ob.width=e[0].target.width}));const cb={class:"container"},hb=Wi({__name:"index",setup(e){const t=ft(null);return Cn((()=>{!function(e){lb.observe(e),ob.height=e.clientHeight,ob.width=e.clientWidth,Uy=e,By=new Dh;const t=new Wo(75,ob.width/ob.height,.1,50);By.add(t),t.position.set(3,1.6,-6),Hy=new tf(t,Uy),Hy.enableDamping=!0,Hy.enabled=!0,Hy.update();const n=new Oh({canvas:Uy,antialias:!0});n.setSize(ob.width,ob.height),n.setPixelRatio(Math.min(window.devicePixelRatio,2)),Xy=new Eh,By.add(Xy),Gy=new Td({color:9378833,roughness:.8}),jy=new Td({color:2511891,roughness:.8}),Vy=new Td({color:16777215,roughness:.8}),Wy=new Td({color:13807720,emissive:16777215}),Gy.side=2,jy.side=2,Vy.side=2,Wy.side=2,tb=new il(4,6),nb=new il(4,4),rb=new Uo(1.5,3,1.5),ib=new Uo(1.5,1.5,1.5),sb=new il(1,1),qy=new No(tb,Gy),Yy=new No(tb,jy),Zy=new No(nb,Vy),Ky=new No(tb,Vy),Jy=new No(nb,Vy),Qy=new No(rb,Vy),$y=new No(ib,Vy),eb=new No(sb,Wy),qy.rotation.y=.5*Math.PI,qy.position.setX(2),Yy.rotation.y=.5*Math.PI,Yy.position.setX(-2),Zy.rotation.x=.5*Math.PI,Zy.position.setY(3),Ky.position.setZ(2),Jy.rotation.x=.5*Math.PI,Jy.position.setY(-3),Qy.rotation.y=Math.PI/12,Qy.position.set(.5,-1.5,.8),$y.rotation.y=-Math.PI/24,$y.position.set(-1,-2.25,-.8),eb.rotation.x=.5*Math.PI,eb.position.setY(2.999),Xy.add(qy,Yy,Zy,Ky,Jy,Qy,$y,eb),ab=new yp(16777215,.1),By.add(ab);const r=new vp(13807720,1,10);r.position.set(0,2.8,0),By.add(r),r.castShadow=!0,r.shadow.mapSize.set(1024,1024),Qy.castShadow=!0,$y.castShadow=!0,qy.receiveShadow=!0,Yy.receiveShadow=!0,Zy.receiveShadow=!0,Ky.receiveShadow=!0,Jy.receiveShadow=!0,n.shadowMap.enabled=!0,n.shadowMap.type=1,function e(){Hy.update(),n.render(By,t),requestAnimationFrame(e)}(),t.lookAt(Xy.position),n.render(By,t)}(t.value)})),On((()=>{})),(e,n)=>(Or(),Ir("div",cb,[jr("canvas",{class:"webgl",ref_key:"webgl",ref:t},null,512)]))}},[["__scopeId","data-v-b9905ae0"]]),ub=Object.freeze(Object.defineProperty({__proto__:null,default:hb},Symbol.toStringTag,{value:"Module"}));let db=null,pb=null,fb=null,mb=null,gb=null;const vb={width:500,height:250};!function(){fb=new Dh,db=new Oh({antialias:!0}),db.setSize(vb.width,vb.height),pb=new Wo(75,vb.width/vb.height,.1,500),pb.position.set(0,0,-2);const e=new No(new Uo(1,1,1),new Td({color:13421772}));fb.add(e),mb=new yp(16777215,1),fb.add(mb),gb=new dp(16711935,2,50),gb.position.set(-3,3,3),fb.add(gb);const t=new tf(pb,db.domElement);t.enableDamping=!0,t.enabled=!0,t.update(),fb.add(new Zp(5)),db.render(fb,pb);const n=new Sp;!function r(){const i=n.getElapsedTime();e.rotation.y=Math.PI*i*.5,t.update(),db.render(fb,pb),requestAnimationFrame(r)}()}();const _b={class:"container"},xb=Wi({__name:"index",setup(e){const t=ft(null);function n(){var e;e=t.value,vb.height=e.clientHeight,vb.width=e.clientWidth,pb.aspect=vb.width/vb.height,pb.updateProjectionMatrix(),db.setSize(vb.width,vb.height),db.render(fb,pb)}return Cn((()=>{t.value.append(db.domElement),n(),window.addEventListener("resize",n)})),On((()=>{window.removeEventListener("resize",n)})),(e,n)=>(Or(),Ir("div",_b,[jr("div",{class:"webgl",ref_key:"webgl",ref:t},null,512)]))}},[["__scopeId","data-v-c3ee359e"]]),yb=Object.freeze(Object.defineProperty({__proto__:null,default:xb},Symbol.toStringTag,{value:"Module"}));class bb{constructor(e){this.container=e,this.width=e.offsetWidth,this.height=e.offsetHeight,this.model=null,this.actions={},this.mixer=null,this.guiParams={cubeTextureName:"01"},this.init()}init(){this.scene=new Dh,this.scene.background=new Rs(0),this.scene.fog=new zh(14737632,20,100),this.camera=new Wo(75,this.width/this.height,.1,5e3),this.camera.lookAt(new Gs(0,0,0)),this.camera.position.set(-2.3,4.5,6.8),this.renderer||(this.renderer=new Oh),this.renderer.outputEncoding=3001,this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=1,this.renderer.setClearColor(16777215,0),this.renderer.setSize(this.width,this.height),this.container.appendChild(this.renderer.domElement),this.renderer.render(this.scene,this.camera),this.clock=new Sp,this.hemiLight=new ap(16777215,4473924),this.hemiLight.position.set(0,20,0),this.scene.add(this.hemiLight),this.dirLight=new xp(16777215),this.dirLight.position.set(0,20,10),this.scene.add(this.dirLight),this.initControls(),this.setResize(),this.showFPS(),this.createGUI(["01","02"]),this.animate()}initControls(){this.controls=new tf(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.enabled=!0,this.controls.update()}setResize(){this.sizeObserver=new ResizeObserver((e=>{this.height=e[0].contentRect.height,this.width=e[0].contentRect.width,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height),this.renderer.render(this.scene,this.camera)})),this.sizeObserver.observe(this.container)}createGUI(e){const t=e=>(this.cubeTextureLoader||(this.cubeTextureLoader=new rp),this.cubeTextureLoader.setPath(`/textures/cubeMaps/${e}/`).load(["px.png","nx.png","py.png","ny.png","pz.png","nz.png"]));this.cubeTextures={},this.gui=new Dg.GUI;const n=this.gui.addFolder("Select cubeTextures");n.open(),n.add(this.guiParams,"cubeTextureName").options(e).onChange((e=>{this.cubeTextures[e]||(this.cubeTextures[e]=t(e)),this.scene.background=this.cubeTextures[e]})),this.scene.background=t(this.guiParams.cubeTextureName)}showFPS(){this.stats=new Ug,this.container.appendChild(this.stats.dom),this.stats.dom.className="stats-class",this.stats.dom.style.position="absolute",this.stats.dom.style.left="150px",this.stats.dom.style.top="20px"}destoryFPS(){this.stats&&(this.stats.dom.remove(),this.stats=null)}animate(){this.long=requestAnimationFrame(this.animate.bind(this)),this.renderer.render(this.scene,this.camera),this.stats.update()}destory(){this.sizeObserver&&(this.sizeObserver.disconnect(this.container),this.sizeObserver=null),window.cancelAnimationFrame(this.long),this.renderer&&(this.renderer.forceContextLoss(),this.renderer.dispose(),this.renderer.domElement=null,this.renderer=null),this.clock=null,this.destoryFPS(),this.gui&&this.gui.destroy()}debug(){this.scene.add(new Zp(100))}}const wb=Wi({__name:"index",setup(e){const t=ft(null);let n=null;Cn((()=>{n=new bb(t.value)})),On((()=>{n&&n.destory()}));const r=`\n// cubeTextureLoader > https://threejs.org/docs/index.html?q=cube#api/zh/loaders/CubeTextureLoader\n/**\n * Tools:\n *  https://polyhaven.com/ 提供免费的HDRI 文件\n *  https://matheowis.github.io/HDRI-to-CubeMap/ 将HDRI 切割成6面图片\n * \n */\nimport * as THREE from 'three'\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\nimport Stats from 'stats.js'\nimport dat from 'dat.gui'\nexport default class CubeTextureDemo {\n    constructor(container) {\n        this.container = container\n        this.width = container.offsetWidth\n        this.height = container.offsetHeight\n        this.model = null\n        this.actions = {} // 所有的动画都将储存在此\n        this.mixer = null // 动画混合器\n\n        this.guiParams = {\n            cubeTextureName: '01'\n        }\n\n        this.init()\n    }\n\n    init() {\n        // Scene\n        this.scene = new THREE.Scene()\n        this.scene.background = new THREE.Color(0x000000)\n        this.scene.fog = new THREE.Fog(0xe0e0e0, 20, 100)\n        // Camera\n        this.camera = new THREE.PerspectiveCamera(75, this.width / this.height, 0.1, 5000)\n        this.camera.lookAt(new THREE.Vector3(0, 0, 0))\n        this.camera.position.set(-2.3, 4.5, 6.8)\n\n        // Renderer\n        if (!this.renderer) {\n            this.renderer = new THREE.WebGLRenderer()\n        }\n        this.renderer.outputEncoding = THREE.sRGBEncoding\n        this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\n        this.renderer.shadowMap.enabled = true\n        this.renderer.shadowMap.type = THREE.PCFShadowMap\n        this.renderer.setClearColor(0xFFFFFF, 0)\n        this.renderer.setSize(this.width, this.height)\n        this.container.appendChild(this.renderer.domElement)\n        this.renderer.render(this.scene, this.camera)\n        // Clock\n        this.clock = new THREE.Clock()\n\n        // Light\n        this.hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444)\n        this.hemiLight.position.set(0, 20, 0)\n        this.scene.add(this.hemiLight)\n        this.dirLight = new THREE.DirectionalLight(0xffffff);\n        this.dirLight.position.set(0, 20, 10);\n        this.scene.add(this.dirLight)\n\n        this.initControls()\n        this.setResize()\n        this.showFPS()\n        this.createGUI(['01','02'])\n        // this.debug()\n        this.animate()\n    }\n\n    // Controls\n    initControls() {\n        // OrbitControlsControl\n        this.controls = new OrbitControls(this.camera, this.renderer.domElement)\n        // this.controls.addEventListener('change', () => {\n        //     this.renderer.render(this.scene, this.camera)\n        // }) // use if no animation\n        this.controls.enableDamping = true // 阻尼器\n        this.controls.enabled = true // 控制器是否启用\n        this.controls.update()\n    }\n\n    setResize() {\n        this.sizeObserver = new ResizeObserver(entries => {\n            this.height = entries[0].contentRect.height\n            this.width = entries[0].contentRect.width\n            // update camera\n            this.camera.aspect = this.width / this.height\n            this.camera.updateProjectionMatrix()\n            // update renderer\n            this.renderer.setSize(this.width, this.height)\n            this.renderer.render(this.scene, this.camera)\n        })\n        this.sizeObserver.observe(this.container)\n    }\n\n    createGUI(nameList) {\n        const loadCubeTexture = name => {\n            if(!this.cubeTextureLoader) this.cubeTextureLoader = new THREE.CubeTextureLoader()\n            return this.cubeTextureLoader\n                .setPath(\`/textures/cubeMaps/${name}/\`)\n                .load([\n                    'px.png',\n                    'nx.png',\n                    'py.png',\n                    'ny.png',\n                    'pz.png',\n                    'nz.png'\n                ])\n        }\n        this.cubeTextures = {} // all cubeTextures\n\n        this.gui = new dat.GUI()\n        const SelectCubeTexturesFolder = this.gui.addFolder('Select cubeTextures')\n        SelectCubeTexturesFolder.open()\n        SelectCubeTexturesFolder.add(this.guiParams, 'cubeTextureName').options(nameList).onChange(name => {\n            if(!this.cubeTextures[name]) {\n                this.cubeTextures[name] = loadCubeTexture(name)\n            }\n            this.scene.background = this.cubeTextures[name]\n        })\n\n        this.scene.background = loadCubeTexture(this.guiParams.cubeTextureName)\n    }\n\n    showFPS() {\n        this.stats = new Stats()\n        this.container.appendChild(this.stats.dom)\n        this.stats.dom.style.position = 'absolute'\n        this.stats.dom.style.left = '150px'\n        this.stats.dom.style.top = '20px'\n    }\n\n    destoryFPS() {\n        if (this.stats) {\n            this.stats.dom.remove()\n            this.stats = null\n        }\n    }\n\n    animate() {\n        // const deltaTime = this.clock.getDelta()\n\n        this.long = requestAnimationFrame(this.animate.bind(this))\n        this.renderer.render(this.scene, this.camera)\n        this.stats.update()\n    }\n\n    destory() {\n        if (this.sizeObserver) {\n            this.sizeObserver.disconnect(this.container)\n            this.sizeObserver = null\n        }\n        window.cancelAnimationFrame(this.long)\n        if (this.renderer) {\n            this.renderer.forceContextLoss()\n            this.renderer.dispose()\n            this.renderer.domElement = null\n            this.renderer = null\n        }\n        this.clock = null\n        this.destoryFPS()\n        if (this.gui) this.gui.destroy()\n    }\n\n    debug() {\n        this.scene.add(new THREE.AxesHelper(100))\n    }\n}\n`;return(e,n)=>{const i=Un("code-bin");return Or(),Ir(Tr,null,[jr("div",{class:"container",ref_key:"container",ref:t},null,512),Vr(i,{code:r})],64)}}},[["__scopeId","data-v-94f416fc"]]),Sb=Object.freeze(Object.defineProperty({__proto__:null,default:wb},Symbol.toStringTag,{value:"Module"})),Mb=Xr(" Demo111111111 "),Eb=Wi({__name:"index",setup(e){const t=ft(null);return Cn((()=>{})),(e,n)=>(Or(),Ir(Tr,null,[Mb,jr("div",{ref_key:"webgl",ref:t},null,512)],64))}},[["__scopeId","data-v-2d6ebec3"]]),Tb=Object.freeze(Object.defineProperty({__proto__:null,default:Eb},Symbol.toStringTag,{value:"Module"})),Ab={width:window.innerWidth,height:window.innerHeight},Cb=new Dh,Pb=(new ip).load("src/assets/textures/star.png"),Rb=new Wo(75,Ab.width/Ab.height,.1,50);Rb.position.set(0,3,-6);const Lb=new Oh;Lb.setSize(Ab.width,Ab.height),Lb.setClearColor(2500663),Lb.setPixelRatio(Math.min(window.devicePixelRatio,2));const Ob=new tf(Rb,Lb.domElement);Ob.enableDamping=!0,Ob.enabled=!0,Ob.update();const zb=new No(new Uo(1,1,1),new io({color:12039558}));Cb.add(zb);const Db=new xo,kb=new Float32Array(3e4),Ib=new Float32Array(3e4);for(let OO=0;OO<3e4;OO++)kb[OO]=5*(Math.random()-.5),Ib[OO]=Math.random();Db.setAttribute("position",new oo(kb,3)),Db.setAttribute("color",new oo(Ib,3));const Nb=new wu({size:.1,sizeAttenuation:!0,transparent:!0,alphaMap:Pb,depthWrite:!1,blending:2,vertexColors:!0}),Fb=new Au(Db,Nb);Cb.add(Fb);const Ub=new yp(12178943,.12);Cb.add(Ub),Lb.render(Cb,Rb),window.addEventListener("resize",(()=>{Ab.width=window.innerWidth,Ab.height=window.innerHeight,Rb.aspect=Ab.width/Ab.height,Rb.updateProjectionMatrix(),Lb.setSize(Ab.width,Ab.height),Lb.render(Cb,Rb)})),function e(){Ob.update(),Lb.render(Cb,Rb),requestAnimationFrame(e)}();const Bb=Xr(" Demo2 "),Hb={__name:"index",setup(e){const t=ft(null);return Cn((()=>{t.value.appendChild(Lb.domElement)})),(e,n)=>(Or(),Ir(Tr,null,[Bb,jr("div",{ref_key:"webgl",ref:t},null,512)],64))}},Gb=Object.freeze(Object.defineProperty({__proto__:null,default:Hb},Symbol.toStringTag,{value:"Module"}));class jb{constructor(e){this.POINTS_NUM=5e4,this.POINT_SIZE=.03,this.INSIDE_COLOR=16736304,this.OUTSIDE_COLOR=1784196,this.MIXED_COLOR=65280,this.RADIUS=12,this.BRANCHES_NUM=3,this.SPIN=1.2,this.RANDOMNESS=.6,this.RANDOMNESS_POWER=6,this.ROTATESPEED=.1,this.long=null,this.container=e,this.width=e.offsetWidth,this.height=e.offsetHeight,this.stats=null,this.points=null,this.clock=null,this.init()}init(){this.scene=new Dh,this.scene.background=new Rs(0),this.camera=new Wo(75,this.width/this.height,.1,5e3),this.camera.position.set(0,3,-6);const e=new yp(16777215,1);this.scene.add(e),this.renderer||(this.renderer=new Oh),this.renderer.outputEncoding=3001,this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.setClearColor(16777215,0),this.renderer.setSize(this.width,this.height),this.container.appendChild(this.renderer.domElement),this.renderer.render(this.scene,this.camera),this.controls=new tf(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.enabled=!0,this.controls.update(),this.clock=new Sp,this.showFPS(),this.generatorGalaxy(),this.setResize(),this.renderer.render(this.scene,this.camera),this.gui(),this.animate()}gui(){this.gui=new Dg.GUI,this.gui.add(this,"POINTS_NUM").min(0).max(5e5).step(1).onFinishChange((()=>this.generatorGalaxy())),this.gui.add(this,"POINT_SIZE").min(.02).max(1).step(1e-4).onFinishChange((()=>this.generatorGalaxy())),this.gui.addColor(this,"INSIDE_COLOR").onFinishChange((()=>this.generatorGalaxy())),this.gui.addColor(this,"OUTSIDE_COLOR").onFinishChange((()=>this.generatorGalaxy())),this.gui.add(this,"RADIUS").min(.1).max(100).step(.01).onFinishChange((()=>this.generatorGalaxy())),this.gui.add(this,"BRANCHES_NUM").min(1).max(10).step(1).onFinishChange((()=>this.generatorGalaxy())),this.gui.add(this,"SPIN").min(.1).max(10).step(.01).onFinishChange((()=>this.generatorGalaxy())),this.gui.add(this,"RANDOMNESS").min(-10).max(10).step(.01).onFinishChange((()=>this.generatorGalaxy())),this.gui.add(this,"RANDOMNESS_POWER").min(-10).max(10).step(.01).onFinishChange((()=>this.generatorGalaxy())),this.gui.add(this,"ROTATESPEED").min(.01).max(10).step(.001).onFinishChange((()=>this.generatorGalaxy()))}removeGui(){this.gui.destroy()}generatorGalaxy(){var e,t,n;this.points&&(null==(e=this.geometry)||e.dispose(),null==(t=this.material)||t.dispose(),null==(n=this.scene)||n.remove(this.points)),this.geometry=new xo;const r=new Float32Array(3*this.POINTS_NUM),i=new Float32Array(3*this.POINTS_NUM),s=new Rs(this.INSIDE_COLOR),a=new Rs(this.OUTSIDE_COLOR),o=new Rs(this.MIXED_COLOR);for(let l=0;l<this.POINTS_NUM;l++){const e=3*l,t=this.RADIUS*Math.random(),n=l%this.BRANCHES_NUM/this.BRANCHES_NUM*Math.PI*2,c=t*this.SPIN,h=Math.random()**this.RANDOMNESS_POWER*(Math.random()<.5?1:-1)*t*this.RANDOMNESS,u=Math.random()**this.RANDOMNESS_POWER*(Math.random()<.5?1:-1)*t*this.RANDOMNESS,d=Math.random()**this.RANDOMNESS_POWER*(Math.random()<.5?1:-1)*t*this.RANDOMNESS;r[e]=Math.cos(n+c)*t+h,r[e+1]=0+u,r[e+2]=Math.sin(n+c)*t+d,o.lerpColors(s,a,t/this.RADIUS),i[e]=o.r,i[e+1]=o.g,i[e+2]=o.b}this.geometry.setAttribute("position",new oo(r,3)),this.geometry.setAttribute("color",new oo(i,3)),this.material=new wu({size:this.POINT_SIZE,sizeAttenuation:!0,depthWrite:!1,blending:2,vertexColors:!0}),this.points=new Au(this.geometry,this.material),this.scene.add(this.points)}setResize(){this.sizeObserver=new ResizeObserver((e=>{this.height=e[0].contentRect.height,this.width=e[0].contentRect.width,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height),this.renderer.render(this.scene,this.camera)})),this.sizeObserver.observe(this.container)}showFPS(){this.stats=new Ug,this.container.appendChild(this.stats.dom),this.stats.dom.className="stats-class",this.stats.dom.style.position="absolute",this.stats.dom.style.left="150px",this.stats.dom.style.top="20px"}destoryFPS(){this.stats&&(this.stats.dom.remove(),this.stats=null)}animate(){const e=this.clock.getDelta();this.points.rotation.y+=Math.PI*e*this.ROTATESPEED,this.stats.update(),this.controls.update(),this.renderer.render(this.scene,this.camera),this.long=requestAnimationFrame(this.animate.bind(this))}destory(){this.sizeObserver&&(this.sizeObserver.disconnect(this.container),this.sizeObserver=null),window.cancelAnimationFrame(this.long),this.renderer&&(this.geometry.dispose(),this.material.dispose(),this.scene.remove(this.points),this.renderer.forceContextLoss(),this.renderer.dispose(),this.renderer.domElement=null,this.renderer=null),this.clock=null,this.removeGui()}}const Vb=Wi({__name:"index",setup(e){let t=null;const n=ft(null);return Cn((()=>{t=new jb(n.value)})),On((()=>{t.destory()})),(e,t)=>{const r=Un("code-bin");return Or(),Ir(Tr,null,[jr("div",{class:"container",ref_key:"container",ref:n},null,512),Vr(r,{code:{"three_galaxy.js":vt("import * as THREE from 'three'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\nimport dat from 'dat.gui'\r\nimport Stats from 'stats.js'\r\n\r\nclass Galaxy {\r\n\r\n\r\n    constructor(container) {\r\n        this.POINTS_NUM = 50000\r\n        this.POINT_SIZE = 0.03\r\n        this.INSIDE_COLOR = 0xff6030\r\n        this.OUTSIDE_COLOR = 0x1b3984\r\n        this.MIXED_COLOR = 0x00FF00\r\n        this.RADIUS = 12\r\n        this.BRANCHES_NUM = 3\r\n        this.SPIN = 1.2\r\n        this.RANDOMNESS = 0.6\r\n        this.RANDOMNESS_POWER = 6\r\n        this.ROTATESPEED = 0.1\r\n\r\n        this.long = null\r\n        this.container = container\r\n        this.width = container.offsetWidth\r\n        this.height = container.offsetHeight\r\n\r\n        this.stats = null // fps\r\n        this.points = null // galaxy\r\n        this.clock = null // clock\r\n        this.init()\r\n    }\r\n    init() {\r\n        // Scene\r\n        this.scene = new THREE.Scene()\r\n        this.scene.background = new THREE.Color(0x000000)\r\n        // Camera\r\n        this.camera = new THREE.PerspectiveCamera(75, this.width / this.height, 0.1, 5000)\r\n        this.camera.position.set(0, 3, -6)\r\n        // AmbientLight\r\n        const ambientLight = new THREE.AmbientLight(0xFFFFFF, 1)\r\n        this.scene.add(ambientLight)\r\n        // Renderer\r\n        if (!this.renderer) {\r\n            this.renderer = new THREE.WebGLRenderer()\r\n        }\r\n        this.renderer.outputEncoding = THREE.sRGBEncoding\r\n        this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\r\n        this.renderer.setClearColor(0xFFFFFF, 0)\r\n        this.renderer.setSize(this.width, this.height)\r\n        this.container.appendChild(this.renderer.domElement)\r\n        this.renderer.render(this.scene, this.camera)\r\n        // Control\r\n        this.controls = new OrbitControls(this.camera, this.renderer.domElement)\r\n        this.controls.enableDamping = true // 阻尼器\r\n        this.controls.enabled = true // 控制器是否启用\r\n        this.controls.update()\r\n\r\n        // Clock\r\n        this.clock = new THREE.Clock()\r\n\r\n        // FPS\r\n        this.showFPS()\r\n\r\n        this.generatorGalaxy()\r\n\r\n        this.setResize()\r\n\r\n        this.renderer.render(this.scene, this.camera)\r\n\r\n        this.gui()\r\n\r\n        this.animate()\r\n\r\n    }\r\n    gui() {\r\n        // Debug\r\n        this.gui = new dat.GUI()\r\n        this.gui.add(this, 'POINTS_NUM').min(0).max(500000).step(1).onFinishChange(() => this.generatorGalaxy())\r\n        this.gui.add(this, 'POINT_SIZE').min(0.02).max(1).step(0.0001).onFinishChange(() => this.generatorGalaxy())\r\n        this.gui.addColor(this, 'INSIDE_COLOR').onFinishChange(() => this.generatorGalaxy())\r\n        this.gui.addColor(this, 'OUTSIDE_COLOR').onFinishChange(() => this.generatorGalaxy())\r\n        this.gui.add(this, 'RADIUS').min(0.1).max(100).step(0.01).onFinishChange(() => this.generatorGalaxy())\r\n        this.gui.add(this, 'BRANCHES_NUM').min(1).max(10).step(1).onFinishChange(() => this.generatorGalaxy())\r\n        this.gui.add(this, 'SPIN').min(0.1).max(10).step(0.01).onFinishChange(() => this.generatorGalaxy())\r\n        this.gui.add(this, 'RANDOMNESS').min(-10).max(10).step(0.01).onFinishChange(() => this.generatorGalaxy())\r\n        this.gui.add(this, 'RANDOMNESS_POWER').min(-10).max(10).step(0.01).onFinishChange(() => this.generatorGalaxy())\r\n        this.gui.add(this, 'ROTATESPEED').min(0.01).max(10).step(0.001).onFinishChange(() => this.generatorGalaxy())\r\n    }\r\n\r\n    removeGui() {\r\n        this.gui.destroy()\r\n    }\r\n\r\n    generatorGalaxy() {\r\n        if (this.points) {\r\n            this.geometry?.dispose()\r\n            this.material?.dispose()\r\n            this.scene?.remove(this.points)\r\n        }\r\n\r\n        this.geometry = new THREE.BufferGeometry()\r\n        const position = new Float32Array(this.POINTS_NUM * 3)\r\n        const colors = new Float32Array(this.POINTS_NUM * 3)\r\n        const insideColor = new THREE.Color(this.INSIDE_COLOR)\r\n        const outsideColor = new THREE.Color(this.OUTSIDE_COLOR)\r\n        const mixedColor = new THREE.Color(this.MIXED_COLOR)\r\n\r\n        for (let i = 0; i < this.POINTS_NUM; i++) {\r\n            const i3 = i * 3\r\n            const radius = this.RADIUS * Math.random()\r\n            const branchesAngle = ((i % this.BRANCHES_NUM) / this.BRANCHES_NUM) * Math.PI * 2\r\n            const spinAngle = radius * this.SPIN // 偏转角\r\n\r\n            // 对粒子的随机分布扩散的工作 使用了一些数学函数\r\n            const randomX = Math.random() ** this.RANDOMNESS_POWER * (Math.random() < 0.5 ? 1 : -1) * radius * this.RANDOMNESS\r\n            const randomY = Math.random() ** this.RANDOMNESS_POWER * (Math.random() < 0.5 ? 1 : -1) * radius * this.RANDOMNESS\r\n            const randomZ = Math.random() ** this.RANDOMNESS_POWER * (Math.random() < 0.5 ? 1 : -1) * radius * this.RANDOMNESS\r\n            position[i3] = Math.cos(branchesAngle + spinAngle) * radius + randomX\r\n            position[i3 + 1] = 0 + randomY\r\n            position[i3 + 2] = Math.sin(branchesAngle + spinAngle) * radius + randomZ\r\n\r\n            // 粒子颜色渐变\r\n\r\n            mixedColor.lerpColors(insideColor, outsideColor, radius / this.RADIUS)\r\n            colors[i3] = mixedColor.r\r\n            colors[i3 + 1] = mixedColor.g\r\n            colors[i3 + 2] = mixedColor.b\r\n        }\r\n        this.geometry.setAttribute('position', new THREE.BufferAttribute(position, 3))\r\n        this.geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3))\r\n\r\n\r\n        this.material = new THREE.PointsMaterial({\r\n            size: this.POINT_SIZE,\r\n            sizeAttenuation: true,\r\n            depthWrite: false,\r\n            blending: THREE.AdditiveBlending,\r\n            vertexColors: true\r\n        })\r\n\r\n        this.points = new THREE.Points(this.geometry, this.material)\r\n        this.scene.add(this.points)\r\n    }\r\n\r\n    setResize() {\r\n        this.sizeObserver = new ResizeObserver(entries => {\r\n            this.height = entries[0].contentRect.height\r\n            this.width = entries[0].contentRect.width\r\n            // update camera\r\n            this.camera.aspect = this.width / this.height\r\n            this.camera.updateProjectionMatrix()\r\n            // update renderer\r\n            this.renderer.setSize(this.width, this.height)\r\n            this.renderer.render(this.scene, this.camera)\r\n        })\r\n        this.sizeObserver.observe(this.container)\r\n    }\r\n\r\n    showFPS() {\r\n        this.stats = new Stats()\r\n        this.container.appendChild(this.stats.dom)\r\n        this.stats.dom.className = 'stats-class'\r\n        this.stats.dom.style.position = 'absolute'\r\n        this.stats.dom.style.left = '150px'\r\n        this.stats.dom.style.top = '20px'\r\n    }\r\n    destoryFPS() {\r\n        if (this.stats) {\r\n            this.stats.dom.remove()\r\n            this.stats = null\r\n        }\r\n    }\r\n\r\n    animate() {\r\n        const deltaTime = this.clock.getDelta()\r\n\r\n        this.points.rotation.y += Math.PI * deltaTime * this.ROTATESPEED\r\n\r\n\r\n        this.stats.update()\r\n        this.controls.update()\r\n        this.renderer.render(this.scene, this.camera)\r\n        this.long = requestAnimationFrame(this.animate.bind(this))\r\n\r\n\r\n    }\r\n\r\n    destory() {\r\n        if (this.sizeObserver) {\r\n            this.sizeObserver.disconnect(this.container)\r\n            this.sizeObserver = null\r\n        }\r\n        window.cancelAnimationFrame(this.long)\r\n        if (this.renderer) {\r\n            this.geometry.dispose()\r\n            this.material.dispose()\r\n            this.scene.remove(this.points)\r\n            this.renderer.forceContextLoss()\r\n            this.renderer.dispose()\r\n            this.renderer.domElement = null\r\n            this.renderer = null\r\n\r\n        }\r\n        this.clock = null\r\n        this.removeGui()\r\n    }\r\n}\r\n\r\nexport default Galaxy")}},null,8,["code"])],64)}}},[["__scopeId","data-v-8c1193d7"]]),Wb=Object.freeze(Object.defineProperty({__proto__:null,default:Vb},Symbol.toStringTag,{value:"Module"})),Xb='uniform float uSize;\r\nattribute float aScale;\r\nattribute vec3 aRandomness;\r\nvarying vec3 vColor;\r\nuniform float uTime;\r\n\r\nvoid main() {\r\n    vec4 modelPosition = modelMatrix * vec4(position, 1.0);\r\n    // 旋转动画\r\n    float angle = atan(modelPosition.x, modelPosition.z); // 弧度\r\n    float distanceToCenter = length(modelPosition.xz);\r\n    float angleOffset = (1.0 / distanceToCenter) * uTime * 0.2; //  距离中心越近转得越快: "1.0 / distanceToCenter"\r\n    angle += angleOffset;\r\n    modelPosition.x = cos(angle) * distanceToCenter;\r\n    modelPosition.z = sin(angle) * distanceToCenter;\r\n    // 添加位置随机性\r\n    modelPosition.xyz += aRandomness;\r\n\r\n    vec4 modelViewPosition = viewMatrix * modelPosition;\r\n    vec4 projectedPosition = projectionMatrix * modelViewPosition;\r\n\r\n    gl_Position = projectedPosition;\r\n    gl_PointSize = uSize * aScale;\r\n    gl_PointSize *= (1.0 / -modelViewPosition.z); // 使星星越接近摄像机就表现得更大\r\n    vColor = color;\r\n}',qb="precision mediump float;\r\nvarying vec3 vColor;\r\n\r\nvoid main() {\r\n\r\n    // * 以下代码为将片元星星\r\n    // gl_PointCoord 点渲染模式对应点像素坐标 vec2 取值x: [0-1], y: [0-1]\r\n    float strength = distance(gl_PointCoord, vec2(0.5));\r\n    strength = 1.0 - strength;\r\n    strength = pow(strength, 5.0); // 模拟单个星星的发光强度，最中心为最亮，边缘暗\r\n\r\n    vec3 color = mix(vec3(0.0), vColor, strength); // 将颜色与发光强度混合\r\n    \r\n    gl_FragColor = vec4(color, 1.0);\r\n}";class Yb{constructor(e){this.container=e,this.width=e.offsetWidth,this.height=e.offsetHeight,this.guiParams={pointsNum:25e4,pointSize:12,branchiesNum:3,randomness:.5,randomnessPower:3,radius:5,spin:1.2,color1:15876368,color2:990159,speed:1},this.init(),this.initControls(),this.setResize(),this.showFPS(),this.generateGalaxy(),this.createGUI(),this.animate(),this.debug()}init(){this.scene=new Dh,this.scene.background=new Rs(0),this.camera=new Wo(75,this.width/this.height,.1,5e3),this.camera.lookAt(new Gs(0,0,0)),this.camera.position.set(.25,1.2,2),this.renderer||(this.renderer=new Oh),this.renderer.outputEncoding=3001,this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.setClearColor(16777215,0),this.renderer.setSize(this.width,this.height),this.container.appendChild(this.renderer.domElement),this.renderer.render(this.scene,this.camera),this.clock=new Sp}generateGalaxy(){var e,t,n;this.mesh&&(null==(e=this.meshGeometry)||e.dispose(),null==(t=this.meshMaterial)||t.dispose(),null==(n=this.scene)||n.remove(this.mesh)),this.meshGeometry=new xo;const r=new Float32Array(3*this.guiParams.pointsNum),i=new Float32Array(3*this.guiParams.pointsNum),s=new Float32Array(1*this.guiParams.pointsNum),a=new Float32Array(3*this.guiParams.pointsNum);for(let o=0;o<this.guiParams.pointsNum;o++){const e=3*o,t=this.guiParams.radius*Math.random(),n=o%this.guiParams.branchiesNum/this.guiParams.branchiesNum*Math.PI*2,l=t*this.guiParams.spin;r[e]=Math.cos(n+l)*t,r[e+1]=0,r[e+2]=Math.sin(n+l)*t;const c=Math.random()**this.guiParams.randomnessPower*(Math.random()<.5?1:-1)*t*this.guiParams.randomness,h=Math.random()**this.guiParams.randomnessPower*(Math.random()<.5?1:-1)*t*this.guiParams.randomness,u=Math.random()**this.guiParams.randomnessPower*(Math.random()<.5?1:-1)*t*this.guiParams.randomness;a[e+0]=c,a[e+1]=h,a[e+2]=u;const d=new Rs(16777215);d.lerpColors(new Rs(this.guiParams.color1),new Rs(this.guiParams.color2),t/this.guiParams.radius),i[e]=d.r,i[e+1]=d.g,i[e+2]=d.b,s[o]=Math.random()}this.meshGeometry.setAttribute("position",new oo(r,3)),this.meshGeometry.setAttribute("color",new oo(i,3)),this.meshGeometry.setAttribute("aRandomness",new oo(a,3)),this.meshGeometry.setAttribute("aScale",new oo(s,1)),this.meshMaterial=new jo({side:2,depthWrite:!1,blending:2,vertexColors:!0,vertexShader:Xb,fragmentShader:qb,uniforms:{uTime:{value:0},uSize:{value:this.guiParams.pointSize*this.renderer.getPixelRatio()}}}),this.mesh=new Au(this.meshGeometry,this.meshMaterial),this.scene.add(this.mesh)}initControls(){this.controls=new tf(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.enabled=!0,this.controls.update()}setResize(){this.sizeObserver=new ResizeObserver((e=>{this.height=e[0].contentRect.height,this.width=e[0].contentRect.width,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height),this.renderer.render(this.scene,this.camera)})),this.sizeObserver.observe(this.container)}createGUI(){this.gui=new Dg.GUI({width:400}),this.gui.add(this.guiParams,"pointsNum").min(0).max(1e6).step(1).onFinishChange((()=>this.generateGalaxy())),this.gui.add(this.guiParams,"branchiesNum").min(1).max(10).step(1).onFinishChange((()=>this.generateGalaxy())),this.gui.add(this.guiParams,"randomness").min(-10).max(10).step(.01).onFinishChange((()=>this.generateGalaxy())),this.gui.add(this.guiParams,"randomnessPower").min(-10).max(10).step(.01).onFinishChange((()=>this.generateGalaxy())),this.gui.add(this.guiParams,"radius").min(.1).max(100).step(.01).onFinishChange((()=>this.generateGalaxy())),this.gui.add(this.guiParams,"spin").min(.1).max(10).step(.01).onFinishChange((()=>this.generateGalaxy())),this.gui.addColor(this.guiParams,"color1").onFinishChange((()=>this.generateGalaxy())),this.gui.addColor(this.guiParams,"color2").onFinishChange((()=>this.generateGalaxy())),this.gui.add(this.guiParams,"pointSize").min(.001).max(100).step(.001).onFinishChange((()=>this.generateGalaxy())),this.gui.add(this.guiParams,"speed").min(0).max(5).step(.1).onFinishChange((()=>this.generateGalaxy()))}showFPS(){this.stats=new Ug,this.container.appendChild(this.stats.dom),this.stats.dom.className="stats-class",this.stats.dom.style.position="absolute",this.stats.dom.style.left="150px",this.stats.dom.style.top="20px"}destoryFPS(){this.stats&&(this.stats.dom.remove(),this.stats=null)}animate(){const e=this.clock.getElapsedTime();this.meshMaterial.uniforms.uTime.value=e*this.guiParams.speed,this.long=requestAnimationFrame(this.animate.bind(this)),this.renderer.render(this.scene,this.camera),this.stats.update()}destory(){this.sizeObserver&&(this.sizeObserver.disconnect(this.container),this.sizeObserver=null),window.cancelAnimationFrame(this.long),this.renderer&&(this.renderer.forceContextLoss(),this.renderer.dispose(),this.renderer.domElement=null,this.renderer=null),this.clock=null,this.destoryFPS(),this.gui&&this.gui.destroy()}debug(){}}const Zb=Wi({__name:"index",setup(e){const t=ft(null);let n=null;return Cn((()=>{n=new Yb(t.value)})),On((()=>{n&&n.destory()})),(e,n)=>{const r=Un("code-bin"),i=Un("md-bin");return Or(),Ir(Tr,null,[jr("div",{class:"container",ref_key:"container",ref:t},null,512),Vr(r,{code:{"three_demo.js":vt("import * as THREE from 'three'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\nimport Stats from 'stats.js'\r\nimport dat from 'dat.gui'\r\n\r\nimport vertexShader from './shaders/vertex.glsl?raw'\r\nimport fragmentShader from './shaders/fragment.glsl?raw'\r\n\r\nexport default class Demo {\r\n    constructor(container) {\r\n        this.container = container\r\n        this.width = container.offsetWidth\r\n        this.height = container.offsetHeight\r\n\r\n        this.guiParams = {\r\n            pointsNum: 250000,\r\n            pointSize: 12,\r\n            branchiesNum: 3,\r\n            randomness: 0.5,\r\n            randomnessPower: 3,\r\n            radius: 5,\r\n            spin: 1.2,\r\n            color1: 0xf24110,\r\n            color2: 0xf1bcf,\r\n            speed: 1\r\n        }\r\n\r\n        this.init()\r\n        this.initControls()\r\n        this.setResize()\r\n\r\n        this.showFPS()\r\n\r\n        this.generateGalaxy()\r\n        this.createGUI()\r\n\r\n        this.animate()\r\n        this.debug()\r\n\r\n    }\r\n\r\n    init() {\r\n        // Scene\r\n        this.scene = new THREE.Scene()\r\n        this.scene.background = new THREE.Color(0x000000)\r\n        // Camera\r\n        this.camera = new THREE.PerspectiveCamera(75, this.width / this.height, 0.1, 5000)\r\n        this.camera.lookAt(new THREE.Vector3(0, 0, 0))\r\n        this.camera.position.set(0.25, 1.2, 2.0)\r\n        // Renderer\r\n        if (!this.renderer) {\r\n            this.renderer = new THREE.WebGLRenderer()\r\n        }\r\n        this.renderer.outputEncoding = THREE.sRGBEncoding\r\n        this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\r\n        this.renderer.setClearColor(0xFFFFFF, 0)\r\n        this.renderer.setSize(this.width, this.height)\r\n        this.container.appendChild(this.renderer.domElement)\r\n        this.renderer.render(this.scene, this.camera)\r\n\r\n        // Clock\r\n        this.clock = new THREE.Clock()\r\n    }\r\n\r\n    generateGalaxy() {\r\n        // Geometry\r\n        if (this.mesh) {\r\n            this.meshGeometry?.dispose()\r\n            this.meshMaterial?.dispose()\r\n            this.scene?.remove(this.mesh)\r\n        }\r\n\r\n        this.meshGeometry = new THREE.BufferGeometry()\r\n        const position = new Float32Array(this.guiParams.pointsNum * 3)\r\n        const colors = new Float32Array(this.guiParams.pointsNum * 3)\r\n        const scales = new Float32Array(this.guiParams.pointsNum * 1)\r\n        const randomness = new Float32Array(this.guiParams.pointsNum * 3)\r\n\r\n\r\n        for (let i = 0; i < this.guiParams.pointsNum; i++) {\r\n            const i3 = i * 3\r\n            const radius = this.guiParams.radius * Math.random()\r\n            const branchesAngle = ((i % this.guiParams.branchiesNum) / this.guiParams.branchiesNum) * Math.PI * 2\r\n            const spinAngle = radius * this.guiParams.spin // 偏转角\r\n\r\n            // Positions - basic\r\n            position[i3] = Math.cos(branchesAngle + spinAngle) * radius\r\n            position[i3 + 1] = 0\r\n            position[i3 + 2] = Math.sin(branchesAngle + spinAngle) * radius\r\n\r\n            // Position - randomness\r\n            // 对粒子的随机分布扩散的工作 使用了一些数学函数\r\n            const randomX = Math.random() ** this.guiParams.randomnessPower * (Math.random() < 0.5 ? 1 : -1) * radius * this.guiParams.randomness\r\n            const randomY = Math.random() ** this.guiParams.randomnessPower * (Math.random() < 0.5 ? 1 : -1) * radius * this.guiParams.randomness\r\n            const randomZ = Math.random() ** this.guiParams.randomnessPower * (Math.random() < 0.5 ? 1 : -1) * radius * this.guiParams.randomness\r\n            randomness[i3 + 0] = randomX\r\n            randomness[i3 + 1] = randomY\r\n            randomness[i3 + 2] = randomZ\r\n\r\n            // Colors\r\n            const mixedColor = new THREE.Color(0xffffff)\r\n            mixedColor.lerpColors(new THREE.Color(this.guiParams.color1), new THREE.Color(this.guiParams.color2), radius / this.guiParams.radius)\r\n            colors[i3] = mixedColor.r\r\n            colors[i3 + 1] = mixedColor.g\r\n            colors[i3 + 2] = mixedColor.b\r\n\r\n            // Scales\r\n            scales[i] = Math.random()\r\n        }\r\n        this.meshGeometry.setAttribute('position', new THREE.BufferAttribute(position, 3))\r\n        this.meshGeometry.setAttribute('color', new THREE.BufferAttribute(colors, 3))\r\n        this.meshGeometry.setAttribute('aRandomness', new THREE.BufferAttribute(randomness, 3))\r\n        this.meshGeometry.setAttribute('aScale', new THREE.BufferAttribute(scales, 1))\r\n\r\n        // Material\r\n        this.meshMaterial = new THREE.ShaderMaterial({\r\n            side: THREE.DoubleSide,\r\n            depthWrite: false,\r\n            blending: THREE.AdditiveBlending,\r\n            vertexColors: true,\r\n            vertexShader: vertexShader,\r\n            fragmentShader: fragmentShader,\r\n            uniforms: {\r\n                uTime: { value: 0 },\r\n                uSize: { value: this.guiParams.pointSize * this.renderer.getPixelRatio() }\r\n            }\r\n        })\r\n\r\n        this.mesh = new THREE.Points(this.meshGeometry, this.meshMaterial)\r\n        this.scene.add(this.mesh)\r\n\r\n    }\r\n\r\n    // Controls\r\n    initControls() {\r\n        // OrbitControlsControl\r\n        this.controls = new OrbitControls(this.camera, this.renderer.domElement)\r\n        this.controls.enableDamping = true // 阻尼器\r\n        this.controls.enabled = true // 控制器是否启用\r\n        this.controls.update()\r\n    }\r\n\r\n    setResize() {\r\n        this.sizeObserver = new ResizeObserver(entries => {\r\n            this.height = entries[0].contentRect.height\r\n            this.width = entries[0].contentRect.width\r\n            // update camera\r\n            this.camera.aspect = this.width / this.height\r\n            this.camera.updateProjectionMatrix()\r\n            // update renderer\r\n            this.renderer.setSize(this.width, this.height)\r\n            this.renderer.render(this.scene, this.camera)\r\n        })\r\n        this.sizeObserver.observe(this.container)\r\n    }\r\n\r\n    createGUI() {\r\n        this.gui = new dat.GUI({ width: 400 })\r\n        this.gui.add(this.guiParams, 'pointsNum').min(0).max(1000000).step(1).onFinishChange(() => this.generateGalaxy())\r\n        this.gui.add(this.guiParams, 'branchiesNum').min(1).max(10).step(1).onFinishChange(() => this.generateGalaxy())\r\n        this.gui.add(this.guiParams, 'randomness').min(-10).max(10).step(0.01).onFinishChange(() => this.generateGalaxy())\r\n        this.gui.add(this.guiParams, 'randomnessPower').min(-10).max(10).step(0.01).onFinishChange(() => this.generateGalaxy())\r\n        this.gui.add(this.guiParams, 'radius').min(0.1).max(100).step(0.01).onFinishChange(() => this.generateGalaxy())\r\n        this.gui.add(this.guiParams, 'spin').min(0.1).max(10).step(0.01).onFinishChange(() => this.generateGalaxy())\r\n        this.gui.addColor(this.guiParams, 'color1').onFinishChange(() => this.generateGalaxy())\r\n        this.gui.addColor(this.guiParams, 'color2').onFinishChange(() => this.generateGalaxy())\r\n        this.gui.add(this.guiParams, 'pointSize').min(0.001).max(100).step(0.001).onFinishChange(() => this.generateGalaxy())\r\n        this.gui.add(this.guiParams, 'speed').min(0).max(5).step(0.1).onFinishChange(() => this.generateGalaxy())\r\n    }\r\n\r\n    showFPS() {\r\n        this.stats = new Stats()\r\n        this.container.appendChild(this.stats.dom)\r\n        this.stats.dom.className = 'stats-class'\r\n        this.stats.dom.style.position = 'absolute'\r\n        this.stats.dom.style.left = '150px'\r\n        this.stats.dom.style.top = '20px'\r\n    }\r\n\r\n    destoryFPS() {\r\n        if (this.stats) {\r\n            this.stats.dom.remove()\r\n            this.stats = null\r\n        }\r\n    }\r\n\r\n    animate() {\r\n        const elapsedTime = this.clock.getElapsedTime()\r\n        this.meshMaterial.uniforms.uTime.value = elapsedTime * this.guiParams.speed\r\n        this.long = requestAnimationFrame(this.animate.bind(this))\r\n        this.renderer.render(this.scene, this.camera)\r\n        this.stats.update()\r\n    }\r\n\r\n    destory() {\r\n        if (this.sizeObserver) {\r\n            this.sizeObserver.disconnect(this.container)\r\n            this.sizeObserver = null\r\n        }\r\n        window.cancelAnimationFrame(this.long)\r\n        if (this.renderer) {\r\n            this.renderer.forceContextLoss()\r\n            this.renderer.dispose()\r\n            this.renderer.domElement = null\r\n            this.renderer = null\r\n        }\r\n        this.clock = null\r\n        this.destoryFPS()\r\n        if (this.gui) this.gui.destroy()\r\n    }\r\n\r\n    debug() {\r\n        // this.scene.add(new THREE.AxesHelper(1))\r\n    }\r\n}\r\n"),"vertex.glsl":vt(Xb),"fragment.glsl":vt(qb)}},null,8,["code"]),Vr(i,{md:vt("![02](http://markdown-images.cccatmint.fun/02.jpg)\r\n\r\n\r\n\r\n![03](http://markdown-images.cccatmint.fun/03.jpg)\r\n\r\n")},null,8,["md"])],64)}}},[["__scopeId","data-v-4bc5c7af"]]),Kb=Object.freeze(Object.defineProperty({__proto__:null,default:Zb},Symbol.toStringTag,{value:"Module"}));class Jb extends Qd{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new rw(e)})),this.register((function(e){return new hw(e)})),this.register((function(e){return new uw(e)})),this.register((function(e){return new sw(e)})),this.register((function(e){return new aw(e)})),this.register((function(e){return new ow(e)})),this.register((function(e){return new lw(e)})),this.register((function(e){return new nw(e)})),this.register((function(e){return new cw(e)})),this.register((function(e){return new iw(e)})),this.register((function(e){return new ew(e)})),this.register((function(e){return new dw(e)}))}load(e,t,n,r){const i=this;let s;s=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:bp.extractUrlBase(e),this.manager.itemStart(e);const a=function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)},o=new tp(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{i.parse(n,s,(function(n){t(n),i.manager.itemEnd(e)}),a)}catch(r){a(r)}}),n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;const s={},a={};if("string"==typeof e)i=e;else{if(bp.decodeText(new Uint8Array(e,0,4))===pw){try{s[$b.KHR_BINARY_GLTF]=new gw(e)}catch(c){return void(r&&r(c))}i=s[$b.KHR_BINARY_GLTF].content}else i=bp.decodeText(new Uint8Array(e))}const o=JSON.parse(i);if(void 0===o.asset||o.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new Zw(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const e=this.pluginCallbacks[h](l);a[e.name]=e,s[e.name]=!0}if(o.extensionsUsed)for(let h=0;h<o.extensionsUsed.length;++h){const e=o.extensionsUsed[h],t=o.extensionsRequired||[];switch(e){case $b.KHR_MATERIALS_UNLIT:s[e]=new tw;break;case $b.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:s[e]=new yw;break;case $b.KHR_DRACO_MESH_COMPRESSION:s[e]=new vw(o,this.dracoLoader);break;case $b.KHR_TEXTURE_TRANSFORM:s[e]=new _w;break;case $b.KHR_MESH_QUANTIZATION:s[e]=new bw;break;default:t.indexOf(e)>=0&&a[e]}}l.setExtensions(s),l.setPlugins(a),l.parse(n,r)}parseAsync(e,t){const n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}function Qb(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const $b={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class ew{constructor(e){this.parser=e,this.name=$b.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const i=t.json,s=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let a;const o=new Rs(16777215);void 0!==s.color&&o.fromArray(s.color);const l=void 0!==s.range?s.range:0;switch(s.type){case"directional":a=new xp(o),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new vp(o),a.distance=l;break;case"spot":a=new dp(o),a.distance=l,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,a.angle=s.spot.outerConeAngle,a.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return a.position.set(0,0,0),a.decay=2,void 0!==s.intensity&&(a.intensity=s.intensity),a.name=t.createUniqueName(s.name||"light_"+e),r=Promise.resolve(a),t.cache.add(n,r),r}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}class tw{constructor(){this.name=$b.KHR_MATERIALS_UNLIT}getMaterialType(){return io}extendParams(e,t,n){const r=[];e.color=new Rs(1,1,1),e.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const t=i.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture,3001))}return Promise.all(r)}}class nw{constructor(e){this.parser=e,this.name=$b.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class rw{constructor(e){this.parser=e,this.name=$b.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Ad:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];if(void 0!==s.clearcoatFactor&&(t.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){const e=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new gs(e,e)}return Promise.all(i)}}class iw{constructor(e){this.parser=e,this.name=$b.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Ad:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return void 0!==s.iridescenceFactor&&(t.iridescence=s.iridescenceFactor),void 0!==s.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),void 0!==s.iridescenceIor&&(t.iridescenceIOR=s.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==s.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),void 0!==s.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),void 0!==s.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(i)}}class sw{constructor(e){this.parser=e,this.name=$b.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Ad:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[];t.sheenColor=new Rs(0,0,0),t.sheenRoughness=0,t.sheen=1;const s=r.extensions[this.name];return void 0!==s.sheenColorFactor&&t.sheenColor.fromArray(s.sheenColorFactor),void 0!==s.sheenRoughnessFactor&&(t.sheenRoughness=s.sheenRoughnessFactor),void 0!==s.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",s.sheenColorTexture,3001)),void 0!==s.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(i)}}class aw{constructor(e){this.parser=e,this.name=$b.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Ad:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return void 0!==s.transmissionFactor&&(t.transmission=s.transmissionFactor),void 0!==s.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(i)}}class ow{constructor(e){this.parser=e,this.name=$b.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Ad:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];t.thickness=void 0!==s.thicknessFactor?s.thicknessFactor:0,void 0!==s.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||0;const a=s.attenuationColor||[1,1,1];return t.attenuationColor=new Rs(a[0],a[1],a[2]),Promise.all(i)}}class lw{constructor(e){this.parser=e,this.name=$b.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Ad:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class cw{constructor(e){this.parser=e,this.name=$b.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Ad:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];t.specularIntensity=void 0!==s.specularFactor?s.specularFactor:1,void 0!==s.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",s.specularTexture));const a=s.specularColorFactor||[1,1,1];return t.specularColor=new Rs(a[0],a[1],a[2]),void 0!==s.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",s.specularColorTexture,3001)),Promise.all(i)}}class hw{constructor(e){this.parser=e,this.name=$b.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,s)}}class uw{constructor(e){this.parser=e,this.name=$b.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const s=i.extensions[t],a=r.images[s.source];let o=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(o=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,s.source,o);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class dw{constructor(e){this.name=$b.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then((function(t){const n=e.byteOffset||0,r=e.byteLength||0,s=e.count,a=e.byteStride,o=new Uint8Array(t,n,r);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(s,a,o,e.mode,e.filter).then((function(e){return e.buffer})):i.ready.then((function(){const t=new ArrayBuffer(s*a);return i.decodeGltfBuffer(new Uint8Array(t),s,a,o,e.mode,e.filter),t}))}))}return null}}const pw="glTF",fw=1313821514,mw=5130562;class gw{constructor(e){this.name=$b.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:bp.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==pw)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(e,12);let i=0;for(;i<n;){const t=r.getUint32(i,!0);i+=4;const n=r.getUint32(i,!0);if(i+=4,n===fw){const n=new Uint8Array(e,12+i,t);this.content=bp.decodeText(n)}else if(n===mw){const n=12+i;this.body=e.slice(n,n+t)}i+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class vw{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=$b.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},o={},l={};for(const c in s){const e=Iw[c]||c.toLowerCase();a[e]=s[c]}for(const c in e.attributes){const t=Iw[c]||c.toLowerCase();if(void 0!==s[c]){const r=n.accessors[e.attributes[c]],i=Ow[r.componentType];l[t]=i.name,o[t]=!0===r.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],r=o[t];void 0!==r&&(n.normalized=r)}t(e)}),a,l)}))}))}}class _w{constructor(){this.name=$b.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord,void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class xw extends Td{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),i=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),s=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new Rs).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(e){for(const t in a)e.uniforms[t]=a[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",i).replace("#include <lights_physical_fragment>",s)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(e){a.specular.value=e}},specularMap:{get:function(){return a.specularMap.value},set:function(e){a.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(e){a.glossiness.value=e}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(e){a.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class yw{constructor(){this.name=$b.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return xw}extendParams(e,t,n){const r=t.extensions[this.name];e.color=new Rs(1,1,1),e.opacity=1;const i=[];if(Array.isArray(r.diffuseFactor)){const t=r.diffuseFactor;e.color.fromArray(t),e.opacity=t[3]}if(void 0!==r.diffuseTexture&&i.push(n.assignTexture(e,"map",r.diffuseTexture,3001)),e.emissive=new Rs(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new Rs(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const t=r.specularGlossinessTexture;i.push(n.assignTexture(e,"glossinessMap",t)),i.push(n.assignTexture(e,"specularMap",t,3001))}return Promise.all(i)}createMaterial(e){const t=new xw(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=void 0===e.emissiveIntensity?1:e.emissiveIntensity,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=0,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t}}class bw{constructor(){this.name=$b.KHR_MESH_QUANTIZATION}}class ww extends kd{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let s=0;s!==r;s++)t[s]=n[i+s];return t}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=2*a,l=3*a,c=r-t,h=(n-t)/c,u=h*h,d=u*h,p=e*l,f=p-l,m=-2*d+3*u,g=d-u,v=1-m,_=g-u+h;for(let x=0;x!==a;x++){const e=s[f+x+a],t=s[f+x+o]*c,n=s[p+x+a],r=s[p+x]*c;i[x]=v*e+_*t+m*n+g*r}return i}}const Sw=new Hs;class Mw extends ww{interpolate_(e,t,n,r){const i=super.interpolate_(e,t,n,r);return Sw.fromArray(i).normalize().toArray(i),i}}const Ew=0,Tw=1,Aw=2,Cw=3,Pw=4,Rw=5,Lw=6,Ow={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},zw={9728:1003,9729:1006,9984:1004,9985:1007,9986:1005,9987:1008},Dw={33071:1001,33648:1002,10497:1e3},kw={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Iw={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Nw={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Fw={CUBICSPLINE:void 0,LINEAR:2301,STEP:2300},Uw="OPAQUE",Bw="MASK",Hw="BLEND";function Gw(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new Td({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),e.DefaultMaterial}function jw(e,t,n){for(const r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function Vw(e,t){void 0!==t.extras&&"object"==typeof t.extras&&Object.assign(e.userData,t.extras)}function Ww(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}}}function Xw(e){const t=e.extensions&&e.extensions[$b.KHR_DRACO_MESH_COMPRESSION];let n;return n=t?"draco:"+t.bufferView+":"+t.indices+":"+qw(t.attributes):e.indices+":"+qw(e.attributes)+":"+e.mode,n}function qw(e){let t="";const n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function Yw(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class Zw{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Qb,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,i=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;"undefined"==typeof createImageBitmap||n||r&&i<98?this.textureLoader=new ip(this.options.manager):this.textureLoader=new wp(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new tp(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const s={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};jw(i,s,r),Vw(s,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(s)}))).then((function(){e(s)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,i=t.length;r<i;r++){const n=t[r].joints;for(let t=0,r=n.length;t<r;t++)e[n[t]].isBone=!0}for(let r=0,i=e.length;r<i;r++){const t=e[r];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),i=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[r,s]of e.children.entries())i(s,t.children[r])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[$b.KHR_BINARY_GLTF].body);const r=this.options;return new Promise((function(e,i){n.load(bp.resolveURL(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(e){const i=e[0],s=kw[r.type],a=Ow[r.componentType],o=a.BYTES_PER_ELEMENT,l=o*s,c=r.byteOffset||0,h=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,u=!0===r.normalized;let d,p;if(h&&h!==l){const e=Math.floor(c/h),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count;let l=t.cache.get(n);l||(d=new a(i,e*h,r.count*h/o),l=new kh(d,h/o),t.cache.add(n,l)),p=new Nh(l,s,c%h/o,u)}else d=null===i?new a(r.count*s):new a(i,c,r.count*s),p=new oo(d,s,u);if(void 0!==r.sparse){const t=kw.SCALAR,n=Ow[r.sparse.indices.componentType],o=r.sparse.indices.byteOffset||0,l=r.sparse.values.byteOffset||0,c=new n(e[1],o,r.sparse.count*t),h=new a(e[2],l,r.sparse.count*s);null!==i&&(p=new oo(p.array.slice(),p.itemSize,p.normalized));for(let e=0,r=c.length;e<r;e++){const t=c[e];if(p.setX(t,h[e*s]),s>=2&&p.setY(t,h[e*s+1]),s>=3&&p.setZ(t,h[e*s+2]),s>=4&&p.setW(t,h[e*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p}))}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r];let s=this.textureLoader;if(i.uri){const e=n.manager.getHandler(i.uri);null!==e&&(s=e)}return this.loadTextureImage(e,r,s)}loadTextureImage(e,t,n){const r=this,i=this.json,s=i.textures[e],a=i.images[t],o=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[o])return this.textureCache[o];const l=this.loadImageSource(t,n).then((function(t){t.flipY=!1,s.name&&(t.name=s.name);const n=(i.samplers||{})[s.sampler]||{};return t.magFilter=zw[n.magFilter]||1006,t.minFilter=zw[n.minFilter]||1008,t.wrapS=Dw[n.wrapS]||1e3,t.wrapT=Dw[n.wrapT]||1e3,r.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[o]=l,l}loadImageSource(e,t){const n=this,r=this.json,i=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));const s=r.images[e],a=self.URL||self.webkitURL;let o=s.uri||"",l=!1;if(void 0!==s.bufferView)o=n.getDependency("bufferView",s.bufferView).then((function(e){l=!0;const t=new Blob([e],{type:s.mimeType});return o=a.createObjectURL(t),o}));else if(void 0===s.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(o).then((function(e){return new Promise((function(n,r){let s=n;!0===t.isImageBitmapLoader&&(s=function(e){const t=new Is(e);t.needsUpdate=!0,n(t)}),t.load(bp.resolveURL(e,i.path),s,void 0,r)}))})).then((function(e){var t;return!0===l&&a.revokeObjectURL(o),e.userData.mimeType=s.mimeType||((t=s.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw e}));return this.sourceCache[e]=c,c}assignTexture(e,t,n,r){const i=this;return this.getDependency("texture",n.index).then((function(s){if(void 0!==n.texCoord&&0!=n.texCoord&&("aoMap"!==t||n.texCoord),i.extensions[$b.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[$b.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=i.associations.get(s);s=i.extensions[$b.KHR_TEXTURE_TRANSFORM].extendTexture(s,e),i.associations.set(s,t)}}return void 0!==r&&(s.encoding=r),e[t]=s,s}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,s=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new wu,ro.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new uu,ro.prototype.copy.call(t,n),t.color.copy(n.color),this.cache.add(e,t)),n=t}if(r||i||s){let e="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(e+="specular-glossiness:"),r&&(e+="derivative-tangents:"),i&&(e+="vertex-colors:"),s&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),i&&(t.vertexColors=!0),s&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return Td}loadMaterial(e){const t=this,n=this.json,r=this.extensions,i=n.materials[e];let s;const a={},o=i.extensions||{},l=[];if(o[$b.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const e=r[$b.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];s=e.getMaterialType(),l.push(e.extendParams(a,i,t))}else if(o[$b.KHR_MATERIALS_UNLIT]){const e=r[$b.KHR_MATERIALS_UNLIT];s=e.getMaterialType(),l.push(e.extendParams(a,i,t))}else{const n=i.pbrMetallicRoughness||{};if(a.color=new Rs(1,1,1),a.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;a.color.fromArray(e),a.opacity=e[3]}void 0!==n.baseColorTexture&&l.push(t.assignTexture(a,"map",n.baseColorTexture,3001)),a.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,a.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(l.push(t.assignTexture(a,"metalnessMap",n.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",n.metallicRoughnessTexture))),s=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),l.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)}))))}!0===i.doubleSided&&(a.side=2);const c=i.alphaMode||Uw;if(c===Hw?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,c===Bw&&(a.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&s!==io&&(l.push(t.assignTexture(a,"normalMap",i.normalTexture)),a.normalScale=new gs(1,1),void 0!==i.normalTexture.scale)){const e=i.normalTexture.scale;a.normalScale.set(e,e)}return void 0!==i.occlusionTexture&&s!==io&&(l.push(t.assignTexture(a,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(a.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&s!==io&&(a.emissive=(new Rs).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&s!==io&&l.push(t.assignTexture(a,"emissiveMap",i.emissiveTexture,3001)),Promise.all(l).then((function(){let n;return n=s===xw?r[$b.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new s(a),i.name&&(n.name=i.name),Vw(n,i),t.associations.set(n,{materials:e}),i.extensions&&jw(r,n,i),n}))}createUniqueName(e){const t=Rp.sanitizeNodeName(e||"");let n=t;for(let r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[$b.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return Jw(n,e,t)}))}const s=[];for(let a=0,o=e.length;a<o;a++){const n=e[a],o=Xw(n),l=r[o];if(l)s.push(l.promise);else{let e;e=n.extensions&&n.extensions[$b.KHR_DRACO_MESH_COMPRESSION]?i(n):Jw(new xo,n,t),r[o]={primitive:n,promise:e},s.push(e)}}return Promise.all(s)}loadMesh(e){const t=this,n=this.json,r=this.extensions,i=n.meshes[e],s=i.primitives,a=[];for(let o=0,l=s.length;o<l;o++){const e=void 0===s[o].material?Gw(this.cache):this.getDependency("material",s[o].material);a.push(e)}return a.push(t.loadGeometries(s)),Promise.all(a).then((function(n){const a=n.slice(0,n.length-1),o=n[n.length-1],l=[];for(let h=0,u=o.length;h<u;h++){const n=o[h],c=s[h];let u;const d=a[h];if(c.mode===Pw||c.mode===Rw||c.mode===Lw||void 0===c.mode)u=!0===i.isSkinnedMesh?new su(n,d):new No(n,d),!0!==u.isSkinnedMesh||u.geometry.attributes.skinWeight.normalized||u.normalizeSkinWeights(),c.mode===Rw?u.geometry=Qw(u.geometry,1):c.mode===Lw&&(u.geometry=Qw(u.geometry,2));else if(c.mode===Tw)u=new yu(n,d);else if(c.mode===Cw)u=new vu(n,d);else if(c.mode===Aw)u=new bu(n,d);else{if(c.mode!==Ew)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);u=new Au(n,d)}Object.keys(u.geometry.morphAttributes).length>0&&Ww(u,i),u.name=t.createUniqueName(i.name||"mesh_"+e),Vw(u,i),c.extensions&&jw(r,u,c),t.assignFinalMaterial(u),l.push(u)}for(let r=0,i=l.length;r<i;r++)t.associations.set(l[r],{meshes:e,primitives:r});if(1===l.length)return l[0];const c=new Eh;t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c}))}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new Wo(ms.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new fl(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Vw(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}loadAnimation(e){const t=this.json.animations[e],n=[],r=[],i=[],s=[],a=[];for(let o=0,l=t.channels.length;o<l;o++){const e=t.channels[o],l=t.samplers[e.sampler],c=e.target,h=c.node,u=void 0!==t.parameters?t.parameters[l.input]:l.input,d=void 0!==t.parameters?t.parameters[l.output]:l.output;n.push(this.getDependency("node",h)),r.push(this.getDependency("accessor",u)),i.push(this.getDependency("accessor",d)),s.push(l),a.push(c)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(i),Promise.all(s),Promise.all(a)]).then((function(n){const r=n[0],i=n[1],s=n[2],a=n[3],o=n[4],l=[];for(let e=0,t=r.length;e<t;e++){const t=r[e],n=i[e],c=s[e],h=a[e],u=o[e];if(void 0===t)continue;let d;switch(t.updateMatrix(),Nw[u.path]){case Nw.weights:d=Gd;break;case Nw.rotation:d=Vd;break;default:d=Xd}const p=t.name?t.name:t.uuid,f=void 0!==h.interpolation?Fw[h.interpolation]:2301,m=[];Nw[u.path]===Nw.weights?t.traverse((function(e){e.morphTargetInfluences&&m.push(e.name?e.name:e.uuid)})):m.push(p);let g=c.array;if(c.normalized){const e=Yw(g.constructor),t=new Float32Array(g.length);for(let n=0,r=g.length;n<r;n++)t[n]=g[n]*e;g=t}for(let e=0,r=m.length;e<r;e++){const t=new d(m[e]+"."+Nw[u.path],n.array,g,f);"CUBICSPLINE"===h.interpolation&&(t.createInterpolant=function(e){return new(this instanceof Vd?Mw:ww)(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(t)}}const c=t.name?t.name:"animation_"+e;return new qd(c,void 0,l)}))}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}loadNode(e){const t=this.json,n=this.extensions,r=this,i=t.nodes[e],s=i.name?r.createUniqueName(i.name):"";return function(){const t=[],n=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==i.camera&&t.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){let a;if(a=!0===i.isBone?new au:t.length>1?new Eh:1===t.length?t[0]:new Va,a!==t[0])for(let e=0,n=t.length;e<n;e++)a.add(t[e]);if(i.name&&(a.userData.name=i.name,a.name=s),Vw(a,i),i.extensions&&jw(n,a,i),void 0!==i.matrix){const e=new xa;e.fromArray(i.matrix),a.applyMatrix4(e)}else void 0!==i.translation&&a.position.fromArray(i.translation),void 0!==i.rotation&&a.quaternion.fromArray(i.rotation),void 0!==i.scale&&a.scale.fromArray(i.scale);return r.associations.has(a)||r.associations.set(a,{}),r.associations.get(a).nodes=e,a}))}loadScene(e){const t=this.json,n=this.extensions,r=this.json.scenes[e],i=this,s=new Eh;r.name&&(s.name=i.createUniqueName(r.name)),Vw(s,r),r.extensions&&jw(n,s,r);const a=r.nodes||[],o=[];for(let l=0,c=a.length;l<c;l++)o.push(Kw(a[l],s,t,i));return Promise.all(o).then((function(){return i.associations=(e=>{const t=new Map;for(const[n,r]of i.associations)(n instanceof ro||n instanceof Is)&&t.set(n,r);return e.traverse((e=>{const n=i.associations.get(e);null!=n&&t.set(e,n)})),t})(s),s}))}}function Kw(e,t,n,r){const i=n.nodes[e];return r.getDependency("node",e).then((function(e){if(void 0===i.skin)return e;let t;return r.getDependency("skin",i.skin).then((function(e){t=e;const n=[];for(let i=0,s=t.joints.length;i<s;i++)n.push(r.getDependency("node",t.joints[i]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(!e.isMesh)return;const r=[],i=[];for(let s=0,a=n.length;s<a;s++){const e=n[s];if(e){r.push(e);const n=new xa;void 0!==t.inverseBindMatrices&&n.fromArray(t.inverseBindMatrices.array,16*s),i.push(n)}}e.bind(new hu(r,i),e.matrixWorld)})),e}))})).then((function(e){t.add(e);const s=[];if(i.children){const t=i.children;for(let i=0,a=t.length;i<a;i++){const a=t[i];s.push(Kw(a,e,n,r))}}return Promise.all(s)}))}function Jw(e,t,n){const r=t.attributes,i=[];function s(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(const a in r){const t=Iw[a]||a.toLowerCase();t in e.attributes||i.push(s(r[a],t))}if(void 0!==t.indices&&!e.index){const r=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(r)}return Vw(e,t),function(e,t,n){const r=t.attributes,i=new Ws;if(void 0===r.POSITION)return;{const e=n.json.accessors[r.POSITION],t=e.min,s=e.max;if(void 0===t||void 0===s)return;if(i.set(new Gs(t[0],t[1],t[2]),new Gs(s[0],s[1],s[2])),e.normalized){const t=Yw(Ow[e.componentType]);i.min.multiplyScalar(t),i.max.multiplyScalar(t)}}const s=t.targets;if(void 0!==s){const e=new Gs,t=new Gs;for(let r=0,i=s.length;r<i;r++){const i=s[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],s=r.min,a=r.max;if(void 0!==s&&void 0!==a){if(t.setX(Math.max(Math.abs(s[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(s[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(s[2]),Math.abs(a[2]))),r.normalized){const e=Yw(Ow[r.componentType]);t.multiplyScalar(e)}e.max(t)}}}i.expandByVector(e)}e.boundingBox=i;const a=new ha;i.getCenter(a.center),a.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=a}(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1,s=!1;for(let c=0,h=t.length;c<h;c++){const e=t[c];if(void 0!==e.POSITION&&(r=!0),void 0!==e.NORMAL&&(i=!0),void 0!==e.COLOR_0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(e);const a=[],o=[],l=[];for(let c=0,h=t.length;c<h;c++){const h=t[c];if(r){const t=void 0!==h.POSITION?n.getDependency("accessor",h.POSITION):e.attributes.position;a.push(t)}if(i){const t=void 0!==h.NORMAL?n.getDependency("accessor",h.NORMAL):e.attributes.normal;o.push(t)}if(s){const t=void 0!==h.COLOR_0?n.getDependency("accessor",h.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then((function(t){const n=t[0],a=t[1],o=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=a),s&&(e.morphAttributes.color=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function Qw(e,t){let n=e.getIndex();if(null===n){const t=[],r=e.getAttribute("position");if(void 0===r)return e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const r=n.count-2,i=[];if(2===t)for(let a=1;a<=r;a++)i.push(n.getX(0)),i.push(n.getX(a)),i.push(n.getX(a+1));else for(let a=0;a<r;a++)a%2==0?(i.push(n.getX(a)),i.push(n.getX(a+1)),i.push(n.getX(a+2))):(i.push(n.getX(a+2)),i.push(n.getX(a+1)),i.push(n.getX(a)));i.length;const s=e.clone();return s.setIndex(i),s}const $w={all:eS=eS||new Map,on:function(e,t){var n=eS.get(e);n?n.push(t):eS.set(e,[t])},off:function(e,t){var n=eS.get(e);n&&(t?n.splice(n.indexOf(t)>>>0,1):eS.set(e,[]))},emit:function(e,t){var n=eS.get(e);n&&n.slice().map((function(e){e(t)})),(n=eS.get("*"))&&n.slice().map((function(n){n(e,t)}))}};var eS;class tS{constructor(e){this.long=null,this.container=e,this.width=e.offsetWidth,this.height=e.offsetHeight,this.sizeObserver=null,this.scene=null,this.camera=null,this.renderer=null,this.clock=null,this.gui=null,this.guiParams={modelName:"stegosaurs_SStenops",scale:1,rotation:{x:0,y:0,z:0},loadProgress:0},this.GLTFLoader=null,this.progress,this.init()}init(){this.scene=new Dh,this.scene.background=new Rs(0),this.camera=new Wo(75,this.width/this.height,.1,5e3),this.camera.lookAt(0,0,10),this.camera.position.set(-1,1,5),this.renderer||(this.renderer=new Oh),this.renderer.outputEncoding=3001,this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.setClearColor(16777215,0),this.renderer.setSize(this.width,this.height),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=1,this.container.appendChild(this.renderer.domElement),this.renderer.render(this.scene,this.camera),this.clock=new Sp,this.planeMaterial=new Td({color:13421772,side:2}),this.planeGeometry=new il(10,10,1,1),this.plane=new No(this.planeGeometry,this.planeMaterial),this.plane.rotation.x=-Math.PI/2,this.plane.receiveShadow=!0,this.scene.add(this.plane),this.initLight(),this.initControl(),this.setResize(),this.showFPS(),this.initGui(),this.initGLTFLoader(),this.loadModel("stegosaurs_SStenops"),this.animate()}initGLTFLoader(){this.GLTFLoader=(new Jb).setPath("/models/gltf/01/")}loadModel(e){this.GLTFLoader.load(e+".gltf",(e=>{this.model&&this.scene.remove(this.model),this.model=e.scene,this.scene.add(this.model)}),(e=>{this.progress=e,this.guiParams.loadProgress=e.loaded/e.total*100,$w.emit("loadmodelProgress",{total:e.total,loaded:e.loaded})}),(e=>{}))}initLight(){this.ambientLight=new yp(16777215,1),this.scene.add(this.ambientLight),this.pointLight=new vp(61695,1,10),this.pointLight.position.set(0,5,5),this.pointLight.castShadow=!0,this.pointLight.shadow.mapSize.set(1024,1024),this.scene.add(this.pointLight)}initControl(){this.controls=new tf(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.enabled=!0,this.controls.minDistance=0,this.controls.maxDistance=10,this.controls.update()}setResize(){this.sizeObserver=new ResizeObserver((e=>{this.height=e[0].contentRect.height,this.width=e[0].contentRect.width,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height),this.renderer.render(this.scene,this.camera)})),this.sizeObserver.observe(this.container)}showFPS(){this.stats=new Ug,this.container.appendChild(this.stats.dom),this.stats.dom.className="stats-class",this.stats.dom.style.position="absolute",this.stats.dom.style.left="150px",this.stats.dom.style.top="20px"}destoryFPS(){this.stats&&(this.stats.dom.remove(),this.stats=null)}initGui(){this.gui=new Dg.GUI;const e=this.gui.addFolder("gltf");e.open(),e.add(this.guiParams,"modelName").options(["Strawberry_gltf","stegosaurs_SStenops","free_car_001"]).name("选择模型").onChange((e=>{this.loadModel(e)})),e.add(this.guiParams,"loadProgress").name("加载进度").listen();const t=this.gui.addFolder("模型旋转");t.open(),t.add(this.guiParams.rotation,"x").min(0).max(2*Math.PI).onChange((e=>{this.model&&(this.model.rotation.x=e)})),t.add(this.guiParams.rotation,"y").min(0).max(2*Math.PI).onChange((e=>{this.model&&(this.model.rotation.y=e)})),t.add(this.guiParams.rotation,"z").min(0).max(2*Math.PI).onChange((e=>{this.model&&(this.model.rotation.z=e)}));const n=this.gui.addFolder("模型缩放");n.open(),n.add(this.guiParams,"scale").min(0).max(20).onChange((e=>{this.model&&(this.model.scale.x=e,this.model.scale.y=e,this.model.scale.z=e)}))}animate(){this.render(),this.controls.update(),this.stats.update(),this.long=requestAnimationFrame(this.animate.bind(this))}render(){this.renderer&&this.renderer.render(this.scene,this.camera)}destory(){this.sizeObserver&&(this.sizeObserver.disconnect(this.container),this.sizeObserver=null),window.cancelAnimationFrame(this.long),this.renderer&&(this.renderer.forceContextLoss(),this.renderer.dispose(),this.renderer.domElement=null,this.renderer=null),this.clock=null,this.gui.destroy()}debug(){this.scene.add(new Zp(10)),this.debugbox=new No(new Uo(1,1,1),new Td({color:0})),this.debugbox.castShadow=!0,this.scene.add(this.debugbox)}}const nS=Wi({__name:"index",setup(e){const t=ft(null),n=ft({total:0,loaded:0});let r=null;return $w.on("loadmodelProgress",(e=>{n.value.total=e.total,n.value.loaded=e.loaded})),Cn((()=>{r=new tS(t.value)})),On((()=>{r.destory()})),(e,n)=>(Or(),Ir("div",{class:"container",ref_key:"container",ref:t},null,512))}},[["__scopeId","data-v-11f6ff83"]]),rS=Object.freeze(Object.defineProperty({__proto__:null,default:nS},Symbol.toStringTag,{value:"Module"}));function iS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sS(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}
/*!
 * GSAP 3.11.3
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var aS,oS,lS,cS,hS,uS,dS,pS,fS,mS,gS,vS,_S,xS,yS,bS,wS,SS,MS,ES,TS,AS,CS,PS,RS,LS,OS={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},zS={duration:.5,overwrite:!1,delay:0},DS=2*Math.PI,kS=DS/4,IS=0,NS=Math.sqrt,FS=Math.cos,US=Math.sin,BS=function(e){return"string"==typeof e},HS=function(e){return"function"==typeof e},GS=function(e){return"number"==typeof e},jS=function(e){return void 0===e},VS=function(e){return"object"==typeof e},WS=function(e){return!1!==e},XS=function(){return"undefined"!=typeof window},qS=function(e){return HS(e)||BS(e)},YS="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},ZS=Array.isArray,KS=/(?:-?\.?\d|\.)+/gi,JS=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,QS=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,$S=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,eM=/[+-]=-?[.\d]+/,tM=/[^,'"\[\]\s]+/gi,nM=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,rM={},iM={},sM=function(e){return(iM=zM(e,rM))&&LT},aM=function(e,t){return!t&&void 0},oM=function(e,t){return e&&(rM[e]=t)&&iM&&(iM[e]=t)||rM},lM=function(){return 0},cM={suppressEvents:!0,isStart:!0,kill:!1},hM={suppressEvents:!0,kill:!1},uM={suppressEvents:!0},dM={},pM=[],fM={},mM={},gM={},vM=30,_M=[],xM="",yM=function(e){var t,n,r=e[0];if(VS(r)||HS(r)||(e=[e]),!(t=(r._gsap||{}).harness)){for(n=_M.length;n--&&!_M[n].targetTest(r););t=_M[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new XE(e[n],t)))||e.splice(n,1);return e},bM=function(e){return e._gsap||yM(uE(e))[0]._gsap},wM=function(e,t,n){return(n=e[t])&&HS(n)?e[t]():jS(n)&&e.getAttribute&&e.getAttribute(t)||n},SM=function(e,t){return(e=e.split(",")).forEach(t)||e},MM=function(e){return Math.round(1e5*e)/1e5||0},EM=function(e){return Math.round(1e7*e)/1e7||0},TM=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),"+"===n?e+r:"-"===n?e-r:"*"===n?e*r:e/r},AM=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},CM=function(){var e,t,n=pM.length,r=pM.slice(0);for(fM={},pM.length=0,e=0;e<n;e++)(t=r[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},PM=function(e,t,n,r){pM.length&&CM(),e.render(t,n,r||oS&&t<0&&(e._initted||e._startAt)),pM.length&&CM()},RM=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(tM).length<2?t:BS(e)?e.trim():e},LM=function(e){return e},OM=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},zM=function(e,t){for(var n in t)e[n]=t[n];return e},DM=function e(t,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(t[r]=VS(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},kM=function(e,t){var n,r={};for(n in e)n in t||(r[n]=e[n]);return r},IM=function(e){var t,n=e.parent||cS,r=e.keyframes?(t=ZS(e.keyframes),function(e,n){for(var r in n)r in e||"duration"===r&&t||"ease"===r||(e[r]=n[r])}):OM;if(WS(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},NM=function(e,t,n,r,i){void 0===n&&(n="_first"),void 0===r&&(r="_last");var s,a=e[r];if(i)for(s=t[i];a&&a[i]>s;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=a,t.parent=t._dp=e,t},FM=function(e,t,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=t._prev,s=t._next;i?i._next=s:e[n]===t&&(e[n]=s),s?s._prev=i:e[r]===t&&(e[r]=i),t._next=t._prev=t.parent=null},UM=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},BM=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},HM=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},GM=function(e,t,n,r){return e._startAt&&(oS?e._startAt.revert(hM):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},jM=function e(t){return!t||t._ts&&e(t.parent)},VM=function(e){return e._repeat?WM(e._tTime,e=e.duration()+e._rDelay)*e:0},WM=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},XM=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},qM=function(e){return e._end=EM(e._start+(e._tDur/Math.abs(e._ts||e._rts||1e-8)||0))},YM=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=EM(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),qM(e),n._dirty||BM(n,e)),e},ZM=function(e,t){var n;if((t._time||t._initted&&!t._dur)&&(n=XM(e.rawTime(),t),(!t._dur||oE(0,t.totalDuration(),n)-t._tTime>1e-8)&&t.render(n,!0)),BM(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},KM=function(e,t,n,r){return t.parent&&UM(t),t._start=EM((GS(n)?n:n||e!==cS?iE(e,n,t):e._time)+t._delay),t._end=EM(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),NM(e,t,"_first","_last",e._sort?"_start":0),eE(t)||(e._recent=t),r||ZM(e,t),e._ts<0&&YM(e,e._tTime),e},JM=function(e,t){return rM.ScrollTrigger?rM.ScrollTrigger.create(t,e):void 0},QM=function(e,t,n,r,i){return eT(e,t,i),e._initted?!n&&e._pt&&!oS&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&fS!==zE.frame?(pM.push(e),e._lazy=[i,r],1):void 0:1},$M=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},eE=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},tE=function(e,t,n,r){var i=e._repeat,s=EM(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=s/e._dur),e._dur=s,e._tDur=i?i<0?1e10:EM(s*(i+1)+e._rDelay*i):s,a>0&&!r&&YM(e,e._tTime=e._tDur*a),e.parent&&qM(e),n||BM(e.parent,e),e},nE=function(e){return e instanceof YE?BM(e):tE(e,e._dur)},rE={_start:0,endTime:lM,totalDuration:lM},iE=function e(t,n,r){var i,s,a,o=t.labels,l=t._recent||rE,c=t.duration()>=1e8?l.endTime(!1):t._dur;return BS(n)&&(isNaN(n)||n in o)?(s=n.charAt(0),a="%"===n.substr(-1),i=n.indexOf("="),"<"===s||">"===s?(i>=0&&(n=n.replace(/=/,"")),("<"===s?l._start:l.endTime(l._repeat>=0))+(parseFloat(n.substr(1))||0)*(a?(i<0?l:r).totalDuration()/100:1)):i<0?(n in o||(o[n]=c),o[n]):(s=parseFloat(n.charAt(i-1)+n.substr(i+1)),a&&r&&(s=s/100*(ZS(r)?r[0]:r).totalDuration()),i>1?e(t,n.substr(0,i-1),r)+s:c+s)):null==n?c:+n},sE=function(e,t,n){var r,i,s=GS(t[1]),a=(s?2:1)+(e<2?0:1),o=t[a];if(s&&(o.duration=t[1]),o.parent=n,e){for(r=o,i=n;i&&!("immediateRender"in r);)r=i.vars.defaults||{},i=WS(i.vars.inherit)&&i.parent;o.immediateRender=WS(r.immediateRender),e<2?o.runBackwards=1:o.startAt=t[a-1]}return new sT(t[0],o,t[a+1])},aE=function(e,t){return e||0===e?t(e):t},oE=function(e,t,n){return n<e?e:n>t?t:n},lE=function(e,t){return BS(e)&&(t=nM.exec(e))?t[1]:""},cE=[].slice,hE=function(e,t){return e&&VS(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&VS(e[0]))&&!e.nodeType&&e!==hS},uE=function(e,t,n){return lS&&!t&&lS.selector?lS.selector(e):!BS(e)||n||!uS&&DE()?ZS(e)?function(e,t,n){return void 0===n&&(n=[]),e.forEach((function(e){var r;return BS(e)&&!t||hE(e,1)?(r=n).push.apply(r,uE(e)):n.push(e)}))||n}(e,n):hE(e)?cE.call(e,0):e?[e]:[]:cE.call((t||dS).querySelectorAll(e),0)},dE=function(e){return e=uE(e)[0]||aM()||{},function(t){var n=e.current||e.nativeElement||e;return uE(t,n.querySelectorAll?n:n===e?aM()||dS.createElement("div"):e)}},pE=function(e){return e.sort((function(){return.5-Math.random()}))},fE=function(e){if(HS(e))return e;var t=VS(e)?e:{each:e},n=HE(t.ease),r=t.from||0,i=parseFloat(t.base)||0,s={},a=r>0&&r<1,o=isNaN(r)||a,l=t.axis,c=r,h=r;return BS(r)?c=h={center:.5,edges:.5,end:1}[r]||0:!a&&o&&(c=r[0],h=r[1]),function(e,a,u){var d,p,f,m,g,v,_,x,y,b=(u||t).length,w=s[b];if(!w){if(!(y="auto"===t.grid?0:(t.grid||[1,1e8])[1])){for(_=-1e8;_<(_=u[y++].getBoundingClientRect().left)&&y<b;);y--}for(w=s[b]=[],d=o?Math.min(y,b)*c-.5:r%y,p=1e8===y?0:o?b*h/y-.5:r/y|0,_=0,x=1e8,v=0;v<b;v++)f=v%y-d,m=p-(v/y|0),w[v]=g=l?Math.abs("y"===l?m:f):NS(f*f+m*m),g>_&&(_=g),g<x&&(x=g);"random"===r&&pE(w),w.max=_-x,w.min=x,w.v=b=(parseFloat(t.amount)||parseFloat(t.each)*(y>b?b-1:l?"y"===l?b/y:y:Math.max(y,b/y))||0)*("edges"===r?-1:1),w.b=b<0?i-b:i,w.u=lE(t.amount||t.each)||0,n=n&&b<0?UE(n):n}return b=(w[e]-w.min)/w.max||0,EM(w.b+(n?n(b):b)*w.v)+w.u}},mE=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=EM(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(GS(n)?0:lE(n))}},gE=function(e,t){var n,r,i=ZS(e);return!i&&VS(e)&&(n=i=e.radius||1e8,e.values?(e=uE(e.values),(r=!GS(e[0]))&&(n*=n)):e=mE(e.increment)),aE(t,i?HS(e)?function(t){return r=e(t),Math.abs(r-t)<=n?r:t}:function(t){for(var i,s,a=parseFloat(r?t.x:t),o=parseFloat(r?t.y:0),l=1e8,c=0,h=e.length;h--;)(i=r?(i=e[h].x-a)*i+(s=e[h].y-o)*s:Math.abs(e[h]-a))<l&&(l=i,c=h);return c=!n||l<=n?e[c]:t,r||c===t||GS(t)?c:c+lE(t)}:mE(e))},vE=function(e,t,n,r){return aE(ZS(e)?!t:!0===n?!!(n=0):!r,(function(){return ZS(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*r)/r}))},_E=function(e,t,n){return aE(n,(function(n){return e[~~t(n)]}))},xE=function(e){for(var t,n,r,i,s=0,a="";~(t=e.indexOf("random(",s));)r=e.indexOf(")",t),i="["===e.charAt(t+7),n=e.substr(t+7,r-t-7).match(i?tM:KS),a+=e.substr(s,t-s)+vE(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),s=r+1;return a+e.substr(s,e.length-s)},yE=function(e,t,n,r,i){var s=t-e,a=r-n;return aE(i,(function(t){return n+((t-e)/s*a||0)}))},bE=function(e,t,n){var r,i,s,a=e.labels,o=1e8;for(r in a)(i=a[r]-t)<0==!!n&&i&&o>(i=Math.abs(i))&&(s=r,o=i);return s},wE=function(e,t,n){var r,i,s,a=e.vars,o=a[t],l=lS,c=e._ctx;if(o)return r=a[t+"Params"],i=a.callbackScope||e,n&&pM.length&&CM(),c&&(lS=c),s=r?o.apply(i,r):o.call(i),lS=l,s},SE=function(e){return UM(e),e.scrollTrigger&&e.scrollTrigger.kill(!!oS),e.progress()<1&&wE(e,"onInterrupt"),e},ME=function(e){var t=(e=!e.name&&e.default||e).name,n=HS(e),r=t&&!n&&e.init?function(){this._props=[]}:e,i={init:lM,render:fT,add:QE,kill:gT,modifier:mT,rawVars:0},s={targetTest:0,get:0,getSetter:hT,aliases:{},register:0};if(DE(),e!==r){if(mM[t])return;OM(r,OM(kM(e,i),s)),zM(r.prototype,zM(i,kM(e,s))),mM[r.prop=t]=r,e.targetTest&&(_M.push(r),dM[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}oM(t,r),e.register&&e.register(LT,r,xT)},EE={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},TE=function(e,t,n){return 255*(6*(e+=e<0?1:e>1?-1:0)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)+.5|0},AE=function(e,t,n){var r,i,s,a,o,l,c,h,u,d,p=e?GS(e)?[e>>16,e>>8&255,255&e]:0:EE.black;if(!p){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),EE[e])p=EE[e];else if("#"===e.charAt(0)){if(e.length<6&&(r=e.charAt(1),i=e.charAt(2),s=e.charAt(3),e="#"+r+r+i+i+s+s+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(p=parseInt(e.substr(1,6),16))>>16,p>>8&255,255&p,parseInt(e.substr(7),16)/255];p=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]}else if("hsl"===e.substr(0,3))if(p=d=e.match(KS),t){if(~e.indexOf("="))return p=e.match(JS),n&&p.length<4&&(p[3]=1),p}else a=+p[0]%360/360,o=+p[1]/100,r=2*(l=+p[2]/100)-(i=l<=.5?l*(o+1):l+o-l*o),p.length>3&&(p[3]*=1),p[0]=TE(a+1/3,r,i),p[1]=TE(a,r,i),p[2]=TE(a-1/3,r,i);else p=e.match(KS)||EE.transparent;p=p.map(Number)}return t&&!d&&(r=p[0]/255,i=p[1]/255,s=p[2]/255,l=((c=Math.max(r,i,s))+(h=Math.min(r,i,s)))/2,c===h?a=o=0:(u=c-h,o=l>.5?u/(2-c-h):u/(c+h),a=c===r?(i-s)/u+(i<s?6:0):c===i?(s-r)/u+2:(r-i)/u+4,a*=60),p[0]=~~(a+.5),p[1]=~~(100*o+.5),p[2]=~~(100*l+.5)),n&&p.length<4&&(p[3]=1),p},CE=function(e){var t=[],n=[],r=-1;return e.split(RE).forEach((function(e){var i=e.match(QS)||[];t.push.apply(t,i),n.push(r+=i.length+1)})),t.c=n,t},PE=function(e,t,n){var r,i,s,a,o="",l=(e+o).match(RE),c=t?"hsla(":"rgba(",h=0;if(!l)return e;if(l=l.map((function(e){return(e=AE(e,t,1))&&c+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"})),n&&(s=CE(e),(r=n.c).join(o)!==s.c.join(o)))for(a=(i=e.replace(RE,"1").split(QS)).length-1;h<a;h++)o+=i[h]+(~r.indexOf(h)?l.shift()||c+"0,0,0,0)":(s.length?s:l.length?l:n).shift());if(!i)for(a=(i=e.split(RE)).length-1;h<a;h++)o+=i[h]+l[h];return o+i[a]},RE=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in EE)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),LE=/hsl[a]?\(/,OE=function(e){var t,n=e.join(" ");if(RE.lastIndex=0,RE.test(n))return t=LE.test(n),e[1]=PE(e[1],t),e[0]=PE(e[0],t,CE(e[1])),!0},zE=(SS=Date.now,MS=500,ES=33,TS=SS(),AS=TS,PS=CS=1e3/240,LS=function e(t){var n,r,i,s,a=SS()-AS,o=!0===t;if(a>MS&&(TS+=a-ES),((n=(i=(AS+=a)-TS)-PS)>0||o)&&(s=++yS.frame,bS=i-1e3*yS.time,yS.time=i/=1e3,PS+=n+(n>=CS?4:CS-n),r=1),o||(vS=_S(e)),r)for(wS=0;wS<RS.length;wS++)RS[wS](i,bS,s,t)},yS={time:0,frame:0,tick:function(){LS(!0)},deltaRatio:function(e){return bS/(1e3/(e||60))},wake:function(){pS&&(!uS&&XS()&&(hS=uS=window,dS=hS.document||{},rM.gsap=LT,(hS.gsapVersions||(hS.gsapVersions=[])).push(LT.version),sM(iM||hS.GreenSockGlobals||!hS.gsap&&hS||{}),xS=hS.requestAnimationFrame),vS&&yS.sleep(),_S=xS||function(e){return setTimeout(e,PS-1e3*yS.time+1|0)},gS=1,LS(2))},sleep:function(){(xS?hS.cancelAnimationFrame:clearTimeout)(vS),gS=0,_S=lM},lagSmoothing:function(e,t){MS=e||1/1e-8,ES=Math.min(t,MS,0)},fps:function(e){CS=1e3/(e||240),PS=1e3*yS.time+CS},add:function(e,t,n){var r=t?function(t,n,i,s){e(t,n,i,s),yS.remove(r)}:e;return yS.remove(e),RS[n?"unshift":"push"](r),DE(),r},remove:function(e,t){~(t=RS.indexOf(e))&&RS.splice(t,1)&&wS>=t&&wS--},_listeners:RS=[]},yS),DE=function(){return!gS&&zE.wake()},kE={},IE=/^[\d.\-M][\d.\-,\s]/,NE=/["']/g,FE=function(e){for(var t,n,r,i={},s=e.substr(1,e.length-3).split(":"),a=s[0],o=1,l=s.length;o<l;o++)n=s[o],t=o!==l-1?n.lastIndexOf(","):n.length,r=n.substr(0,t),i[a]=isNaN(r)?r.replace(NE,"").trim():+r,a=n.substr(t+1).trim();return i},UE=function(e){return function(t){return 1-e(1-t)}},BE=function e(t,n){for(var r,i=t._first;i;)i instanceof YE?e(i,n):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===n||(i.timeline?e(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},HE=function(e,t){return e&&(HS(e)?e:kE[e]||function(e){var t,n,r,i,s=(e+"").split("("),a=kE[s[0]];return a&&s.length>1&&a.config?a.config.apply(null,~e.indexOf("{")?[FE(s[1])]:(t=e,n=t.indexOf("(")+1,r=t.indexOf(")"),i=t.indexOf("(",n),t.substring(n,~i&&i<r?t.indexOf(")",r+1):r)).split(",").map(RM)):kE._CE&&IE.test(e)?kE._CE("",e):a}(e))||t},GE=function(e,t,n,r){void 0===n&&(n=function(e){return 1-t(1-e)}),void 0===r&&(r=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var i,s={easeIn:t,easeOut:n,easeInOut:r};return SM(e,(function(e){for(var t in kE[e]=rM[e]=s,kE[i=e.toLowerCase()]=n,s)kE[i+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=kE[e+"."+t]=s[t]})),s},jE=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},VE=function e(t,n,r){var i=n>=1?n:1,s=(r||(t?.3:.45))/(n<1?n:1),a=s/DS*(Math.asin(1/i)||0),o=function(e){return 1===e?1:i*Math.pow(2,-10*e)*US((e-a)*s)+1},l="out"===t?o:"in"===t?function(e){return 1-o(1-e)}:jE(o);return s=DS/s,l.config=function(n,r){return e(t,n,r)},l},WE=function e(t,n){void 0===n&&(n=1.70158);var r=function(e){return e?--e*e*((n+1)*e+n)+1:0},i="out"===t?r:"in"===t?function(e){return 1-r(1-e)}:jE(r);return i.config=function(n){return e(t,n)},i};SM("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var n=t<5?t+1:t;GE(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},(function(e){return 1-Math.pow(1-e,n)}),(function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2}))})),kE.Linear.easeNone=kE.none=kE.Linear.easeIn,GE("Elastic",VE("in"),VE("out"),VE()),function(e,t){var n=1/t,r=function(r){return r<n?e*r*r:r<.7272727272727273?e*Math.pow(r-1.5/t,2)+.75:r<.9090909090909092?e*(r-=2.25/t)*r+.9375:e*Math.pow(r-2.625/t,2)+.984375};GE("Bounce",(function(e){return 1-r(1-e)}),r)}(7.5625,2.75),GE("Expo",(function(e){return e?Math.pow(2,10*(e-1)):0})),GE("Circ",(function(e){return-(NS(1-e*e)-1)})),GE("Sine",(function(e){return 1===e?1:1-FS(e*kS)})),GE("Back",WE("in"),WE("out"),WE()),kE.SteppedEase=kE.steps=rM.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,r=e+(t?0:1),i=t?1:0;return function(e){return((r*oE(0,.99999999,e)|0)+i)*n}}},zS.ease=kE["quad.out"],SM("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(e){return xM+=e+","+e+"Params,"}));var XE=function(e,t){this.id=IS++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:wM,this.set=t?t.getSetter:hT},qE=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,tE(this,+e.duration,1,1),this.data=e.data,lS&&(this._ctx=lS,lS.data.push(this)),gS||zE.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,tE(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(DE(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(YM(this,e),!n._dp||n.parent||ZM(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&KM(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&1e-8===Math.abs(this._zTime)||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),PM(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+VM(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+VM(this),t):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?WM(this._tTime,n)+1:1},t.timeScale=function(e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var t=this.parent&&this._ts?XM(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this.totalTime(oE(-this._delay,this._tDur,t),!0),qM(this),HM(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(DE(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&1e-8!==Math.abs(this._zTime)&&(this._tTime-=1e-8)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&KM(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(WS(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?XM(t.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){void 0===e&&(e=uM);var t=oS;return oS=e,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),oS=t,this},t.globalTime=function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(t._ts||1),t=t._dp;return!this.parent&&this.vars.immediateRender?-1:n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,nE(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,nE(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(iE(this,e),WS(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,WS(t))},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-1e-8))},t.eventCallback=function(e,t,n){var r=this.vars;return arguments.length>1?(t?(r[e]=t,n&&(r[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete r[e],this):r[e]},t.then=function(e){var t=this;return new Promise((function(n){var r=HS(e)?e:LM,i=function(){var e=t.then;t.then=null,HS(r)&&(r=r(t))&&(r.then||r===t)&&(t.then=e),n(r),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?i():t._prom=i}))},t.kill=function(){SE(this)},e}();OM(qE.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var YE=function(e){function t(t,n){var r;return void 0===t&&(t={}),(r=e.call(this,t)||this).labels={},r.smoothChildTiming=!!t.smoothChildTiming,r.autoRemoveChildren=!!t.autoRemoveChildren,r._sort=WS(t.sortChildren),cS&&KM(t.parent||cS,iS(r),n),t.reversed&&r.reverse(),t.paused&&r.paused(!0),t.scrollTrigger&&JM(iS(r),t.scrollTrigger),r}sS(t,e);var n=t.prototype;return n.to=function(e,t,n){return sE(0,arguments,this),this},n.from=function(e,t,n){return sE(1,arguments,this),this},n.fromTo=function(e,t,n,r){return sE(2,arguments,this),this},n.set=function(e,t,n){return t.duration=0,t.parent=this,IM(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new sT(e,t,iE(this,n),1),this},n.call=function(e,t,n){return KM(this,sT.delayedCall(0,e,t),n)},n.staggerTo=function(e,t,n,r,i,s,a){return n.duration=t,n.stagger=n.stagger||r,n.onComplete=s,n.onCompleteParams=a,n.parent=this,new sT(e,n,iE(this,i)),this},n.staggerFrom=function(e,t,n,r,i,s,a){return n.runBackwards=1,IM(n).immediateRender=WS(n.immediateRender),this.staggerTo(e,t,n,r,i,s,a)},n.staggerFromTo=function(e,t,n,r,i,s,a,o){return r.startAt=n,IM(r).immediateRender=WS(r.immediateRender),this.staggerTo(e,t,r,i,s,a,o)},n.render=function(e,t,n){var r,i,s,a,o,l,c,h,u,d,p,f,m=this._time,g=this._dirty?this.totalDuration():this._tDur,v=this._dur,_=e<=0?0:EM(e),x=this._zTime<0!=e<0&&(this._initted||!v);if(this!==cS&&_>g&&e>=0&&(_=g),_!==this._tTime||n||x){if(m!==this._time&&v&&(_+=this._time-m,e+=this._time-m),r=_,u=this._start,l=!(h=this._ts),x&&(v||(m=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(p=this._yoyo,o=v+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*o+e,t,n);if(r=EM(_%o),_===g?(a=this._repeat,r=v):((a=~~(_/o))&&a===_/o&&(r=v,a--),r>v&&(r=v)),d=WM(this._tTime,o),!m&&this._tTime&&d!==a&&(d=a),p&&1&a&&(r=v-r,f=1),a!==d&&!this._lock){var y=p&&1&d,b=y===(p&&1&a);if(a<d&&(y=!y),m=y?0:v,this._lock=1,this.render(m||(f?0:EM(a*o)),t,!v)._lock=0,this._tTime=_,!t&&this.parent&&wE(this,"onRepeat"),this.vars.repeatRefresh&&!f&&(this.invalidate()._lock=1),m&&m!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(v=this._dur,g=this._tDur,b&&(this._lock=2,m=y?v:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!f&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;BE(this,f)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,EM(m),EM(r)),c&&(_-=r-(r=c._start))),this._tTime=_,this._time=r,this._act=!h,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,m=0),!m&&r&&!t&&(wE(this,"onStart"),this._tTime!==_))return this;if(r>=m&&e>=0)for(i=this._first;i;){if(s=i._next,(i._act||r>=i._start)&&i._ts&&c!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(r-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(r-i._start)*i._ts,t,n),r!==this._time||!this._ts&&!l){c=0,s&&(_+=this._zTime=-1e-8);break}}i=s}else{i=this._last;for(var w=e<0?e:r;i;){if(s=i._prev,(i._act||w<=i._end)&&i._ts&&c!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(w-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(w-i._start)*i._ts,t,n||oS&&(i._initted||i._startAt)),r!==this._time||!this._ts&&!l){c=0,s&&(_+=this._zTime=w?-1e-8:1e-8);break}}i=s}}if(c&&!t&&(this.pause(),c.render(r>=m?0:-1e-8)._zTime=r>=m?1:-1,this._ts))return this._start=u,qM(this),this.render(e,t,n);this._onUpdate&&!t&&wE(this,"onUpdate",!0),(_===g&&this._tTime>=this.totalDuration()||!_&&m)&&(u!==this._start&&Math.abs(h)===Math.abs(this._ts)||this._lock||((e||!v)&&(_===g&&this._ts>0||!_&&this._ts<0)&&UM(this,1),t||e<0&&!m||!_&&!m&&g||(wE(this,_===g&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(_<g&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(e,t){var n=this;if(GS(t)||(t=iE(this,t,e)),!(e instanceof qE)){if(ZS(e))return e.forEach((function(e){return n.add(e,t)})),this;if(BS(e))return this.addLabel(e,t);if(!HS(e))return this;e=sT.delayedCall(0,e)}return this!==e?KM(this,e,t):this},n.getChildren=function(e,t,n,r){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=-1e8);for(var i=[],s=this._first;s;)s._start>=r&&(s instanceof sT?t&&i.push(s):(n&&i.push(s),e&&i.push.apply(i,s.getChildren(!0,t,n)))),s=s._next;return i},n.getById=function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},n.remove=function(e){return BS(e)?this.removeLabel(e):HS(e)?this.killTweensOf(e):(FM(this,e),e===this._recent&&(this._recent=this._last),BM(this))},n.totalTime=function(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=EM(zE.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},n.addLabel=function(e,t){return this.labels[e]=iE(this,t),this},n.removeLabel=function(e){return delete this.labels[e],this},n.addPause=function(e,t,n){var r=sT.delayedCall(0,t||lM,n);return r.data="isPause",this._hasPause=1,KM(this,r,iE(this,e))},n.removePause=function(e){var t=this._first;for(e=iE(this,e);t;)t._start===e&&"isPause"===t.data&&UM(t),t=t._next},n.killTweensOf=function(e,t,n){for(var r=this.getTweensOf(e,n),i=r.length;i--;)ZE!==r[i]&&r[i].kill(e,t);return this},n.getTweensOf=function(e,t){for(var n,r=[],i=uE(e),s=this._first,a=GS(t);s;)s instanceof sT?AM(s._targets,i)&&(a?(!ZE||s._initted&&s._ts)&&s.globalTime(0)<=t&&s.globalTime(s.totalDuration())>t:!t||s.isActive())&&r.push(s):(n=s.getTweensOf(i,t)).length&&r.push.apply(r,n),s=s._next;return r},n.tweenTo=function(e,t){t=t||{};var n,r=this,i=iE(r,e),s=t,a=s.startAt,o=s.onStart,l=s.onStartParams,c=s.immediateRender,h=sT.to(r,OM({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:t.duration||Math.abs((i-(a&&"time"in a?a.time:r._time))/r.timeScale())||1e-8,onStart:function(){if(r.pause(),!n){var e=t.duration||Math.abs((i-(a&&"time"in a?a.time:r._time))/r.timeScale());h._dur!==e&&tE(h,e,0,1).render(h._time,!0,!0),n=1}o&&o.apply(h,l||[])}},t));return c?h.render(0):h},n.tweenFromTo=function(e,t,n){return this.tweenTo(t,OM({startAt:{time:iE(this,e)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(e){return void 0===e&&(e=this._time),bE(this,iE(this,e))},n.previousLabel=function(e){return void 0===e&&(e=this._time),bE(this,iE(this,e),1)},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+1e-8)},n.shiftChildren=function(e,t,n){void 0===n&&(n=0);for(var r,i=this._first,s=this.labels;i;)i._start>=n&&(i._start+=e,i._end+=e),i=i._next;if(t)for(r in s)s[r]>=n&&(s[r]+=e);return BM(this)},n.invalidate=function(t){var n=this._first;for(this._lock=0;n;)n.invalidate(t),n=n._next;return e.prototype.invalidate.call(this,t)},n.clear=function(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),BM(this)},n.totalDuration=function(e){var t,n,r,i=0,s=this,a=s._last,o=1e8;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-e:e));if(s._dirty){for(r=s.parent;a;)t=a._prev,a._dirty&&a.totalDuration(),(n=a._start)>o&&s._sort&&a._ts&&!s._lock?(s._lock=1,KM(s,a,n-a._delay,1)._lock=0):o=n,n<0&&a._ts&&(i-=n,(!r&&!s._dp||r&&r.smoothChildTiming)&&(s._start+=n/s._ts,s._time-=n,s._tTime-=n),s.shiftChildren(-n,!1,-1/0),o=0),a._end>i&&a._ts&&(i=a._end),a=t;tE(s,s===cS&&s._time>i?s._time:i,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(e){if(cS._ts&&(PM(cS,XM(e,cS)),fS=zE.frame),zE.frame>=vM){vM+=OS.autoSleep||120;var t=cS._first;if((!t||!t._ts)&&OS.autoSleep&&zE._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||zE.sleep()}}},t}(qE);OM(YE.prototype,{_lock:0,_hasPause:0,_forcing:0});var ZE,KE,JE=function(e,t,n,r,i,s,a){var o,l,c,h,u,d,p,f,m=new xT(this._pt,e,t,0,1,pT,null,i),g=0,v=0;for(m.b=n,m.e=r,n+="",(p=~(r+="").indexOf("random("))&&(r=xE(r)),s&&(s(f=[n,r],e,t),n=f[0],r=f[1]),l=n.match($S)||[];o=$S.exec(r);)h=o[0],u=r.substring(g,o.index),c?c=(c+1)%5:"rgba("===u.substr(-5)&&(c=1),h!==l[v++]&&(d=parseFloat(l[v-1])||0,m._pt={_next:m._pt,p:u||1===v?u:",",s:d,c:"="===h.charAt(1)?TM(d,h)-d:parseFloat(h)-d,m:c&&c<4?Math.round:0},g=$S.lastIndex);return m.c=g<r.length?r.substring(g,r.length):"",m.fp=a,(eM.test(r)||p)&&(m.e=0),this._pt=m,m},QE=function(e,t,n,r,i,s,a,o,l,c){HS(r)&&(r=r(i||0,e,s));var h,u=e[t],d="get"!==n?n:HS(u)?l?e[t.indexOf("set")||!HS(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():u,p=HS(u)?l?lT:oT:aT;if(BS(r)&&(~r.indexOf("random(")&&(r=xE(r)),"="===r.charAt(1)&&((h=TM(d,r)+(lE(d)||0))||0===h)&&(r=h)),!c||d!==r||KE)return isNaN(d*r)||""===r?JE.call(this,e,t,d,r,p,o||OS.stringFilter,l):(h=new xT(this._pt,e,t,+d||0,r-(d||0),"boolean"==typeof u?dT:uT,0,p),l&&(h.fp=l),a&&h.modifier(a,this,e),this._pt=h)},$E=function(e,t,n,r,i,s){var a,o,l,c;if(mM[e]&&!1!==(a=new mM[e]).init(i,a.rawVars?t[e]:function(e,t,n,r,i){if(HS(e)&&(e=nT(e,i,t,n,r)),!VS(e)||e.style&&e.nodeType||ZS(e)||YS(e))return BS(e)?nT(e,i,t,n,r):e;var s,a={};for(s in e)a[s]=nT(e[s],i,t,n,r);return a}(t[e],r,i,s,n),n,r,s)&&(n._pt=o=new xT(n._pt,i,e,0,1,a.render,a,0,a.priority),n!==mS))for(l=n._ptLookup[n._targets.indexOf(i)],c=a._props.length;c--;)l[a._props[c]]=o;return a},eT=function e(t,n,r){var i,s,a,o,l,c,h,u,d,p,f,m,g,v=t.vars,_=v.ease,x=v.startAt,y=v.immediateRender,b=v.lazy,w=v.onUpdate,S=v.onUpdateParams,M=v.callbackScope,E=v.runBackwards,T=v.yoyoEase,A=v.keyframes,C=v.autoRevert,P=t._dur,R=t._startAt,L=t._targets,O=t.parent,z=O&&"nested"===O.data?O.vars.targets:L,D="auto"===t._overwrite&&!aS,k=t.timeline;if(k&&(!A||!_)&&(_="none"),t._ease=HE(_,zS.ease),t._yEase=T?UE(HE(!0===T?_:T,zS.ease)):0,T&&t._yoyo&&!t._repeat&&(T=t._yEase,t._yEase=t._ease,t._ease=T),t._from=!k&&!!v.runBackwards,!k||A&&!v.stagger){if(m=(u=L[0]?bM(L[0]).harness:0)&&v[u.prop],i=kM(v,dM),R&&(R._zTime<0&&R.progress(1),n<0&&E&&y&&!C?R.render(-1,!0):R.revert(E&&P?hM:cM),R._lazy=0),x){if(UM(t._startAt=sT.set(L,OM({data:"isStart",overwrite:!1,parent:O,immediateRender:!0,lazy:WS(b),startAt:null,delay:0,onUpdate:w,onUpdateParams:S,callbackScope:M,stagger:0},x))),t._startAt._dp=0,n<0&&(oS||!y&&!C)&&t._startAt.revert(hM),y&&P&&n<=0&&r<=0)return void(n&&(t._zTime=n))}else if(E&&P&&!R)if(n&&(y=!1),a=OM({overwrite:!1,data:"isFromStart",lazy:y&&WS(b),immediateRender:y,stagger:0,parent:O},i),m&&(a[u.prop]=m),UM(t._startAt=sT.set(L,a)),t._startAt._dp=0,n<0&&(oS?t._startAt.revert(hM):t._startAt.render(-1,!0)),t._zTime=n,y){if(!n)return}else e(t._startAt,1e-8,1e-8);for(t._pt=t._ptCache=0,b=P&&WS(b)||b&&!P,s=0;s<L.length;s++){if(h=(l=L[s])._gsap||yM(L)[s]._gsap,t._ptLookup[s]=p={},fM[h.id]&&pM.length&&CM(),f=z===L?s:z.indexOf(l),u&&!1!==(d=new u).init(l,m||i,t,f,z)&&(t._pt=o=new xT(t._pt,l,d.name,0,1,d.render,d,0,d.priority),d._props.forEach((function(e){p[e]=o})),d.priority&&(c=1)),!u||m)for(a in i)mM[a]&&(d=$E(a,i,t,f,l,z))?d.priority&&(c=1):p[a]=o=QE.call(t,l,a,"get",i[a],f,z,0,v.stringFilter);t._op&&t._op[s]&&t.kill(l,t._op[s]),D&&t._pt&&(ZE=t,cS.killTweensOf(l,p,t.globalTime(n)),g=!t.parent,ZE=0),t._pt&&b&&(fM[h.id]=1)}c&&_T(t),t._onInit&&t._onInit(t)}t._onUpdate=w,t._initted=(!t._op||t._pt)&&!g,A&&n<=0&&k.render(1e8,!0,!0)},tT=function(e,t,n,r){var i,s,a=t.ease||r||"power1.inOut";if(ZS(t))s=n[e]||(n[e]=[]),t.forEach((function(e,n){return s.push({t:n/(t.length-1)*100,v:e,e:a})}));else for(i in t)s=n[i]||(n[i]=[]),"ease"===i||s.push({t:parseFloat(e),v:t[i],e:a})},nT=function(e,t,n,r,i){return HS(e)?e.call(t,n,r,i):BS(e)&&~e.indexOf("random(")?xE(e):e},rT=xM+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",iT={};SM(rT+",id,stagger,delay,duration,paused,scrollTrigger",(function(e){return iT[e]=1}));var sT=function(e){function t(t,n,r,i){var s;"number"==typeof n&&(r.duration=n,n=r,r=null);var a,o,l,c,h,u,d,p,f=(s=e.call(this,i?n:IM(n))||this).vars,m=f.duration,g=f.delay,v=f.immediateRender,_=f.stagger,x=f.overwrite,y=f.keyframes,b=f.defaults,w=f.scrollTrigger,S=f.yoyoEase,M=n.parent||cS,E=(ZS(t)||YS(t)?GS(t[0]):"length"in n)?[t]:uE(t);if(s._targets=E.length?yM(E):aM(0,!OS.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=x,y||_||qS(m)||qS(g)){if(n=s.vars,(a=s.timeline=new YE({data:"nested",defaults:b||{},targets:M&&"nested"===M.data?M.vars.targets:E})).kill(),a.parent=a._dp=iS(s),a._start=0,_||qS(m)||qS(g)){if(c=E.length,d=_&&fE(_),VS(_))for(h in _)~rT.indexOf(h)&&(p||(p={}),p[h]=_[h]);for(o=0;o<c;o++)(l=kM(n,iT)).stagger=0,S&&(l.yoyoEase=S),p&&zM(l,p),u=E[o],l.duration=+nT(m,iS(s),o,u,E),l.delay=(+nT(g,iS(s),o,u,E)||0)-s._delay,!_&&1===c&&l.delay&&(s._delay=g=l.delay,s._start+=g,l.delay=0),a.to(u,l,d?d(o,u,E):0),a._ease=kE.none;a.duration()?m=g=0:s.timeline=0}else if(y){IM(OM(a.vars.defaults,{ease:"none"})),a._ease=HE(y.ease||n.ease||"none");var T,A,C,P=0;if(ZS(y))y.forEach((function(e){return a.to(E,e,">")})),a.duration();else{for(h in l={},y)"ease"===h||"easeEach"===h||tT(h,y[h],l,y.easeEach);for(h in l)for(T=l[h].sort((function(e,t){return e.t-t.t})),P=0,o=0;o<T.length;o++)(C={ease:(A=T[o]).e,duration:(A.t-(o?T[o-1].t:0))/100*m})[h]=A.v,a.to(E,C,P),P+=C.duration;a.duration()<m&&a.to({},{duration:m-a.duration()})}}m||s.duration(m=a.duration())}else s.timeline=0;return!0!==x||aS||(ZE=iS(s),cS.killTweensOf(E),ZE=0),KM(M,iS(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),(v||!m&&!y&&s._start===EM(M._time)&&WS(v)&&jM(iS(s))&&"nested"!==M.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-g)||0)),w&&JM(iS(s),w),s}sS(t,e);var n=t.prototype;return n.render=function(e,t,n){var r,i,s,a,o,l,c,h,u,d=this._time,p=this._tDur,f=this._dur,m=e<0,g=e>p-1e-8&&!m?p:e<1e-8?0:e;if(f){if(g!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==m){if(r=g,h=this.timeline,this._repeat){if(a=f+this._rDelay,this._repeat<-1&&m)return this.totalTime(100*a+e,t,n);if(r=EM(g%a),g===p?(s=this._repeat,r=f):((s=~~(g/a))&&s===g/a&&(r=f,s--),r>f&&(r=f)),(l=this._yoyo&&1&s)&&(u=this._yEase,r=f-r),o=WM(this._tTime,a),r===d&&!n&&this._initted)return this._tTime=g,this;s!==o&&(h&&this._yEase&&BE(h,l),!this.vars.repeatRefresh||l||this._lock||(this._lock=n=1,this.render(EM(a*s),!0).invalidate()._lock=0))}if(!this._initted){if(QM(this,m?e:r,n,t,g))return this._tTime=0,this;if(d!==this._time)return this;if(f!==this._dur)return this.render(e,t,n)}if(this._tTime=g,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(u||this._ease)(r/f),this._from&&(this.ratio=c=1-c),r&&!d&&!t&&(wE(this,"onStart"),this._tTime!==g))return this;for(i=this._pt;i;)i.r(c,i.d),i=i._next;h&&h.render(e<0?e:!r&&l?-1e-8:h._dur*h._ease(r/this._dur),t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(m&&GM(this,e,0,n),wE(this,"onUpdate")),this._repeat&&s!==o&&this.vars.onRepeat&&!t&&this.parent&&wE(this,"onRepeat"),g!==this._tDur&&g||this._tTime!==g||(m&&!this._onUpdate&&GM(this,e,0,!0),(e||!f)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&UM(this,1),t||m&&!d||!(g||d||l)||(wE(this,g===p?"onComplete":"onReverseComplete",!0),this._prom&&!(g<p&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,r){var i,s,a,o=e.ratio,l=t<0||!t&&(!e._start&&$M(e)&&(e._initted||!eE(e))||(e._ts<0||e._dp._ts<0)&&!eE(e))?0:1,c=e._rDelay,h=0;if(c&&e._repeat&&(h=oE(0,e._tDur,t),s=WM(h,c),e._yoyo&&1&s&&(l=1-l),s!==WM(e._tTime,c)&&(o=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==o||oS||r||1e-8===e._zTime||!t&&e._zTime){if(!e._initted&&QM(e,t,r,n,h))return;for(a=e._zTime,e._zTime=t||(n?1e-8:0),n||(n=t&&!a),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=h,i=e._pt;i;)i.r(l,i.d),i=i._next;t<0&&GM(e,t,0,!0),e._onUpdate&&!n&&wE(e,"onUpdate"),h&&e._repeat&&!n&&e.parent&&wE(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&UM(e,1),n||oS||(wE(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,n);return this},n.targets=function(){return this._targets},n.invalidate=function(t){return(!t||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(t),e.prototype.invalidate.call(this,t)},n.resetTo=function(e,t,n,r){gS||zE.wake(),this._ts||this.play();var i=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||eT(this,i),function(e,t,n,r,i,s,a){var o,l,c,h,u=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!u)for(u=e._ptCache[t]=[],c=e._ptLookup,h=e._targets.length;h--;){if((o=c[h][t])&&o.d&&o.d._pt)for(o=o.d._pt;o&&o.p!==t&&o.fp!==t;)o=o._next;if(!o)return KE=1,e.vars[t]="+=0",eT(e,a),KE=0,1;u.push(o)}for(h=u.length;h--;)(o=(l=u[h])._pt||l).s=!r&&0!==r||i?o.s+(r||0)+s*o.c:r,o.c=n-o.s,l.e&&(l.e=MM(n)+lE(l.e)),l.b&&(l.b=o.s+lE(l.b))}(this,e,t,n,r,this._ease(i/this._dur),i)?this.resetTo(e,t,n,r):(YM(this,0),this.parent||NM(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t))return this._lazy=this._pt=0,this.parent?SE(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,ZE&&!0!==ZE.vars.overwrite)._first||SE(this),this.parent&&n!==this.timeline.totalDuration()&&tE(this,this._dur*this.timeline._tDur/n,0,1),this}var r,i,s,a,o,l,c,h=this._targets,u=e?uE(e):h,d=this._ptLookup,p=this._pt;if((!t||"all"===t)&&function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0}(h,u))return"all"===t&&(this._pt=0),SE(this);for(r=this._op=this._op||[],"all"!==t&&(BS(t)&&(o={},SM(t,(function(e){return o[e]=1})),t=o),t=function(e,t){var n,r,i,s,a=e[0]?bM(e[0]).harness:0,o=a&&a.aliases;if(!o)return t;for(r in n=zM({},t),o)if(r in n)for(i=(s=o[r].split(",")).length;i--;)n[s[i]]=n[r];return n}(h,t)),c=h.length;c--;)if(~u.indexOf(h[c]))for(o in i=d[c],"all"===t?(r[c]=t,a=i,s={}):(s=r[c]=r[c]||{},a=t),a)(l=i&&i[o])&&("kill"in l.d&&!0!==l.d.kill(o)||FM(this,l,"_pt"),delete i[o]),"all"!==s&&(s[o]=1);return this._initted&&!this._pt&&p&&SE(this),this},t.to=function(e,n){return new t(e,n,arguments[2])},t.from=function(e,t){return sE(1,arguments)},t.delayedCall=function(e,n,r,i){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},t.fromTo=function(e,t,n){return sE(2,arguments)},t.set=function(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(e,n)},t.killTweensOf=function(e,t,n){return cS.killTweensOf(e,t,n)},t}(qE);OM(sT.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),SM("staggerTo,staggerFrom,staggerFromTo",(function(e){sT[e]=function(){var t=new YE,n=cE.call(arguments,0);return n.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,n)}}));var aT=function(e,t,n){return e[t]=n},oT=function(e,t,n){return e[t](n)},lT=function(e,t,n,r){return e[t](r.fp,n)},cT=function(e,t,n){return e.setAttribute(t,n)},hT=function(e,t){return HS(e[t])?oT:jS(e[t])&&e.setAttribute?cT:aT},uT=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},dT=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},pT=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},fT=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},mT=function(e,t,n,r){for(var i,s=this._pt;s;)i=s._next,s.p===r&&s.modifier(e,t,n),s=i},gT=function(e){for(var t,n,r=this._pt;r;)n=r._next,r.p===e&&!r.op||r.op===e?FM(this,r,"_pt"):r.dep||(t=1),r=n;return!t},vT=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},_T=function(e){for(var t,n,r,i,s=e._pt;s;){for(t=s._next,n=r;n&&n.pr>s.pr;)n=n._next;(s._prev=n?n._prev:i)?s._prev._next=s:r=s,(s._next=n)?n._prev=s:i=s,s=t}e._pt=r},xT=function(){function e(e,t,n,r,i,s,a,o,l){this.t=t,this.s=r,this.c=i,this.p=n,this.r=s||uT,this.d=a||this,this.set=o||aT,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=vT,this.m=e,this.mt=n,this.tween=t},e}();SM(xM+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(e){return dM[e]=1})),rM.TweenMax=rM.TweenLite=sT,rM.TimelineLite=rM.TimelineMax=YE,cS=new YE({sortChildren:!1,defaults:zS,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),OS.stringFilter=OE;var yT=[],bT={},wT=[],ST=0,MT=function(e){return(bT[e]||wT).map((function(e){return e()}))},ET=function(){var e=Date.now(),t=[];e-ST>2&&(MT("matchMediaInit"),yT.forEach((function(e){var n,r,i,s,a=e.queries,o=e.conditions;for(r in a)(n=hS.matchMedia(a[r]).matches)&&(i=1),n!==o[r]&&(o[r]=n,s=1);s&&(e.revert(),i&&t.push(e))})),MT("matchMediaRevert"),t.forEach((function(e){return e.onMatch(e)})),ST=e,MT("matchMedia"))},TT=function(){function e(e,t){this.selector=t&&dE(t),this.data=[],this._r=[],this.isReverted=!1,e&&this.add(e)}var t=e.prototype;return t.add=function(e,t,n){HS(e)&&(n=t,t=e,e=HS);var r=this,i=function(){var e,i=lS,s=r.selector;return i&&i!==r&&i.data.push(r),n&&(r.selector=dE(n)),lS=r,e=t.apply(r,arguments),HS(e)&&r._r.push(e),lS=i,r.selector=s,r.isReverted=!1,e};return r.last=i,e===HS?i(r):e?r[e]=i:i},t.ignore=function(e){var t=lS;lS=null,e(this),lS=t},t.getTweens=function(){var t=[];return this.data.forEach((function(n){return n instanceof e?t.push.apply(t,n.getTweens()):n instanceof sT&&!(n.parent&&"nested"===n.parent.data)&&t.push(n)})),t},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,t){var n=this;if(e){var r=this.getTweens();this.data.forEach((function(e){"isFlip"===e.data&&(e.revert(),e.getChildren(!0,!0,!1).forEach((function(e){return r.splice(r.indexOf(e),1)})))})),r.map((function(e){return{g:e.globalTime(0),t:e}})).sort((function(e,t){return t.g-e.g||-1})).forEach((function(t){return t.t.revert(e)})),this.data.forEach((function(t){return!(t instanceof qE)&&t.revert&&t.revert(e)})),this._r.forEach((function(t){return t(e,n)})),this.isReverted=!0}else this.data.forEach((function(e){return e.kill&&e.kill()}));if(this.clear(),t){var i=yT.indexOf(this);~i&&yT.splice(i,1)}},t.revert=function(e){this.kill(e||{})},e}(),AT=function(){function e(e){this.contexts=[],this.scope=e}var t=e.prototype;return t.add=function(e,t,n){VS(e)||(e={matches:e});var r,i,s,a=new TT(0,n||this.scope),o=a.conditions={};for(i in this.contexts.push(a),t=a.add("onMatch",t),a.queries=e,e)"all"===i?s=1:(r=hS.matchMedia(e[i]))&&(yT.indexOf(a)<0&&yT.push(a),(o[i]=r.matches)&&(s=1),r.addListener?r.addListener(ET):r.addEventListener("change",ET));return s&&t(a),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach((function(t){return t.kill(e,!0)}))},e}(),CT={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){return ME(e)}))},timeline:function(e){return new YE(e)},getTweensOf:function(e,t){return cS.getTweensOf(e,t)},getProperty:function(e,t,n,r){BS(e)&&(e=uE(e)[0]);var i=bM(e||{}).get,s=n?LM:RM;return"native"===n&&(n=""),e?t?s((mM[t]&&mM[t].get||i)(e,t,n,r)):function(t,n,r){return s((mM[t]&&mM[t].get||i)(e,t,n,r))}:e},quickSetter:function(e,t,n){if((e=uE(e)).length>1){var r=e.map((function(e){return LT.quickSetter(e,t,n)})),i=r.length;return function(e){for(var t=i;t--;)r[t](e)}}e=e[0]||{};var s=mM[t],a=bM(e),o=a.harness&&(a.harness.aliases||{})[t]||t,l=s?function(t){var r=new s;mS._pt=0,r.init(e,n?t+n:t,mS,0,[e]),r.render(1,r),mS._pt&&fT(1,mS)}:a.set(e,o);return s?l:function(t){return l(e,o,n?t+n:t,a,1)}},quickTo:function(e,t,n){var r,i=LT.to(e,zM(((r={})[t]="+=0.1",r.paused=!0,r),n||{})),s=function(e,n,r){return i.resetTo(t,e,n,r)};return s.tween=i,s},isTweening:function(e){return cS.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=HE(e.ease,zS.ease)),DM(zS,e||{})},config:function(e){return DM(OS,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,i=e.defaults,s=e.extendTimeline;(r||"").split(",").forEach((function(e){return e&&!mM[e]&&!rM[e]&&aM()})),gM[t]=function(e,t,r){return n(uE(e),OM(t||{},i),r)},s&&(YE.prototype[t]=function(e,n,r){return this.add(gM[t](e,VS(n)?n:(r=n)&&{},this),r)})},registerEase:function(e,t){kE[e]=HE(t)},parseEase:function(e,t){return arguments.length?HE(e,t):kE},getById:function(e){return cS.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var n,r,i=new YE(e);for(i.smoothChildTiming=WS(e.smoothChildTiming),cS.remove(i),i._dp=0,i._time=i._tTime=cS._time,n=cS._first;n;)r=n._next,!t&&!n._dur&&n instanceof sT&&n.vars.onComplete===n._targets[0]||KM(i,n,n._start-n._delay),n=r;return KM(cS,i,0),i},context:function(e,t){return e?new TT(e,t):lS},matchMedia:function(e){return new AT(e)},matchMediaRefresh:function(){return yT.forEach((function(e){var t,n,r=e.conditions;for(n in r)r[n]&&(r[n]=!1,t=1);t&&e.revert()}))||ET()},addEventListener:function(e,t){var n=bT[e]||(bT[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=bT[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:function e(t,n,r){var i=n-t;return ZS(t)?_E(t,e(0,t.length),n):aE(r,(function(e){return(i+(e-t)%i)%i+t}))},wrapYoyo:function e(t,n,r){var i=n-t,s=2*i;return ZS(t)?_E(t,e(0,t.length-1),n):aE(r,(function(e){return t+((e=(s+(e-t)%s)%s||0)>i?s-e:e)}))},distribute:fE,random:vE,snap:gE,normalize:function(e,t,n){return yE(e,t,0,1,n)},getUnit:lE,clamp:function(e,t,n){return aE(n,(function(n){return oE(e,t,n)}))},splitColor:AE,toArray:uE,selector:dE,mapRange:yE,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||lE(n))}},interpolate:function e(t,n,r,i){var s=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!s){var a,o,l,c,h,u=BS(t),d={};if(!0===r&&(i=1)&&(r=null),u)t={p:t},n={p:n};else if(ZS(t)&&!ZS(n)){for(l=[],c=t.length,h=c-2,o=1;o<c;o++)l.push(e(t[o-1],t[o]));c--,s=function(e){e*=c;var t=Math.min(h,~~e);return l[t](e-t)},r=n}else i||(t=zM(ZS(t)?[]:{},t));if(!l){for(a in n)QE.call(d,t,a,"get",n[a]);s=function(e){return fT(e,d)||(u?t.p:t)}}}return aE(r,s)},shuffle:pE},install:sM,effects:gM,ticker:zE,updateRoot:YE.updateRoot,plugins:mM,globalTimeline:cS,core:{PropTween:xT,globals:oM,Tween:sT,Timeline:YE,Animation:qE,getCache:bM,_removeLinkedListItem:FM,reverting:function(){return oS},context:function(e){return e&&lS&&(lS.data.push(e),e._ctx=lS),lS},suppressOverwrites:function(e){return aS=e}}};SM("to,from,fromTo,delayedCall,set,killTweensOf",(function(e){return CT[e]=sT[e]})),zE.add(YE.updateRoot),mS=CT.to({},{duration:0});var PT=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},RT=function(e,t){return{name:e,rawVars:1,init:function(e,n,r){r._onInit=function(e){var r,i;if(BS(n)&&(r={},SM(n,(function(e){return r[e]=1})),n=r),t){for(i in r={},n)r[i]=t(n[i]);n=r}!function(e,t){var n,r,i,s=e._targets;for(n in t)for(r=s.length;r--;)(i=e._ptLookup[r][n])&&(i=i.d)&&(i._pt&&(i=PT(i,n)),i&&i.modifier&&i.modifier(t[n],e,s[r],n))}(e,n)}}}},LT=CT.registerPlugin({name:"attr",init:function(e,t,n,r,i){var s,a,o;for(s in this.tween=n,t)o=e.getAttribute(s)||"",(a=this.add(e,"setAttribute",(o||0)+"",t[s],r,i,0,0,s)).op=s,a.b=o,this._props.push(s)},render:function(e,t){for(var n=t._pt;n;)oS?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},RT("roundProps",mE),RT("modifiers"),RT("snap",gE))||CT;sT.version=YE.version=LT.version="3.11.3",pS=1,XS()&&DE(),kE.Power0,kE.Power1,kE.Power2,kE.Power3,kE.Power4,kE.Linear,kE.Quad,kE.Cubic,kE.Quart,kE.Quint,kE.Strong,kE.Elastic,kE.Back,kE.SteppedEase,kE.Bounce,kE.Sine,kE.Expo,kE.Circ;
/*!
 * CSSPlugin 3.11.3
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
var OT,zT,DT,kT,IT,NT,FT,UT,BT={},HT=180/Math.PI,GT=Math.PI/180,jT=Math.atan2,VT=/([A-Z])/g,WT=/(left|right|width|margin|padding|x)/i,XT=/[\s,\(]\S/,qT={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},YT=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},ZT=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},KT=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},JT=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},QT=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},$T=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},eA=function(e,t,n){return e.style[t]=n},tA=function(e,t,n){return e.style.setProperty(t,n)},nA=function(e,t,n){return e._gsap[t]=n},rA=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},iA=function(e,t,n,r,i){var s=e._gsap;s.scaleX=s.scaleY=n,s.renderTransform(i,s)},sA=function(e,t,n,r,i){var s=e._gsap;s[t]=n,s.renderTransform(i,s)},aA="transform",oA=aA+"Origin",lA=function(e,t){var n=this,r=this.target,i=r.style;if(e in BT){if(this.tfm=this.tfm||{},"transform"!==e&&(~(e=qT[e]||e).indexOf(",")?e.split(",").forEach((function(e){return n.tfm[e]=TA(r,e)})):this.tfm[e]=r._gsap.x?r._gsap[e]:TA(r,e)),this.props.indexOf(aA)>=0)return;r._gsap.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(oA,t,"")),e=aA}(i||t)&&this.props.push(e,t,i[e])},cA=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},hA=function(){var e,t,n=this.props,r=this.target,i=r.style,s=r._gsap;for(e=0;e<n.length;e+=3)n[e+1]?r[n[e]]=n[e+2]:n[e+2]?i[n[e]]=n[e+2]:i.removeProperty(n[e].replace(VT,"-$1").toLowerCase());if(this.tfm){for(t in this.tfm)s[t]=this.tfm[t];s.svg&&(s.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),!(e=FT())||e.isStart||i[aA]||(cA(i),s.uncache=1)}},uA=function(e,t){var n={target:e,props:[],revert:hA,save:lA};return t&&t.split(",").forEach((function(e){return n.save(e)})),n},dA=function(e,t){var n=zT.createElementNS?zT.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):zT.createElement(e);return n.style?n:zT.createElement(e)},pA=function e(t,n,r){var i=getComputedStyle(t);return i[n]||i.getPropertyValue(n.replace(VT,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&e(t,mA(n)||n,1)||""},fA="O,Moz,ms,Ms,Webkit".split(","),mA=function(e,t,n){var r=(t||IT).style,i=5;if(e in r&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);i--&&!(fA[i]+e in r););return i<0?null:(3===i?"ms":i>=0?fA[i]:"")+e},gA=function(){"undefined"!=typeof window&&window.document&&(OT=window,zT=OT.document,DT=zT.documentElement,IT=dA("div")||{style:{}},dA("div"),aA=mA(aA),oA=aA+"Origin",IT.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",UT=!!mA("perspective"),FT=LT.core.reverting,kT=1)},vA=function e(t){var n,r=dA("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,s=this.nextSibling,a=this.style.cssText;if(DT.appendChild(r),r.appendChild(this),this.style.display="block",t)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch(o){}else this._gsapBBox&&(n=this._gsapBBox());return i&&(s?i.insertBefore(this,s):i.appendChild(this)),DT.removeChild(r),this.style.cssText=a,n},_A=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},xA=function(e){var t;try{t=e.getBBox()}catch(n){t=vA.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===vA||(t=vA.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+_A(e,["x","cx","x1"])||0,y:+_A(e,["y","cy","y1"])||0,width:0,height:0}},yA=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!xA(e))},bA=function(e,t){if(t){var n=e.style;t in BT&&t!==oA&&(t=aA),n.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),n.removeProperty(t.replace(VT,"-$1").toLowerCase())):n.removeAttribute(t)}},wA=function(e,t,n,r,i,s){var a=new xT(e._pt,t,n,0,1,s?$T:QT);return e._pt=a,a.b=r,a.e=i,e._props.push(n),a},SA={deg:1,rad:1,turn:1},MA={grid:1,flex:1},EA=function e(t,n,r,i){var s,a,o,l,c=parseFloat(r)||0,h=(r+"").trim().substr((c+"").length)||"px",u=IT.style,d=WT.test(n),p="svg"===t.tagName.toLowerCase(),f=(p?"client":"offset")+(d?"Width":"Height"),m=100,g="px"===i,v="%"===i;return i===h||!c||SA[i]||SA[h]?c:("px"!==h&&!g&&(c=e(t,n,r,"px")),l=t.getCTM&&yA(t),!v&&"%"!==h||!BT[n]&&!~n.indexOf("adius")?(u[d?"width":"height"]=m+(g?h:i),a=~n.indexOf("adius")||"em"===i&&t.appendChild&&!p?t:t.parentNode,l&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==zT&&a.appendChild||(a=zT.body),(o=a._gsap)&&v&&o.width&&d&&o.time===zE.time&&!o.uncache?MM(c/o.width*m):((v||"%"===h)&&!MA[pA(a,"display")]&&(u.position=pA(t,"position")),a===t&&(u.position="static"),a.appendChild(IT),s=IT[f],a.removeChild(IT),u.position="absolute",d&&v&&((o=bM(a)).time=zE.time,o.width=a[f]),MM(g?s*c/m:s&&c?m/s*c:0))):(s=l?t.getBBox()[d?"width":"height"]:t[f],MM(v?c/s*m:c/100*s)))},TA=function(e,t,n,r){var i;return kT||gA(),t in qT&&"transform"!==t&&~(t=qT[t]).indexOf(",")&&(t=t.split(",")[0]),BT[t]&&"transform"!==t?(i=NA(e,r),i="transformOrigin"!==t?i[t]:i.svg?i.origin:FA(pA(e,oA))+" "+i.zOrigin+"px"):(!(i=e.style[t])||"auto"===i||r||~(i+"").indexOf("calc("))&&(i=RA[t]&&RA[t](e,t,n)||pA(e,t)||wM(e,t)||("opacity"===t?1:0)),n&&!~(i+"").trim().indexOf(" ")?EA(e,t,i,n)+n:i},AA=function(e,t,n,r){if(!n||"none"===n){var i=mA(t,e,1),s=i&&pA(e,i,1);s&&s!==n?(t=i,n=s):"borderColor"===t&&(n=pA(e,"borderTopColor"))}var a,o,l,c,h,u,d,p,f,m,g,v=new xT(this._pt,e.style,t,0,1,pT),_=0,x=0;if(v.b=n,v.e=r,n+="","auto"===(r+="")&&(e.style[t]=r,r=pA(e,t)||r,e.style[t]=n),OE(a=[n,r]),r=a[1],l=(n=a[0]).match(QS)||[],(r.match(QS)||[]).length){for(;o=QS.exec(r);)d=o[0],f=r.substring(_,o.index),h?h=(h+1)%5:"rgba("!==f.substr(-5)&&"hsla("!==f.substr(-5)||(h=1),d!==(u=l[x++]||"")&&(c=parseFloat(u)||0,g=u.substr((c+"").length),"="===d.charAt(1)&&(d=TM(c,d)+g),p=parseFloat(d),m=d.substr((p+"").length),_=QS.lastIndex-m.length,m||(m=m||OS.units[t]||g,_===r.length&&(r+=m,v.e+=m)),g!==m&&(c=EA(e,t,u,m)||0),v._pt={_next:v._pt,p:f||1===x?f:",",s:c,c:p-c,m:h&&h<4||"zIndex"===t?Math.round:0});v.c=_<r.length?r.substring(_,r.length):""}else v.r="display"===t&&"none"===r?$T:QT;return eM.test(r)&&(v.e=0),this._pt=v,v},CA={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},PA=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,r,i,s=t.t,a=s.style,o=t.u,l=s._gsap;if("all"===o||!0===o)a.cssText="",r=1;else for(i=(o=o.split(",")).length;--i>-1;)n=o[i],BT[n]&&(r=1,n="transformOrigin"===n?oA:aA),bA(s,n);r&&(bA(s,aA),l&&(l.svg&&s.removeAttribute("transform"),NA(s,1),l.uncache=1,cA(a)))}},RA={clearProps:function(e,t,n,r,i){if("isFromStart"!==i.data){var s=e._pt=new xT(e._pt,t,n,0,0,PA);return s.u=r,s.pr=-10,s.tween=i,e._props.push(n),1}}},LA=[1,0,0,1,0,0],OA={},zA=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},DA=function(e){var t=pA(e,aA);return zA(t)?LA:t.substr(7).match(JS).map(MM)},kA=function(e,t){var n,r,i,s,a=e._gsap||bM(e),o=e.style,l=DA(e);return a.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(i=e.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?LA:l:(l!==LA||e.offsetParent||e===DT||a.svg||(i=o.display,o.display="block",(n=e.parentNode)&&e.offsetParent||(s=1,r=e.nextElementSibling,DT.appendChild(e)),l=DA(e),i?o.display=i:bA(e,"display"),s&&(r?n.insertBefore(e,r):n?n.appendChild(e):DT.removeChild(e))),t&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},IA=function(e,t,n,r,i,s){var a,o,l,c=e._gsap,h=i||kA(e,!0),u=c.xOrigin||0,d=c.yOrigin||0,p=c.xOffset||0,f=c.yOffset||0,m=h[0],g=h[1],v=h[2],_=h[3],x=h[4],y=h[5],b=t.split(" "),w=parseFloat(b[0])||0,S=parseFloat(b[1])||0;n?h!==LA&&(o=m*_-g*v)&&(l=w*(-g/o)+S*(m/o)-(m*y-g*x)/o,w=w*(_/o)+S*(-v/o)+(v*y-_*x)/o,S=l):(w=(a=xA(e)).x+(~b[0].indexOf("%")?w/100*a.width:w),S=a.y+(~(b[1]||b[0]).indexOf("%")?S/100*a.height:S)),r||!1!==r&&c.smooth?(x=w-u,y=S-d,c.xOffset=p+(x*m+y*v)-x,c.yOffset=f+(x*g+y*_)-y):c.xOffset=c.yOffset=0,c.xOrigin=w,c.yOrigin=S,c.smooth=!!r,c.origin=t,c.originIsAbsolute=!!n,e.style[oA]="0px 0px",s&&(wA(s,c,"xOrigin",u,w),wA(s,c,"yOrigin",d,S),wA(s,c,"xOffset",p,c.xOffset),wA(s,c,"yOffset",f,c.yOffset)),e.setAttribute("data-svg-origin",w+" "+S)},NA=function(e,t){var n=e._gsap||new XE(e);if("x"in n&&!t&&!n.uncache)return n;var r,i,s,a,o,l,c,h,u,d,p,f,m,g,v,_,x,y,b,w,S,M,E,T,A,C,P,R,L,O,z,D,k=e.style,I=n.scaleX<0,N="px",F="deg",U=getComputedStyle(e),B=pA(e,oA)||"0";return r=i=s=l=c=h=u=d=p=0,a=o=1,n.svg=!(!e.getCTM||!yA(e)),U.translate&&("none"===U.translate&&"none"===U.scale&&"none"===U.rotate||(k[aA]=("none"!==U.translate?"translate3d("+(U.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==U.rotate?"rotate("+U.rotate+") ":"")+("none"!==U.scale?"scale("+U.scale.split(" ").join(",")+") ":"")+("none"!==U[aA]?U[aA]:"")),k.scale=k.rotate=k.translate="none"),g=kA(e,n.svg),n.svg&&(n.uncache?(A=e.getBBox(),B=n.xOrigin-A.x+"px "+(n.yOrigin-A.y)+"px",T=""):T=!t&&e.getAttribute("data-svg-origin"),IA(e,T||B,!!T||n.originIsAbsolute,!1!==n.smooth,g)),f=n.xOrigin||0,m=n.yOrigin||0,g!==LA&&(y=g[0],b=g[1],w=g[2],S=g[3],r=M=g[4],i=E=g[5],6===g.length?(a=Math.sqrt(y*y+b*b),o=Math.sqrt(S*S+w*w),l=y||b?jT(b,y)*HT:0,(u=w||S?jT(w,S)*HT+l:0)&&(o*=Math.abs(Math.cos(u*GT))),n.svg&&(r-=f-(f*y+m*w),i-=m-(f*b+m*S))):(D=g[6],O=g[7],P=g[8],R=g[9],L=g[10],z=g[11],r=g[12],i=g[13],s=g[14],c=(v=jT(D,L))*HT,v&&(T=M*(_=Math.cos(-v))+P*(x=Math.sin(-v)),A=E*_+R*x,C=D*_+L*x,P=M*-x+P*_,R=E*-x+R*_,L=D*-x+L*_,z=O*-x+z*_,M=T,E=A,D=C),h=(v=jT(-w,L))*HT,v&&(_=Math.cos(-v),z=S*(x=Math.sin(-v))+z*_,y=T=y*_-P*x,b=A=b*_-R*x,w=C=w*_-L*x),l=(v=jT(b,y))*HT,v&&(T=y*(_=Math.cos(v))+b*(x=Math.sin(v)),A=M*_+E*x,b=b*_-y*x,E=E*_-M*x,y=T,M=A),c&&Math.abs(c)+Math.abs(l)>359.9&&(c=l=0,h=180-h),a=MM(Math.sqrt(y*y+b*b+w*w)),o=MM(Math.sqrt(E*E+D*D)),v=jT(M,E),u=Math.abs(v)>2e-4?v*HT:0,p=z?1/(z<0?-z:z):0),n.svg&&(T=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!zA(pA(e,aA)),T&&e.setAttribute("transform",T))),Math.abs(u)>90&&Math.abs(u)<270&&(I?(a*=-1,u+=l<=0?180:-180,l+=l<=0?180:-180):(o*=-1,u+=u<=0?180:-180)),t=t||n.uncache,n.x=r-((n.xPercent=r&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-r)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+N,n.y=i-((n.yPercent=i&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-i)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+N,n.z=s+N,n.scaleX=MM(a),n.scaleY=MM(o),n.rotation=MM(l)+F,n.rotationX=MM(c)+F,n.rotationY=MM(h)+F,n.skewX=u+F,n.skewY=d+F,n.transformPerspective=p+N,(n.zOrigin=parseFloat(B.split(" ")[2])||0)&&(k[oA]=FA(B)),n.xOffset=n.yOffset=0,n.force3D=OS.force3D,n.renderTransform=n.svg?GA:UT?HA:BA,n.uncache=0,n},FA=function(e){return(e=e.split(" "))[0]+" "+e[1]},UA=function(e,t,n){var r=lE(t);return MM(parseFloat(t)+parseFloat(EA(e,"x",n+"px",r)))+r},BA=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,HA(e,t)},HA=function(e,t){var n=t||this,r=n.xPercent,i=n.yPercent,s=n.x,a=n.y,o=n.z,l=n.rotation,c=n.rotationY,h=n.rotationX,u=n.skewX,d=n.skewY,p=n.scaleX,f=n.scaleY,m=n.transformPerspective,g=n.force3D,v=n.target,_=n.zOrigin,x="",y="auto"===g&&e&&1!==e||!0===g;if(_&&("0deg"!==h||"0deg"!==c)){var b,w=parseFloat(c)*GT,S=Math.sin(w),M=Math.cos(w);w=parseFloat(h)*GT,b=Math.cos(w),s=UA(v,s,S*b*-_),a=UA(v,a,-Math.sin(w)*-_),o=UA(v,o,M*b*-_+_)}"0px"!==m&&(x+="perspective("+m+") "),(r||i)&&(x+="translate("+r+"%, "+i+"%) "),(y||"0px"!==s||"0px"!==a||"0px"!==o)&&(x+="0px"!==o||y?"translate3d("+s+", "+a+", "+o+") ":"translate("+s+", "+a+") "),"0deg"!==l&&(x+="rotate("+l+") "),"0deg"!==c&&(x+="rotateY("+c+") "),"0deg"!==h&&(x+="rotateX("+h+") "),"0deg"===u&&"0deg"===d||(x+="skew("+u+", "+d+") "),1===p&&1===f||(x+="scale("+p+", "+f+") "),v.style[aA]=x||"translate(0, 0)"},GA=function(e,t){var n,r,i,s,a,o=t||this,l=o.xPercent,c=o.yPercent,h=o.x,u=o.y,d=o.rotation,p=o.skewX,f=o.skewY,m=o.scaleX,g=o.scaleY,v=o.target,_=o.xOrigin,x=o.yOrigin,y=o.xOffset,b=o.yOffset,w=o.forceCSS,S=parseFloat(h),M=parseFloat(u);d=parseFloat(d),p=parseFloat(p),(f=parseFloat(f))&&(p+=f=parseFloat(f),d+=f),d||p?(d*=GT,p*=GT,n=Math.cos(d)*m,r=Math.sin(d)*m,i=Math.sin(d-p)*-g,s=Math.cos(d-p)*g,p&&(f*=GT,a=Math.tan(p-f),i*=a=Math.sqrt(1+a*a),s*=a,f&&(a=Math.tan(f),n*=a=Math.sqrt(1+a*a),r*=a)),n=MM(n),r=MM(r),i=MM(i),s=MM(s)):(n=m,s=g,r=i=0),(S&&!~(h+"").indexOf("px")||M&&!~(u+"").indexOf("px"))&&(S=EA(v,"x",h,"px"),M=EA(v,"y",u,"px")),(_||x||y||b)&&(S=MM(S+_-(_*n+x*i)+y),M=MM(M+x-(_*r+x*s)+b)),(l||c)&&(a=v.getBBox(),S=MM(S+l/100*a.width),M=MM(M+c/100*a.height)),a="matrix("+n+","+r+","+i+","+s+","+S+","+M+")",v.setAttribute("transform",a),w&&(v.style[aA]=a)},jA=function(e,t,n,r,i){var s,a,o=360,l=BS(i),c=parseFloat(i)*(l&&~i.indexOf("rad")?HT:1)-r,h=r+c+"deg";return l&&("short"===(s=i.split("_")[1])&&(c%=o)!==c%180&&(c+=c<0?o:-360),"cw"===s&&c<0?c=(c+36e9)%o-~~(c/o)*o:"ccw"===s&&c>0&&(c=(c-36e9)%o-~~(c/o)*o)),e._pt=a=new xT(e._pt,t,n,r,c,ZT),a.e=h,a.u="deg",e._props.push(n),a},VA=function(e,t){for(var n in t)e[n]=t[n];return e},WA=function(e,t,n){var r,i,s,a,o,l,c,h=VA({},n._gsap),u=n.style;for(i in h.svg?(s=n.getAttribute("transform"),n.setAttribute("transform",""),u[aA]=t,r=NA(n,1),bA(n,aA),n.setAttribute("transform",s)):(s=getComputedStyle(n)[aA],u[aA]=t,r=NA(n,1),u[aA]=s),BT)(s=h[i])!==(a=r[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(o=lE(s)!==(c=lE(a))?EA(n,i,s,c):parseFloat(s),l=parseFloat(a),e._pt=new xT(e._pt,r,i,o,l-o,YT),e._pt.u=c||0,e._props.push(i));VA(r,h)};SM("padding,margin,Width,Radius",(function(e,t){var n="Top",r="Right",i="Bottom",s="Left",a=(t<3?[n,r,i,s]:[n+s,n+r,i+r,i+s]).map((function(n){return t<2?e+n:"border"+n+e}));RA[t>1?"border"+e:e]=function(e,t,n,r,i){var s,o;if(arguments.length<4)return s=a.map((function(t){return TA(e,t,n)})),5===(o=s.join(" ")).split(s[0]).length?s[0]:o;s=(r+"").split(" "),o={},a.forEach((function(e,t){return o[e]=s[t]=s[t]||s[(t-1)/2|0]})),e.init(t,o,i)}}));var XA,qA,YA,ZA={name:"css",register:gA,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,i){var s,a,o,l,c,h,u,d,p,f,m,g,v,_,x,y,b,w,S,M,E=this._props,T=e.style,A=n.vars.startAt;for(u in kT||gA(),this.styles=this.styles||uA(e),y=this.styles.props,this.tween=n,t)if("autoRound"!==u&&(a=t[u],!mM[u]||!$E(u,t,n,r,e,i)))if(c=typeof a,h=RA[u],"function"===c&&(c=typeof(a=a.call(n,r,e,i))),"string"===c&&~a.indexOf("random(")&&(a=xE(a)),h)h(this,e,u,a,n)&&(x=1);else if("--"===u.substr(0,2))s=(getComputedStyle(e).getPropertyValue(u)+"").trim(),a+="",RE.lastIndex=0,RE.test(s)||(d=lE(s),p=lE(a)),p?d!==p&&(s=EA(e,u,s,p)+p):d&&(a+=d),this.add(T,"setProperty",s,a,r,i,0,0,u),E.push(u),y.push(u,0,T[u]);else if("undefined"!==c){if(A&&u in A?(s="function"==typeof A[u]?A[u].call(n,r,e,i):A[u],BS(s)&&~s.indexOf("random(")&&(s=xE(s)),lE(s+"")||(s+=OS.units[u]||lE(TA(e,u))||""),"="===(s+"").charAt(1)&&(s=TA(e,u))):s=TA(e,u),l=parseFloat(s),(f="string"===c&&"="===a.charAt(1)&&a.substr(0,2))&&(a=a.substr(2)),o=parseFloat(a),u in qT&&("autoAlpha"===u&&(1===l&&"hidden"===TA(e,"visibility")&&o&&(l=0),y.push("visibility",0,T.visibility),wA(this,T,"visibility",l?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==u&&"transform"!==u&&~(u=qT[u]).indexOf(",")&&(u=u.split(",")[0])),m=u in BT)if(this.styles.save(u),g||((v=e._gsap).renderTransform&&!t.parseTransform||NA(e,t.parseTransform),_=!1!==t.smoothOrigin&&v.smooth,(g=this._pt=new xT(this._pt,T,aA,0,1,v.renderTransform,v,0,-1)).dep=1),"scale"===u)this._pt=new xT(this._pt,v,"scaleY",l,(f?TM(l,f+o):o)-l||0,YT),this._pt.u=0,E.push("scaleY",u),u+="X";else{if("transformOrigin"===u){y.push(oA,0,T[oA]),w=void 0,S=void 0,M=void 0,w=(b=a).split(" "),S=w[0],M=w[1]||"50%","top"!==S&&"bottom"!==S&&"left"!==M&&"right"!==M||(b=S,S=M,M=b),w[0]=CA[S]||S,w[1]=CA[M]||M,a=w.join(" "),v.svg?IA(e,a,0,_,0,this):((p=parseFloat(a.split(" ")[2])||0)!==v.zOrigin&&wA(this,v,"zOrigin",v.zOrigin,p),wA(this,T,u,FA(s),FA(a)));continue}if("svgOrigin"===u){IA(e,a,1,_,0,this);continue}if(u in OA){jA(this,v,u,l,f?TM(l,f+a):a);continue}if("smoothOrigin"===u){wA(this,v,"smooth",v.smooth,a);continue}if("force3D"===u){v[u]=a;continue}if("transform"===u){WA(this,a,e);continue}}else u in T||(u=mA(u)||u);if(m||(o||0===o)&&(l||0===l)&&!XT.test(a)&&u in T)o||(o=0),(d=(s+"").substr((l+"").length))!==(p=lE(a)||(u in OS.units?OS.units[u]:d))&&(l=EA(e,u,s,p)),this._pt=new xT(this._pt,m?v:T,u,l,(f?TM(l,f+o):o)-l,m||"px"!==p&&"zIndex"!==u||!1===t.autoRound?YT:JT),this._pt.u=p||0,d!==p&&"%"!==p&&(this._pt.b=s,this._pt.r=KT);else if(u in T)AA.call(this,e,u,s,f?f+a:a);else{if(!(u in e))continue;this.add(e,u,s||e[u],f?f+a:a,r,i)}m||(u in T?y.push(u,0,T[u]):y.push(u,1,s||e[u])),E.push(u)}x&&_T(this)},render:function(e,t){if(t.tween._time||!FT())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:TA,aliases:qT,getSetter:function(e,t,n){var r=qT[t];return r&&r.indexOf(",")<0&&(t=r),t in BT&&t!==oA&&(e._gsap.x||TA(e,"x"))?n&&NT===n?"scale"===t?rA:nA:(NT=n||{})&&("scale"===t?iA:sA):e.style&&!jS(e.style[t])?eA:~t.indexOf("-")?tA:hT(e,t)},core:{_removeProperty:bA,_getMatrix:kA}};LT.utils.checkPrefix=mA,LT.core.getStyleSaver=uA,YA=SM((XA="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(qA="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(e){BT[e]=1})),SM(qA,(function(e){OS.units[e]="deg",OA[e]=1})),qT[YA[13]]=XA+","+qA,SM("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(e){var t=e.split(":");qT[t[1]]=YA[t[0]]})),SM("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(e){OS.units[e]="px"})),LT.registerPlugin(ZA);var KA=LT.registerPlugin(ZA)||LT;KA.core.Tween;class JA{constructor(e,t){this.container=e,this.progressBarDomElement=t,this.width=e.offsetWidth,this.height=e.offsetHeight,this.init()}init(){this.scene=new Dh,this.camera=new Wo(75,this.width/this.height,.1,5e3),this.camera.lookAt(new Gs(0,0,0)),this.camera.position.set(.8,.05,1.5),this.renderer=new Oh({antialias:!0}),this.renderer.physicallyCorrectLights=!0,this.renderer.outputEncoding=3001,this.renderer.toneMapping=2,this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=1,this.renderer.setClearColor(16777215,0),this.renderer.setSize(this.width,this.height),this.container.appendChild(this.renderer.domElement),this.clock=new Sp,this.initControls(),this.draOverlay(),this.loadingManager=new Kd((()=>{this.progressBarDomElement.style.background="#00ff4c",setTimeout((()=>{this.progressBarDomElement.style.display="none",KA.to(this.overlay.material.uniforms.uAlpha,{duration:3,value:0})}),500)}),((e,t,n)=>{const r=t/n;this.progressBarDomElement.style.transform=`scaleX(${r})`})),this.cubeTextureLoader=new rp(this.loadingManager),this.GLTFLoader=new Jb(this.loadingManager),this.loadTextruesAndModel(),this.showFPS(),this.animate(),this.setResize(),this.createGUI()}initControls(){this.controls=new tf(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.enabled=!0,this.controls.enablePan=!0,this.controls.update()}setResize(){this.sizeObserver=new ResizeObserver((e=>{this.height=e[0].contentRect.height,this.width=e[0].contentRect.width,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height)})),this.sizeObserver.observe(this.container)}loadTextruesAndModel(){const e=this.cubeTextureLoader.setPath("/textures/cubeMaps/03/").load(["px.png","nx.png","py.png","ny.png","pz.png","nz.png"]);e.encoding=3001,this.scene.background=e,this.scene.environment=e,this.GLTFLoader.load("/models/gltf/DamagedHelmet/glTF/DamagedHelmet.gltf",(e=>{this.model=e.scene.children[0],this.scene.add(this.model)}),void 0,(e=>{}))}draOverlay(){const e=new il(2,2,1,1),t=new jo({transparent:!0,uniforms:{uAlpha:{value:1}},vertexShader:"\n                void main() {\n                    gl_Position = vec4(position, 1.0);\n                }\n            ",fragmentShader:"\n                uniform float uAlpha;  // 遮罩透明度\n                void main() {\n                    gl_FragColor = vec4(0.0, 0.0, 0.0, uAlpha);\n                }\n            "});this.overlay=new No(e,t),this.scene.add(this.overlay)}createGUI(){this.gui=new Dg.GUI}showFPS(){this.stats=new Ug,this.container.appendChild(this.stats.dom),this.stats.dom.className="stats-class",this.stats.dom.style.position="absolute",this.stats.dom.style.left="150px",this.stats.dom.style.top="20px"}destoryFPS(){this.stats&&(this.stats.dom.remove(),this.stats=null)}animate(){this.long=requestAnimationFrame(this.animate.bind(this)),this.renderer.render(this.scene,this.camera),this.stats.update()}destory(){this.sizeObserver&&(this.sizeObserver.disconnect(this.container),this.sizeObserver=null),window.cancelAnimationFrame(this.long),this.renderer&&(this.renderer.forceContextLoss(),this.renderer.dispose(),this.renderer.domElement=null,this.renderer=null),this.clock=null,this.destoryFPS(),this.gui&&this.gui.destroy()}debug(){this.scene.add(new Zp(100))}}const QA=Wi({__name:"index",setup(e){const t=ft(null),n=ft(null);let r=null;return Cn((()=>{r=new JA(t.value,n.value)})),On((()=>{r&&r.destory()})),(e,r)=>{const i=Un("code-bin"),s=Un("md-bin");return Or(),Ir(Tr,null,[jr("div",{class:"container",ref_key:"container",ref:t},null,512),jr("div",{class:"loading-bar",ref_key:"progressBar",ref:n},null,512),Vr(i,{code:{"three_demo.js":vt("import * as THREE from 'three'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\r\n\r\nimport Stats from 'stats.js'\r\nimport dat from 'dat.gui'\r\nimport gsap from 'gsap' // 动画库，使之平滑\r\n\r\nexport default class Demo {\r\n    constructor(container, progressBarDomElement) {\r\n        this.container = container\r\n        this.progressBarDomElement = progressBarDomElement\r\n        this.width = container.offsetWidth\r\n        this.height = container.offsetHeight\r\n\r\n        this.init()\r\n    }\r\n\r\n    init() {\r\n        // Scene\r\n        this.scene = new THREE.Scene()\r\n\r\n        // Camera\r\n        this.camera = new THREE.PerspectiveCamera(75, this.width / this.height, 0.1, 5000)\r\n        this.camera.lookAt(new THREE.Vector3(0, 0, 0))\r\n        this.camera.position.set(0.8, 0.05, 1.5)\r\n\r\n        // Renderer\r\n        this.renderer = new THREE.WebGLRenderer({ antialias: true })\r\n        this.renderer.physicallyCorrectLights = true // 是否使用物理上正确的光照模式\r\n        this.renderer.outputEncoding = THREE.sRGBEncoding\r\n        this.renderer.toneMapping = THREE.ReinhardToneMapping // 色调映射 用于逼近指高动态范围图片(HDR)\r\n        this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\r\n        this.renderer.shadowMap.enabled = true\r\n        this.renderer.shadowMap.type = THREE.PCFShadowMap\r\n        this.renderer.setClearColor(0xFFFFFF, 0)\r\n        this.renderer.setSize(this.width, this.height)\r\n        this.container.appendChild(this.renderer.domElement)\r\n\r\n        // Clock\r\n        this.clock = new THREE.Clock()\r\n\r\n        this.initControls()\r\n\r\n        this.draOverlay() // 绘制遮罩\r\n\r\n        // LoadingManager\r\n        this.loadingManager = new THREE.LoadingManager(\r\n            // Loaded\r\n            () => {\r\n                console.log('loaded')\r\n                this.progressBarDomElement.style.background = '#00ff4c'\r\n                setTimeout(() => {\r\n                    this.progressBarDomElement.style.display = 'none'\r\n                    gsap.to(this.overlay.material.uniforms.uAlpha, { duration: 3, value: 0 })\r\n                }, 500)\r\n            },\r\n            // Progress\r\n            (url, itemsLoaded, itemsTotal) => {\r\n                console.log('正在加载:', url, '已加载: ', itemsLoaded, '共需加载: ', itemsTotal)\r\n\r\n                const progressRatio = itemsLoaded / itemsTotal\r\n                // 在此修改 进度条 domElement 样式\r\n                this.progressBarDomElement.style.transform = `scaleX(${progressRatio})`\r\n            }\r\n        )\r\n\r\n        // Loader\r\n        this.cubeTextureLoader = new THREE.CubeTextureLoader(this.loadingManager)\r\n        this.GLTFLoader = new GLTFLoader(this.loadingManager)\r\n\r\n        this.loadTextruesAndModel() // 加载资源\r\n\r\n        this.showFPS()\r\n        this.animate()\r\n        this.setResize()\r\n        this.createGUI()\r\n        // this.debug() \r\n    }\r\n\r\n    // Controls\r\n    initControls() {\r\n        // OrbitControlsControl\r\n        this.controls = new OrbitControls(this.camera, this.renderer.domElement)\r\n        this.controls.enableDamping = true // 阻尼器\r\n        this.controls.enabled = true // 启用控制器\r\n        this.controls.enablePan = true // 平移控制\r\n        this.controls.update()\r\n    }\r\n\r\n    setResize() {\r\n        this.sizeObserver = new ResizeObserver(entries => {\r\n            this.height = entries[0].contentRect.height\r\n            this.width = entries[0].contentRect.width\r\n            // update camera\r\n            this.camera.aspect = this.width / this.height\r\n            this.camera.updateProjectionMatrix()\r\n            // update renderer\r\n            this.renderer.setSize(this.width, this.height)\r\n        })\r\n        this.sizeObserver.observe(this.container)\r\n    }\r\n\r\n    loadTextruesAndModel() {\r\n        const enviromentMap = this.cubeTextureLoader\r\n            .setPath(`/textures/cubeMaps/03/`)\r\n            .load([\r\n                'px.png',\r\n                'nx.png',\r\n                'py.png',\r\n                'ny.png',\r\n                'pz.png',\r\n                'nz.png'\r\n            ])\r\n        enviromentMap.encoding = THREE.sRGBEncoding\r\n        this.scene.background = enviromentMap\r\n        this.scene.environment = enviromentMap\r\n\r\n        this.GLTFLoader.load('/models/gltf/DamagedHelmet/glTF/DamagedHelmet.gltf',\r\n            gltf => {\r\n                this.model = gltf.scene.children[0]\r\n                this.scene.add(this.model)\r\n            },\r\n            undefined,\r\n            error => {\r\n                console.error('load model error: ', error)\r\n            }\r\n        )\r\n    }\r\n\r\n    draOverlay() {\r\n        const overlayGeometry = new THREE.PlaneGeometry(2, 2, 1, 1) // 之所以设置为width: 2,height:2 是因为坐标是[-1,1] [-1,1] \r\n        const overlayMaterial = new THREE.ShaderMaterial({\r\n            transparent: true, // 需要开启透明后半透明颜色才有效果\r\n            uniforms: {\r\n                uAlpha: { value: 1 }\r\n            },\r\n            vertexShader: `\r\n                void main() {\r\n                    gl_Position = vec4(position, 1.0);\r\n                }\r\n            `,\r\n            fragmentShader: `\r\n                uniform float uAlpha;  // 遮罩透明度\r\n                void main() {\r\n                    gl_FragColor = vec4(0.0, 0.0, 0.0, uAlpha);\r\n                }\r\n            `\r\n        })\r\n\r\n        this.overlay = new THREE.Mesh(overlayGeometry, overlayMaterial)\r\n        this.scene.add(this.overlay)\r\n    }\r\n\r\n    createGUI() {\r\n        this.gui = new dat.GUI()\r\n    }\r\n\r\n    showFPS() {\r\n        this.stats = new Stats()\r\n        this.container.appendChild(this.stats.dom)\r\n        this.stats.dom.className = 'stats-class'\r\n        this.stats.dom.style.position = 'absolute'\r\n        this.stats.dom.style.left = '150px'\r\n        this.stats.dom.style.top = '20px'\r\n    }\r\n\r\n    destoryFPS() {\r\n        if (this.stats) {\r\n            this.stats.dom.remove()\r\n            this.stats = null\r\n        }\r\n    }\r\n\r\n    animate() {\r\n\r\n        this.long = requestAnimationFrame(this.animate.bind(this))\r\n        this.renderer.render(this.scene, this.camera)\r\n        this.stats.update()\r\n    }\r\n\r\n    destory() {\r\n        if (this.sizeObserver) {\r\n            this.sizeObserver.disconnect(this.container)\r\n            this.sizeObserver = null\r\n        }\r\n        window.cancelAnimationFrame(this.long)\r\n        if (this.renderer) {\r\n            this.renderer.forceContextLoss()\r\n            this.renderer.dispose()\r\n            this.renderer.domElement = null\r\n            this.renderer = null\r\n        }\r\n        this.clock = null\r\n        this.destoryFPS()\r\n        if (this.gui) this.gui.destroy()\r\n    }\r\n\r\n    debug() {\r\n        this.scene.add(new THREE.AxesHelper(100))\r\n    }\r\n}\r\n")}},null,8,["code"]),Vr(s,{md:vt("# 进度\r\n\r\n## 1.遮罩\r\n这个遮罩平面不论摄像机如何移动位置，其一直位于摄像机前方并且填满整个渲染。\r\n为了做到这个效果，需要使用着色器材质ShaderMaterial。\r\n 添加unifom来实现对透明度的控制(需要`transparent: true`)\r\n```js\r\n    const overlayGeometry = new THREE.PlaneGeometry(2, 2, 1, 1) // 之所以设置为width: 2,height:2 是因为坐标是[-1,1] [-1,1]\r\n    const overlayMaterial = new THREE.ShaderMaterial({\r\n        transparent: true, // 需要开启透明后半透明颜色才有效果\r\n        uniforms: {\r\n            uAlpha: { value: 1 } // 遮罩透明度\r\n        },\r\n        vertexShader: `\r\n            void main() {\r\n                gl_Position = vec4(position, 1.0); // 要让平面填充渲染，不需要用到矩阵\r\n            }\r\n        `,\r\n        fragmentShader: `\r\n            uniform float uAlpha;\r\n            void main() {\r\n                gl_FragColor = vec4(0.0, 0.0, 0.0, uAlpha);\r\n            }\r\n        `\r\n    })\r\n\r\n    this.overlay = new THREE.Mesh(overlayGeometry, overlayMaterial)\r\n    this.scene.add(this.overlay)\r\n```\r\n\r\n## 2.资源加载进度\r\n使用 THREE.LoadingManager 管理资源\r\n\r\n```js\r\nconst loadingManager = new THREE.LoadingManager(\r\n            // Loaded\r\n            () => {\r\n                console.log('loaded')\r\n                 // 在此处理进度条,比如修改dom样式或者其他\r\n                gsap.to(this.overlay.material.uniforms.uAlpha, { duration: 3, value: 0 })\r\n            },\r\n            // Progress\r\n            (url, itemsLoaded, itemsTotal) => {\r\n                console.log('正在加载:', url, '已加载: ', itemsLoaded, '共需加载: ', itemsTotal)\r\n                const progressRatio = itemsLoaded / itemsTotal\r\n                // 在此处理进度条,比如修改dom样式或者其他\r\n                \r\n            }\r\n        )\r\n\r\nconst gltfLoader = new GLTFLoader(loadingManager)\r\nconst cubeTextureLoader = new THREE.CubeTextureLoader(loadingManager)\r\n```")},null,8,["md"])],64)}}},[["__scopeId","data-v-94fc7e5d"]]),$A=Object.freeze(Object.defineProperty({__proto__:null,default:QA},Symbol.toStringTag,{value:"Module"})),eC=new Pa(0,0,0,"YXZ"),tC=new Gs,nC={type:"change"},rC={type:"lock"},iC={type:"unlock"},sC=Math.PI/2;class aC extends ts{constructor(e,t){super(),this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1;const n=this;function r(t){if(!1===n.isLocked)return;const r=t.movementX||t.mozMovementX||t.webkitMovementX||0,i=t.movementY||t.mozMovementY||t.webkitMovementY||0;eC.setFromQuaternion(e.quaternion),eC.y-=.002*r*n.pointerSpeed,eC.x-=.002*i*n.pointerSpeed,eC.x=Math.max(sC-n.maxPolarAngle,Math.min(sC-n.minPolarAngle,eC.x)),e.quaternion.setFromEuler(eC),n.dispatchEvent(nC)}function i(){n.domElement.ownerDocument.pointerLockElement===n.domElement?(n.dispatchEvent(rC),n.isLocked=!0):(n.dispatchEvent(iC),n.isLocked=!1)}function s(){}this.connect=function(){n.domElement.ownerDocument.addEventListener("mousemove",r),n.domElement.ownerDocument.addEventListener("pointerlockchange",i),n.domElement.ownerDocument.addEventListener("pointerlockerror",s)},this.disconnect=function(){n.domElement.ownerDocument.removeEventListener("mousemove",r),n.domElement.ownerDocument.removeEventListener("pointerlockchange",i),n.domElement.ownerDocument.removeEventListener("pointerlockerror",s)},this.dispose=function(){this.disconnect()},this.getObject=function(){return e},this.getDirection=function(){const t=new Gs(0,0,-1);return function(n){return n.copy(t).applyQuaternion(e.quaternion)}}(),this.moveForward=function(t){tC.setFromMatrixColumn(e.matrix,0),tC.crossVectors(e.up,tC),e.position.addScaledVector(tC,t)},this.moveRight=function(t){tC.setFromMatrixColumn(e.matrix,0),e.position.addScaledVector(tC,t)},this.lock=function(){this.domElement.requestPointerLock()},this.unlock=function(){n.domElement.ownerDocument.exitPointerLock()},this.connect()}}class oC{constructor(e,t){this.long=null,this.container=e,this.mask=document.querySelector("#mask"),this.locker=document.querySelector("#locker"),this.isLocked,this.width=e.offsetWidth,this.height=e.offsetHeight,this.points=t,this.edgeLen=Math.sqrt(this.points.length),this.wallTall=3,this.material={},this.geometry={},this.mesh={},this.velocity=new Gs,this.direction=new Gs,this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.friction=10,this.acceleration=50,this.testObjects=[],this.init(),this.initLight(),this.showFPS(),this.setResize(),this.generateMaze(),this.control(),this.initRaycaster(),this.initMoveControl(),this.animate()}init(){this.scene=new Dh,this.scene.background=new Rs(0),this.camera=new Wo(75,this.width/this.height,.1,5e3),this.camera.lookAt(new Gs(0,0,0)),this.camera.position.set(-1,1,0),this.renderer||(this.renderer=new Oh),this.renderer.outputEncoding=3001,this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=1,this.renderer.setClearColor(16777215,0),this.renderer.setSize(this.width,this.height),this.container.appendChild(this.renderer.domElement),this.renderer.render(this.scene,this.camera),this.clock=new Sp}generateMaze(){this.material.innerWall=new Td({side:2}),this.material.outWall=new Td({side:2}),this.textureLoader=new ip,this.textureLoader.load("http://images.cccatmint.fun/textures/Wall_Stone_023_BaseColor.jpg",(e=>{e.repeat.y=this.wallTall,e.wrapT=1e3,e.wrapS=1e3,this.material.innerWall.map=e,this.material.innerWall.needsUpdate=!0})),this.textureLoader.load("http://images.cccatmint.fun/textures/Wall_Stone_023_BaseColor.jpg",(e=>{e.repeat.y=1,e.wrapT=1e3,e.wrapS=1e3,this.material.outWall.map=e,this.material.outWall.needsUpdate=!0})),this.textureLoader.load("http://images.cccatmint.fun/textures/Wall_Stone_023_AmbientOcclusion.jpg",(e=>{e.repeat.y=this.wallTall,e.wrapT=1e3,e.wrapS=1e3,this.material.innerWall.aoMap=e,this.material.innerWall.needsUpdate=!0})),this.textureLoader.load("http://images.cccatmint.fun/textures/Wall_Stone_023_Normal.jpg",(e=>{e.repeat.y=this.wallTall,e.wrapT=1e3,e.wrapS=1e3,this.material.innerWall.normalMap=e,this.material.innerWall.needsUpdate=!0})),this.geometry.innerWall=new Uo(1,this.wallTall,1),this.mesh.innerWalls=new Eh,this.mesh.innerWalls.name="内墙组",this.points_wall=this.points.filter((e=>"墙"===e.type)),this.points_wall.forEach((e=>{const t=new No(this.geometry.innerWall,this.material.innerWall);t.position.set(e.x,this.wallTall/2,e.y),t.castShadow=!0,t.receiveShadow=!0,this.mesh.innerWalls.add(t)})),this.scene.add(this.mesh.innerWalls),this.testObjects.push(this.mesh.innerWalls);const e=new qu;e.moveTo(-1,0).lineTo(this.edgeLen,0).lineTo(this.edgeLen,this.edgeLen).lineTo(0,this.edgeLen).lineTo(0,1).lineTo(-1,1).lineTo(-1,this.edgeLen+1).lineTo(this.edgeLen+1,this.edgeLen+1).lineTo(this.edgeLen+1,-1).lineTo(-1,-1).lineTo(-1,0);const t={steps:1,depth:this.wallTall,bevelEnabled:!1};this.geometry.aroundWall=new wd(e,t),this.mesh.aroundWall=new No(this.geometry.aroundWall,this.material.outWall),this.mesh.aroundWall.rotation.set(Math.PI/2,0,0),this.mesh.aroundWall.position.set(-.5,this.wallTall,-.5),this.mesh.aroundWall.name="外墙",this.testObjects.push(this.mesh.aroundWall),this.scene.add(this.mesh.aroundWall),this.geometry.panel=new il(this.edgeLen+2,this.edgeLen+2),this.material.panel=new Td({color:12303291,side:2}),this.mesh.panel=new No(this.geometry.panel,this.material.panel),this.mesh.panel.position.y=.001,this.mesh.panel.position.x=(this.edgeLen-1)/2,this.mesh.panel.position.z=(this.edgeLen-1)/2,this.mesh.panel.rotation.x=-Math.PI/2,this.mesh.panel.receiveShadow=!0,this.testObjects.push(this.mesh.panel),this.scene.add(this.mesh.panel)}setResize(){this.sizeObserver=new ResizeObserver((e=>{this.height=e[0].contentRect.height,this.width=e[0].contentRect.width,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height),this.renderer.render(this.scene,this.camera)})),this.sizeObserver.observe(this.container)}showFPS(){this.stats=new Ug,this.container.appendChild(this.stats.dom),this.stats.dom.className="stats-class",this.stats.dom.style.position="absolute",this.stats.dom.style.left="150px",this.stats.dom.style.top="20px"}destoryFPS(){this.stats&&(this.stats.dom.remove(),this.stats=null)}control(){this.controls=new aC(this.camera,this.renderer.domElement),this.scene.add(this.controls.getObject())}lockControl(){this.controls.lock&&this.controls.lock()}initMoveControl(){const e=e=>{switch(e.code){case"ArrowUp":case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0}},t=e=>{switch(e.code){case"ArrowUp":case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1}};this.controls.addEventListener("lock",(function(){document.addEventListener("keydown",e),document.addEventListener("keyup",t)})),this.controls.addEventListener("unlock",(function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}))}initRaycaster(){this.raycaster=new kp}initLight(){const e=new yp(16777215,1);this.scene.add(e),this.pointLight=new vp(61695,1,100),this.pointLight.position.set(-1,10,-1),this.pointLight.castShadow=!0,this.pointLight.shadow.mapSize.set(2048,2048),this.scene.add(this.pointLight),this.scene.add(new Up(this.pointLight))}animate(){const e=this.clock.getDelta();if(this.velocity.x=Math.abs(this.velocity.x-this.velocity.x*this.friction*e)<1e-4?0:this.velocity.x-this.velocity.x*this.friction*e,this.velocity.z=Math.abs(this.velocity.z-this.velocity.z*this.friction*e)<1e-4?0:this.velocity.z-this.velocity.z*this.friction*e,this.velocity.y=0,this.direction.x=Number(this.moveRight)-Number(this.moveLeft),this.direction.z=Number(this.moveForward)-Number(this.moveBackward),this.direction.y=0,this.direction.normalize(),(this.moveForward||this.moveBackward)&&(this.velocity.z=this.velocity.z-this.direction.z*this.acceleration*e),(this.moveLeft||this.moveRight)&&(this.velocity.x=this.velocity.x-this.direction.x*this.acceleration*e),this.beforePosition={},this.afterPosition={},this.beforePosition.x=this.controls.getObject().position.x,this.beforePosition.y=this.controls.getObject().position.y,this.beforePosition.z=this.controls.getObject().position.z,this.controls.moveRight(-this.velocity.x*e),this.controls.moveForward(-this.velocity.z*e),this.afterPosition.x=this.controls.getObject().position.x,this.afterPosition.y=this.controls.getObject().position.y,this.afterPosition.z=this.controls.getObject().position.z,this.controls.isLocked){const e=new Gs(0,-10,0);this.raycaster.set(this.afterPosition,e);this.raycaster.intersectObjects(this.testObjects,!0).length>0&&(this.velocity.x=0,this.velocity.z=0,this.controls.getObject().position.x=this.beforePosition.x,this.controls.getObject().position.y=this.beforePosition.y,this.controls.getObject().position.z=this.beforePosition.z)}this.isLocked!==this.controls.isLocked&&(this.mask.style.display=this.controls.isLocked?"none":"block",this.locker.style.display=this.controls.isLocked?"none":"block",this.isLocked=this.controls.isLocked),this.renderer.render(this.scene,this.camera),this.stats.update(),this.long=requestAnimationFrame(this.animate.bind(this))}destory(){this.sizeObserver&&(this.sizeObserver.disconnect(this.container),this.sizeObserver=null),window.cancelAnimationFrame(this.long),this.renderer&&(this.renderer.forceContextLoss(),this.renderer.dispose(),this.renderer.domElement=null,this.renderer=null),this.clock=null}debug(){this.scene.add(new Zp(100)),this.debugBox=new No(new Uo(2,1,2),new io({color:11291678})),this.debugBox.position.set(3,0,2),this.debugBox.name="test box",this.scene.add(this.debugBox)}}const lC=e=>(Yt("data-v-b340e325"),e=e(),Zt(),e),cC={class:"mask",id:"mask"},hC=[lC((()=>jr("div",null,"Click here!",-1))),lC((()=>jr("div",null,"move: W A S D",-1)))],uC=Wi({__name:"index",setup(e){const t=ft(null),n=ft(!1),r=function(e=23){if(e%2!=1||e<3)return;const t=[];for(let h=0;h<e;h++)for(let n=0;n<e;n++)t.push({x:h,y:n,type:"空"});t.forEach((e=>{e.y%2==1&&e.x%2==1?e.type="墙":e.y%2==0&&e.x%2==0&&(e.type="路")}));const n=[],r=[];let i=t[0];r.push(i);let s=o(i);for(n.push(...s);n.length;){let e=(a=n.length,Math.round(Math.random()*a-.5)),t=n[e],h=c(l(t),r);h?(n.splice(e,1),t.type="路",h.type="路",r.push(h),i=h,s=o(i),n.push(...s)):(n.splice(e,1),t.type="墙")}var a;function o(e){const{x:n,y:r}=e,i=[{x:n,y:r-1},{x:n+1,y:r},{x:n,y:r+1},{x:n-1,y:r}];return t.filter((e=>"空"===e.type)).filter((e=>i.some((t=>t.y===e.y&&t.x===e.x))))}function l(e){const{x:n,y:r}=e,i=[{x:n,y:r-1},{x:n+1,y:r},{x:n,y:r+1},{x:n-1,y:r}];return t.filter((e=>"路"===e.type)).filter((e=>i.some((t=>t.y===e.y&&t.x===e.x))))}function c(e,t){return t.includes(e[0])?!t.includes(e[1])&&e[1]:e[0]}return t}(23),i=function(e){const t=Math.sqrt(e.length),n=document.createElement("canvas");if(n.innerText="浏览器不支持",n.height=10*(t+2),n.width=10*(t+2),n.getContext){var r=n.getContext("2d");r.lineWidth=20,r.strokeRect(0,0,10*(t+2),10*(t+2)),r.clearRect(-1,0,1,1),e.forEach((e=>{"墙"===e.type&&r.fillRect(10*(e.x+1),10*(e.y+1),10,10)}))}return n}(r);i.classList.add("minimap");let s=null;const a=()=>{n.value=!0,s&&s.lockControl()};return Cn((()=>{t.value.appendChild(i),s=new oC(t.value,r)})),On((()=>{s&&s.destory()})),(e,r)=>(Or(),Ir(Tr,null,[jr("div",{class:"container",ref_key:"container",ref:t},[Nn(jr("div",cC,null,512),[[Hi,!n.value]])],512),jr("div",{class:"locker",id:"locker",onClick:a},hC)],64))}},[["__scopeId","data-v-b340e325"]]),dC=Object.freeze(Object.defineProperty({__proto__:null,default:uC},Symbol.toStringTag,{value:"Module"}));class pC{constructor(e,t,n){this.container=e,this.progress=t,this.isloaded=!1,this.infoPoints=n.map((e=>({position:new Gs(e.position.x,e.position.y,e.position.z),dom:e.dom}))),this.width=e.offsetWidth,this.height=e.offsetHeight,this.init()}init(){this.scene=new Dh,this.camera=new Wo(75,this.width/this.height,.1,5e3),this.camera.lookAt(new Gs(0,0,0)),this.camera.position.set(.8,.05,1.5),this.renderer=new Oh({antialias:!0}),this.renderer.physicallyCorrectLights=!0,this.renderer.outputEncoding=3001,this.renderer.toneMapping=2,this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=1,this.renderer.setClearColor(0,1),this.renderer.setSize(this.width,this.height),this.container.appendChild(this.renderer.domElement),this.clock=new Sp,this.initControls(),this.initRaycaster(),this.draOverlay(),this.loadTextruesAndModel(),this.showFPS(),this.animate(),this.setResize(),this.createGUI(),this.debug()}initControls(){this.controls=new tf(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.enabled=!0,this.controls.update()}setResize(){this.sizeObserver=new ResizeObserver((e=>{this.height=e[0].contentRect.height,this.width=e[0].contentRect.width,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height)})),this.sizeObserver.observe(this.container)}loadTextruesAndModel(){this.loadingManager=new Kd((()=>{KA.to(this.overlay.material.uniforms.uAlpha,{duration:3,value:0}),setTimeout((()=>{this.isloaded=!0}),300)}),((e,t,n)=>{const r=t/n;this.progress.itemsLoaded=t,this.progress.itemsTotal=n,this.progress.progressRatio=r})),this.GLTFLoader=new Jb(this.loadingManager),this.GLTFLoader.load("/models/gltf/Shiba/scene.gltf",(e=>{this.model=e.scene,this.scene.add(this.model)}),void 0,(e=>{}))}draOverlay(){const e=new il(2,2,1,1),t=new jo({transparent:!0,uniforms:{uAlpha:{value:1}},vertexShader:"\n                void main() {\n                    gl_Position = vec4(position, 1.0);\n                }\n            ",fragmentShader:"\n                uniform float uAlpha;  // 遮罩透明度\n                void main() {\n                    gl_FragColor = vec4(0.0, 0.0, 0.0, uAlpha);\n                }\n            "});this.overlay=new No(e,t),this.scene.add(this.overlay)}initRaycaster(){this.rayCaster=new kp}createGUI(){this.gui=new Dg.GUI}showFPS(){this.stats=new Ug,this.container.appendChild(this.stats.dom),this.stats.dom.className="stats-class",this.stats.dom.style.position="absolute",this.stats.dom.style.left="150px",this.stats.dom.style.top="20px"}destoryFPS(){this.stats&&(this.stats.dom.remove(),this.stats=null)}animate(){if(this.long=requestAnimationFrame(this.animate.bind(this)),this.isloaded)for(const e of this.infoPoints){const t=e.position.clone();t.project(this.camera);const n=t.x*this.width*.5,r=-t.y*this.height*.5;if(e.dom.style.transform=`translate(${n}px, ${r}px)`,this.rayCaster.setFromCamera({x:t.x,y:t.y},this.camera),this.intersects=this.rayCaster.intersectObjects(this.scene.children,!0),0===this.intersects.length)e.dom.classList.add("show");else{this.intersects[0].distance>e.position.distanceTo(this.camera.position)?e.dom.classList.add("show"):e.dom.classList.remove("show")}}this.renderer.render(this.scene,this.camera),this.stats.update()}destory(){this.sizeObserver&&(this.sizeObserver.disconnect(this.container),this.sizeObserver=null),window.cancelAnimationFrame(this.long),this.renderer&&(this.renderer.forceContextLoss(),this.renderer.dispose(),this.renderer.domElement=null,this.renderer=null),this.clock=null,this.destoryFPS(),this.gui&&this.gui.destroy()}debug(){const e=new No(new il(4,4,1,1),new io({color:16777215}));e.name="平面",e.rotateX(.5*-Math.PI),e.position.y=-1,this.scene.add(e)}}const fC=e=>(Yt("data-v-7f2e8bd8"),e=e(),Zt(),e),mC=[fC((()=>jr("div",{class:"label"},"1",-1))),fC((()=>jr("div",{class:"text"},"Lorem ipsum, dolor sit amet consectetur adipisicing elit",-1)))],gC=[fC((()=>jr("div",{class:"label"},"2",-1))),fC((()=>jr("div",{class:"text"},"Lorem ipsum, dolor sit amet consectetur adipisicing elit",-1)))],vC=[fC((()=>jr("div",{class:"label"},"3",-1))),fC((()=>jr("div",{class:"text"},"Lorem ipsum, dolor sit amet consectetur adipisicing elit",-1)))],_C=Wi({__name:"index",setup(e){const t=ft(null);let n=null;const r=ft({itemsLoaded:0,itemsTotal:0,progressRatio:0}),i=ft(null),s=ft(null),a=ft(null);return Cn((()=>{const e=[{position:{x:.15,y:.02,z:.22},label:"1",text:"眼睛",dom:i.value},{position:{x:0,y:-.38,z:-1.5},label:"2",text:"尾巴",dom:s.value},{position:{x:-.25,y:-.8,z:.01},label:"3",text:"右爪",dom:a.value}];n=new pC(t.value,r.value,e)})),On((()=>{n&&n.destory()})),(e,n)=>{const o=Un("LoadProgressBar"),l=Un("transition-fade"),c=Un("code-bin"),h=Un("md-bin");return Or(),Ir(Tr,null,[jr("div",{class:"container",ref_key:"container",ref:t},[Vr(l,null,{default:Kt((()=>[Nn(Vr(o,{class:"progressbar",itemsLoaded:r.value.itemsLoaded,itemsTotal:r.value.itemsTotal,progressRatio:r.value.progressRatio},null,8,["itemsLoaded","itemsTotal","progressRatio"]),[[Hi,r.value.progressRatio<1]])])),_:1})],512),jr("div",{class:"point info-point",ref_key:"pointDom",ref:i},mC,512),jr("div",{class:"point info-point",ref_key:"pointDom2",ref:s},gC,512),jr("div",{class:"point info-point",ref_key:"pointDom3",ref:a},vC,512),Vr(c,{code:{"three_demo.js":vt("import * as THREE from 'three'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\r\n\r\nimport Stats from 'stats.js'\r\nimport dat from 'dat.gui'\r\nimport gsap from 'gsap' // 动画库，使之平滑\r\n\r\nexport default class Demo {\r\n    constructor(container, progress, infoPoints) {\r\n        this.container = container\r\n        this.progress = progress\r\n        this.isloaded = false\r\n        this.infoPoints = infoPoints.map(p => ({\r\n            position: new THREE.Vector3(p.position.x, p.position.y, p.position.z),\r\n            dom: p.dom\r\n        }))\r\n\r\n        this.width = container.offsetWidth\r\n        this.height = container.offsetHeight\r\n\r\n        this.init()\r\n    }\r\n\r\n    init() {\r\n        // Scene\r\n        this.scene = new THREE.Scene()\r\n\r\n        // Camera\r\n        this.camera = new THREE.PerspectiveCamera(75, this.width / this.height, 0.1, 5000)\r\n        this.camera.lookAt(new THREE.Vector3(0, 0, 0))\r\n        this.camera.position.set(0.8, 0.05, 1.5)\r\n\r\n        // Renderer\r\n        this.renderer = new THREE.WebGLRenderer({ antialias: true })\r\n        this.renderer.physicallyCorrectLights = true // 是否使用物理上正确的光照模式\r\n        this.renderer.outputEncoding = THREE.sRGBEncoding\r\n        this.renderer.toneMapping = THREE.ReinhardToneMapping // 色调映射 用于逼近指高动态范围图片(HDR)\r\n        this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\r\n        this.renderer.shadowMap.enabled = true\r\n        this.renderer.shadowMap.type = THREE.PCFShadowMap\r\n        this.renderer.setClearColor(0x000000, 1)\r\n        this.renderer.setSize(this.width, this.height)\r\n        this.container.appendChild(this.renderer.domElement)\r\n\r\n        // Clock\r\n        this.clock = new THREE.Clock()\r\n\r\n        this.initControls()\r\n\r\n        this.initRaycaster()\r\n\r\n        this.draOverlay() // 绘制遮罩\r\n\r\n\r\n\r\n        this.loadTextruesAndModel() // 加载资源\r\n\r\n        this.showFPS()\r\n        this.animate()\r\n        this.setResize()\r\n        this.createGUI()\r\n        this.debug()\r\n    }\r\n\r\n    // Controls\r\n    initControls() {\r\n        // OrbitControlsControl\r\n        this.controls = new OrbitControls(this.camera, this.renderer.domElement)\r\n        this.controls.enableDamping = true // 阻尼器\r\n        this.controls.enabled = true // 启用控制器\r\n        // this.controls.enablePan = true // 平移控制\r\n        this.controls.update()\r\n    }\r\n\r\n    setResize() {\r\n        this.sizeObserver = new ResizeObserver(entries => {\r\n            this.height = entries[0].contentRect.height\r\n            this.width = entries[0].contentRect.width\r\n            // update camera\r\n            this.camera.aspect = this.width / this.height\r\n            this.camera.updateProjectionMatrix()\r\n            // update renderer\r\n            this.renderer.setSize(this.width, this.height)\r\n        })\r\n        this.sizeObserver.observe(this.container)\r\n    }\r\n\r\n    loadTextruesAndModel() {\r\n        // LoadingManager\r\n        this.loadingManager = new THREE.LoadingManager(\r\n            // Loaded\r\n            () => {\r\n                gsap.to(this.overlay.material.uniforms.uAlpha, { duration: 3, value: 0 })\r\n                setTimeout(() => {\r\n                    this.isloaded = true\r\n                }, 300)\r\n            },\r\n            // Progress\r\n            (url, itemsLoaded, itemsTotal) => {\r\n                // console.log('正在加载:', url, '已加载: ', itemsLoaded, '共需加载: ', itemsTotal)\r\n                const progressRatio = itemsLoaded / itemsTotal\r\n\r\n                this.progress.itemsLoaded = itemsLoaded\r\n                this.progress.itemsTotal = itemsTotal\r\n                this.progress.progressRatio = progressRatio\r\n            }\r\n        )\r\n\r\n        // Loader\r\n        this.GLTFLoader = new GLTFLoader(this.loadingManager)\r\n        this.GLTFLoader.load('/models/gltf/Shiba/scene.gltf',\r\n            gltf => {\r\n                this.model = gltf.scene\r\n                this.scene.add(this.model)\r\n            },\r\n            undefined,\r\n            error => {\r\n                console.error('load model error: ', error)\r\n            }\r\n        )\r\n    }\r\n\r\n    draOverlay() {\r\n        const overlayGeometry = new THREE.PlaneGeometry(2, 2, 1, 1) // 之所以设置为width: 2,height:2 是因为坐标是[-1,1] [-1,1] \r\n        const overlayMaterial = new THREE.ShaderMaterial({\r\n            transparent: true, // 需要开启透明后半透明颜色才有效果\r\n            uniforms: {\r\n                uAlpha: { value: 1 }\r\n            },\r\n            vertexShader: `\r\n                void main() {\r\n                    gl_Position = vec4(position, 1.0);\r\n                }\r\n            `,\r\n            fragmentShader: `\r\n                uniform float uAlpha;  // 遮罩透明度\r\n                void main() {\r\n                    gl_FragColor = vec4(0.0, 0.0, 0.0, uAlpha);\r\n                }\r\n            `\r\n        })\r\n\r\n        this.overlay = new THREE.Mesh(overlayGeometry, overlayMaterial)\r\n        this.scene.add(this.overlay)\r\n    }\r\n\r\n    initRaycaster() {\r\n        this.rayCaster = new THREE.Raycaster()\r\n    }\r\n\r\n    createGUI() {\r\n        this.gui = new dat.GUI()\r\n    }\r\n\r\n    showFPS() {\r\n        this.stats = new Stats()\r\n        this.container.appendChild(this.stats.dom)\r\n        this.stats.dom.className = 'stats-class'\r\n        this.stats.dom.style.position = 'absolute'\r\n        this.stats.dom.style.left = '150px'\r\n        this.stats.dom.style.top = '20px'\r\n    }\r\n\r\n    destoryFPS() {\r\n        if (this.stats) {\r\n            this.stats.dom.remove()\r\n            this.stats = null\r\n        }\r\n    }\r\n\r\n    animate() {\r\n        this.long = requestAnimationFrame(this.animate.bind(this))\r\n\r\n        // 遍历点\r\n        if (this.isloaded) {\r\n            for (const point of this.infoPoints) {\r\n                // 使用clone()方法克隆点的位置得到screenPosition\r\n                const screenPosition = point.position.clone()\r\n                // 再对screenPosition调用project(...) 方法并传入摄像机camera作为参数,转化为uv坐标\r\n                screenPosition.project(this.camera)\r\n                // 转为像素值，注意要*0.5\r\n                const translateX = screenPosition.x * this.width * 0.5\r\n                // 在css中，y轴下方代表正值，而在Three.js中则是普通的坐标系y轴上方代表正值，因此translateY要取反\r\n                const translateY = - screenPosition.y * this.height * 0.5\r\n                // 在CSS样式中应用位移\r\n                point.dom.style.transform = `translate(${translateX}px, ${translateY}px)`\r\n\r\n                // RayCaster 射线判断 point 是否被物体遮挡(如果distance(屏幕,point) > distance(屏幕, 相交物体) 那么就被遮挡应该修改样式隐藏点)\r\n                this.rayCaster.setFromCamera({ x: screenPosition.x, y: screenPosition.y }, this.camera)\r\n                this.intersects = this.rayCaster.intersectObjects(this.scene.children, true)\r\n\r\n                if (this.intersects.length === 0) {\r\n                    point.dom.classList.add('show')\r\n                } else {\r\n                    const intersectionDistance = this.intersects[0].distance // 射线与第一个物体相交点到相机的距离\r\n                    const pointDistance = point.position.distanceTo(this.camera.position) // 点到相机的距离\r\n\r\n                    if (intersectionDistance > pointDistance) {\r\n                        // 若点到相机的距离比第一个物体到相机的距离近则未被遮挡\r\n                        point.dom.classList.add('show')\r\n                    } else {\r\n                        // 被遮挡\r\n                        point.dom.classList.remove('show')\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        this.renderer.render(this.scene, this.camera)\r\n        this.stats.update()\r\n    }\r\n\r\n    destory() {\r\n        if (this.sizeObserver) {\r\n            this.sizeObserver.disconnect(this.container)\r\n            this.sizeObserver = null\r\n        }\r\n        window.cancelAnimationFrame(this.long)\r\n        if (this.renderer) {\r\n            this.renderer.forceContextLoss()\r\n            this.renderer.dispose()\r\n            this.renderer.domElement = null\r\n            this.renderer = null\r\n        }\r\n        this.clock = null\r\n        this.destoryFPS()\r\n        if (this.gui) this.gui.destroy()\r\n    }\r\n\r\n    debug() {\r\n        const plane = new THREE.Mesh(\r\n            new THREE.PlaneGeometry(4, 4, 1, 1),\r\n            new THREE.MeshBasicMaterial({ color: 0xffffff })\r\n        )\r\n        plane.name = '平面'\r\n        plane.rotateX(- Math.PI * 0.5)\r\n        plane.position.y = -1\r\n        this.scene.add(plane)\r\n    }\r\n}\r\n")}},null,8,["code"]),Vr(h,{md:vt("# 进度\r\n\r\n## 1.遮罩\r\n这个遮罩平面不论摄像机如何移动位置，其一直位于摄像机前方并且填满整个渲染。\r\n为了做到这个效果，需要使用着色器材质ShaderMaterial。\r\n 添加unifom来实现对透明度的控制(需要`transparent: true`)\r\n```js\r\n    const overlayGeometry = new THREE.PlaneGeometry(2, 2, 1, 1) // 之所以设置为width: 2,height:2 是因为坐标是[-1,1] [-1,1]\r\n    const overlayMaterial = new THREE.ShaderMaterial({\r\n        transparent: true, // 需要开启透明后半透明颜色才有效果\r\n        uniforms: {\r\n            uAlpha: { value: 1 } // 遮罩透明度\r\n        },\r\n        vertexShader: `\r\n            void main() {\r\n                gl_Position = vec4(position, 1.0); // 要让平面填充渲染，不需要用到矩阵\r\n            }\r\n        `,\r\n        fragmentShader: `\r\n            uniform float uAlpha;\r\n            void main() {\r\n                gl_FragColor = vec4(0.0, 0.0, 0.0, uAlpha);\r\n            }\r\n        `\r\n    })\r\n\r\n    this.overlay = new THREE.Mesh(overlayGeometry, overlayMaterial)\r\n    this.scene.add(this.overlay)\r\n```\r\n\r\n## 2.资源加载进度\r\n使用 THREE.LoadingManager 管理资源\r\n\r\n```js\r\nconst loadingManager = new THREE.LoadingManager(\r\n            // Loaded\r\n            () => {\r\n                console.log('loaded')\r\n                 // 在此处理进度条,比如修改dom样式或者其他\r\n                gsap.to(this.overlay.material.uniforms.uAlpha, { duration: 3, value: 0 })\r\n            },\r\n            // Progress\r\n            (url, itemsLoaded, itemsTotal) => {\r\n                console.log('正在加载:', url, '已加载: ', itemsLoaded, '共需加载: ', itemsTotal)\r\n                const progressRatio = itemsLoaded / itemsTotal\r\n                // 在此处理进度条,比如修改dom样式或者其他\r\n                \r\n            }\r\n        )\r\n\r\nconst gltfLoader = new GLTFLoader(loadingManager)\r\nconst cubeTextureLoader = new THREE.CubeTextureLoader(loadingManager)\r\n```")},null,8,["md"])],64)}}},[["__scopeId","data-v-7f2e8bd8"]]),xC=Object.freeze(Object.defineProperty({__proto__:null,default:_C},Symbol.toStringTag,{value:"Module"}));class yC{constructor(e){this.container=e,this.width=e.offsetWidth,this.height=e.offsetHeight,this.guiParams={},this.init()}init(){this.scene=new Dh,this.scene.background=new Rs(0),this.camera=new Wo(75,this.width/this.height,.1,5e3),this.camera.lookAt(new Gs(0,0,0)),this.camera.position.set(-2.3,4.5,6.8),this.renderer||(this.renderer=new Oh),this.renderer.outputEncoding=3001,this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=1,this.renderer.setClearColor(16777215,0),this.renderer.setSize(this.width,this.height),this.container.appendChild(this.renderer.domElement),this.renderer.render(this.scene,this.camera),this.clock=new Sp,this.initControls(),this.setResize(),this.initDemo(),this.createGUI(),this.showFPS(),this.animate()}initControls(){this.controls=new tf(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.enabled=!0,this.controls.update()}setResize(){this.sizeObserver=new ResizeObserver((e=>{this.height=e[0].contentRect.height,this.width=e[0].contentRect.width,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height),this.renderer.render(this.scene,this.camera)})),this.sizeObserver.observe(this.container)}initDemo(){this.textureLoader=new ip;const e=this.textureLoader.load("/models/gltf/LeePerrySmith/Map-COL.jpg");e.encoding=3001;const t=this.textureLoader.load("/models/gltf/LeePerrySmith/Infinite-Level_02_Tangent_SmoothUV.jpg");this.material=new Td({map:e,normalMap:t}),this.customUniforms={uTime:{value:0}},this.material.onBeforeCompile=e=>{e.uniforms.uTime=this.customUniforms.uTime,e.vertexShader=e.vertexShader.replace("#include <common>","#include <common>\n\n                uniform float uTime;\n                mat2 get2DRotateMatrix(float _angle) {\n                    return mat2(cos(_angle),-sin(_angle),sin(_angle),cos(_angle));\n                }\n                "),e.vertexShader=e.vertexShader.replace("#include <beginnormal_vertex>","#include <beginnormal_vertex>\n\n                float angle = 0.6* (position.y + uTime); // 使模型延y轴扭曲模型,并且使模型整体随时间绕y轴旋转\n                mat2 rotateMatrix = get2DRotateMatrix(angle);\n\n                objectNormal.xz = rotateMatrix * objectNormal.xz;\n                "),e.vertexShader=e.vertexShader.replace("#include <begin_vertex>","#include <begin_vertex>\n\n                transformed.xz =  rotateMatrix * transformed.xz;\n                objectNormal.xz = rotateMatrix * objectNormal.xz;\n                ")},this.depthMaterial=new _h({depthPacking:3201}),this.depthMaterial.onBeforeCompile=e=>{e.uniforms.uTime=this.customUniforms.uTime,e.vertexShader=e.vertexShader.replace("#include <common>","#include <common>\n                \n                uniform float uTime;\n                mat2 get2DRotateMatrix(float _angle) {\n                    return mat2(cos(_angle),-sin(_angle),sin(_angle),cos(_angle));\n                }\n                "),e.vertexShader=e.vertexShader.replace("#include <begin_vertex>","#include <begin_vertex>\n            \n                float angle = 0.6* (position.y + uTime);  \n                mat2 rotateMatrix = get2DRotateMatrix(angle);\n                transformed.xz =  rotateMatrix * transformed.xz;\n                ")},this.GLTFLoader=(new Jb).setPath("/models/gltf/LeePerrySmith/"),this.GLTFLoader.load("LeePerrySmith.glb",(e=>{this.model=e.scene.children[0],this.model.material=this.material,this.model.customDepthMaterial=this.depthMaterial,this.model.castShadow=!0,this.scene.add(this.model)}),void 0,(e=>{})),this.plane=new No(new il(50,50,1,1),new Td({color:16777215})),this.plane.position.set(0,0,-10),this.plane.receiveShadow=!0,this.scene.add(this.plane),this.directLight=new xp(268435455,1),this.directLight.position.set(0,0,10),this.directLight.shadow.camera.near=0,this.directLight.shadow.camera.far=25,this.directLight.shadow.camera.top=25,this.directLight.shadow.camera.bottom=-25,this.directLight.shadow.camera.left=-25,this.directLight.shadow.camera.right=25,this.directLight.shadow.mapSize.set(1024,1024),this.directLight.castShadow=!0,this.scene.add(this.directLight)}createGUI(){this.gui=new Dg.GUI}showFPS(){this.stats=new Ug,this.container.appendChild(this.stats.dom),this.stats.dom.className="stats-class",this.stats.dom.style.position="absolute",this.stats.dom.style.left="150px",this.stats.dom.style.top="20px"}destoryFPS(){this.stats&&(this.stats.dom.remove(),this.stats=null)}animate(){this.customUniforms&&(this.customUniforms.uTime.value=this.clock.getElapsedTime()),this.long=requestAnimationFrame(this.animate.bind(this)),this.renderer.render(this.scene,this.camera),this.stats.update()}destory(){this.sizeObserver&&(this.sizeObserver.disconnect(this.container),this.sizeObserver=null),window.cancelAnimationFrame(this.long),this.renderer&&(this.renderer.forceContextLoss(),this.renderer.dispose(),this.renderer.domElement=null,this.renderer=null),this.clock=null,this.destoryFPS(),this.gui&&this.gui.destroy()}debug(){this.scene.add(new Zp(100)),this.scene.add(new qp(this.directLight.shadow.camera)),this.directLightHelper=new Vp(this.directLight),this.scene.add(this.directLightHelper)}}class bC{constructor(e){this.container=e,this.width=e.offsetWidth,this.height=e.offsetHeight,this.guiParams={},this.init()}init(){this.scene=new Dh,this.scene.background=new Rs(0),this.camera=new Wo(75,this.width/this.height,.1,5e3),this.camera.lookAt(new Gs(0,0,0)),this.camera.position.set(-2.3,4.5,6.8),this.renderer||(this.renderer=new Oh),this.renderer.outputEncoding=3001,this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=1,this.renderer.setClearColor(16777215,0),this.renderer.setSize(this.width,this.height),this.container.appendChild(this.renderer.domElement),this.renderer.render(this.scene,this.camera),this.clock=new Sp,this.initControls(),this.setResize(),this.initDemo(),this.createGUI(),this.showFPS(),this.animate()}initControls(){this.controls=new tf(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.enabled=!0,this.controls.update()}setResize(){this.sizeObserver=new ResizeObserver((e=>{this.height=e[0].contentRect.height,this.width=e[0].contentRect.width,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height),this.renderer.render(this.scene,this.camera)})),this.sizeObserver.observe(this.container)}initDemo(){this.textureLoader=new ip;const e=this.textureLoader.load("/models/gltf/LeePerrySmith/Map-COL.jpg");e.encoding=3001;const t=this.textureLoader.load("/models/gltf/LeePerrySmith/Infinite-Level_02_Tangent_SmoothUV.jpg");this.material=new Td({map:e,normalMap:t}),this.GLTFLoader=(new Jb).setPath("/models/gltf/LeePerrySmith/"),this.GLTFLoader.load("LeePerrySmith.glb",(e=>{this.model=e.scene.children[0],this.model.material=this.material,this.model.castShadow=!0,this.scene.add(this.model)}),void 0,(e=>{})),this.plane=new No(new il(50,50,1,1),new Td({color:16777215})),this.plane.position.set(0,0,-10),this.plane.receiveShadow=!0,this.scene.add(this.plane),this.directLight=new xp(268435455,1),this.directLight.position.set(0,0,10),this.directLight.shadow.camera.near=0,this.directLight.shadow.camera.far=25,this.directLight.shadow.camera.top=25,this.directLight.shadow.camera.bottom=-25,this.directLight.shadow.camera.left=-25,this.directLight.shadow.camera.right=25,this.directLight.shadow.mapSize.set(1024,1024),this.directLight.castShadow=!0,this.scene.add(this.directLight)}createGUI(){this.gui=new Dg.GUI}showFPS(){this.stats=new Ug,this.container.appendChild(this.stats.dom),this.stats.dom.className="stats-class",this.stats.dom.style.position="absolute",this.stats.dom.style.left="150px",this.stats.dom.style.top="20px"}destoryFPS(){this.stats&&(this.stats.dom.remove(),this.stats=null)}animate(){const e=this.clock.getElapsedTime();this.model&&this.model.rotation.set(0,e,0),this.long=requestAnimationFrame(this.animate.bind(this)),this.renderer.render(this.scene,this.camera),this.stats.update()}destory(){this.sizeObserver&&(this.sizeObserver.disconnect(this.container),this.sizeObserver=null),window.cancelAnimationFrame(this.long),this.renderer&&(this.renderer.forceContextLoss(),this.renderer.dispose(),this.renderer.domElement=null,this.renderer=null),this.clock=null,this.destoryFPS(),this.gui&&this.gui.destroy()}debug(){this.scene.add(new Zp(100)),this.scene.add(new qp(this.directLight.shadow.camera)),this.directLightHelper=new Vp(this.directLight),this.scene.add(this.directLightHelper)}}const wC={class:"wrap"},SC=Wi({__name:"index",setup(e){const t=ft(null),n=ft(null);let r=null,i=null;return Cn((()=>{r=new bC(t.value),i=new yC(n.value)})),On((()=>{i&&i.destory(),r&&r.destory()})),(e,r)=>{const i=Un("code-bin"),s=Un("md-bin");return Or(),Ir(Tr,null,[jr("div",wC,[jr("div",{class:"container",ref_key:"container0",ref:t},null,512),jr("div",{class:"container",ref_key:"container",ref:n},null,512)]),Vr(i,{code:{"three_demo_origin.js":vt("import * as THREE from 'three'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\r\nimport Stats from 'stats.js'\r\nimport dat from 'dat.gui'\r\n\r\nexport default class Demo {\r\n    constructor(container) {\r\n        this.container = container\r\n        this.width = container.offsetWidth\r\n        this.height = container.offsetHeight\r\n\r\n        this.guiParams = {\r\n\r\n        }\r\n\r\n        this.init()\r\n\r\n    }\r\n\r\n    init() {\r\n        // Scene\r\n        this.scene = new THREE.Scene()\r\n        this.scene.background = new THREE.Color(0x000000)\r\n        // Camera\r\n        this.camera = new THREE.PerspectiveCamera(75, this.width / this.height, 0.1, 5000)\r\n        this.camera.lookAt(new THREE.Vector3(0, 0, 0))\r\n        this.camera.position.set(-2.3, 4.5, 6.8)\r\n\r\n        // Renderer\r\n        if (!this.renderer) {\r\n            this.renderer = new THREE.WebGLRenderer()\r\n        }\r\n        this.renderer.outputEncoding = THREE.sRGBEncoding\r\n        this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\r\n        this.renderer.shadowMap.enabled = true\r\n        this.renderer.shadowMap.type = THREE.PCFShadowMap\r\n        this.renderer.setClearColor(0xFFFFFF, 0)\r\n        this.renderer.setSize(this.width, this.height)\r\n        this.container.appendChild(this.renderer.domElement)\r\n        this.renderer.render(this.scene, this.camera)\r\n\r\n        // Clock\r\n        this.clock = new THREE.Clock()\r\n\r\n        this.initControls()\r\n        this.setResize()\r\n\r\n        this.initDemo()\r\n\r\n        this.createGUI()\r\n        this.showFPS()\r\n        this.animate()\r\n        // this.debug()\r\n    }\r\n\r\n    // Controls\r\n    initControls() {\r\n        // OrbitControlsControl\r\n        this.controls = new OrbitControls(this.camera, this.renderer.domElement)\r\n        this.controls.enableDamping = true // 阻尼器\r\n        this.controls.enabled = true // 控制器是否启用\r\n        this.controls.update()\r\n    }\r\n\r\n    setResize() {\r\n        this.sizeObserver = new ResizeObserver(entries => {\r\n            this.height = entries[0].contentRect.height\r\n            this.width = entries[0].contentRect.width\r\n            // update camera\r\n            this.camera.aspect = this.width / this.height\r\n            this.camera.updateProjectionMatrix()\r\n            // update renderer\r\n            this.renderer.setSize(this.width, this.height)\r\n            this.renderer.render(this.scene, this.camera)\r\n        })\r\n        this.sizeObserver.observe(this.container)\r\n    }\r\n\r\n    initDemo() {\r\n        // Textures\r\n        this.textureLoader = new THREE.TextureLoader()\r\n        const colorMap = this.textureLoader.load('/models/gltf/LeePerrySmith/Map-COL.jpg')\r\n        colorMap.encoding = THREE.sRGBEncoding\r\n        const normalMap = this.textureLoader.load('/models/gltf/LeePerrySmith/Infinite-Level_02_Tangent_SmoothUV.jpg')\r\n        this.material = new THREE.MeshStandardMaterial({\r\n            map: colorMap,\r\n            normalMap\r\n        })\r\n\r\n        // Load model\r\n        this.GLTFLoader = new GLTFLoader().setPath('/models/gltf/LeePerrySmith/')\r\n        this.GLTFLoader.load('LeePerrySmith.glb',\r\n            gltf => {\r\n                this.model = gltf.scene.children[0]\r\n                this.model.material = this.material\r\n                this.model.castShadow = true\r\n                this.scene.add(this.model)\r\n            },\r\n            undefined,\r\n            error => {\r\n                console.error('load model error: ', error)\r\n            }\r\n        )\r\n\r\n        this.plane = new THREE.Mesh(\r\n            new THREE.PlaneGeometry(50, 50, 1, 1),\r\n            new THREE.MeshStandardMaterial({ color: 0xffffff })\r\n        )\r\n        this.plane.position.set(0,0,-10)\r\n        this.plane.receiveShadow = true\r\n        this.scene.add(this.plane)\r\n\r\n        // DirectLight\r\n        this.directLight = new THREE.DirectionalLight(0xFFFFFFF, 1)\r\n        this.directLight.position.set(0,0,10)\r\n\r\n        this.directLight.shadow.camera.near = 0\r\n        this.directLight.shadow.camera.far = 25\r\n        this.directLight.shadow.camera.top = 25\r\n        this.directLight.shadow.camera.bottom = -25\r\n        this.directLight.shadow.camera.left = -25\r\n        this.directLight.shadow.camera.right = 25\r\n\r\n        this.directLight.shadow.mapSize.set(1024, 1024)\r\n        this.directLight.castShadow = true\r\n        this.scene.add(this.directLight)\r\n    }\r\n\r\n    createGUI() {\r\n        this.gui = new dat.GUI()\r\n    }\r\n\r\n    showFPS() {\r\n        this.stats = new Stats()\r\n        this.container.appendChild(this.stats.dom)\r\n        this.stats.dom.className = 'stats-class'\r\n        this.stats.dom.style.position = 'absolute'\r\n        this.stats.dom.style.left = '150px'\r\n        this.stats.dom.style.top = '20px'\r\n    }\r\n\r\n    destoryFPS() {\r\n        if (this.stats) {\r\n            this.stats.dom.remove()\r\n            this.stats = null\r\n        }\r\n    }\r\n\r\n    animate() {\r\n        const elapsedTime = this.clock.getElapsedTime()\r\n        if (this.model) this.model.rotation.set(0, elapsedTime, 0)\r\n        this.long = requestAnimationFrame(this.animate.bind(this))\r\n        this.renderer.render(this.scene, this.camera)\r\n        this.stats.update()\r\n    }\r\n\r\n    destory() {\r\n        if (this.sizeObserver) {\r\n            this.sizeObserver.disconnect(this.container)\r\n            this.sizeObserver = null\r\n        }\r\n        window.cancelAnimationFrame(this.long)\r\n        if (this.renderer) {\r\n            this.renderer.forceContextLoss()\r\n            this.renderer.dispose()\r\n            this.renderer.domElement = null\r\n            this.renderer = null\r\n        }\r\n        this.clock = null\r\n        this.destoryFPS()\r\n        if (this.gui) this.gui.destroy()\r\n    }\r\n\r\n    debug() {\r\n        this.scene.add(new THREE.AxesHelper(100))\r\n        this.scene.add(new THREE.CameraHelper(this.directLight.shadow.camera))\r\n        this.directLightHelper = new THREE.DirectionalLightHelper(this.directLight)\r\n        this.scene.add(this.directLightHelper)\r\n    }\r\n}\r\n"),"three_demo.js":vt("import * as THREE from 'three'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\r\nimport Stats from 'stats.js'\r\nimport dat from 'dat.gui'\r\n\r\nexport default class Demo {\r\n    constructor(container) {\r\n        this.container = container\r\n        this.width = container.offsetWidth\r\n        this.height = container.offsetHeight\r\n\r\n        this.guiParams = {\r\n\r\n        }\r\n\r\n        this.init()\r\n\r\n    }\r\n\r\n    init() {\r\n        // Scene\r\n        this.scene = new THREE.Scene()\r\n        this.scene.background = new THREE.Color(0x000000)\r\n        // Camera\r\n        this.camera = new THREE.PerspectiveCamera(75, this.width / this.height, 0.1, 5000)\r\n        this.camera.lookAt(new THREE.Vector3(0, 0, 0))\r\n        this.camera.position.set(-2.3, 4.5, 6.8)\r\n\r\n        // Renderer\r\n        if (!this.renderer) {\r\n            this.renderer = new THREE.WebGLRenderer()\r\n        }\r\n        this.renderer.outputEncoding = THREE.sRGBEncoding\r\n        this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\r\n        this.renderer.shadowMap.enabled = true\r\n        this.renderer.shadowMap.type = THREE.PCFShadowMap\r\n        this.renderer.setClearColor(0xFFFFFF, 0)\r\n        this.renderer.setSize(this.width, this.height)\r\n        this.container.appendChild(this.renderer.domElement)\r\n        this.renderer.render(this.scene, this.camera)\r\n\r\n        // Clock\r\n        this.clock = new THREE.Clock()\r\n\r\n        this.initControls()\r\n        this.setResize()\r\n\r\n        this.initDemo()\r\n\r\n        this.createGUI()\r\n        this.showFPS()\r\n        this.animate()\r\n        // this.debug()\r\n    }\r\n\r\n    // Controls\r\n    initControls() {\r\n        // OrbitControlsControl\r\n        this.controls = new OrbitControls(this.camera, this.renderer.domElement)\r\n        this.controls.enableDamping = true // 阻尼器\r\n        this.controls.enabled = true // 控制器是否启用\r\n        this.controls.update()\r\n    }\r\n\r\n    setResize() {\r\n        this.sizeObserver = new ResizeObserver(entries => {\r\n            this.height = entries[0].contentRect.height\r\n            this.width = entries[0].contentRect.width\r\n            // update camera\r\n            this.camera.aspect = this.width / this.height\r\n            this.camera.updateProjectionMatrix()\r\n            // update renderer\r\n            this.renderer.setSize(this.width, this.height)\r\n            this.renderer.render(this.scene, this.camera)\r\n        })\r\n        this.sizeObserver.observe(this.container)\r\n    }\r\n\r\n    initDemo() {\r\n        // Textures\r\n        this.textureLoader = new THREE.TextureLoader()\r\n        const colorMap = this.textureLoader.load('/models/gltf/LeePerrySmith/Map-COL.jpg')\r\n        colorMap.encoding = THREE.sRGBEncoding\r\n        const normalMap = this.textureLoader.load('/models/gltf/LeePerrySmith/Infinite-Level_02_Tangent_SmoothUV.jpg')\r\n        // Material\r\n        this.material = new THREE.MeshStandardMaterial({\r\n            map: colorMap,\r\n            normalMap\r\n        })\r\n\r\n\r\n        this.customUniforms = {\r\n            uTime: { value: 0 }\r\n        }\r\n        this.material.onBeforeCompile = shader => {\r\n            console.log(shader.vertexShader)\r\n            // * 在此处修改着色器\r\n            shader.uniforms.uTime = this.customUniforms.uTime\r\n            // 注入时间和定义获取旋转矩阵的函数\r\n            shader.vertexShader = shader.vertexShader.replace('#include <common>',\r\n                `#include <common>\r\n\r\n                uniform float uTime;\r\n                mat2 get2DRotateMatrix(float _angle) {\r\n                    return mat2(cos(_angle),-sin(_angle),sin(_angle),cos(_angle));\r\n                }\r\n                `)\r\n\r\n            // 修改法线 normal\r\n            shader.vertexShader = shader.vertexShader.replace('#include <beginnormal_vertex>',\r\n                `#include <beginnormal_vertex>\r\n\r\n                float angle = 0.6* (position.y + uTime); // 使模型延y轴扭曲模型,并且使模型整体随时间绕y轴旋转\r\n                mat2 rotateMatrix = get2DRotateMatrix(angle);\r\n\r\n                objectNormal.xz = rotateMatrix * objectNormal.xz;\r\n                `)\r\n            // 修改模型坐标 - transformed\r\n            shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>',\r\n                `#include <begin_vertex>\r\n\r\n                transformed.xz =  rotateMatrix * transformed.xz;\r\n                objectNormal.xz = rotateMatrix * objectNormal.xz;\r\n                `)\r\n\r\n\r\n\r\n        }\r\n\r\n        // depthMaterial\r\n        this.depthMaterial = new THREE.MeshDepthMaterial({\r\n            depthPacking: THREE.RGBADepthPacking\r\n        })\r\n        this.depthMaterial.onBeforeCompile = shader => {\r\n            shader.uniforms.uTime = this.customUniforms.uTime\r\n\r\n            // 注入时间和定义获取旋转矩阵的函数\r\n            shader.vertexShader = shader.vertexShader.replace('#include <common>',\r\n                `#include <common>\r\n                \r\n                uniform float uTime;\r\n                mat2 get2DRotateMatrix(float _angle) {\r\n                    return mat2(cos(_angle),-sin(_angle),sin(_angle),cos(_angle));\r\n                }\r\n                `)\r\n\r\n            // 修改坐标 - transformed\r\n            shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>',\r\n                `#include <begin_vertex>\r\n            \r\n                float angle = 0.6* (position.y + uTime);  \r\n                mat2 rotateMatrix = get2DRotateMatrix(angle);\r\n                transformed.xz =  rotateMatrix * transformed.xz;\r\n                `)\r\n        }\r\n        // Load model\r\n        this.GLTFLoader = new GLTFLoader().setPath('/models/gltf/LeePerrySmith/')\r\n        this.GLTFLoader.load('LeePerrySmith.glb',\r\n            gltf => {\r\n                this.model = gltf.scene.children[0]\r\n                this.model.material = this.material\r\n                this.model.customDepthMaterial = this.depthMaterial\r\n                this.model.castShadow = true\r\n                this.scene.add(this.model)\r\n            },\r\n            undefined,\r\n            error => {\r\n                console.error('load model error: ', error)\r\n            }\r\n        )\r\n\r\n        // Plane for receive shadow\r\n        this.plane = new THREE.Mesh(\r\n            new THREE.PlaneGeometry(50, 50, 1, 1),\r\n            new THREE.MeshStandardMaterial({ color: 0xffffff })\r\n        )\r\n        this.plane.position.set(0, 0, -10)\r\n        this.plane.receiveShadow = true\r\n        this.scene.add(this.plane)\r\n\r\n        // DirectLight\r\n        this.directLight = new THREE.DirectionalLight(0xFFFFFFF, 1)\r\n        this.directLight.position.set(0, 0, 10)\r\n\r\n        this.directLight.shadow.camera.near = 0\r\n        this.directLight.shadow.camera.far = 25\r\n        this.directLight.shadow.camera.top = 25\r\n        this.directLight.shadow.camera.bottom = -25\r\n        this.directLight.shadow.camera.left = -25\r\n        this.directLight.shadow.camera.right = 25\r\n\r\n        this.directLight.shadow.mapSize.set(1024, 1024)\r\n        this.directLight.castShadow = true\r\n        this.scene.add(this.directLight)\r\n    }\r\n\r\n    createGUI() {\r\n        this.gui = new dat.GUI()\r\n    }\r\n\r\n    showFPS() {\r\n        this.stats = new Stats()\r\n        this.container.appendChild(this.stats.dom)\r\n        this.stats.dom.className = 'stats-class'\r\n        this.stats.dom.style.position = 'absolute'\r\n        this.stats.dom.style.left = '150px'\r\n        this.stats.dom.style.top = '20px'\r\n    }\r\n\r\n    destoryFPS() {\r\n        if (this.stats) {\r\n            this.stats.dom.remove()\r\n            this.stats = null\r\n        }\r\n    }\r\n\r\n    animate() {\r\n        if (this.customUniforms) this.customUniforms.uTime.value = this.clock.getElapsedTime()\r\n\r\n        this.long = requestAnimationFrame(this.animate.bind(this))\r\n        this.renderer.render(this.scene, this.camera)\r\n        this.stats.update()\r\n    }\r\n\r\n    destory() {\r\n        if (this.sizeObserver) {\r\n            this.sizeObserver.disconnect(this.container)\r\n            this.sizeObserver = null\r\n        }\r\n        window.cancelAnimationFrame(this.long)\r\n        if (this.renderer) {\r\n            this.renderer.forceContextLoss()\r\n            this.renderer.dispose()\r\n            this.renderer.domElement = null\r\n            this.renderer = null\r\n        }\r\n        this.clock = null\r\n        this.destoryFPS()\r\n        if (this.gui) this.gui.destroy()\r\n    }\r\n\r\n    debug() {\r\n        this.scene.add(new THREE.AxesHelper(100))\r\n        this.scene.add(new THREE.CameraHelper(this.directLight.shadow.camera))\r\n        this.directLightHelper = new THREE.DirectionalLightHelper(this.directLight)\r\n        this.scene.add(this.directLightHelper)\r\n    }\r\n}\r\n")}},null,8,["code"]),Vr(s,{md:vt('`Material.onBeforeCompile`\r\n在编译shader程序之前立即执行的可选回调。此函数使用shader源码作为参数。用于修改内置材质。\r\n```js\r\nmaterial.onBeforeCompile = shader => {\r\n    // change shader here\r\n    console.log(shader.vertextShader)\r\n}\r\n```\r\n控制台打印内容\r\n```glsl\r\n#define STANDARD\r\nvarying vec3 vViewPosition;\r\n#ifdef USE_TRANSMISSION\r\n\tvarying vec3 vWorldPosition;\r\n#endif\r\n#include <common>\r\n#include <uv_pars_vertex>\r\n#include <uv2_pars_vertex>\r\n#include <displacementmap_pars_vertex>\r\n#include <color_pars_vertex>\r\n#include <fog_pars_vertex>\r\n#include <normal_pars_vertex>\r\n#include <morphtarget_pars_vertex>\r\n#include <skinning_pars_vertex>\r\n#include <shadowmap_pars_vertex>\r\n#include <logdepthbuf_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\nvoid main() {\r\n\t#include <uv_vertex>\r\n\t#include <uv2_vertex>\r\n\t#include <color_vertex>\r\n\t#include <morphcolor_vertex>\r\n\t#include <beginnormal_vertex>\r\n\t#include <morphnormal_vertex>\r\n\t#include <skinbase_vertex>\r\n\t#include <skinnormal_vertex>\r\n\t#include <defaultnormal_vertex>\r\n\t#include <normal_vertex>\r\n\t#include <begin_vertex>\r\n\t#include <morphtarget_vertex>\r\n\t#include <skinning_vertex>\r\n\t#include <displacementmap_vertex>\r\n\t#include <project_vertex>\r\n\t#include <logdepthbuf_vertex>\r\n\t#include <clipping_planes_vertex>\r\n\tvViewPosition = - mvPosition.xyz;\r\n\t#include <worldpos_vertex>\r\n\t#include <shadowmap_vertex>\r\n\t#include <fog_vertex>\r\n#ifdef USE_TRANSMISSION\r\n\tvWorldPosition = worldPosition.xyz;\r\n#endif\r\n}\r\n```\r\n\r\n`#include <begin_vertex>` 其中begin_vertex就是以下代码\r\nthree/src/renderers/shaders/ShaderChunk/begin_vertex.glsl.js\r\n```js\r\nexport default /* glsl */`\r\nvec3 transformed = vec3( position );\r\n`;\r\n\r\n```\r\n\r\n使用字符串替换的方法修改着色器\r\n```js\r\n    material.onBeforeCompile = shader => {\r\n    console.log(shader.vertexShader)\r\n    // * 在此处修改着色器\r\n    shader.uniforms.uTime = this.customUniforms.uTime\r\n    // 注入时间和定义获取旋转矩阵的函数\r\n    shader.vertexShader = shader.vertexShader.replace(\'#include <common>\',\r\n        `#include <common>\r\n\r\n        uniform float uTime;\r\n        mat2 get2DRotateMatrix(float _angle) {\r\n            return mat2(cos(_angle),-sin(_angle),sin(_angle),cos(_angle));\r\n        }\r\n        `)\r\n    }\r\n```\r\n\r\n### fix `drop shadow` and `core shadow`\r\n\r\n<img src="http://markdown-images.cccatmint.fun/image-20221014164540760.png" alt="image-20221014164540760" style="zoom:33%;" />\r\n\r\n#### 1.fix drop shadow `修改mesh.customDepthMaterial的着色器`\r\n\r\n<img src="http://markdown-images.cccatmint.fun/image-20221014164642611.png" alt="image-20221014164642611" style="zoom:33%;" />\r\n\r\ndrop shadow没有随之扭曲\r\n`mesh.customDepthMaterial` :材质 > https://threejs.org/docs/index.html?q=mesh#api/zh/core/Object3D.customDepthMaterial\r\n渲染到深度图时要使用的自定义深度材质。只能在网格的上下文中使用。使用DirectionalLight或SpotLight进行阴影投射时，如果要修改顶点着色器中的顶点位置，则必须指定 customDepthMaterial 以获得正确的阴影。默认为未定义。\r\n```js\r\nconst depthMaterial = new THREE.MeshDepthMaterial({\r\n            depthPacking: THREE.RGBADepthPacking\r\n        })\r\nmesh.customDepthMaterial = depthMaterial\r\n\r\ndepthMaterial.onBeforeCompile = shader => {\r\n    shader.uniforms.uTime = this.customUniforms.uTime\r\n    // 注入时间和定义获取旋转矩阵的函数\r\n    shader.vertexShader = shader.vertexShader.replace(\'#include <common>\',\r\n        `#include <common>\r\n        \r\n        uniform float uTime;\r\n        mat2 get2DRotateMatrix(float _angle) {\r\n            return mat2(cos(_angle),-sin(_angle),sin(_angle),cos(_angle));\r\n        }\r\n        `)\r\n    // 修改坐标 - transformed\r\n    shader.vertexShader = shader.vertexShader.replace(\'#include <begin_vertex>\',\r\n        `#include <begin_vertex>\r\n    \r\n        float angle = 0.6* (position.y + uTime);  \r\n        mat2 rotateMatrix = get2DRotateMatrix(angle);\r\n        transformed.xz =  rotateMatrix * transformed.xz;\r\n        `)\r\n}\r\n```\r\n\r\n`mesh.customDistanceMaterial` :材质\r\n与customDepthMaterial相同，但与PointLight一起使用。默认值为undefined\r\n`MeshDepthMaterail`\r\ndepthPacking: THREE.RGBADepthPacking\r\n\r\n#### 2.fix core shadow `修改mesh.material的着色器`\r\n修改法线normal以达到目的,注意是修改mesh.material 的着色器 而是不 mesh.customDepthMaterial 的着色器\r\n`#include <beginnormal_vertex>` 其对应beginnormal_vertex.glsl.js文件内容的就是以下代码\r\nthree/src/renderers/shaders/ShaderChunk/beginnormal_vertex.glsl.js\r\n\r\n```js\r\nexport default /* glsl */`\r\nvec3 objectNormal = vec3( normal );\r\n\r\n#ifdef USE_TANGENT\r\n\r\n\tvec3 objectTangent = vec3( tangent.xyz );\r\n\r\n#endif\r\n`;\r\n\r\n```\r\n所以修改法线就是要修改`objectNormal`的xyz\r\n```glsl\r\ntransformed.xz =  rotateMatrix * transformed.xz;\r\n```\r\n\r\n\r\n在实际使用中需要根据#include的顺序调整\r\n\r\n\r\n\r\ndrop shadow 和 core shadow 都调整正常后\r\n\r\n<img src="http://markdown-images.cccatmint.fun/image-20221015102049021.png" alt="image-20221015102049021" style="zoom:33%;" />')},null,8,["md"])],64)}}},[["__scopeId","data-v-90815e02"]]),MC=Object.freeze(Object.defineProperty({__proto__:null,default:SC},Symbol.toStringTag,{value:"Module"}));class EC{constructor(e){this.container=e,this.width=e.offsetWidth,this.height=e.offsetHeight,this.model=null,this.actions={},this.mixer=null,this.guiParams={state:"Dance"},this.init()}init(){this.scene=new Dh,this.scene.background=new Rs(0),this.scene.fog=new zh(14737632,20,100),this.camera=new Wo(75,this.width/this.height,.1,5e3),this.camera.lookAt(new Gs(0,0,0)),this.camera.position.set(-2.3,4.5,6.8),this.renderer||(this.renderer=new Oh),this.renderer.outputEncoding=3001,this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=1,this.renderer.setClearColor(16777215,0),this.renderer.setSize(this.width,this.height),this.container.appendChild(this.renderer.domElement),this.renderer.render(this.scene,this.camera),this.clock=new Sp,this.hemiLight=new ap(16777215,4473924),this.hemiLight.position.set(0,20,0),this.scene.add(this.hemiLight),this.dirLight=new xp(16777215),this.dirLight.position.set(0,20,10),this.scene.add(this.dirLight),this.ground=new No(new il(2e3,2e3),new Cd({color:10066329,depthWrite:!1})),this.ground.rotation.x=-Math.PI/2,this.scene.add(this.ground),this.gridHelper=new Bp(200,40,0,13421772),this.gridHelper.material.opacity=.2,this.gridHelper.material.transparent=!0,this.scene.add(this.gridHelper),this.GLTFLoader=(new Jb).setPath("/models/gltf/"),this.GLTFLoader.load("RobotExpressive.glb",(e=>{this.model=e.scene,this.scene.add(this.model),this.createGUI(this.model,e.animations)}),void 0,(e=>{})),this.initControls(),this.setResize(),this.showFPS(),this.debug(),this.animate()}initControls(){this.controls=new tf(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.enabled=!0,this.controls.update()}setResize(){this.sizeObserver=new ResizeObserver((e=>{this.height=e[0].contentRect.height,this.width=e[0].contentRect.width,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height),this.renderer.render(this.scene,this.camera)})),this.sizeObserver.observe(this.container)}createGUI(e,t){this.gui=new Dg.GUI;const n=["Idle","Walking","Running","Dance","Death","Sitting","Standing"],r=["Jump","Yes","No","Wave","Punch","ThumbsUp"];this.mixer=new zp(e),t.forEach((e=>{const t=this.mixer.clipAction(e);this.actions[e.name]=t,(r.includes(e.name)||n.indexOf(e.name)>=4)&&(t.clampWhenFinished=!0,t.loop=2200)}));const i=(e,t)=>{this.previousAction=this.activeAction,this.activeAction=this.actions[e],this.previousAction&&this.previousAction!==this.activeAction&&this.previousAction.fadeOut(t),this.activeAction.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(t).play()},s=this.gui.addFolder("状态");s.open(),s.add(this.guiParams,"state").options(n).onChange((()=>{i(this.guiParams.state,.5)}));const a=this.gui.addFolder("动作");a.open(),r.forEach((e=>{this.guiParams[e]=()=>{i(e,.2);const t=()=>{this.mixer.removeEventListener("finished",t),i(this.guiParams.state,.2)};this.mixer.addEventListener("finished",t)},a.add(this.guiParams,e)})),s.open();const o=this.model.getObjectByName("Head_4"),l=Object.keys(o.morphTargetDictionary),c=this.gui.addFolder("神态");c.open(),l.forEach(((e,t)=>{c.add(o.morphTargetInfluences,t,0,1,.01).name(e)})),this.activeAction=this.actions[this.guiParams.state],this.activeAction.play()}showFPS(){this.stats=new Ug,this.container.appendChild(this.stats.dom),this.stats.dom.className="stats-class",this.stats.dom.style.position="absolute",this.stats.dom.style.left="150px",this.stats.dom.style.top="20px"}destoryFPS(){this.stats&&(this.stats.dom.remove(),this.stats=null)}animate(){const e=this.clock.getDelta();this.mixer&&this.mixer.update(e),this.long=requestAnimationFrame(this.animate.bind(this)),this.renderer.render(this.scene,this.camera),this.stats.update()}destory(){this.sizeObserver&&(this.sizeObserver.disconnect(this.container),this.sizeObserver=null),window.cancelAnimationFrame(this.long),this.renderer&&(this.renderer.forceContextLoss(),this.renderer.dispose(),this.renderer.domElement=null,this.renderer=null),this.clock=null,this.destoryFPS(),this.gui&&this.gui.destroy(),this.model=this.mixer=this.previousAction=this.activeAction=null}debug(){this.scene.add(new Zp(100))}}const TC=Wi({__name:"index",setup(e){const t=ft(null);let n=null;Cn((()=>{n=new EC(t.value)})),On((()=>{n&&n.destory()}));return(e,n)=>{const r=Un("code-bin");return Or(),Ir(Tr,null,[jr("div",{class:"container",ref_key:"container",ref:t},null,512),Vr(r,{code:"import * as THREE from 'three'\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\nimport Stats from 'stats.js'\nimport dat from 'dat.gui'\n\nexport default class Morph {\n    constructor(container) {\n        this.container = container\n        this.width = container.offsetWidth\n        this.height = container.offsetHeight\n        this.model = null\n        this.actions = {} // 所有的动画都将储存在此\n        this.mixer = null // 动画混合器\n\n        this.guiParams = {\n            state: 'Dance'\n        }\n\n        this.init()\n    }\n\n    init() {\n        // Scene\n        this.scene = new THREE.Scene()\n        this.scene.background = new THREE.Color(0x000000)\n        this.scene.fog = new THREE.Fog(0xe0e0e0, 20, 100)\n        // Camera\n        this.camera = new THREE.PerspectiveCamera(75, this.width / this.height, 0.1, 5000)\n        this.camera.lookAt(new THREE.Vector3(0, 0, 0))\n        this.camera.position.set(-2.3, 4.5, 6.8)\n\n        // Renderer\n        if (!this.renderer) {\n            this.renderer = new THREE.WebGLRenderer()\n        }\n        this.renderer.outputEncoding = THREE.sRGBEncoding\n        this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\n        this.renderer.shadowMap.enabled = true\n        this.renderer.shadowMap.type = THREE.PCFShadowMap\n        this.renderer.setClearColor(0xFFFFFF, 0)\n        this.renderer.setSize(this.width, this.height)\n        this.container.appendChild(this.renderer.domElement)\n        this.renderer.render(this.scene, this.camera)\n        // Clock\n        this.clock = new THREE.Clock()\n\n        // Light\n        this.hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444)\n        this.hemiLight.position.set(0, 20, 0)\n        this.scene.add(this.hemiLight)\n        this.dirLight = new THREE.DirectionalLight(0xffffff);\n        this.dirLight.position.set(0, 20, 10);\n        this.scene.add(this.dirLight)\n\n        // Ground\n        this.ground = new THREE.Mesh(\n            new THREE.PlaneGeometry(2000, 2000),\n            new THREE.MeshPhongMaterial({ color: 0x999999, depthWrite: false })\n        )\n        this.ground.rotation.x = - Math.PI / 2\n        this.scene.add(this.ground)\n\n        // GridHelper\n        this.gridHelper = new THREE.GridHelper(200, 40, 0x000000, 0xcccccc)\n        this.gridHelper.material.opacity = 0.2\n        this.gridHelper.material.transparent = true\n        this.scene.add(this.gridHelper)\n\n        // Model\n        this.GLTFLoader = new GLTFLoader().setPath('/models/gltf/')\n        this.GLTFLoader.load('RobotExpressive.glb',\n            gltf => {\n                this.model = gltf.scene\n                this.scene.add(this.model)\n                this.createGUI(this.model, gltf.animations)\n            },\n            undefined,\n            err => {\n                console.error('load model error: ', err)\n            })\n\n        this.initControls()\n        this.setResize()\n        this.showFPS()\n        this.debug()\n        this.animate()\n    }\n\n\n\n    // Controls\n    initControls() {\n        // OrbitControlsControl\n        this.controls = new OrbitControls(this.camera, this.renderer.domElement)\n        // this.controls.addEventListener('change', () => {\n        //     this.renderer.render(this.scene, this.camera)\n        // }) // use if no animation\n        this.controls.enableDamping = true // 阻尼器\n        this.controls.enabled = true // 控制器是否启用\n        this.controls.update()\n    }\n\n    setResize() {\n        this.sizeObserver = new ResizeObserver(entries => {\n            this.height = entries[0].contentRect.height\n            this.width = entries[0].contentRect.width\n            // update camera\n            this.camera.aspect = this.width / this.height\n            this.camera.updateProjectionMatrix()\n            // update renderer\n            this.renderer.setSize(this.width, this.height)\n            this.renderer.render(this.scene, this.camera)\n        })\n        this.sizeObserver.observe(this.container)\n    }\n\n    createGUI(model, animations) {\n        this.gui = new dat.GUI()\n        const states = ['Idle', 'Walking', 'Running', 'Dance', 'Death', 'Sitting', 'Standing'] // 行动动画，其中后三种为单词动画，前四种循环播放\n        const emotes = ['Jump', 'Yes', 'No', 'Wave', 'Punch', 'ThumbsUp'] // 表情动画（一次）\n\n        // Actions\n        this.mixer = new THREE.AnimationMixer(model) // https://threejs.org/docs/index.html?q=AnimationMixer#api/zh/animation/AnimationMixer\n        animations.forEach(clip => {\n            const action = this.mixer.clipAction(clip)\n            this.actions[clip.name] = action\n            if (emotes.includes(clip.name) || states.indexOf(clip.name) >= 4) {\n                action.clampWhenFinished = true\n                action.loop = THREE.LoopOnce\n            }\n        })\n\n        // 动画切换过渡\n        const fadeToAction = (actionName, duration) => {\n            this.previousAction = this.activeAction\n            this.activeAction = this.actions[actionName]\n\n            if (this.previousAction && this.previousAction !== this.activeAction) {\n                this.previousAction.fadeOut(duration)\n            }\n\n            this.activeAction\n                .reset()\n                .setEffectiveTimeScale(1) // 改变时间比例\n                .setEffectiveWeight(1) // 动作的影响程度(取值范围[0, 1]). 0 (无影响)到1（完全影响）之间的值可以用来混合多个动作。默认值是1\n                .fadeIn(duration) // 在传入的时间间隔内，逐渐将此动作的权重（weight）由0升到1\n                .play() // 让混合器激活动作\n        }\n\n        // State\n        const statesFolder = this.gui.addFolder('状态')\n        statesFolder.open()\n        statesFolder.add(this.guiParams, 'state').options(states).onChange(() => {\n            fadeToAction(this.guiParams.state, 0.5)\n        })\n\n        // Emote\n        const emoteFolder = this.gui.addFolder('动作')\n        emoteFolder.open()\n        emotes.forEach(emoteName => {\n            this.guiParams[emoteName] = () => {\n                fadeToAction(emoteName, 0.2)\n                const restoreState = () => {\n                    this.mixer.removeEventListener('finished', restoreState)\n                    fadeToAction(this.guiParams.state, 0.2)\n                }\n                this.mixer.addEventListener('finished', restoreState) // 表情完成后回归原始运动状态\n            }\n            emoteFolder.add(this.guiParams, emoteName)\n        })\n        statesFolder.open()\n\n        // Expressions\n        const face = this.model.getObjectByName('Head_4')\n        const expressions = Object.keys(face.morphTargetDictionary) // 表情程度 Angry | Sad | Surprised\n        const expressionFolder = this.gui.addFolder('神态')\n        expressionFolder.open()\n        expressions.forEach((expression, index) => {\n            expressionFolder.add(face.morphTargetInfluences, index, 0, 1, 0.01).name(expression)\n        })\n\n        // Init Animation\n        this.activeAction = this.actions[this.guiParams.state]\n        this.activeAction.play()\n    }\n\n    showFPS() {\n        this.stats = new Stats()\n        this.container.appendChild(this.stats.dom)\n        this.stats.dom.style.position = 'absolute'\n        this.stats.dom.style.left = '150px'\n        this.stats.dom.style.top = '20px'\n    }\n\n    destoryFPS() {\n        if (this.stats) {\n            this.stats.dom.remove()\n            this.stats = null\n        }\n    }\n\n    animate() {\n        const deltaTime = this.clock.getDelta()\n        if (this.mixer) this.mixer.update(deltaTime)\n        this.long = requestAnimationFrame(this.animate.bind(this))\n        this.renderer.render(this.scene, this.camera)\n        this.stats.update()\n    }\n\n    destory() {\n        if (this.sizeObserver) {\n            this.sizeObserver.disconnect(this.container)\n            this.sizeObserver = null\n        }\n        window.cancelAnimationFrame(this.long)\n        if (this.renderer) {\n            this.renderer.forceContextLoss()\n            this.renderer.dispose()\n            this.renderer.domElement = null\n            this.renderer = null\n        }\n        this.clock = null\n        this.destoryFPS()\n        if (this.gui) this.gui.destroy()\n        this.model = this.mixer = this.previousAction = this.activeAction = null\n    }\n\n    debug() {\n        this.scene.add(new THREE.AxesHelper(100))\n    }\n}"})],64)}}},[["__scopeId","data-v-e5c2ca08"]]),AC=Object.freeze(Object.defineProperty({__proto__:null,default:TC},Symbol.toStringTag,{value:"Module"})),CC={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class PC{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){}}const RC=new fl(-1,1,1,-1,0,1),LC=new xo;LC.setAttribute("position",new ho([-1,3,0,-1,-1,0,3,-1,0],3)),LC.setAttribute("uv",new ho([0,2,0,0,2,0],2));class OC{constructor(e){this._mesh=new No(LC,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,RC)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class zC extends PC{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof jo?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Go.clone(e.uniforms),this.material=new jo({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new OC(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}class DC extends PC{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),i=e.state;let s,a;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(s=0,a=1):(s=1,a=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),i.buffers.stencil.setFunc(r.ALWAYS,s,4294967295),i.buffers.stencil.setClear(a),i.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(r.EQUAL,1,4294967295),i.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),i.buffers.stencil.setLocked(!0)}}class kC extends PC{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class IC{constructor(e,t){if(this.renderer=e,void 0===t){const n=e.getSize(new gs);this._pixelRatio=e.getPixelRatio(),this._width=n.width,this._height=n.height,(t=new Fs(this._width*this._pixelRatio,this._height*this._pixelRatio)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new zC(CC),this.clock=new Sp}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let r=0,i=this.passes.length;r<i;r++){const t=this.passes[r];if(!1!==t.enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),t.needsSwap){if(n){const t=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(t.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),n.setFunc(t.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==DC&&(t instanceof DC?n=!0:t instanceof kC&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new gs);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}new fl(-1,1,1,-1,0,1);const NC=new xo;NC.setAttribute("position",new ho([-1,3,0,-1,-1,0,3,-1,0],3)),NC.setAttribute("uv",new ho([0,2,0,0,2,0],2));class FC extends PC{constructor(e,t,n,r,i){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Rs}render(e,t,n){const r=e.autoClear;let i,s;e.autoClear=!1,void 0!==this.overrideMaterial&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),i=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=s),e.autoClear=r}}const UC={uniforms:{tDiffuse:{value:null},tSize:{value:new gs(256,256)},center:{value:new gs(.5,.5)},angle:{value:1.57},scale:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform vec2 center;\n\t\tuniform float angle;\n\t\tuniform float scale;\n\t\tuniform vec2 tSize;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tfloat pattern() {\n\n\t\t\tfloat s = sin( angle ), c = cos( angle );\n\n\t\t\tvec2 tex = vUv * tSize - center;\n\t\t\tvec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;\n\n\t\t\treturn ( sin( point.x ) * sin( point.y ) ) * 4.0;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 color = texture2D( tDiffuse, vUv );\n\n\t\t\tfloat average = ( color.r + color.g + color.b ) / 3.0;\n\n\t\t\tgl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );\n\n\t\t}"};class BC extends PC{constructor(e,t,n){super();const r=UC;this.uniforms=Go.clone(r.uniforms),void 0!==e&&this.uniforms.center.value.copy(e),void 0!==t&&(this.uniforms.angle.value=t),void 0!==n&&(this.uniforms.scale.value=n),this.material=new jo({uniforms:this.uniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader}),this.fsQuad=new OC(this.material)}render(e,t,n){this.uniforms.tDiffuse.value=n.texture,this.uniforms.tSize.value.set(n.width,n.height),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}}const HC={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\n\t\tuniform int byp; //should we apply the glitch ?\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tDisp;\n\n\t\tuniform float amount;\n\t\tuniform float angle;\n\t\tuniform float seed;\n\t\tuniform float seed_x;\n\t\tuniform float seed_y;\n\t\tuniform float distortion_x;\n\t\tuniform float distortion_y;\n\t\tuniform float col_s;\n\n\t\tvarying vec2 vUv;\n\n\n\t\tfloat rand(vec2 co){\n\t\t\treturn fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n\t\t}\n\n\t\tvoid main() {\n\t\t\tif(byp<1) {\n\t\t\t\tvec2 p = vUv;\n\t\t\t\tfloat xs = floor(gl_FragCoord.x / 0.5);\n\t\t\t\tfloat ys = floor(gl_FragCoord.y / 0.5);\n\t\t\t\t//based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch\n\t\t\t\tfloat disp = texture2D(tDisp, p*seed*seed).r;\n\t\t\t\tif(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {\n\t\t\t\t\tif(seed_x>0.){\n\t\t\t\t\t\tp.y = 1. - (p.y + distortion_y);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.y = distortion_y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {\n\t\t\t\t\tif(seed_y>0.){\n\t\t\t\t\t\tp.x=distortion_x;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.x = 1. - (p.x + distortion_x);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tp.x+=disp*seed_x*(seed/5.);\n\t\t\t\tp.y+=disp*seed_y*(seed/5.);\n\t\t\t\t//base from RGB shift shader\n\t\t\t\tvec2 offset = amount * vec2( cos(angle), sin(angle));\n\t\t\t\tvec4 cr = texture2D(tDiffuse, p + offset);\n\t\t\t\tvec4 cga = texture2D(tDiffuse, p);\n\t\t\t\tvec4 cb = texture2D(tDiffuse, p - offset);\n\t\t\t\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n\t\t\t\t//add noise\n\t\t\t\tvec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);\n\t\t\t\tgl_FragColor = gl_FragColor+ snow;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor=texture2D (tDiffuse, vUv);\n\t\t\t}\n\t\t}"};class GC extends PC{constructor(e=64){super();const t=HC;this.uniforms=Go.clone(t.uniforms),this.uniforms.tDisp.value=this.generateHeightmap(e),this.material=new jo({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.fsQuad=new OC(this.material),this.goWild=!1,this.curF=0,this.generateTrigger()}render(e,t,n){!1===e.capabilities.isWebGL2&&(this.uniforms.tDisp.value.format=1024),this.uniforms.tDiffuse.value=n.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||1==this.goWild?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=ms.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=ms.randFloat(-1,1),this.uniforms.seed_y.value=ms.randFloat(-1,1),this.uniforms.distortion_x.value=ms.randFloat(0,1),this.uniforms.distortion_y.value=ms.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=ms.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=ms.randFloat(0,1),this.uniforms.distortion_y.value=ms.randFloat(0,1),this.uniforms.seed_x.value=ms.randFloat(-.3,.3),this.uniforms.seed_y.value=ms.randFloat(-.3,.3)):0==this.goWild&&(this.uniforms.byp.value=1),this.curF++,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}generateTrigger(){this.randX=ms.randInt(120,240)}generateHeightmap(e){const t=new Float32Array(e*e),n=e*e;for(let i=0;i<n;i++){const e=ms.randFloat(0,1);t[i]=e}const r=new ou(t,e,e,1028,1015);return r.needsUpdate=!0,r}}const jC={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Rs(0)},defaultOpacity:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n\t\t\tfloat v = dot( texel.xyz, luma );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}"};class VC extends PC{constructor(e,t,n,r){super(),this.strength=void 0!==t?t:1,this.radius=n,this.threshold=r,this.resolution=void 0!==e?new gs(e.x,e.y):new gs(256,256),this.clearColor=new Rs(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let i=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);this.renderTargetBright=new Fs(i,s),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let c=0;c<this.nMips;c++){const e=new Fs(i,s);e.texture.name="UnrealBloomPass.h"+c,e.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(e);const t=new Fs(i,s);t.texture.name="UnrealBloomPass.v"+c,t.texture.generateMipmaps=!1,this.renderTargetsVertical.push(t),i=Math.round(i/2),s=Math.round(s/2)}const a=jC;this.highPassUniforms=Go.clone(a.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new jo({uniforms:this.highPassUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const o=[3,5,7,9,11];i=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);for(let c=0;c<this.nMips;c++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(o[c])),this.separableBlurMaterials[c].uniforms.texSize.value=new gs(i,s),i=Math.round(i/2),s=Math.round(s/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new Gs(1,1,1),new Gs(1,1,1),new Gs(1,1,1),new Gs(1,1,1),new Gs(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const l=CC;this.copyUniforms=Go.clone(l.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new jo({uniforms:this.copyUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,blending:2,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Rs,this.oldClearAlpha=1,this.basic=new io,this.fsQuad=new OC(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()}setSize(e,t){let n=Math.round(e/2),r=Math.round(t/2);this.renderTargetBright.setSize(n,r);for(let i=0;i<this.nMips;i++)this.renderTargetsHorizontal[i].setSize(n,r),this.renderTargetsVertical[i].setSize(n,r),this.separableBlurMaterials[i].uniforms.texSize.value=new gs(n,r),n=Math.round(n/2),r=Math.round(r/2)}render(e,t,n,r,i){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const s=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),i&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let a=this.renderTargetBright;for(let o=0;o<this.nMips;o++)this.fsQuad.material=this.separableBlurMaterials[o],this.separableBlurMaterials[o].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[o].uniforms.direction.value=VC.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[o]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[o].uniforms.colorTexture.value=this.renderTargetsHorizontal[o].texture,this.separableBlurMaterials[o].uniforms.direction.value=VC.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[o]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[o];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,i&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=s}getSeperableBlurMaterial(e){return new jo({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new gs(.5,.5)},direction:{value:new gs(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat fSigma = float(SIGMA);\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = float(i);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\n\t\t\t\t\t\tweightSum += 2.0 * w;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})}getCompositeMaterial(e){return new jo({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\t\t\t\t}"})}}VC.BlurDirectionX=new gs(1,0),VC.BlurDirectionY=new gs(0,1);const WC={uniforms:{tDiffuse:{value:null},amount:{value:.005},angle:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float amount;\n\t\tuniform float angle;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec2 offset = amount * vec2( cos(angle), sin(angle));\n\t\t\tvec4 cr = texture2D(tDiffuse, vUv + offset);\n\t\t\tvec4 cga = texture2D(tDiffuse, vUv);\n\t\t\tvec4 cb = texture2D(tDiffuse, vUv - offset);\n\t\t\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n\n\t\t}"},XC={defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new gs(1/1024,1/512)}},vertexShader:"\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 3 ];\n\n\t\tvoid SMAAEdgeDetectionVS( vec2 texcoord ) {\n\t\t\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 ); // WebGL port note: Changed sign in W component\n\t\t\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component\n\t\t\tvOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 ); // WebGL port note: Changed sign in W component\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tSMAAEdgeDetectionVS( vUv );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 3 ];\n\n\t\tvec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {\n\t\t\tvec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );\n\n\t\t\t// Calculate color deltas:\n\t\t\tvec4 delta;\n\t\t\tvec3 C = texture2D( colorTex, texcoord ).rgb;\n\n\t\t\tvec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;\n\t\t\tvec3 t = abs( C - Cleft );\n\t\t\tdelta.x = max( max( t.r, t.g ), t.b );\n\n\t\t\tvec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;\n\t\t\tt = abs( C - Ctop );\n\t\t\tdelta.y = max( max( t.r, t.g ), t.b );\n\n\t\t\t// We do the usual threshold:\n\t\t\tvec2 edges = step( threshold, delta.xy );\n\n\t\t\t// Then discard if there is no edge:\n\t\t\tif ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )\n\t\t\t\tdiscard;\n\n\t\t\t// Calculate right and bottom deltas:\n\t\t\tvec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;\n\t\t\tt = abs( C - Cright );\n\t\t\tdelta.z = max( max( t.r, t.g ), t.b );\n\n\t\t\tvec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;\n\t\t\tt = abs( C - Cbottom );\n\t\t\tdelta.w = max( max( t.r, t.g ), t.b );\n\n\t\t\t// Calculate the maximum delta in the direct neighborhood:\n\t\t\tfloat maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );\n\n\t\t\t// Calculate left-left and top-top deltas:\n\t\t\tvec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;\n\t\t\tt = abs( C - Cleftleft );\n\t\t\tdelta.z = max( max( t.r, t.g ), t.b );\n\n\t\t\tvec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;\n\t\t\tt = abs( C - Ctoptop );\n\t\t\tdelta.w = max( max( t.r, t.g ), t.b );\n\n\t\t\t// Calculate the final maximum delta:\n\t\t\tmaxDelta = max( max( maxDelta, delta.z ), delta.w );\n\n\t\t\t// Local contrast adaptation in action:\n\t\t\tedges.xy *= step( 0.5 * maxDelta, delta.xy );\n\n\t\t\treturn vec4( edges, 0.0, 0.0 );\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );\n\n\t\t}"},qC={defines:{SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},uniforms:{tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new gs(1/1024,1/512)}},vertexShader:"\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 3 ];\n\t\tvarying vec2 vPixcoord;\n\n\t\tvoid SMAABlendingWeightCalculationVS( vec2 texcoord ) {\n\t\t\tvPixcoord = texcoord / resolution;\n\n\t\t\t// We will use these offsets for the searches later on (see @PSEUDO_GATHER4):\n\t\t\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 ); // WebGL port note: Changed sign in Y and W components\n\t\t\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 ); // WebGL port note: Changed sign in Y and W components\n\n\t\t\t// And these for the searches, they indicate the ends of the loops:\n\t\t\tvOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tSMAABlendingWeightCalculationVS( vUv );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\t#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tArea;\n\t\tuniform sampler2D tSearch;\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[3];\n\t\tvarying vec2 vPixcoord;\n\n\t\t#if __VERSION__ == 100\n\t\tvec2 round( vec2 x ) {\n\t\t\treturn sign( x ) * floor( abs( x ) + 0.5 );\n\t\t}\n\t\t#endif\n\n\t\tfloat SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {\n\t\t\t// Not required if searchTex accesses are set to point:\n\t\t\t// float2 SEARCH_TEX_PIXEL_SIZE = 1.0 / float2(66.0, 33.0);\n\t\t\t// e = float2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE +\n\t\t\t//     e * float2(scale, 1.0) * float2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;\n\t\t\te.r = bias + e.r * scale;\n\t\t\treturn 255.0 * texture2D( searchTex, e, 0.0 ).r;\n\t\t}\n\n\t\tfloat SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\t/**\n\t\t\t\t* @PSEUDO_GATHER4\n\t\t\t\t* This texcoord has been offset by (-0.25, -0.125) in the vertex shader to\n\t\t\t\t* sample between edge, thus fetching four edges in a row.\n\t\t\t\t* Sampling with different offsets in each direction allows to disambiguate\n\t\t\t\t* which edges are active from the four fetched ones.\n\t\t\t\t*/\n\t\t\tvec2 e = vec2( 0.0, 1.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord -= vec2( 2.0, 0.0 ) * resolution;\n\t\t\t\tif ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\t// We correct the previous (-0.25, -0.125) offset we applied:\n\t\t\ttexcoord.x += 0.25 * resolution.x;\n\n\t\t\t// The searches are bias by 1, so adjust the coords accordingly:\n\t\t\ttexcoord.x += resolution.x;\n\n\t\t\t// Disambiguate the length added by the last step:\n\t\t\ttexcoord.x += 2.0 * resolution.x; // Undo last step\n\t\t\ttexcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);\n\n\t\t\treturn texcoord.x;\n\t\t}\n\n\t\tfloat SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\tvec2 e = vec2( 0.0, 1.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord += vec2( 2.0, 0.0 ) * resolution;\n\t\t\t\tif ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\ttexcoord.x -= 0.25 * resolution.x;\n\t\t\ttexcoord.x -= resolution.x;\n\t\t\ttexcoord.x -= 2.0 * resolution.x;\n\t\t\ttexcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );\n\n\t\t\treturn texcoord.x;\n\t\t}\n\n\t\tfloat SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\tvec2 e = vec2( 1.0, 0.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord += vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign\n\t\t\t\tif ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\ttexcoord.y -= 0.25 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y -= resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y -= 2.0 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 ); // WebGL port note: Changed sign\n\n\t\t\treturn texcoord.y;\n\t\t}\n\n\t\tfloat SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\tvec2 e = vec2( 1.0, 0.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord -= vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign\n\t\t\t\tif ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\ttexcoord.y += 0.25 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y += resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y += 2.0 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 ); // WebGL port note: Changed sign\n\n\t\t\treturn texcoord.y;\n\t\t}\n\n\t\tvec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {\n\t\t\t// Rounding prevents precision errors of bilinear filtering:\n\t\t\tvec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;\n\n\t\t\t// We do a scale and bias for mapping to texel space:\n\t\t\ttexcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );\n\n\t\t\t// Move to proper place, according to the subpixel offset:\n\t\t\ttexcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;\n\n\t\t\treturn texture2D( areaTex, texcoord, 0.0 ).rg;\n\t\t}\n\n\t\tvec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {\n\t\t\tvec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );\n\n\t\t\tvec2 e = texture2D( edgesTex, texcoord ).rg;\n\n\t\t\tif ( e.g > 0.0 ) { // Edge at north\n\t\t\t\tvec2 d;\n\n\t\t\t\t// Find the distance to the left:\n\t\t\t\tvec2 coords;\n\t\t\t\tcoords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );\n\t\t\t\tcoords.y = offset[ 1 ].y; // offset[1].y = texcoord.y - 0.25 * resolution.y (@CROSSING_OFFSET)\n\t\t\t\td.x = coords.x;\n\n\t\t\t\t// Now fetch the left crossing edges, two at a time using bilinear\n\t\t\t\t// filtering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to\n\t\t\t\t// discern what value each edge has:\n\t\t\t\tfloat e1 = texture2D( edgesTex, coords, 0.0 ).r;\n\n\t\t\t\t// Find the distance to the right:\n\t\t\t\tcoords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );\n\t\t\t\td.y = coords.x;\n\n\t\t\t\t// We want the distances to be in pixel units (doing this here allow to\n\t\t\t\t// better interleave arithmetic and memory accesses):\n\t\t\t\td = d / resolution.x - pixcoord.x;\n\n\t\t\t\t// SMAAArea below needs a sqrt, as the areas texture is compressed\n\t\t\t\t// quadratically:\n\t\t\t\tvec2 sqrt_d = sqrt( abs( d ) );\n\n\t\t\t\t// Fetch the right crossing edges:\n\t\t\t\tcoords.y -= 1.0 * resolution.y; // WebGL port note: Added\n\t\t\t\tfloat e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;\n\n\t\t\t\t// Ok, we know how this pattern looks like, now it is time for getting\n\t\t\t\t// the actual area:\n\t\t\t\tweights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );\n\t\t\t}\n\n\t\t\tif ( e.r > 0.0 ) { // Edge at west\n\t\t\t\tvec2 d;\n\n\t\t\t\t// Find the distance to the top:\n\t\t\t\tvec2 coords;\n\n\t\t\t\tcoords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );\n\t\t\t\tcoords.x = offset[ 0 ].x; // offset[1].x = texcoord.x - 0.25 * resolution.x;\n\t\t\t\td.x = coords.y;\n\n\t\t\t\t// Fetch the top crossing edges:\n\t\t\t\tfloat e1 = texture2D( edgesTex, coords, 0.0 ).g;\n\n\t\t\t\t// Find the distance to the bottom:\n\t\t\t\tcoords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );\n\t\t\t\td.y = coords.y;\n\n\t\t\t\t// We want the distances to be in pixel units:\n\t\t\t\td = d / resolution.y - pixcoord.y;\n\n\t\t\t\t// SMAAArea below needs a sqrt, as the areas texture is compressed\n\t\t\t\t// quadratically:\n\t\t\t\tvec2 sqrt_d = sqrt( abs( d ) );\n\n\t\t\t\t// Fetch the bottom crossing edges:\n\t\t\t\tcoords.y -= 1.0 * resolution.y; // WebGL port note: Added\n\t\t\t\tfloat e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;\n\n\t\t\t\t// Get the area for this direction:\n\t\t\t\tweights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );\n\t\t\t}\n\n\t\t\treturn weights;\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );\n\n\t\t}"},YC={uniforms:{tDiffuse:{value:null},tColor:{value:null},resolution:{value:new gs(1/1024,1/512)}},vertexShader:"\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 2 ];\n\n\t\tvoid SMAANeighborhoodBlendingVS( vec2 texcoord ) {\n\t\t\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 ); // WebGL port note: Changed sign in W component\n\t\t\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tSMAANeighborhoodBlendingVS( vUv );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tColor;\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 2 ];\n\n\t\tvec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {\n\t\t\t// Fetch the blending weights for current pixel:\n\t\t\tvec4 a;\n\t\t\ta.xz = texture2D( blendTex, texcoord ).xz;\n\t\t\ta.y = texture2D( blendTex, offset[ 1 ].zw ).g;\n\t\t\ta.w = texture2D( blendTex, offset[ 1 ].xy ).a;\n\n\t\t\t// Is there any blending weight with a value greater than 0.0?\n\t\t\tif ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {\n\t\t\t\treturn texture2D( colorTex, texcoord, 0.0 );\n\t\t\t} else {\n\t\t\t\t// Up to 4 lines can be crossing a pixel (one through each edge). We\n\t\t\t\t// favor blending by choosing the line with the maximum weight for each\n\t\t\t\t// direction:\n\t\t\t\tvec2 offset;\n\t\t\t\toffset.x = a.a > a.b ? a.a : -a.b; // left vs. right\n\t\t\t\toffset.y = a.g > a.r ? -a.g : a.r; // top vs. bottom // WebGL port note: Changed signs\n\n\t\t\t\t// Then we go in the direction that has the maximum weight:\n\t\t\t\tif ( abs( offset.x ) > abs( offset.y )) { // horizontal vs. vertical\n\t\t\t\t\toffset.y = 0.0;\n\t\t\t\t} else {\n\t\t\t\t\toffset.x = 0.0;\n\t\t\t\t}\n\n\t\t\t\t// Fetch the opposite color and lerp by hand:\n\t\t\t\tvec4 C = texture2D( colorTex, texcoord, 0.0 );\n\t\t\t\ttexcoord += sign( offset ) * resolution;\n\t\t\t\tvec4 Cop = texture2D( colorTex, texcoord, 0.0 );\n\t\t\t\tfloat s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );\n\n\t\t\t\t// WebGL port note: Added gamma correction\n\t\t\t\tC.xyz = pow(C.xyz, vec3(2.2));\n\t\t\t\tCop.xyz = pow(Cop.xyz, vec3(2.2));\n\t\t\t\tvec4 mixed = mix(C, Cop, s);\n\t\t\t\tmixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));\n\n\t\t\t\treturn mixed;\n\t\t\t}\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );\n\n\t\t}"};class ZC extends PC{constructor(e,t){super(),this.edgesRT=new Fs(e,t,{depthBuffer:!1}),this.edgesRT.texture.name="SMAAPass.edges",this.weightsRT=new Fs(e,t,{depthBuffer:!1}),this.weightsRT.texture.name="SMAAPass.weights";const n=this,r=new Image;r.src=this.getAreaTexture(),r.onload=function(){n.areaTexture.needsUpdate=!0},this.areaTexture=new Is,this.areaTexture.name="SMAAPass.area",this.areaTexture.image=r,this.areaTexture.minFilter=1006,this.areaTexture.generateMipmaps=!1,this.areaTexture.flipY=!1;const i=new Image;i.src=this.getSearchTexture(),i.onload=function(){n.searchTexture.needsUpdate=!0},this.searchTexture=new Is,this.searchTexture.name="SMAAPass.search",this.searchTexture.image=i,this.searchTexture.magFilter=1003,this.searchTexture.minFilter=1003,this.searchTexture.generateMipmaps=!1,this.searchTexture.flipY=!1,this.uniformsEdges=Go.clone(XC.uniforms),this.uniformsEdges.resolution.value.set(1/e,1/t),this.materialEdges=new jo({defines:Object.assign({},XC.defines),uniforms:this.uniformsEdges,vertexShader:XC.vertexShader,fragmentShader:XC.fragmentShader}),this.uniformsWeights=Go.clone(qC.uniforms),this.uniformsWeights.resolution.value.set(1/e,1/t),this.uniformsWeights.tDiffuse.value=this.edgesRT.texture,this.uniformsWeights.tArea.value=this.areaTexture,this.uniformsWeights.tSearch.value=this.searchTexture,this.materialWeights=new jo({defines:Object.assign({},qC.defines),uniforms:this.uniformsWeights,vertexShader:qC.vertexShader,fragmentShader:qC.fragmentShader}),this.uniformsBlend=Go.clone(YC.uniforms),this.uniformsBlend.resolution.value.set(1/e,1/t),this.uniformsBlend.tDiffuse.value=this.weightsRT.texture,this.materialBlend=new jo({uniforms:this.uniformsBlend,vertexShader:YC.vertexShader,fragmentShader:YC.fragmentShader}),this.needsSwap=!1,this.fsQuad=new OC(null)}render(e,t,n){this.uniformsEdges.tDiffuse.value=n.texture,this.fsQuad.material=this.materialEdges,e.setRenderTarget(this.edgesRT),this.clear&&e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialWeights,e.setRenderTarget(this.weightsRT),this.clear&&e.clear(),this.fsQuad.render(e),this.uniformsBlend.tColor.value=n.texture,this.fsQuad.material=this.materialBlend,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}setSize(e,t){this.edgesRT.setSize(e,t),this.weightsRT.setSize(e,t),this.materialEdges.uniforms.resolution.value.set(1/e,1/t),this.materialWeights.uniforms.resolution.value.set(1/e,1/t),this.materialBlend.uniforms.resolution.value.set(1/e,1/t)}getAreaTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAIAAACOVPcQAACBeklEQVR42u39W4xlWXrnh/3WWvuciIzMrKxrV8/0rWbY0+SQFKcb4owIkSIFCjY9AC1BT/LYBozRi+EX+cV+8IMsYAaCwRcBwjzMiw2jAWtgwC8WR5Q8mDFHZLNHTarZGrLJJllt1W2qKrsumZWZcTvn7L3W54e1vrXX3vuciLPPORFR1XE2EomorB0nVuz//r71re/y/1eMvb4Cb3N11xV/PP/2v4UBAwJG/7H8urx6/25/Gf8O5hypMQ0EEEQwAqLfoN/Z+97f/SW+/NvcgQk4sGBJK6H7N4PFVL+K+e0N11yNfkKvwUdwdlUAXPHHL38oa15f/i/46Ih6SuMSPmLAYAwyRKn7dfMGH97jaMFBYCJUgotIC2YAdu+LyW9vvubxAP8kAL8H/koAuOKP3+q6+xGnd5kdYCeECnGIJViwGJMAkQKfDvB3WZxjLKGh8VSCCzhwEWBpMc5/kBbjawT4HnwJfhr+pPBIu7uu+OOTo9vsmtQcniMBGkKFd4jDWMSCRUpLjJYNJkM+IRzQ+PQvIeAMTrBS2LEiaiR9b/5PuT6Ap/AcfAFO4Y3dA3DFH7/VS+M8k4baEAQfMI4QfbVDDGIRg7GKaIY52qAjTAgTvGBAPGIIghOCYAUrGFNgzA7Q3QhgCwfwAnwe5vDejgG44o/fbm1C5ZlYQvQDARPAIQGxCWBM+wWl37ZQESb4gImexGMDouhGLx1Cst0Saa4b4AqO4Hk4gxo+3DHAV/nx27p3JziPM2pVgoiia5MdEzCGULprIN7gEEeQ5IQxEBBBQnxhsDb5auGmAAYcHMA9eAAz8PBol8/xij9+C4Djlim4gJjWcwZBhCBgMIIYxGAVIkH3ZtcBuLdtRFMWsPGoY9rN+HoBji9VBYdwD2ZQg4cnO7OSq/z4rU5KKdwVbFAjNojCQzTlCLPFSxtamwh2jMUcEgg2Wm/6XgErIBhBckQtGN3CzbVacERgCnfgLswhnvqf7QyAq/z4rRZm1YglYE3affGITaZsdIe2FmMIpnOCap25I6jt2kCwCW0D1uAD9sZctNGXcQIHCkINDQgc78aCr+zjtw3BU/ijdpw3zhCwcaONwBvdeS2YZKkJNJsMPf2JKEvC28RXxxI0ASJyzQCjCEQrO4Q7sFArEzjZhaFc4cdv+/JFdKULM4px0DfUBI2hIsy06BqLhGTQEVdbfAIZXYMPesq6VoCHICzUyjwInO4Y411//LYLs6TDa9wvg2CC2rElgAnpTBziThxaL22MYhzfkghz6GAs2VHbbdM91VZu1MEEpupMMwKyVTb5ij9+u4VJG/5EgEMMmFF01cFai3isRbKbzb+YaU/MQbAm2XSMoUPAmvZzbuKYRIFApbtlrfFuUGd6vq2hXNnH78ZLh/iFhsQG3T4D1ib7k5CC6vY0DCbtrohgLEIClXiGtl10zc0CnEGIhhatLBva7NP58Tvw0qE8yWhARLQ8h4+AhQSP+I4F5xoU+VilGRJs6wnS7ruti/4KvAY/CfdgqjsMy4pf8fodQO8/gnuX3f/3xi3om1/h7THr+co3x93PP9+FBUfbNUjcjEmhcrkT+8K7ml7V10Jo05mpIEFy1NmCJWx9SIKKt+EjAL4Ez8EBVOB6havuT/rByPvHXK+9zUcfcbb254+9fydJknYnRr1oGfdaiAgpxu1Rx/Rek8KISftx3L+DfsLWAANn8Hvw0/AFeAGO9DFV3c6D+CcWbL8Dj9e7f+T1k8AZv/d7+PXWM/Z+VvdCrIvuAKO09RpEEQJM0Ci6+B4xhTWr4cZNOvhktabw0ta0rSJmqz3Yw5/AKXwenod7cAhTmBSPKf6JBdvH8IP17h95pXqw50/+BFnj88fev4NchyaK47OPhhtI8RFSvAfDSNh0Ck0p2gLxGkib5NJj/JWCr90EWQJvwBzO4AHcgztwAFN1evHPUVGwfXON+0debT1YeGON9Yy9/63X+OguiwmhIhQhD7l4sMqlG3D86Suc3qWZ4rWjI1X7u0Ytw6x3rIMeIOPDprfe2XzNgyj6PahhBjO4C3e6puDgXrdg+/5l948vF3bqwZetZ+z9Rx9zdIY5pInPK4Nk0t+l52xdK2B45Qd87nM8fsD5EfUhIcJcERw4RdqqH7Yde5V7m1vhNmtedkz6EDzUMF/2jJYWbC+4fzzA/Y+/8PPH3j9dcBAPIRP8JLXd5BpAu03aziOL3VVHZzz3CXWDPWd+SH2AnxIqQoTZpo9Ckc6HIrFbAbzNmlcg8Ag8NFDDAhbJvTBZXbC94P7t68EXfv6o+21gUtPETU7bbkLxvNKRFG2+KXzvtObonPP4rBvsgmaKj404DlshFole1Glfh02fE7bYR7dZ82oTewIBGn1Md6CG6YUF26X376oevOLzx95vhUmgblI6LBZwTCDY7vMq0op5WVXgsObOXJ+1x3qaBl9j1FeLxbhU9w1F+Wiba6s1X/TBz1LnUfuYDi4r2C69f1f14BWfP+p+W2GFKuC9phcELMYRRLur9DEZTUdEH+iEqWdaM7X4WOoPGI+ZYD2+wcQ+y+ioHUZ9dTDbArzxmi/bJI9BND0Ynd6lBdve/butBw8+f/T9D3ABa3AG8W3VPX4hBin+bj8dMMmSpp5pg7fJ6xrBFE2WQQEWnV8Qg3FbAWzYfM1rREEnmvkN2o1+acG2d/9u68GDzx91v3mAjb1zkpqT21OipPKO0b9TO5W0nTdOmAQm0TObts3aBKgwARtoPDiCT0gHgwnbArzxmtcLc08HgF1asN0C4Ms/fvD5I+7PhfqyXE/b7RbbrGyRQRT9ARZcwAUmgdoz0ehJ9Fn7QAhUjhDAQSw0bV3T3WbNa59jzmiP6GsWbGXDX2ytjy8+f9T97fiBPq9YeLdBmyuizZHaqXITnXiMUEEVcJ7K4j3BFPurtB4bixW8wTpweL8DC95szWMOqucFYGsWbGU7p3TxxxefP+r+oTVktxY0v5hbq3KiOKYnY8ddJVSBxuMMVffNbxwIOERShst73HZ78DZrHpmJmH3K6sGz0fe3UUj0eyRrSCGTTc+rjVNoGzNSv05srAxUBh8IhqChiQgVNIIBH3AVPnrsnXQZbLTm8ammv8eVXn/vWpaTem5IXRlt+U/LA21zhSb9cye6jcOfCnOwhIAYXAMVTUNV0QhVha9xjgA27ODJbLbmitt3tRN80lqG6N/khgot4ZVlOyO4WNg3OIMzhIZQpUEHieg2im6F91hB3I2tubql6BYNN9Hj5S7G0G2tahslBWKDnOiIvuAEDzakDQKDNFQT6gbn8E2y4BBubM230YIpBnDbMa+y3dx0n1S0BtuG62lCCXwcY0F72T1VRR3t2ONcsmDjbmzNt9RFs2LO2hQNyb022JisaI8rAWuw4HI3FuAIhZdOGIcdjLJvvObqlpqvWTJnnQbyi/1M9O8UxWhBs//H42I0q1Yb/XPGONzcmm+ri172mHKvZBpHkJaNJz6v9jxqiklDj3U4CA2ugpAaYMWqNXsdXbmJNd9egCnJEsphXNM+MnK3m0FCJ5S1kmJpa3DgPVbnQnPGWIDspW9ozbcO4K/9LkfaQO2KHuqlfFXSbdNzcEcwoqNEFE9zcIXu9/6n/ym/BC/C3aJLzEKPuYVlbFnfhZ8kcWxV3dbv4bKl28566wD+8C53aw49lTABp9PWbsB+knfc/Li3eVizf5vv/xmvnPKg5ihwKEwlrcHqucuVcVOxEv8aH37E3ZqpZypUulrHEtIWKUr+txHg+ojZDGlwnqmkGlzcVi1dLiNSJiHjfbRNOPwKpx9TVdTn3K05DBx4psIk4Ei8aCkJahRgffk4YnEXe07T4H2RR1u27E6wfQsBDofUgjFUFnwC2AiVtA+05J2zpiDK2Oa0c5fmAecN1iJzmpqFZxqYBCYhFTCsUNEmUnIcZ6aEA5rQVhEywG6w7HSW02XfOoBlQmjwulOFQAg66SvJblrTEX1YtJ3uG15T/BH1OfOQeuR8g/c0gdpT5fx2SKbs9EfHTKdM8A1GaJRHLVIwhcGyydZsbifAFVKl5EMKNU2Hryo+06BeTgqnxzYjThVySDikbtJPieco75lYfKAJOMEZBTjoITuWHXXZVhcUDIS2hpiXHV9Ku4u44bN5OYLDOkJo8w+xJSMbhBRHEdEs9JZUCkQrPMAvaHyLkxgkEHxiNkx/x2YB0mGsQ8EUWj/stW5YLhtS5SMu+/YBbNPDCkGTUybN8krRLBGPlZkVOA0j+a1+rkyQKWGaPHPLZOkJhioQYnVZ2hS3zVxMtgC46KuRwbJNd9nV2PHgb36F194ecf/Yeu2vAFe5nm/bRBFrnY4BauE8ERmZRFUn0k8hbftiVYSKMEme2dJCJSCGYAlNqh87bXOPdUkGy24P6d1ll21MBqqx48Fvv8ZHH8HZFY7j/uAq1xMJUFqCSUlJPmNbIiNsmwuMs/q9CMtsZsFO6SprzCS1Z7QL8xCQClEelpjTduDMsmWD8S1PT152BtvmIGvUeDA/yRn83u/x0/4qxoPHjx+PXY9pqX9bgMvh/Nz9kpP4pOe1/fYf3axUiMdHLlPpZCNjgtNFAhcHEDxTumNONhHrBduW+vOyY++70WWnPXj98eA4kOt/mj/5E05l9+O4o8ePx67HFqyC+qSSnyselqjZGaVK2TadbFLPWAQ4NBhHqDCCV7OTpo34AlSSylPtIdd2AJZlyzYQrDJ5lcWGNceD80CunPLGGzsfD+7wRb95NevJI5docQ3tgCyr5bGnyaPRlmwNsFELViOOx9loebGNq2moDOKpHLVP5al2cymWHbkfzGXL7kfRl44H9wZy33tvt+PB/Xnf93e+nh5ZlU18wCiRUa9m7kib9LYuOk+hudQNbxwm0AQqbfloimaB2lM5fChex+ylMwuTbfmXQtmWlenZljbdXTLuOxjI/fDDHY4Hjx8/Hrse0zXfPFxbUN1kKqSCCSk50m0Ajtx3ub9XHBKHXESb8iO6E+qGytF4nO0OG3SXzbJlhxBnKtKyl0NwybjvYCD30aMdjgePHz8eu56SVTBbgxJMliQ3Oauwg0QHxXE2Ez/EIReLdQj42Gzb4CLS0YJD9xUx7bsi0vJi5mUbW1QzL0h0PFk17rtiIPfJk52MB48fPx67npJJwyrBa2RCCQRTbGZSPCxTPOiND4G2pYyOQ4h4jINIJh5wFU1NFZt+IsZ59LSnDqBjZ2awbOku+yInunLcd8VA7rNnOxkPHj9+PGY9B0MWJJNozOJmlglvDMXDEozdhQWbgs/U6oBanGzLrdSNNnZFjOkmbi5bNt1lX7JLLhn3vXAg9/h4y/Hg8ePHI9dzQMEkWCgdRfYykYKnkP7D4rIujsujaKPBsB54vE2TS00ccvFY/Tth7JXeq1hz+qgVy04sAJawTsvOknHfCwdyT062HA8eP348Zj0vdoXF4pilKa2BROed+9fyw9rWRXeTFXESMOanvDZfJuJaSXouQdMdDJZtekZcLLvEeK04d8m474UDuaenW44Hjx8/Xns9YYqZpszGWB3AN/4VHw+k7WSFtJ3Qicuqb/NlVmgXWsxh570xg2UwxUw3WfO6B5nOuO8aA7lnZxuPB48fPx6znm1i4bsfcbaptF3zNT78eFPtwi1OaCNOqp1x3zUGcs/PN++AGD1+fMXrSVm2baTtPhPahbPhA71wIHd2bXzRa69nG+3CraTtPivahV/55tXWg8fyRY/9AdsY8VbSdp8V7cKrrgdfM//z6ILQFtJ2nxHtwmuoB4/kf74+gLeRtvvMaBdeSz34+vifx0YG20jbfTa0C6+tHrwe//NmOG0L8EbSdp8R7cLrrQe/996O+ai3ujQOskpTNULa7jOjXXj99eCd8lHvoFiwsbTdZ0a78PrrwTvlo966pLuRtB2fFe3Cm6oHP9kNH/W2FryxtN1nTLvwRurBO+Kj3pWXHidtx2dFu/Bm68Fb81HvykuPlrb7LGkX3mw9eGs+6h1Y8MbSdjegXcguQLjmevDpTQLMxtJ2N6NdyBZu9AbrwVvwUW+LbteULUpCdqm0HTelXbhNPe8G68Gb8lFvVfYfSNuxvrTdTWoXbozAzdaDZzfkorOj1oxVxlIMlpSIlpLrt8D4hrQL17z+c3h6hU/wv4Q/utps4+bm+6P/hIcf0JwQ5oQGPBL0eKPTYEXTW+eL/2DKn73J9BTXYANG57hz1cEMviVf/4tf5b/6C5pTQkMIWoAq7hTpOJjtAM4pxKu5vg5vXeUrtI09/Mo/5H+4z+Mp5xULh7cEm2QbRP2tFIKR7WM3fPf/jZ3SWCqLM2l4NxID5zB72HQXv3jj/8mLR5xXNA5v8EbFQEz7PpRfl1+MB/hlAN65qgDn3wTgH13hK7T59bmP+NIx1SHHU84nLOITt3iVz8mNO+lPrjGAnBFqmioNn1mTyk1ta47R6d4MrX7tjrnjYUpdUbv2rVr6YpVfsGG58AG8Ah9eyUN8CX4WfgV+G8LVWPDGb+Zd4cU584CtqSbMKxauxTg+dyn/LkVgA+IR8KHtejeFKRtTmLLpxN6mYVLjYxwXf5x2VofiZcp/lwKk4wGOpYDnoIZPdg/AAbwMfx0+ge9dgZvYjuqKe4HnGnykYo5TvJbG0Vj12JagRhwKa44H95ShkZa5RyLGGdfYvG7aw1TsF6iapPAS29mNS3NmsTQZCmgTzFwgL3upCTgtBTRwvGMAKrgLn4evwin8+afJRcff+8izUGUM63GOOuAs3tJkw7J4kyoNreqrpO6cYLQeFUd7TTpr5YOTLc9RUUogUOVJQ1GYJaFLAW0oTmKyYS46ZooP4S4EON3xQ5zC8/CX4CnM4c1PE8ApexpoYuzqlP3d4S3OJP8ZDK7cKWNaTlqmgDiiHwl1YsE41w1zT4iRTm3DBqxvOUsbMKKDa/EHxagtnta072ejc3DOIh5ojvh8l3tk1JF/AV6FU6jh3U8HwEazLgdCLYSQ+MYiAI2ltomkzttUb0gGHdSUUgsIYjTzLG3mObX4FBRaYtpDVNZrih9TgTeYOBxsEnN1gOCTM8Bsw/ieMc75w9kuAT6A+/AiHGvN/+Gn4KRkiuzpNNDYhDGFndWRpE6SVfm8U5bxnSgVV2jrg6JCKmneqey8VMFgq2+AM/i4L4RUbfSi27lNXZ7R7W9RTcq/q9fk4Xw3AMQd4I5ifAZz8FcVtm9SAom/dyN4lczJQW/kC42ZrHgcCoIf1oVMKkVItmMBi9cOeNHGLqOZk+QqQmrbc5YmYgxELUUN35z2iohstgfLIFmcMV7s4CFmI74L9+EFmGsi+tGnAOD4Yk9gIpo01Y4cA43BWGygMdr4YZekG3OBIUXXNukvJS8tqa06e+lSDCtnqqMFu6hWHXCF+WaYt64m9QBmNxi7Ioy7D+fa1yHw+FMAcPt7SysFLtoG4PXAk7JOA3aAxBRqUiAdU9Yp5lK3HLSRFtOim0sa8euEt08xvKjYjzeJ2GU7YawexrnKI9tmobInjFXCewpwriY9+RR4aaezFhMhGCppKwom0ChrgFlKzyPKkGlTW1YQrE9HJqu8hKGgMc6hVi5QRq0PZxNfrYNgE64utmRv6KKHRpxf6VDUaOvNP5jCEx5q185My/7RKz69UQu2im5k4/eownpxZxNLwiZ1AZTO2ZjWjkU9uaB2HFn6Q3u0JcsSx/qV9hTEApRzeBLDJQXxYmTnq7bdLa3+uqFrxLJ5w1TehnNHx5ECvCh2g2c3hHH5YsfdaSKddztfjQ6imKFGSyFwlLzxEGPp6r5IevVjk1AMx3wMqi1NxDVjLBiPs9tbsCkIY5we5/ML22zrCScFxnNtzsr9Wcc3CnD+pYO+4VXXiDE0oc/vQQ/fDK3oPESJMYXNmJa/DuloJZkcTpcYE8lIH8Dz8DJMiynNC86Mb2lNaaqP/+L7f2fcE/yP7/Lde8xfgSOdMxvOixZf/9p3+M4hT1+F+zApxg9XfUvYjc8qX2lfOOpK2gNRtB4flpFu9FTKCp2XJRgXnX6olp1zyYjTKJSkGmLE2NjUr1bxFM4AeAAHBUFIeSLqXR+NvH/M9fOnfHzOD2vCSyQJKzfgsCh+yi/Mmc35F2fUrw7miW33W9hBD1vpuUojFphIyvg7aTeoymDkIkeW3XLHmguMzbIAJejN6B5MDrhipE2y6SoFRO/AK/AcHHZHNIfiWrEe/C6cr3f/yOvrQKB+zMM55/GQdLDsR+ifr5Fiuu+/y+M78LzOE5dsNuXC3PYvYWd8NXvphLSkJIasrlD2/HOqQ+RjcRdjKTGWYhhVUm4yxlyiGPuMsZR7sMCHUBeTuNWA7if+ifXgc/hovftHXs/DV+Fvwe+f8shzMiMcweFgBly3//vwJfg5AN4450fn1Hd1Rm1aBLu22Dy3y3H2+OqMemkbGZ4jozcDjJf6596xOLpC0eMTHbKnxLxH27uZ/bMTGs2jOaMOY4m87CfQwF0dw53oa1k80JRuz/XgS+8fX3N9Af4qPIMfzKgCp4H5TDGe9GGeFPzSsZz80SlPTxXjgwJmC45njzgt2vbQ4b4OAdUK4/vWhO8d8v6EE8fMUsfakXbPpFJeLs2ubM/qdm/la3WP91uWhxXHjoWhyRUq2iJ/+5mA73zwIIo+LoZ/SgvIRjAd1IMvvn98PfgOvAJfhhm8scAKVWDuaRaK8aQ9f7vuPDH6Bj47ZXau7rqYJ66mTDwEDU6lLbCjCK0qTXyl5mnDoeNRxanj3FJbaksTk0faXxHxLrssgPkWB9LnA/MFleXcJozzjwsUvUG0X/QCve51qkMDXp9mtcyOy3rwBfdvVJK7D6/ACSzg3RoruIq5UDeESfEmVclDxnniU82vxMLtceD0hGZWzBNPMM/jSPne2OVatiTKUpY5vY7gc0LdUAWeWM5tH+O2I66AOWw9xT2BuyRVLGdoDHUsVRXOo/c+ZdRXvFfnxWyIV4upFLCl9eAL7h8Zv0QH8Ry8pA2cHzQpGesctVA37ZtklBTgHjyvdSeKY/RZw/kJMk0Y25cSNRWSigQtlULPTw+kzuJPeYEkXjQRpoGZobYsLF79pyd1dMRHInbgFTZqNLhDqiIsTNpoex2WLcy0/X6rHcdMMQvFSd5dWA++4P7xv89deACnmr36uGlL69bRCL6BSZsS6c0TU2TKK5gtWCzgAOOwQcurqk9j8whvziZSMLcq5hbuwBEsYjopUBkqw1yYBGpLA97SRElEmx5MCInBY5vgLk94iKqSWmhIGmkJ4Bi9m4L645J68LyY4wsFYBfUg5feP/6gWWm58IEmKQM89hq7KsZNaKtP5TxxrUZZVkNmMJtjbKrGxLNEbHPJxhqy7lAmbC32ZqeF6lTaknRWcYaFpfLUBh/rwaQycCCJmW15Kstv6jRHyJFry2C1ahkkIW0LO75s61+owxK1y3XqweX9m5YLM2DPFeOjn/iiqCKJ+yKXF8t5Yl/kNsqaSCryxPq5xWTFIaP8KSW0RYxqupaUf0RcTNSSdJZGcKYdYA6kdtrtmyBckfKXwqk0pHpUHlwWaffjNRBYFPUDWa8e3Lt/o0R0CdisKDM89cX0pvRHEfM8ca4t0s2Xx4kgo91MPQJ/0c9MQYq0co8MBh7bz1fio0UUHLR4aAIOvOmoYO6kwlEVODSSTliWtOtH6sPkrtctF9ZtJ9GIerBskvhdVS5cFNv9s1BU0AbdUgdK4FG+dRnjFmDTzniRMdZO1QhzMK355vigbdkpz9P6qjUGE5J2qAcXmwJ20cZUiAD0z+pGMx6xkzJkmEf40Hr4qZfVg2XzF9YOyoV5BjzVkUJngKf8lgNYwKECEHrCNDrWZzMlflS3yBhr/InyoUgBc/lKT4pxVrrC6g1YwcceK3BmNxZcAtz3j5EIpqguh9H6wc011YN75cKDLpFDxuwkrPQmUwW4KTbj9mZTwBwLq4aQMUZbHm1rylJ46dzR0dua2n3RYCWZsiHROeywyJGR7mXKlpryyCiouY56sFkBWEnkEB/raeh/Sw4162KeuAxMQpEkzy5alMY5wamMsWKKrtW2WpEWNnReZWONKWjrdsKZarpFjqCslq773PLmEhM448Pc3+FKr1+94vv/rfw4tEcu+lKTBe4kZSdijBrykwv9vbCMPcLQTygBjzVckSLPRVGslqdunwJ4oegtFOYb4SwxNgWLCmD7T9kVjTv5YDgpo0XBmN34Z/rEHp0sgyz7lngsrm4lvMm2Mr1zNOJYJ5cuxuQxwMGJq/TP5emlb8fsQBZviK4t8hFL+zbhtlpwaRSxQRWfeETjuauPsdGxsBVdO7nmP4xvzSoT29pRl7kGqz+k26B3Oy0YNV+SXbbQas1ctC/GarskRdFpKczVAF1ZXnLcpaMuzVe6lZ2g/1ndcvOVgRG3sdUAY1bKD6achijMPdMxV4muKVorSpiDHituH7rSTs7n/4y5DhRXo4FVBN4vO/zbAcxhENzGbHCzU/98Mcx5e7a31kWjw9FCe/zNeYyQjZsWb1uc7U33pN4Mji6hCLhivqfa9Ss6xLg031AgfesA/l99m9fgvnaF9JoE6bYKmkGNK3aPbHB96w3+DnxFm4hs0drLsk7U8kf/N/CvwQNtllna0rjq61sH8L80HAuvwH1tvBy2ChqWSCaYTaGN19sTvlfzFD6n+iKTbvtayfrfe9ueWh6GJFoxLdr7V72a5ZpvHcCPDzma0wTO4EgbLyedxstO81n57LYBOBzyfsOhUKsW1J1BB5vr/tz8RyqOFylQP9Tvst2JALsC5lsH8PyQ40DV4ANzYa4dedNiKNR1s+x2wwbR7q4/4cTxqEk4LWDebfisuo36JXLiWFjOtLrlNWh3K1rRS4xvHcDNlFnNmWBBAl5SWaL3oPOfnvbr5pdjVnEaeBJSYjuLEkyLLsWhKccadmOphZkOPgVdalj2QpSmfOsADhMWE2ZBu4+EEJI4wKTAuCoC4xwQbWXBltpxbjkXJtKxxabo9e7tyhlgb6gNlSbUpMh+l/FaqzVwewGu8BW1Zx7pTpQDJUjb8tsUTW6+GDXbMn3mLbXlXJiGdggxFAoUrtPS3wE4Nk02UZG2OOzlk7fRs7i95QCLo3E0jtrjnM7SR3uS1p4qtS2nJ5OwtQVHgOvArLBFijZUV9QtSl8dAY5d0E0hM0w3HS2DpIeB6m/A1+HfhJcGUq4sOxH+x3f5+VO+Ds9rYNI7zPXOYWPrtf8bYMx6fuOAX5jzNR0PdsuON+X1f7EERxMJJoU6GkTEWBvVolVlb5lh3tKCg6Wx1IbaMDdJ+9sUCc5KC46hKGCk3IVOS4TCqdBNfUs7Kd4iXf2RjnT/LLysJy3XDcHLh/vde3x8DoGvwgsa67vBk91G5Pe/HbOe7xwym0NXbtiuuDkGO2IJDh9oQvJ4cY4vdoqLDuoH9Zl2F/ofsekn8lkuhIlhQcffUtSjytFyp++p6NiE7Rqx/lodgKVoceEp/CP4FfjrquZaTtj2AvH5K/ywpn7M34K/SsoYDAdIN448I1/0/wveW289T1/lX5xBzc8N5IaHr0XMOQdHsIkDuJFifj20pBm5jzwUv9e2FhwRsvhAbalCIuIw3bhJihY3p6nTFFIZgiSYjfTf3aXuOjmeGn4bPoGvwl+CFzTRczBIuHBEeImHc37/lGfwZR0cXzVDOvaKfNHvwe+suZ771K/y/XcBlsoN996JpBhoE2toYxOznNEOS5TJc6Id5GEXLjrWo+LEWGNpPDU4WAwsIRROu+1vM+0oW37z/MBN9kqHnSArwPfgFJ7Cq/Ai3Ie7g7ncmI09v8sjzw9mzOAEXoIHxURueaAce5V80f/DOuuZwHM8vsMb5wBzOFWM7wymTXPAEvm4vcFpZ2ut0VZRjkiP2MlmLd6DIpbGSiHOjdnUHN90hRYmhTnmvhzp1iKDNj+b7t5hi79lWGwQ+HN9RsfFMy0FXbEwhfuczKgCbyxYwBmcFhhvo/7a44v+i3XWcwDP86PzpGQYdWh7csP5dBvZ1jNzdxC8pBGuxqSW5vw40nBpj5JhMwvOzN0RWqERHMr4Lv1kWX84xLR830G3j6yqZ1a8UstTlW+qJPOZ+sZ7xZPKTJLhiNOAFd6tk+jrTH31ncLOxid8+nzRb128HhUcru/y0Wn6iT254YPC6FtVSIMoW2sk727AhvTtrWKZTvgsmckfXYZWeNRXx/3YQ2OUxLDrbHtN11IwrgXT6c8dATDwLniYwxzO4RzuQqTKSC5gAofMZ1QBK3zQ4JWobFbcvJm87FK+6JXrKahLn54m3p+McXzzYtP8VF/QpJuh1OwieElEoI1pRxPS09FBrkq2tWCU59+HdhNtTIqKm8EBrw2RTOEDpG3IKo2Y7mFdLm3ZeVjYwVw11o/oznceMve4CgMfNym/utA/d/ILMR7gpXzRy9eDsgLcgbs8O2Va1L0zzIdwGGemTBuwROHeoMShkUc7P+ISY3KH5ZZeWqO8mFTxQYeXTNuzvvK5FGPdQfuu00DwYFY9dyhctEt+OJDdnucfpmyhzUJzfsJjr29l8S0bXBfwRS9ZT26tmMIdZucch5ZboMz3Nio3nIOsYHCGoDT4kUA9MiXEp9Xsui1S8th/kbWIrMBxDGLodWUQIWcvnXy+9M23xPiSMOiRPqM+YMXkUN3gXFrZJwXGzUaMpJfyRS9ZT0lPe8TpScuRlbMHeUmlaKDoNuy62iWNTWNFYjoxFzuJs8oR+RhRx7O4SVNSXpa0ZJQ0K1LAHDQ+D9IepkMXpcsq5EVCvClBUIzDhDoyKwDw1Lc59GbTeORivugw1IcuaEOaGWdNm+Ps5fQ7/tm0DjMegq3yM3vb5j12qUId5UZD2oxDSEWOZMSqFl/W+5oynWDa/aI04tJRQ2eTXusg86SQVu/nwSYwpW6wLjlqIzwLuxGIvoAvul0PS+ZNz0/akp/pniO/8JDnGyaCkzbhl6YcqmK/69prxPqtpx2+Km9al9sjL+rwMgHw4jE/C8/HQ3m1vBuL1fldbzd8mOueVJ92syqdEY4KJjSCde3mcRw2TA6szxedn+zwhZMps0XrqEsiUjnC1hw0TELC2Ek7uAAdzcheXv1BYLagspxpzSAoZZUsIzIq35MnFQ9DOrlNB30jq3L4pkhccKUAA8/ocvN1Rzx9QyOtERs4CVsJRK/DF71kPYrxYsGsm6RMh4cps5g1DOmM54Ly1ii0Hd3Y/BMk8VWFgBVmhqrkJCPBHAolwZaWzLR9Vb7bcWdX9NyUYE+uB2BKfuaeBUcjDljbYVY4DdtsVWvzRZdWnyUzDpjNl1Du3aloAjVJTNDpcIOVVhrHFF66lLfJL1zJr9PQ2nFJSBaKoDe+sAvLufZVHVzYh7W0h/c6AAZ+7Tvj6q9j68G/cTCS/3n1vLKHZwNi+P+pS0WkZNMBMUl+LDLuiE4omZy71r3UFMwNJV+VJ/GC5ixVUkBStsT4gGKh0Gm4Oy3qvq7Lbmq24nPdDuDR9deR11XzP4vFu3TYzfnIyiSVmgizUYGqkIXNdKTY9pgb9D2Ix5t0+NHkVzCdU03suWkkVZAoCONCn0T35gAeW38de43mf97sMOpSvj4aa1KYUm58USI7Wxxes03bAZdRzk6UtbzMaCQ6IxO0dy7X+XsjoD16hpsBeGz9dfzHj+R/Hp8nCxZRqkEDTaCKCSywjiaoMJ1TITE9eg7Jqnq8HL6gDwiZb0u0V0Rr/rmvqjxKuaLCX7ZWXTvAY+uvm3z8CP7nzVpngqrJpZKwWnCUjIviYVlirlGOzPLI3SMVyp/elvBUjjDkNhrtufFFErQ8pmdSlbK16toBHlt/HV8uHMX/vEGALkV3RJREiSlopxwdMXOZPLZ+ix+kAHpMKIk8UtE1ygtquttwxNhphrIZ1IBzjGF3IIGxGcBj6q8bHJBG8T9vdsoWrTFEuebEZuVxhhClH6P5Zo89OG9fwHNjtNQTpD0TG9PJLEYqvEY6Rlxy+ZZGfL0Aj62/bnQCXp//eeM4KzfQVJbgMQbUjlMFIm6TpcfWlZje7NBSV6IsEVmumWIbjiloUzQX9OzYdo8L1wjw2PrrpimONfmfNyzKklrgnEkSzT5QWYQW40YShyzqsRmMXbvVxKtGuYyMKaU1ugenLDm5Ily4iT14fP11Mx+xJv+zZ3MvnfdFqxU3a1W/FTB4m3Qfsyc1XUcdVhDeUDZXSFHHLQj/Y5jtC7ZqM0CXGwB4bP11i3LhOvzPGygYtiUBiwQV/4wFO0majijGsafHyRLu0yG6q35cL1rOpVxr2s5cM2jJYMCdc10Aj6q/blRpWJ//+dmm5psMl0KA2+AFRx9jMe2WbC4jQxnikd4DU8TwUjRVacgdlhmr3bpddzuJ9zXqr2xnxJfzP29RexdtjDVZqzkqa6PyvcojGrfkXiJ8SEtml/nYskicv0ivlxbqjemwUjMw5evdg8fUX9nOiC/lf94Q2i7MURk9nW1MSj5j8eAyV6y5CN2S6qbnw3vdA1Iwq+XOSCl663udN3IzLnrt+us25cI1+Z83SXQUldqQq0b5XOT17bGpLd6ssN1VMPf8c+jG8L3NeCnMdF+Ra3fRa9dft39/LuZ/3vwHoHrqGmQFafmiQw6eyzMxS05K4bL9uA+SKUQzCnSDkqOGokXyJvbgJ/BHI+qvY69//4rl20NsmK2ou2dTsyIALv/91/8n3P2Aao71WFGi8KKv1fRC5+J67Q/507/E/SOshqN5TsmYIjVt+kcjAx98iz/4SaojbIV1rexE7/C29HcYD/DX4a0rBOF5VTu7omsb11L/AWcVlcVZHSsqGuXLLp9ha8I//w3Mv+T4Ew7nTBsmgapoCrNFObIcN4pf/Ob/mrvHTGqqgAupL8qWjWPS9m/31jAe4DjA+4+uCoQoT/zOzlrNd3qd4SdphFxsUvYwGWbTWtISc3wNOWH+kHBMfc6kpmpwPgHWwqaSUG2ZWWheYOGQGaHB+eQ/kn6b3pOgLV+ODSn94wDvr8Bvb70/LLuiPPEr8OGVWfDmr45PZyccEmsVXZGe1pRNX9SU5+AVQkNTIVPCHF/jGmyDC9j4R9LfWcQvfiETmgMMUCMN1uNCakkweZsowdYobiMSlnKA93u7NzTXlSfe+SVbfnPQXmg9LpYAQxpwEtONyEyaueWM4FPjjyjG3uOaFmBTWDNgBXGEiQpsaWhnAqIijB07Dlsy3fUGeP989xbWkyf+FF2SNEtT1E0f4DYYVlxFlbaSMPIRMk/3iMU5pME2SIWJvjckciebkQuIRRyhUvkHg/iUljG5kzVog5hV7vIlCuBrmlhvgPfNHQM8lCf+FEGsYbMIBC0qC9a0uuy2wLXVbLBaP5kjHokCRxapkQyzI4QEcwgYHRZBp+XEFTqXFuNVzMtjXLJgX4gAid24Hjwc4N3dtVSe+NNiwTrzH4WVUOlDobUqr1FuAgYllc8pmzoVrELRHSIW8ViPxNy4xwjBpyR55I6J220qQTZYR4guvUICJiSpr9gFFle4RcF/OMB7BRiX8sSfhpNSO3lvEZCQfLUVTKT78Ek1LRLhWN+yLyTnp8qWUZ46b6vxdRGXfHVqx3eI75YaLa4iNNiK4NOW7wPW6lhbSOF9/M9qw8e/aoB3d156qTzxp8pXx5BKAsYSTOIIiPkp68GmTq7sZtvyzBQaRLNxIZ+paozHWoLFeExIhRBrWitHCAHrCF7/thhD8JhYz84wg93QRV88wLuLY8zF8sQ36qF1J455bOlgnELfshKVxYOXKVuKx0jaj22sczTQqPqtV/XDgpswmGTWWMSDw3ssyUunLLrVPGjYRsH5ggHeHSWiV8kT33ycFSfMgkoOK8apCye0J6VW6GOYvffgU9RWsukEi2kUV2nl4dOYUzRik9p7bcA4ggdJ53LxKcEe17B1R8eqAd7dOepV8sTXf5lhejoL85hUdhDdknPtKHFhljOT+bdq0hxbm35p2nc8+Ja1Iw+tJykgp0EWuAAZYwMVwac5KzYMslhvgHdHRrxKnvhTYcfKsxTxtTETkjHO7rr3zjoV25lAQHrqpV7bTiy2aXMmUhTBnKS91jhtR3GEoF0oLnWhWNnYgtcc4N0FxlcgT7yz3TgNIKkscx9jtV1ZKpWW+Ub1tc1eOv5ucdgpx+FJy9pgbLE7xDyXb/f+hLHVGeitHOi6A7ybo3sF8sS7w7cgdk0nJaOn3hLj3uyD0Zp5pazFIUXUpuTTU18d1EPkDoX8SkmWTnVIozEdbTcZjoqxhNHf1JrSS/AcvHjZ/SMHhL/7i5z+POsTUh/8BvNfYMTA8n+yU/MlTZxSJDRStqvEuLQKWwDctMTQogUDyQRoTQG5Kc6oQRE1yV1jCA7ri7jdZyK0sYTRjCR0Hnnd+y7nHxNgTULqw+8wj0mQKxpYvhjm9uSUxg+TTy7s2GtLUGcywhXSKZN275GsqlclX90J6bRI1aouxmgL7Q0Nen5ziM80SqMIo8cSOo+8XplT/5DHNWsSUr/6lLN/QQ3rDyzLruEW5enpf7KqZoShEduuSFOV7DLX7Ye+GmXb6/hnNNqKsVXuMDFpb9Y9eH3C6NGEzuOuI3gpMH/I6e+zDiH1fXi15t3vA1czsLws0TGEtmPEJdiiFPwlwKbgLHAFk4P6ZyPdymYYHGE0dutsChQBl2JcBFlrEkY/N5bQeXQ18gjunuMfMfsBlxJSx3niO485fwO4fGD5T/+3fPQqkneWVdwnw/3bMPkW9Wbqg+iC765Zk+xcT98ibKZc2EdgHcLoF8cSOo/Oc8fS+OyEULF4g4sJqXVcmfMfsc7A8v1/yfGXmL9I6Fn5pRwZhsPv0TxFNlAfZCvG+Oohi82UC5f/2IsJo0cTOm9YrDoKhFPEUr/LBYTUNht9zelHXDqwfPCIw4owp3mOcIQcLttWXFe3VZ/j5H3cIc0G6oPbCR+6Y2xF2EC5cGUm6wKC5tGEzhsWqw5hNidUiKX5gFWE1GXh4/Qplw4sVzOmx9QxU78g3EF6wnZlEN4FzJ1QPSLEZz1KfXC7vd8ssGdIbNUYpVx4UapyFUHzJoTOo1McSkeNn1M5MDQfs4qQuhhX5vQZFw8suwWTcyYTgioISk2YdmkhehG4PkE7w51inyAGGaU+uCXADabGzJR1fn3lwkty0asIo8cROm9Vy1g0yDxxtPvHDAmpu+PKnM8Ix1wwsGw91YJqhteaWgjYBmmQiebmSpwKKzE19hx7jkzSWOm66oPbzZ8Yj6kxVSpYjVAuvLzYMCRo3oTQecOOjjgi3NQ4l9K5/hOGhNTdcWVOTrlgYNkEXINbpCkBRyqhp+LdRB3g0OU6rMfW2HPCFFMV9nSp+uB2woepdbLBuJQyaw/ZFysXrlXwHxI0b0LovEkiOpXGA1Ijagf+KUNC6rKNa9bQnLFqYNkEnMc1uJrg2u64ELPBHpkgWbmwKpJoDhMwNbbGzAp7Yg31wS2T5rGtzit59PrKhesWG550CZpHEzpv2NGRaxlNjbMqpmEIzygJqQfjypycs2pg2cS2RY9r8HUqkqdEgKTWtWTKoRvOBPDYBltja2SO0RGjy9UHtxwRjA11ujbKF+ti5cIR9eCnxUg6owidtyoU5tK4NLji5Q3HCtiyF2IqLGYsHViOXTXOYxucDqG0HyttqYAKqYo3KTY1ekyDXRAm2AWh9JmsVh/ccg9WJ2E8YjG201sPq5ULxxX8n3XLXuMInbft2mk80rRGjCGctJ8/GFdmEQ9Ug4FlE1ll1Y7jtiraqm5Fe04VV8lvSVBL8hiPrfFVd8+7QH3Qbu2ipTVi8cvSGivc9cj8yvH11YMHdNSERtuOslM97feYFOPKzGcsI4zW0YGAbTAOaxCnxdfiYUmVWslxiIblCeAYr9VYR1gM7GmoPrilunSxxeT3DN/2eBQ9H11+nk1adn6VK71+5+Jfct4/el10/7KBZfNryUunWSCPxPECk1rdOv1WVSrQmpC+Tl46YD3ikQYcpunSQgzVB2VHFhxHVGKDgMEY5GLlQnP7FMDzw7IacAWnO6sBr12u+XanW2AO0wQ8pknnFhsL7KYIqhkEPmEXFkwaN5KQphbkUmG72wgw7WSm9RiL9QT925hkjiVIIhphFS9HKI6/8QAjlpXqg9W2C0apyaVDwKQwrwLY3j6ADR13ZyUNByQXHQu6RY09Hu6zMqXRaNZGS/KEJs0cJEe9VH1QdvBSJv9h09eiRmy0V2uJcqHcShcdvbSNg5fxkenkVprXM9rDVnX24/y9MVtncvbKY706anNl3ASll9a43UiacVquXGhvq4s2FP62NGKfQLIQYu9q1WmdMfmUrDGt8eDS0cXozH/fjmUH6Jruvm50hBDSaEU/2Ru2LEN/dl006TSc/g7tfJERxGMsgDUEr104pfWH9lQaN+M4KWQjwZbVc2rZVNHsyHal23wZtIs2JJqtIc/WLXXRFCpJkfE9jvWlfFbsNQ9pP5ZBS0zKh4R0aMFj1IjTcTnvi0Zz2rt7NdvQb2mgbju1plsH8MmbnEk7KbK0b+wC2iy3aX3szW8xeZvDwET6hWZYwqTXSSG+wMETKum0Dq/q+x62gt2ua2ppAo309TRk9TPazfV3qL9H8z7uhGqGqxNVg/FKx0HBl9OVUORn8Q8Jx9gFttGQUDr3tzcXX9xGgN0EpzN9mdZ3GATtPhL+CjxFDmkeEU6x56kqZRusLzALXVqkCN7zMEcqwjmywDQ6OhyUe0Xao1Qpyncrg6wKp9XfWDsaZplElvQ/b3sdweeghorwBDlHzgk1JmMc/wiERICVy2VJFdMjFuLQSp3S0W3+sngt2njwNgLssFGVQdJ0tu0KH4ky1LW4yrbkuaA6Iy9oz/qEMMXMMDWyIHhsAyFZc2peV9hc7kiKvfULxCl9iddfRK1f8kk9qvbdOoBtOg7ZkOZ5MsGrSHsokgLXUp9y88smniwWyuFSIRVmjplga3yD8Uij5QS1ZiM4U3Qw5QlSm2bXjFe6jzzBFtpg+/YBbLAWG7OPynNjlCw65fukGNdkJRf7yM1fOxVzbxOJVocFoYIaGwH22mIQkrvu1E2nGuebxIgW9U9TSiukPGU+Lt++c3DJPKhyhEEbXCQLUpae2exiKy6tMPe9mDRBFCEMTWrtwxN8qvuGnt6MoihKWS5NSyBhbH8StXoAz8PLOrRgLtOT/+4vcu+7vDLnqNvztOq7fmd8sMmY9Xzn1zj8Dq8+XVdu2Nv0IIySgEdQo3xVHps3Q5i3fLFsV4aiqzAiBhbgMDEd1uh8qZZ+lwhjkgokkOIv4xNJmyncdfUUzgB4oFMBtiu71Xumpz/P+cfUP+SlwFExwWW62r7b+LSPxqxn/gvMZ5z9C16t15UbNlq+jbGJtco7p8wbYlL4alSyfWdeuu0j7JA3JFNuVAwtst7F7FhWBbPFNKIUORndWtLraFLmMu7KFVDDOzqkeaiN33YAW/r76wR4XDN/yN1z7hejPau06EddkS/6XThfcz1fI/4K736fO48vlxt2PXJYFaeUkFS8U15XE3428xdtn2kc8GQlf1vkIaNRRnOMvLTWrZbElEHeLWi1o0dlKPAh1MVgbbVquPJ5+Cr8LU5/H/+I2QlHIU2ClXM9G8v7Rr7oc/hozfUUgsPnb3D+I+7WF8kNO92GY0SNvuxiE+2Bt8prVJTkzE64sfOstxuwfxUUoyk8VjcTlsqe2qITSFoSj6Epd4KsT6BZOWmtgE3hBfir8IzZDwgV4ZTZvD8VvPHERo8v+vL1DASHTz/i9OlKueHDjK5Rnx/JB1Vb1ioXdBra16dmt7dgik10yA/FwJSVY6XjA3oy4SqM2frqDPPSRMex9qs3XQtoWxMj7/Er8GWYsXgjaVz4OYumP2+9kbxvny/6kvWsEBw+fcb5bInc8APdhpOSs01tEqIkoiZjbAqKMruLbJYddHuHFRIyJcbdEdbl2sVLaySygunutBg96Y2/JjKRCdyHV+AEFtTvIpbKIXOamknYSiB6KV/0JetZITgcjjk5ZdaskBtWO86UF0ap6ozGXJk2WNiRUlCPFir66lzdm/SLSuK7EUdPz8f1z29Skq6F1fXg8+5UVR6bszncP4Tn4KUkkdJ8UFCY1zR1i8RmL/qQL3rlei4THG7OODlnKko4oI01kd3CaM08Ia18kC3GNoVaO9iDh+hWxSyTXFABXoau7Q6q9OxYg/OVEMw6jdbtSrJ9cBcewGmaZmg+bvkUnUUaGr+ZfnMH45Ivevl61hMcXsxYLFTu1hTm2zViCp7u0o5l+2PSUh9bDj6FgYypufBDhqK2+oXkiuHFHR3zfj+9PtA8oR0xnqX8qn+sx3bFODSbbF0X8EUvWQ8jBIcjo5bRmLOljDNtcqNtOe756h3l0VhKa9hDd2l1eqmsnh0MNMT/Cqnx6BInumhLT8luljzQ53RiJeA/0dxe5NK0o2fA1+GLXr6eNQWHNUOJssQaTRlGpLHKL9fD+IrQzTOMZS9fNQD4AnRNVxvTdjC+fJdcDDWQcyB00B0t9BDwTxXgaAfzDZ/DBXzRnfWMFRwuNqocOmX6OKNkY63h5n/fFcB28McVHqnXZVI27K0i4rDLNE9lDKV/rT+udVbD8dFFu2GGZ8mOt0kAXcoX3ZkIWVtw+MNf5NjR2FbivROHmhV1/pj2egv/fMGIOWTIWrV3Av8N9imV9IWml36H6cUjqEWNv9aNc+veb2sH46PRaHSuMBxvtW+twxctq0z+QsHhux8Q7rCY4Ct8lqsx7c6Sy0dl5T89rIeEuZKoVctIk1hNpfavER6yyH1Vvm3MbsUHy4ab4hWr/OZPcsRBphnaV65/ZcdYPNNwsjN/djlf9NqCw9U5ExCPcdhKxUgLSmfROpLp4WSUr8ojdwbncbvCf+a/YzRaEc6QOvXcGO256TXc5Lab9POvB+AWY7PigWYjzhifbovuunzRawsO24ZqQQAqguBtmpmPB7ysXJfyDDaV/aPGillgz1MdQg4u5MYaEtBNNHFjkRlSpd65lp4hd2AVPTfbV7FGpyIOfmNc/XVsPfg7vzaS/3nkvLL593ANLvMuRMGpQIhiF7kUEW9QDpAUbTWYBcbp4WpacHHY1aacqQyjGZS9HI3yCBT9kUZJhVOD+zUDvEH9ddR11fzPcTDQ5TlgB0KwqdXSavk9BC0pKp0WmcuowSw07VXmXC5guzSa4p0UvRw2lbDiYUx0ExJJRzWzi6Gm8cnEkfXXsdcG/M/jAJa0+bmCgdmQ9CYlNlSYZOKixmRsgiFxkrmW4l3KdFKv1DM8tk6WxPYJZhUUzcd8Kdtgrw/gkfXXDT7+avmfVak32qhtkg6NVdUS5wgkru1YzIkSduTW1FDwVWV3JQVJVuieTc0y4iDpFwc7/BvSalvKdQM8sv662cevz/+8sQVnjVAT0W2wLllw1JiMhJRxgDjCjLQsOzSFSgZqx7lAW1JW0e03yAD3asC+GD3NbQhbe+mN5GXH1F83KDOM4n/e5JIuH4NpdQARrFPBVptUNcjj4cVMcFSRTE2NpR1LEYbYMmfWpXgP9KejaPsLUhuvLCsVXznAG9dfx9SR1ud/3hZdCLHb1GMdPqRJgqDmm76mHbvOXDtiO2QPUcKo/TWkQ0i2JFXpBoo7vij1i1Lp3ADAo+qvG3V0rM//vFnnTE4hxd5Ka/Cor5YEdsLVJyKtDgVoHgtW11pWSjolPNMnrlrVj9Fv2Qn60twMwKPqr+N/wvr8z5tZcDsDrv06tkqyzESM85Ycv6XBWA2birlNCXrI6VbD2lx2L0vQO0QVTVVLH4SE67fgsfVXv8n7sz7/85Z7cMtbE6f088wSaR4kCkCm10s6pKbJhfqiUNGLq+0gLWC6eUAZFPnLjwqtKd8EwGvWX59t7iPW4X/eAN1svgRVSY990YZg06BD1ohLMtyFTI4pKTJsS9xREq9EOaPWiO2gpms7397x6nQJkbh+Fz2q/rqRROX6/M8bJrqlVW4l6JEptKeUFuMYUbtCQ7CIttpGc6MY93x1r1vgAnRXvY5cvwWPqb9uWQm+lP95QxdNMeWhOq1x0Db55C7GcUv2ZUuN6n8iKzsvOxibC//Yfs9Na8r2Rlz02vXXDT57FP/zJi66/EJSmsJKa8QxnoqW3VLQ+jZVUtJwJ8PNX1NQCwfNgdhhHD9on7PdRdrdGPF28rJr1F+3LBdeyv+8yYfLoMYet1vX4upNAjVvwOUWnlNXJXlkzk5Il6kqeoiL0C07qno+/CYBXq/+utlnsz7/Mzvy0tmI4zm4ag23PRN3t/CWryoUVJGm+5+K8RJ0V8Hc88/XHUX/HfiAq7t+BH+x6v8t438enWmdJwFA6ZINriLGKv/95f8lT9/FnyA1NMVEvQyaXuu+gz36f/DD73E4pwqpLcvm/o0Vle78n//+L/NPvoefp1pTJye6e4A/D082FERa5/opeH9zpvh13cNm19/4v/LDe5xMWTi8I0Ta0qKlK27AS/v3/r+/x/2GO9K2c7kVMonDpq7//jc5PKCxeNPpFVzaRr01wF8C4Pu76hXuX18H4LduTr79guuFD3n5BHfI+ZRFhY8w29TYhbbLi/bvBdqKE4fUgg1pBKnV3FEaCWOWyA+m3WpORZr/j+9TKJtW8yBTF2/ZEODI9/QavHkVdGFp/Pjn4Q+u5hXapsP5sOH+OXXA1LiKuqJxiMNbhTkbdJTCy4llEt6NnqRT4dhg1V3nbdrm6dYMecA1yTOL4PWTE9L5VzPFlLBCvlG58AhehnN4uHsAYinyJ+AZ/NkVvELbfOBUuOO5syBIEtiqHU1k9XeISX5bsimrkUUhnGDxourN8SgUsCZVtKyGbyGzHXdjOhsAvOAswSRyIBddRdEZWP6GZhNK/yjwew9ehBo+3jEADu7Ay2n8mDc+TS7awUHg0OMzR0LABhqLD4hJEh/BEGyBdGlSJoXYXtr+3HS4ijzVpgi0paWXtdruGTknXBz+11qT1Q2inxaTzQCO46P3lfLpyS4fou2PH/PupwZgCxNhGlj4IvUuWEsTkqMWm6i4xCSMc9N1RDQoCVcuGItJ/MRWefais+3synowi/dESgJjkilnWnBTGvRWmaw8oR15257t7CHmCf8HOn7cwI8+NQBXMBEmAa8PMRemrNCEhLGEhDQKcGZWS319BX9PFBEwGTbRBhLbDcaV3drFcDqk5kCTd2JF1Wp0HraqBx8U0wwBTnbpCadwBA/gTH/CDrcCs93LV8E0YlmmcyQRQnjBa8JESmGUfIjK/7fkaDJpmD2QptFNVJU1bbtIAjjWQizepOKptRjbzR9Kag6xZmMLLjHOtcLT3Tx9o/0EcTT1XN3E45u24AiwEypDJXihKjQxjLprEwcmRKclaDNZCVqr/V8mYWyFADbusiY5hvgFoU2vio49RgJLn5OsReRFN6tabeetiiy0V7KFHT3HyZLx491u95sn4K1QQSPKM9hNT0wMVvAWbzDSVdrKw4zRjZMyJIHkfq1VAVCDl/bUhNKlGq0zGr05+YAceXVPCttVk0oqjVwMPt+BBefx4yPtGVkUsqY3CHDPiCM5ngupUwCdbkpd8kbPrCWHhkmtIKLEetF2499eS1jZlIPGYnlcPXeM2KD9vLS0bW3ktYNqUllpKLn5ZrsxlIzxvDu5eHxzGLctkZLEY4PgSOg2IUVVcUONzUDBEpRaMoXNmUc0tFZrTZquiLyKxrSm3DvIW9Fil+AkhXu5PhEPx9mUNwqypDvZWdKlhIJQY7vn2OsnmBeOWnYZ0m1iwbbw1U60by5om47iHRV6fOgzjMf/DAZrlP40Z7syxpLK0lJ0gqaAK1c2KQKu7tabTXkLFz0sCftuwX++MyNeNn68k5Buq23YQhUh0SNTJa1ioQ0p4nUG2y0XilF1JqODqdImloPS4Bp111DEWT0jJjVv95uX9BBV7eB3bUWcu0acSVM23YZdd8R8UbQUxJ9wdu3oMuhdt929ME+mh6JXJ8di2RxbTi6TbrDquqV4aUKR2iwT6aZbyOwEXN3DUsWr8Hn4EhwNyHuXHh7/pdaUjtR7vnDh/d8c9xD/s5f501eQ1+CuDiCvGhk1AN/4Tf74RfxPwD3toLarR0zNtsnPzmS64KIRk861dMWCU8ArasG9T9H0ZBpsDGnjtAOM2+/LuIb2iIUGXNgl5ZmKD/Tw8TlaAuihaFP5yrw18v4x1898zIdP+DDAX1bM3GAMvPgRP/cJn3zCW013nrhHkrITyvYuwOUkcHuKlRSW5C6rzIdY4ppnF7J8aAJbQepgbJYBjCY9usGXDKQxq7RZfh9eg5d1UHMVATRaD/4BHK93/1iAgYZ/+jqPn8Dn4UExmWrpa3+ZOK6MvM3bjwfzxNWA2dhs8+51XHSPJiaAhGSpWevEs5xHLXcEGFXYiCONySH3fPWq93JIsBiSWvWyc3CAN+EcXoT7rCSANloPPoa31rt/5PUA/gp8Q/jDD3hyrjzlR8VkanfOvB1XPubt17vzxAfdSVbD1pzAnfgyF3ycadOTOTXhpEUoLC1HZyNGW3dtmjeXgr2r56JNmRwdNNWaQVBddd6rh4MhviEB9EFRD/7RGvePvCbwAL4Mx/D6M541hHO4D3e7g6PafdcZVw689z7NGTwo5om7A8sPhccT6qKcl9NJl9aM/9kX+e59Hh1yPqGuCCZxuITcsmNaJ5F7d0q6J3H48TO1/+M57085q2icdu2U+W36Ldllz9Agiv4YGljoEN908EzvDOrBF98/vtJwCC/BF2AG75xxEmjmMIcjxbjoaxqOK3/4hPOZzhMPBpYPG44CM0dTVm1LjLtUWWVz1Bcf8tEx0zs8O2A2YVHRxKYOiy/aOVoAaMu0i7ubu43njjmd4ibMHU1sIDHaQNKrZND/FZYdk54oCXetjq7E7IVl9eAL7t+oHnwXXtLx44czzoRFHBztYVwtH1d+NOMkupZ5MTM+gUmq90X+Bh9zjRlmaQ+m7YMqUL/veemcecAtOJ0yq1JnVlN27di2E0+Klp1tAJ4KRw1eMI7aJjsO3R8kPSI3fUFXnIOfdQe86sIIVtWDL7h//Ok6vj8vwDk08NEcI8zz7OhBy+WwalzZeZ4+0XniRfst9pAJqQHDGLzVQ2pheZnnv1OWhwO43/AgcvAEXEVVpa4db9sGvNK8wjaENHkfFQ4Ci5i7dqnQlPoLQrHXZDvO3BIXZbJOBrOaEbML6sFL798I4FhKihjHMsPjBUZYCMFr6nvaArxqXPn4lCa+cHfSa2cP27g3Z3ziYTRrcbQNGLQmGF3F3cBdzzzX7AILx0IB9rbwn9kx2G1FW3Inic+ZLIsVvKR8Zwfj0l1fkqo8LWY1M3IX14OX3r9RKTIO+d9XzAI8qRPGPn/4NC2n6o4rN8XJ82TOIvuVA8zLKUHRFgBCetlDZlqR1gLKjS39xoE7Bt8UvA6BxuEDjU3tFsEijgA+615tmZkXKqiEENrh41iLDDZNq4pKTWR3LZfnos81LOuNa15cD956vLMsJd1rqYp51gDUQqMYm2XsxnUhD2jg1DM7SeuJxxgrmpfISSXVIJIS5qJJSvJPEQ49DQTVIbYWJ9QWa/E2+c/oPK1drmC7WSfJRNKBO5Yjvcp7Gc3dmmI/Xh1kDTEuiSnWqQf37h+fTMhGnDf6dsS8SQfQWlqqwXXGlc/PEZ/SC5mtzIV0nAshlQdM/LvUtYutrEZ/Y+EAFtq1k28zQhOwLr1AIeANzhF8t9qzTdZf2qRKO6MWE9ohBYwibbOmrFtNmg3mcS+tB28xv2uKd/agYCvOP+GkSc+0lr7RXzyufL7QbkUpjLjEWFLqOIkAGu2B0tNlO9Eau2W1qcOUvVRgKzypKIQZ5KI3q0MLzqTNRYqiZOqmtqloIRlmkBHVpHmRYV6/HixbO6UC47KOFJnoMrVyr7wYz+SlW6GUaghYbY1I6kkxA2W1fSJokUdSh2LQ1GAimRGm0MT+uu57H5l7QgOWxERpO9moLRPgTtquWCfFlGlIjQaRly9odmzMOWY+IBO5tB4sW/0+VWGUh32qYk79EidWKrjWuiLpiVNGFWFRJVktyeXWmbgBBzVl8anPuXyNJlBJOlKLTgAbi/EYHVHxWiDaVR06GnHQNpJcWcK2jJtiCfG2sEHLzuI66sGrMK47nPIInPnu799935aOK2cvmvubrE38ZzZjrELCmXM2hM7UcpXD2oC3+ECVp7xtIuxptJ0jUr3sBmBS47TVxlvJ1Sqb/E0uLdvLj0lLr29ypdd/eMX3f6lrxGlKwKQxEGvw0qHbkbwrF3uHKwVENbIV2wZ13kNEF6zD+x24aLNMfDTCbDPnEikZFyTNttxWBXDaBuM8KtI2rmaMdUY7cXcUPstqTGvBGSrFWIpNMfbdea990bvAOC1YX0qbc6smDS1mPxSJoW4fwEXvjMmhlijDRq6qale6aJEuFGoppYDoBELQzLBuh/mZNx7jkinv0EtnUp50lO9hbNK57lZaMAWuWR5Yo9/kYwcYI0t4gWM47Umnl3YmpeBPqSyNp3K7s2DSAS/39KRuEN2bS4xvowV3dFRMx/VFcp2Yp8w2nTO9hCXtHG1kF1L4KlrJr2wKfyq77R7MKpFKzWlY9UkhYxyHWW6nBWPaudvEAl3CGcNpSXPZ6R9BbBtIl6cHL3gIBi+42CYXqCx1gfGWe7Ap0h3luyXdt1MKy4YUT9xSF01G16YEdWsouW9mgDHd3veyA97H+Ya47ZmEbqMY72oPztCGvK0onL44AvgC49saZKkWRz4veWljE1FHjbRJaWv6ZKKtl875h4CziFCZhG5rx7tefsl0aRT1bMHZjm8dwL/6u7wCRysaQblQoG5yAQN5zpatMNY/+yf8z+GLcH/Qn0iX2W2oEfXP4GvwQHuIL9AYGnaO3zqAX6946nkgqZNnUhx43DIdQtMFeOPrgy/y3Yd85HlJWwjLFkU3kFwq28xPnuPhMWeS+tDLV9Otllq7pQCf3uXJDN9wFDiUTgefHaiYbdfi3b3u8+iY6TnzhgehI1LTe8lcd7s1wJSzKbahCRxKKztTLXstGAiu3a6rPuQs5pk9TWAan5f0BZmGf7Ylxzzk/A7PAs4QPPPAHeFQ2hbFHszlgZuKZsJcUmbDC40sEU403cEjczstOEypa+YxevL4QBC8oRYqWdK6b7sK25tfE+oDZgtOQ2Jg8T41HGcBE6fTWHn4JtHcu9S7uYgU5KSCkl/mcnq+5/YBXOEr6lCUCwOTOM1taOI8mSxx1NsCXBEmLKbMAg5MkwbLmpBaFOPrNSlO2HnLiEqW3tHEwd8AeiQLmn+2gxjC3k6AxREqvKcJbTEzlpLiw4rNZK6oJdidbMMGX9FULKr0AkW+2qDEPBNNm5QAt2Ik2nftNWHetubosHLo2nG4vQA7GkcVCgVCgaDixHqo9UUn1A6OshapaNR/LPRYFV8siT1cCtJE0k/3WtaNSuUZYKPnsVIW0xXWnMUxq5+En4Kvw/MqQmVXnAXj9Z+9zM98zM/Agy7F/qqj2Nh67b8HjFnPP3iBn/tkpdzwEJX/whIcQUXOaikeliCRGUk7tiwF0rItwMEhjkZ309hikFoRAmLTpEXWuHS6y+am/KB/fM50aLEhGnSMwkpxzOov4H0AvgovwJ1iGzDLtJn/9BU+fAINfwUe6FHSLhu83viV/+/HrOePX+STT2B9uWGbrMHHLldRBlhS/CJQmcRxJFqZica01XixAZsYiH1uolZxLrR/SgxVIJjkpQP4PE9sE59LKLr7kltSBogS5tyszzH8Fvw8/AS8rNOg0xUS9fIaHwb+6et8Q/gyvKRjf5OusOzGx8evA/BP4IP11uN/grca5O0lcsPLJ5YjwI4QkJBOHa0WdMZYGxPbh2W2nR9v3WxEWqgp/G3+6VZbRLSAAZ3BhdhAaUL33VUSw9yjEsvbaQ9u4A/gGXwZXoEHOuU1GSj2chf+Mo+f8IcfcAxfIKVmyunRbYQVnoevwgfw3TXXcw++xNuP4fhyueEUNttEduRVaDttddoP0eSxLe2LENk6itYxlrxBNBYrNNKSQmeaLcm9c8UsaB5WyO6675yyQIAWSDpBVoA/gxmcwEvwoDv0m58UE7gHn+fJOa8/Ywan8EKRfjsopF83eCglX/Sfr7OeaRoQfvt1CGvIDccH5BCvw1sWIzRGC/66t0VTcLZQZtm6PlAasbOJ9iwWtUo7biktTSIPxnR24jxP1ZKaqq+2RcXM9OrBAm/AAs7hDJ5bNmGb+KIfwCs8a3jnjBrOFeMjHSCdbKr+2uOLfnOd9eiA8Hvvwwq54VbP2OqwkB48Ytc4YEOiH2vTXqodabfWEOzso4qxdbqD5L6tbtNPECqbhnA708DZH4QOJUXqScmUlks7Ot6FBuZw3n2mEbaUX7kDzxHOOQk8nKWMzAzu6ZZ8sOFw4RK+6PcuXo9tB4SbMz58ApfKDXf3szjNIIbGpD5TKTRxGkEMLjLl+K3wlWXBsCUxIDU+jbOiysESqAy1MGUJpXgwbTWzNOVEziIXZrJ+VIztl1PUBxTSo0dwn2bOmfDRPD3TRTGlfbCJvO9KvuhL1hMHhB9wPuPRLGHcdOWG2xc0U+5bQtAJT0nRTewXL1pgk2+rZAdeWmz3jxAqfNQQdzTlbF8uJ5ecEIWvTkevAHpwz7w78QujlD/Lr491bD8/1vhM2yrUQRrWXNQY4fGilfctMWYjL72UL/qS9eiA8EmN88nbNdour+PBbbAjOjIa4iBhfFg6rxeKdEGcL6p3EWR1Qq2Qkhs2DrnkRnmN9tG2EAqmgPw6hoL7Oza7B+3SCrR9tRftko+Lsf2F/mkTndN2LmzuMcKTuj/mX2+4Va3ki16+nnJY+S7MefpkidxwnV+4wkXH8TKnX0tsYzYp29DOOoSW1nf7nTh2akYiWmcJOuTidSaqESrTYpwjJJNVGQr+rLI7WsqerHW6Kp/oM2pKuV7T1QY9gjqlZp41/WfKpl56FV/0kvXQFRyeQ83xaTu5E8p5dNP3dUF34ihyI3GSpeCsywSh22ZJdWto9winhqifb7VRvgktxp13vyjrS0EjvrRfZ62uyqddSWaWYlwTPAtJZ2oZ3j/Sgi/mi+6vpzesfAcWNA0n8xVyw90GVFGuZjTXEQy+6GfLGLMLL523f5E0OmxVjDoOuRiH91RKU+vtoCtH7TgmvBLvtFXWLW15H9GTdVw8ow4IlRLeHECN9ym1e9K0I+Cbnhgv4Yu+aD2HaQJ80XDqOzSGAV4+4yCqBxrsJAX6ZTIoX36QnvzhhzzMfFW2dZVLOJfo0zbce5OvwXMFaZ81mOnlTVXpDZsQNuoYWveketKb5+6JOOsgX+NTm7H49fUTlx+WLuWL7qxnOFh4BxpmJx0p2gDzA/BUARuS6phR+pUsY7MMboAHx5xNsSVfVZcYSwqCKrqon7zM+8ecCkeS4nm3rINuaWvVNnMRI1IRpxTqx8PZUZ0Br/UEduo3B3hNvmgZfs9gQPj8vIOxd2kndir3awvJ6BLvoUuOfFWNYB0LR1OQJoUySKb9IlOBx74q1+ADC2G6rOdmFdJcD8BkfualA+BdjOOzP9uUhGUEX/TwhZsUduwRr8wNuXKurCixLBgpQI0mDbJr9dIqUuV+92ngkJZ7xduCk2yZKbfWrH1VBiTg9VdzsgRjW3CVXCvAwDd+c1z9dWw9+B+8MJL/eY15ZQ/HqvTwVdsZn5WQsgRRnMaWaecu3jFvMBEmgg+FJFZsnSl0zjB9OqPYaBD7qmoVyImFvzi41usesV0julaAR9dfR15Xzv9sEruRDyk1nb+QaLU67T885GTls6YgcY+UiMa25M/pwGrbCfzkvR3e0jjtuaFtnwuagHTSb5y7boBH119HXhvwP487jJLsLJ4XnUkHX5sLbS61dpiAXRoZSCrFJ+EjpeU3puVfitngYNo6PJrAigKktmwjyQdZpfq30mmtulaAx9Zfx15Xzv+cyeuiBFUs9zq8Kq+XB9a4PVvph3GV4E3y8HENJrN55H1X2p8VyqSKwVusJDKzXOZzplWdzBUFK9e+B4+uv468xvI/b5xtSAkBHQaPvtqWzllVvEOxPbuiE6+j2pvjcKsbvI7txnRErgfH7LdXqjq0IokKzga14GzQ23SSbCQvO6r+Or7SMIr/efOkkqSdMnj9mBx2DRsiY29Uj6+qK9ZrssCKaptR6HKURdwUYeUWA2kPzVKQO8ku2nU3Anhs/XWkBx3F/7wJtCTTTIKftthue1ty9xvNYLY/zo5KSbIuKbXpbEdSyeRyYdAIwKY2neyoc3+k1XUaufYga3T9daMUx/r8z1s10ITknIO0kuoMt+TB8jK0lpayqqjsJ2qtXAYwBU932zinimgmd6mTRDnQfr88q36NAI+tv24E8Pr8zxtasBqx0+xHH9HhlrwsxxNUfKOHQaZBITNf0uccj8GXiVmXAuPEAKSdN/4GLHhs/XWj92dN/uetNuBMnVR+XWDc25JLjo5Mg5IZIq226tmCsip2zZliL213YrTlL2hcFjpCduyim3M7/eB16q/blQsv5X/esDRbtJeabLIosWy3ycavwLhtxdWzbMmHiBTiVjJo6lCLjXZsi7p9PEPnsq6X6wd4bP11i0rD5fzPm/0A6brrIsllenZs0lCJlU4abakR59enZKrKe3BZihbTxlyZ2zl1+g0wvgmA166/bhwDrcn/7Ddz0eWZuJvfSESug6NzZsox3Z04FIxz0mUjMwVOOVTq1CQ0AhdbBGVdjG/CgsfUX7esJl3K/7ytWHRv683praW/8iDOCqWLLhpljDY1ZpzK75QiaZoOTpLKl60auHS/97oBXrv+umU9+FL+5+NtLFgjqVLCdbmj7pY5zPCPLOHNCwXGOcLquOhi8CmCWvbcuO73XmMUPab+ug3A6/A/78Bwe0bcS2+tgHn4J5pyS2WbOck0F51Vq3LcjhLvZ67p1ABbaL2H67bg78BfjKi/jr3+T/ABV3ilLmNXTI2SpvxWBtt6/Z//D0z/FXaGbSBgylzlsEGp+5//xrd4/ae4d8DUUjlslfIYS3t06HZpvfQtvv0N7AHWqtjP2pW08QD/FLy//da38vo8PNlKHf5y37Dxdfe/oj4kVIgFq3koLReSR76W/bx//n9k8jonZxzWTANVwEniDsg87sOSd/z7//PvMp3jQiptGVWFX2caezzAXwfgtzYUvbr0iozs32c3Uge7varH+CNE6cvEYmzbPZ9hMaYDdjK4V2iecf6EcEbdUDVUARda2KzO/JtCuDbNQB/iTeL0EG1JSO1jbXS+nLxtPMDPw1fh5+EPrgSEKE/8Gry5A73ui87AmxwdatyMEBCPNOCSKUeRZ2P6Myb5MRvgCHmA9ywsMifU+AYXcB6Xa5GibUC5TSyerxyh0j6QgLVpdyhfArRTTLqQjwe4HOD9s92D4Ap54odXAPBWLAwB02igG5Kkc+piN4lvODIFGAZgT+EO4Si1s7fjSR7vcQETUkRm9O+MXyo9OYhfe4xt9STQ2pcZRLayCV90b4D3jR0DYAfyxJ+eywg2IL7NTMXna7S/RpQ63JhWEM8U41ZyQGjwsVS0QBrEKLu8xwZsbi4wLcCT+OGidPIOCe1PiSc9Qt+go+vYqB7cG+B9d8cAD+WJPz0Am2gxXgU9IneOqDpAAXOsOltVuMzpdakJXrdPCzXiNVUpCeOos5cxnpQT39G+XVLhs1osQVvJKPZyNq8HDwd4d7pNDuWJPxVX7MSzqUDU6gfadKiNlUFTzLeFHHDlzO4kpa7aiKhBPGKwOqxsBAmYkOIpipyXcQSPlRTf+Tii0U3EJGaZsDER2qoB3h2hu0qe+NNwUooYU8y5mILbJe6OuX+2FTKy7bieTDAemaQyQ0CPthljSWO+xmFDIYiESjM5xKd6Ik5lvLq5GrQ3aCMLvmCA9wowLuWJb9xF59hVVP6O0CrBi3ZjZSNOvRy+I6klNVRJYRBaEzdN+imiUXQ8iVF8fsp+W4JXw7WISW7fDh7lptWkCwZ4d7QTXyBPfJMYK7SijjFppGnlIVJBJBYj7eUwtiP1IBXGI1XCsjNpbjENVpSAJ2hq2LTywEly3hUYazt31J8w2+aiLx3g3fohXixPfOMYm6zCGs9LVo9MoW3MCJE7R5u/WsOIjrqBoHUO0bJE9vxBpbhsd3+Nb4/vtPCZ4oZYCitNeYuC/8UDvDvy0qvkiW/cgqNqRyzqSZa/s0mqNGjtKOoTm14zZpUauiQgVfqtQiZjq7Q27JNaSK5ExRcrGCXO1FJYh6jR6CFqK7bZdQZ4t8g0rSlPfP1RdBtqaa9diqtzJkQ9duSryi2brQXbxDwbRUpFMBHjRj8+Nt7GDKgvph9okW7LX47gu0SpGnnFQ1S1lYldOsC7hYteR574ZuKs7Ei1lBsfdz7IZoxzzCVmmVqaSySzQbBVAWDek+N4jh9E/4VqZrJjPwiv9BC1XcvOWgO8275CVyBPvAtTVlDJfZkaZGU7NpqBogAj/xEHkeAuJihWYCxGN6e8+9JtSegFXF1TrhhLGP1fak3pebgPz192/8gB4d/6WT7+GdYnpH7hH/DJzzFiYPn/vjW0SgNpTNuPIZoAEZv8tlGw4+RLxy+ZjnKa5NdFoC7UaW0aduoYse6+bXg1DLg6UfRYwmhGEjqPvF75U558SANrElK/+MdpXvmqBpaXOa/MTZaa1DOcSiLaw9j0NNNst3c+63c7EKTpkvKHzu6bPbP0RkuHAVcbRY8ijP46MIbQeeT1mhA+5PV/inyDdQipf8LTvMXbwvoDy7IruDNVZKTfV4CTSRUYdybUCnGU7KUTDxLgCknqUm5aAW6/1p6eMsOYsphLzsHrE0Y/P5bQedx1F/4yPHnMB3/IOoTU9+BL8PhtjuFKBpZXnYNJxTuv+2XqolKR2UQgHhS5novuxVySJhBNRF3SoKK1XZbbXjVwWNyOjlqWJjrWJIy+P5bQedyldNScP+HZ61xKSK3jyrz+NiHG1hcOLL/+P+PDF2gOkekKGiNWKgJ+8Z/x8Iv4DdQHzcpZyF4v19I27w9/yPGDFQvmEpKtqv/TLiWMfn4sofMm9eAH8Ao0zzh7h4sJqYtxZd5/D7hkYPneDzl5idlzNHcIB0jVlQ+8ULzw/nc5/ojzl2juE0apD7LRnJxe04dMz2iOCFNtGFpTuXA5AhcTRo8mdN4kz30nVjEC4YTZQy4gpC7GlTlrePKhGsKKgeXpCYeO0MAd/GH7yKQUlXPLOasOH3FnSphjHuDvEu4gB8g66oNbtr6eMbFIA4fIBJkgayoXriw2XEDQPJrQeROAlY6aeYOcMf+IVYTU3XFlZufMHinGywaW3YLpObVBAsbjF4QJMsVUSayjk4voPsHJOQfPWDhCgDnmDl6XIRerD24HsGtw86RMHOLvVSHrKBdeVE26gKB5NKHzaIwLOmrqBWJYZDLhASG16c0Tn+CdRhWDgWXnqRZUTnPIHuMJTfLVpkoYy5CzylHVTGZMTwkGAo2HBlkQplrJX6U+uF1wZz2uwS1SQ12IqWaPuO4baZaEFBdukksJmkcTOm+YJSvoqPFzxFA/YUhIvWxcmSdPWTWwbAKVp6rxTtPFUZfKIwpzm4IoMfaYQLWgmlG5FME2gdBgm+J7J+rtS/XBbaVLsR7bpPQnpMFlo2doWaVceHk9+MkyguZNCJ1He+kuHTWyQAzNM5YSUg/GlTk9ZunAsg1qELVOhUSAK0LABIJHLKbqaEbHZLL1VA3VgqoiOKXYiS+HRyaEKgsfIqX64HYWbLRXy/qWoylIV9gudL1OWBNgBgTNmxA6b4txDT4gi3Ri7xFSLxtXpmmYnzAcWDZgY8d503LFogz5sbonDgkKcxGsWsE1OI+rcQtlgBBCSOKD1mtqYpIU8cTvBmAT0yZe+zUzeY92fYjTtGipXLhuR0ePoHk0ofNWBX+lo8Z7pAZDk8mEw5L7dVyZZoE/pTewbI6SNbiAL5xeygW4xPRuLCGbhcO4RIeTMFYHEJkYyEO9HmJfXMDEj/LaH781wHHZEtqSQ/69UnGpzH7LKIAZEDSPJnTesJTUa+rwTepI9dLJEawYV+ZkRn9g+QirD8vF8Mq0jFQ29js6kCS3E1+jZIhgPNanHdHFqFvPJLHqFwQqbIA4jhDxcNsOCCQLDomaL/dr5lyJaJU6FxPFjO3JOh3kVMcROo8u+C+jo05GjMF3P3/FuDLn5x2M04xXULPwaS6hBYki+MrMdZJSgPHlcB7nCR5bJ9Kr5ACUn9jk5kivdd8tk95SOGrtqu9lr2IhK65ZtEl7ZKrp7DrqwZfRUSN1el7+7NJxZbywOC8neNKTch5vsTEMNsoCCqHBCqIPRjIPkm0BjvFODGtto99rCl+d3wmHkW0FPdpZtC7MMcVtGFQjJLX5bdQ2+x9ypdc313uj8xlsrfuLgWXz1cRhZvJYX0iNVBRcVcmCXZs6aEf3RQF2WI/TcCbKmGU3IOoDJGDdDub0+hYckt6PlGu2BcxmhbTdj/klhccLGJMcqRjMJP1jW2ETqLSWJ/29MAoORluJ+6LPffBZbi5gqi5h6catQpmOT7/OFf5UorRpLzCqcMltBLhwd1are3kztrSzXO0LUbXRQcdLh/RdSZ+swRm819REDrtqzC4es6Gw4JCKlSnjYVpo0xeq33PrADbFLL3RuCmObVmPN+24kfa+AojDuM4umKe2QwCf6EN906HwjujaitDs5o0s1y+k3lgbT2W2i7FJdnwbLXhJUBq/9liTctSmFC/0OqUinb0QddTWamtjbHRFuWJJ6NpqZ8vO3fZJ37Db+2GkaPYLGHs7XTTdiFQJ68SkVJFVmY6McR5UycflNCsccHFaV9FNbR4NttLxw4pQ7wJd066Z0ohVbzihaxHVExd/ay04oxUKWt+AsdiQ9OUyZ2krzN19IZIwafSTFgIBnMV73ADj7V/K8u1MaY2sJp2HWm0f41tqwajEvdHWOJs510MaAqN4aoSiPCXtN2KSi46dUxHdaMquar82O1x5jqhDGvqmoE9LfxcY3zqA7/x3HA67r9ZG4O6Cuxu12/+TP+eLP+I+HErqDDCDVmBDO4larujNe7x8om2rMug0MX0rL1+IWwdwfR+p1TNTyNmVJ85ljWzbWuGv8/C7HD/izjkHNZNYlhZcUOKVzKFUxsxxN/kax+8zPWPSFKw80rJr9Tizyj3o1gEsdwgWGoxPezDdZ1TSENE1dLdNvuKL+I84nxKesZgxXVA1VA1OcL49dFlpFV5yJMhzyCmNQ+a4BqusPJ2bB+xo8V9u3x48VVIEPS/mc3DvAbXyoYr6VgDfh5do5hhHOCXMqBZUPhWYbWZECwVJljLgMUWOCB4MUuMaxGNUQDVI50TQ+S3kFgIcu2qKkNSHVoM0SHsgoZxP2d5HH8B9woOk4x5bPkKtAHucZsdykjxuIpbUrSILgrT8G7G5oCW+K0990o7E3T6AdW4TilH5kDjds+H64kS0mz24grtwlzDHBJqI8YJQExotPvoC4JBq0lEjjQkyBZ8oH2LnRsQ4Hu1QsgDTJbO8fQDnllitkxuVskoiKbRF9VwzMDvxHAdwB7mD9yCplhHFEyUWHx3WtwCbSMMTCUCcEmSGlg4gTXkHpZXWQ7kpznK3EmCHiXInqndkQjunG5kxTKEeGye7jWz9cyMR2mGiFQ15ENRBTbCp+Gh86vAyASdgmJq2MC6hoADQ3GosP0QHbnMHjyBQvQqfhy/BUbeHd5WY/G/9LK/8Ka8Jd7UFeNWEZvzPb458Dn8DGLOe3/wGL/4xP+HXlRt+M1PE2iLhR8t+lfgxsuh7AfO2AOf+owWhSZRYQbd622hbpKWKuU+XuvNzP0OseRDa+mObgDHJUSc/pKx31QdKffQ5OIJpt8GWjlgTwMc/w5MPCR/yl1XC2a2Yut54SvOtMev55Of45BOat9aWG27p2ZVORRvnEk1hqWMVUmqa7S2YtvlIpspuF1pt0syuZS2NV14mUidCSfzQzg+KqvIYCMljIx2YK2AO34fX4GWdu5xcIAb8MzTw+j/lyWM+Dw/gjs4GD6ehNgA48kX/AI7XXM/XAN4WHr+9ntywqoCakCqmKP0rmQrJJEErG2Upg1JObr01lKQy4jskWalKYfJ/EDLMpjNSHFEUAde2fltaDgmrNaWQ9+AAb8I5vKjz3L1n1LriB/BXkG/wwR9y/oRX4LlioHA4LzP2inzRx/DWmutRweFjeP3tNeSGlaE1Fde0OS11yOpmbIp2u/jF1n2RRZviJM0yBT3IZl2HWImKjQOxIyeU325b/qWyU9Moj1o07tS0G7qJDoGHg5m8yeCxMoEH8GU45tnrNM84D2l297DQ9t1YP7jki/7RmutRweEA77/HWXOh3HCxkRgldDQkAjNTMl2Iloc1qN5JfJeeTlyTRzxURTdn1Ixv2uKjs12AbdEWlBtmVdk2k7FFwj07PCZ9XAwW3dG+8xKzNFr4EnwBZpy9Qzhh3jDXebBpYcpuo4fQ44u+fD1dweEnHzI7v0xuuOALRUV8rXpFyfSTQYkhd7IHm07jpyhlkCmI0ALYqPTpUxXS+z4jgDj1Pflvmz5ecuItpIBxyTHpSTGWd9g1ApfD/bvwUhL4nT1EzqgX7cxfCcNmb3mPL/qi9SwTHJ49oj5ZLjccbTG3pRmlYi6JCG0mQrAt1+i2UXTZ2dv9IlQpN5naMYtviaXlTrFpoMsl3bOAFEa8sqPj2WCMrx3Yjx99qFwO59Aw/wgx+HlqNz8oZvA3exRDvuhL1jMQHPaOJ0+XyA3fp1OfM3qObEVdhxjvynxNMXQV4+GJyvOEFqeQBaIbbO7i63rpxCltdZShPFxkjM2FPVkn3TG+Rp9pO3l2RzFegGfxGDHIAh8SteR0C4HopXzRF61nheDw6TFN05Ebvq8M3VKKpGjjO6r7nhudTEGMtYM92HTDaR1FDMXJ1eThsbKfywyoWwrzRSXkc51flG3vIid62h29bIcFbTGhfV+faaB+ohj7dPN0C2e2lC96+XouFByen9AsunLDJZ9z7NExiUc0OuoYW6UZkIyx2YUR2z6/TiRjyKMx5GbbjLHvHuf7YmtKghf34LJfx63Yg8vrvN2zC7lY0x0tvKezo4HmGYDU+Gab6dFL+KI761lDcNifcjLrrr9LWZJctG1FfU1uwhoQE22ObjdfkSzY63CbU5hzs21WeTddH2BaL11Gi7lVdlxP1nkxqhnKhVY6knS3EPgVGg1JpN5cP/hivujOelhXcPj8HC/LyI6MkteVjlolBdMmF3a3DbsuAYhL44dxzthWSN065xxUd55Lmf0wRbOYOqH09/o9WbO2VtFdaMb4qBgtFJoT1SqoN8wPXMoXLb3p1PUEhxfnnLzGzBI0Ku7FxrKsNJj/8bn/H8fPIVOd3rfrklUB/DOeO+nkghgSPzrlPxluCMtOnDL4Yml6dK1r3vsgMxgtPOrMFUZbEUbTdIzii5beq72G4PD0DKnwjmBULUVFmy8t+k7fZ3pKc0Q4UC6jpVRqS9Umv8bxw35flZVOU1X7qkjnhZlsMbk24qQ6Hz7QcuL6sDC0iHHki96Uh2UdvmgZnjIvExy2TeJdMDZNSbdZyAHe/Yd1xsQhHiKzjh7GxQ4yqMPaywPkjMamvqrYpmO7Knad+ZQC5msCuAPWUoxrxVhrGv7a+KLXFhyONdTMrZ7ke23qiO40ZJUyzgYyX5XyL0mV7NiUzEs9mjtbMN0dERqwyAJpigad0B3/zRV7s4PIfXSu6YV/MK7+OrYe/JvfGMn/PHJe2fyUdtnFrKRNpXV0Y2559aWPt/G4BlvjTMtXlVIWCnNyA3YQBDmYIodFz41PvXPSa6rq9lWZawZ4dP115HXV/M/tnFkkrBOdzg6aP4pID+MZnTJ1SuuB6iZlyiox4HT2y3YBtkUKWooacBQUDTpjwaDt5poBHl1/HXltwP887lKKXxNUEyPqpGTyA699UqY/lt9yGdlUKra0fFWS+36iylVWrAyd7Uw0CZM0z7xKTOduznLIjG2Hx8cDPLb+OvK6Bv7n1DYci4CxUuRxrjBc0bb4vD3rN5Zz36ntLb83eVJIB8LiIzCmn6SMPjlX+yNlTjvIGjs+QzHPf60Aj62/jrzG8j9vYMFtm1VoRWCJdmw7z9N0t+c8cxZpPeK4aTRicS25QhrVtUp7U578chk4q04Wx4YoQSjFryUlpcQ1AbxZ/XVMknIU//OGl7Q6z9Zpxi0+3yFhSkjUDpnCIUhLWVX23KQ+L9vKvFKI0ZWFQgkDLvBoylrHNVmaw10zwCPrr5tlodfnf94EWnQ0lFRWy8pW9LbkLsyUVDc2NSTHGDtnD1uMtchjbCeb1mpxFP0YbcClhzdLu6lfO8Bj6q+bdT2sz/+8SZCV7VIxtt0DUn9L7r4cLYWDSXnseEpOGFuty0qbOVlS7NNzs5FOGJUqQpl2Q64/yBpZf90sxbE+//PGdZ02HSipCbmD6NItmQ4Lk5XUrGpDMkhbMm2ZVheNYV+VbUWTcv99+2NyX1VoafSuC+AN6q9bFIMv5X/eagNWXZxEa9JjlMwNWb00akGUkSoepp1/yRuuqHGbUn3UdBSTxBU6SEVklzWRUkPndVvw2PrrpjvxOvzPmwHc0hpmq82npi7GRro8dXp0KXnUQmhZbRL7NEVp1uuZmO45vuzKsHrktS3GLWXODVjw+vXXLYx4Hf7njRPd0i3aoAGX6W29GnaV5YdyDj9TFkakje7GHYzDoObfddHtOSpoi2SmzJHrB3hM/XUDDEbxP2/oosszcRlehWXUvzHv4TpBVktHqwenFo8uLVmy4DKLa5d3RtLrmrM3aMFr1183E4sewf+85VWeg1c5ag276NZrM9IJVNcmLEvDNaV62aq+14IAOGFsBt973Ra8Xv11YzXwNfmft7Jg2oS+XOyoC8/cwzi66Dhmgk38kUmP1CUiYWOX1bpD2zWXt2FCp7uq8703APAa9dfNdscR/M/bZLIyouVxqJfeWvG9Je+JVckHQ9+CI9NWxz+blX/KYYvO5n2tAP/vrlZ7+8/h9y+9qeB/Hnt967e5mevX10rALDWK//FaAT5MXdBXdP0C/BAes792c40H+AiAp1e1oH8HgH94g/Lttx1gp63op1eyoM/Bvw5/G/7xFbqJPcCXnmBiwDPb/YKO4FX4OjyCb289db2/Noqicw4i7N6TVtoz8tNwDH+8x/i6Ae7lmaQVENzJFb3Di/BFeAwz+Is9SjeQySpPqbLFlNmyz47z5a/AF+AYFvDmHqibSXTEzoT4Gc3OALaqAP4KPFUJ6n+1x+rGAM6Zd78bgJ0a8QN4GU614vxwD9e1Amy6CcskNrczLx1JIp6HE5UZD/DBHrFr2oNlgG4Odv226BodoryjGJ9q2T/AR3vQrsOCS0ctXZi3ruLlhpFDJYl4HmYtjQCP9rhdn4suySLKDt6wLcC52h8xPlcjju1fn+yhuw4LZsAGUuo2b4Fx2UwQu77uqRHXGtg92aN3tQCbFexc0uk93vhTXbct6y7MulLycoUljx8ngDMBg1tvJjAazpEmOtxlzclvj1vQf1Tx7QlPDpGpqgtdSKz/d9/hdy1vTfFHSmC9dGDZbLiezz7Ac801HirGZsWjydfZyPvHXL/Y8Mjzg8BxTZiuwKz4Eb8sBE9zznszmjvFwHKPIWUnwhqfVRcd4Ck0K6ate48m1oOfrX3/yOtvAsJ8zsPAM89sjnddmuLuDPjX9Bu/L7x7xpMzFk6nWtyQfPg278Gn4Aekz2ZgOmU9eJ37R14vwE/BL8G3aibCiWMWWDQ0ZtkPMnlcGeAu/Ag+8ZyecU5BPuy2ILD+sQqyZhAKmn7XZd+jIMTN9eBL7x95xVLSX4On8EcNlXDqmBlqS13jG4LpmGbkF/0CnOi3H8ETOIXzmnmtb0a16Tzxj1sUvQCBiXZGDtmB3KAefPH94xcUa/6vwRn80GOFyjEXFpba4A1e8KQfFF+259tx5XS4egYn8fQsLGrqGrHbztr+uByTahWuL1NUGbDpsnrwBfePPwHHIf9X4RnM4Z2ABWdxUBlqQ2PwhuDxoS0vvqB1JzS0P4h2nA/QgTrsJFn+Y3AOjs9JFC07CGWX1oNX3T/yHOzgDjwPn1PM3g9Jk9lZrMEpxnlPmBbjyo2+KFXRU52TJM/2ALcY57RUzjObbjqxVw++4P6RAOf58pcVsw9Daje3htriYrpDOonre3CudSe6bfkTEgHBHuDiyu5MCsc7BHhYDx7ePxLjqigXZsw+ijMHFhuwBmtoTPtOxOrTvYJDnC75dnUbhfwu/ZW9AgYd+peL68HD+0emKquiXHhWjJg/UrkJYzuiaL3E9aI/ytrCvAd4GcYZMCkSQxfUg3v3j8c4e90j5ZTPdvmJJGHnOCI2nHS8081X013pHuBlV1gB2MX1YNmWLHqqGN/TWmG0y6clJWthxNUl48q38Bi8vtMKyzzpFdSDhxZ5WBA5ZLt8Jv3895DduBlgbPYAj8C4B8hO68FDkoh5lydC4FiWvBOVqjYdqjiLv92t8yPDjrDaiHdUD15qkSURSGmXJwOMSxWAXYwr3zaAufJ66l+94vv3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/wHuD9tQd4f+0B3l97gPfXHuD9tQd4f+0B3l97gG8LwP8G/AL8O/A5OCq0Ys2KIdv/qOIXG/4mvFAMF16gZD+2Xvu/B8as5+8bfllWyg0zaNO5bfXj6vfhhwD86/Aq3NfRS9t9WPnhfnvCIw/CT8GLcFTMnpntdF/z9V+PWc/vWoIH+FL3Znv57PitcdGP4R/C34avw5fgRVUInCwbsn1yyA8C8zm/BH8NXoXnVE6wVPjdeCI38kX/3+Ct9dbz1pTmHFRu+Hm4O9Ch3clr99negxfwj+ER/DR8EV6B5+DuQOnTgUw5rnkY+FbNU3gNXh0o/JYTuWOvyBf9FvzX663HH/HejO8LwAl8Hl5YLTd8q7sqA3wbjuExfAFegQdwfyDoSkWY8swzEf6o4Qyewefg+cHNbqMQruSL/u/WWc+E5g7vnnEXgDmcDeSGb/F4cBcCgT+GGRzDU3hZYburAt9TEtHgbM6JoxJ+6NMzzTcf6c2bycv2+KK/f+l6LBzw5IwfqZJhA3M472pWT/ajKxnjv4AFnMEpnBTPND6s2J7qHbPAqcMK74T2mZ4VGB9uJA465It+/eL1WKhYOD7xHOkr1ajK7d0C4+ke4Hy9qXZwpgLr+Znm/uNFw8xQOSy8H9IzjUrd9+BIfenYaylf9FsXr8fBAadnPIEDna8IBcwlxnuA0/Wv6GAWPd7dDIKjMdSWueAsBj4M7TOd06qBbwDwKr7oleuxMOEcTuEZTHWvDYUO7aHqAe0Bbq+HEFRzOz7WVoTDQkVds7A4sIIxfCQdCefFRoIOF/NFL1mPab/nvOakSL/Q1aFtNpUb/nFOVX6gzyg/1nISyDfUhsokIzaBR9Kxm80s5mK+6P56il1jXic7nhQxsxSm3OwBHl4fFdLqi64nDQZvqE2at7cWAp/IVvrN6/BFL1mPhYrGMBfOi4PyjuSGf6wBBh7p/FZTghCNWGgMzlBbrNJoPJX2mW5mwZfyRffXo7OFi5pZcS4qZUrlViptrXtw+GQoyhDPS+ANjcGBNRiLCQDPZPMHuiZfdFpPSTcQwwKYdRNqpkjm7AFeeT0pJzALgo7g8YYGrMHS0iocy+YTm2vyRUvvpXCIpQ5pe666TJrcygnScUf/p0NDs/iAI/nqDHC8TmQT8x3NF91l76oDdQGwu61Z6E0ABv7uO1dbf/37Zlv+Zw/Pbh8f1s4Avur6657/+YYBvur6657/+YYBvur6657/+YYBvur6657/+aYBvuL6657/+VMA8FXWX/f8zzcN8BXXX/f8zzcNMFdbf93zP38KLPiK6697/uebtuArrr/u+Z9vGmCusP6653/+1FjwVdZf9/zPN7oHX339dc//fNMu+irrr3v+50+Bi+Zq6697/uebA/jz8Pudf9ht/fWv517J/XUzAP8C/BAeX9WCDrUpZ3/dEMBxgPcfbtTVvsYV5Yn32u03B3Ac4P3b8I+vxNBKeeL9dRMAlwO83959qGO78sT769oB7g3w/vGVYFzKE++v6wV4OMD7F7tckFkmT7y/rhHgpQO8b+4Y46XyxPvrugBeNcB7BRiX8sT767oAvmCA9woAHsoT76+rBJjLBnh3txOvkifeX1dswZcO8G6N7sXyxPvr6i340gHe3TnqVfLE++uKAb50gHcXLnrX8sR7gNdPRqwzwLu7Y/FO5Yn3AK9jXCMGeHdgxDuVJ75VAI8ljP7PAb3/RfjcZfePHBB+79dpfpH1CanN30d+mT1h9GqAxxJGM5LQeeQ1+Tb+EQJrElLb38VHQ94TRq900aMIo8cSOo+8Dp8QfsB8zpqE1NO3OI9Zrj1h9EV78PqE0WMJnUdeU6E+Jjyk/hbrEFIfeWbvId8H9oTRFwdZaxJGvziW0Hn0gqYB/wyZ0PwRlxJST+BOw9m77Amj14ii1yGM/txYQudN0qDzGe4EqfA/5GJCagsHcPaEPWH0esekSwmjRxM6b5JEcZ4ww50ilvAOFxBSx4yLW+A/YU8YvfY5+ALC6NGEzhtmyZoFZoarwBLeZxUhtY4rc3bKnjB6TKJjFUHzJoTOozF2YBpsjcyxDgzhQ1YRUse8+J4wenwmaylB82hC5w0zoRXUNXaRBmSMQUqiWSWkLsaVqc/ZE0aPTFUuJWgeTei8SfLZQeMxNaZSIzbII4aE1Nmr13P2hNHjc9E9guYNCZ032YlNwESMLcZiLQHkE4aE1BFg0yAR4z1h9AiAGRA0jyZ03tyIxWMajMPWBIsxYJCnlITU5ShiHYdZ94TR4wCmSxg9jtB5KyPGYzymAYexWEMwAPIsAdYdV6aObmNPGD0aYLoEzaMJnTc0Ygs+YDw0GAtqxBjkuP38bMRWCHn73xNGjz75P73WenCEJnhwyVe3AEe8TtKdJcYhBl97wuhNAObK66lvD/9J9NS75v17wuitAN5fe4D31x7g/bUHeH/tAd5fe4D3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/w/toDvAd4f/24ABzZ8o+KLsSLS+Pv/TqTb3P4hKlQrTGh+fbIBT0Axqznnb+L/V2mb3HkN5Mb/nEHeK7d4IcDld6lmDW/iH9E+AH1MdOw/Jlu2T1xNmY98sv4wHnD7D3uNHu54WUuOsBTbQuvBsPT/UfzNxGYzwkP8c+Yz3C+r/i6DcyRL/rZ+utRwWH5PmfvcvYEt9jLDS/bg0/B64DWKrQM8AL8FPwS9beQCe6EMKNZYJol37jBMy35otdaz0Bw2H/C2Smc7+WGB0HWDELBmOByA3r5QONo4V+DpzR/hFS4U8wMW1PXNB4TOqYz9urxRV++ntWCw/U59Ty9ebdWbrgfRS9AYKKN63ZokZVygr8GZ/gfIhZXIXPsAlNjPOLBby5c1eOLvmQ9lwkOy5x6QV1j5TYqpS05JtUgUHUp5toHGsVfn4NX4RnMCe+AxTpwmApTYxqMxwfCeJGjpXzRF61nbcHhUBPqWze9svwcHJ+S6NPscKrEjug78Dx8Lj3T8D4YxGIdxmJcwhi34fzZUr7olevZCw5vkOhoClq5zBPZAnygD/Tl9EzDh6kl3VhsHYcDEb+hCtJSvuiV69kLDm+WycrOTArHmB5/VYyP6jOVjwgGawk2zQOaTcc1L+aLXrKeveDwZqlKrw8U9Y1p66uK8dEzdYwBeUQAY7DbyYNezBfdWQ97weEtAKYQg2xJIkuveAT3dYeLGH+ShrWNwZgN0b2YL7qznr3g8JYAo5bQBziPjx7BPZ0d9RCQp4UZbnFdzBddor4XHN4KYMrB2qHFRIzzcLAHQZ5the5ovui94PCWAPefaYnxIdzRwdHCbuR4B+tbiy96Lzi8E4D7z7S0mEPd+eqO3cT53Z0Y8SV80XvB4Z0ADJi/f7X113f+7p7/+UYBvur6657/+YYBvur6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+VMA8FXWX/f8z58OgK+y/rrnf75RgLna+uue//lTA/CV1V/3/M837aKvvv6653++UQvmauuve/7nTwfAV1N/3fM/fzr24Cuuv+75nz8FFnxl9dc9//MOr/8/glixwRuUfM4AAAAASUVORK5CYII="}getSearchTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII="}}class KC{constructor(e){this.container=e,this.width=e.offsetWidth,this.height=e.offsetHeight,this.guiParams={},this.init()}init(){this.scene=new Dh;const e=(new rp).setPath("/textures/cubeMaps/03/").load(["px.png","nx.png","py.png","ny.png","pz.png","nz.png"]);e.encoding=3001,this.scene.background=e,this.scene.environment=e,this.camera=new Wo(75,this.width/this.height,.1,5e3),this.camera.lookAt(new Gs(0,0,0)),this.camera.position.set(.8,.05,1.5),this.renderer||(this.renderer=new Oh),this.renderer.outputEncoding=3001,this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.antialias=!0,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=1,this.renderer.setClearColor(16777215,0),this.renderer.setSize(this.width,this.height),this.container.appendChild(this.renderer.domElement),this.clock=new Sp,this.initControls(),this.loadModel(),this.setPostProcessing(),this.showFPS(),this.animate(),this.setResize(),this.createGUI()}initControls(){this.controls=new tf(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.enabled=!0,this.controls.enablePan=!1,this.controls.update()}setResize(){this.sizeObserver=new ResizeObserver((e=>{this.height=e[0].contentRect.height,this.width=e[0].contentRect.width,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height),this.setEffectComposerSize()})),this.sizeObserver.observe(this.container)}loadModel(){this.GLTFLoader=new Jb,this.GLTFLoader.load("/models/gltf/DamagedHelmet/glTF/DamagedHelmet.gltf",(e=>{this.model=e.scene.children[0],this.scene.add(this.model)}),void 0,(e=>{}))}setEffectComposerSize(){this.effectComposer.setSize(this.width,this.height)}setPostProcessing(){this.renderTarget=new Fs(this.width,this.height,{minFilter:1006,magFilter:1006,format:1023,encoding:3001}),this.effectComposer=new IC(this.renderer,this.renderTarget),this.effectComposer.setPixelRatio(this.renderer.getPixelRatio()),this.setEffectComposerSize(),this.renderPass=new FC(this.scene,this.camera),this.effectComposer.addPass(this.renderPass),this.dotScreenPass=new BC,this.dotScreenPass.enabled=!1,this.effectComposer.addPass(this.dotScreenPass),this.unrealBloomPass=new VC,this.unrealBloomPass.enabled=!0,this.unrealBloomPass.strength=.5,this.unrealBloomPass.radius=1,this.unrealBloomPass.threshold=.2,this.effectComposer.addPass(this.unrealBloomPass),this.glitchPass=new GC,this.glitchPass.enabled=!1,this.effectComposer.addPass(this.glitchPass),this.shaderPass=new zC(WC),this.shaderPass.enabled=!1,this.effectComposer.addPass(this.shaderPass),this.smaaPass=new ZC,this.smaaPass.enabled=!0,this.effectComposer.addPass(this.smaaPass)}createGUI(){this.gui=new Dg.GUI;const e=this.gui.addFolder("Passes");e.open(),e.add(this.dotScreenPass,"enabled").name("DotScreenPass");const t=e.addFolder("glitch");t.open(),t.add(this.glitchPass,"enabled"),t.add(this.glitchPass,"goWild");const n=e.addFolder("UnrealBloomPass");n.open(),n.add(this.unrealBloomPass,"enabled").onChange((()=>{})),n.add(this.unrealBloomPass,"strength").min(0).max(2).step(.001).name("strength"),n.add(this.unrealBloomPass,"radius").min(0).max(2).step(.001).name("radius"),n.add(this.unrealBloomPass,"threshold").min(0).max(1).step(.001).name("threshold"),e.add(this.shaderPass,"enabled").name("shaderPass"),e.add(this.smaaPass,"enabled").name("smaaPass")}showFPS(){this.stats=new Ug,this.container.appendChild(this.stats.dom),this.stats.dom.className="stats-class",this.stats.dom.style.position="absolute",this.stats.dom.style.left="150px",this.stats.dom.style.top="20px"}destoryFPS(){this.stats&&(this.stats.dom.remove(),this.stats=null)}animate(){this.long=requestAnimationFrame(this.animate.bind(this)),this.effectComposer.render(),this.stats.update()}destory(){this.sizeObserver&&(this.sizeObserver.disconnect(this.container),this.sizeObserver=null),window.cancelAnimationFrame(this.long),this.renderer&&(this.renderer.forceContextLoss(),this.renderer.dispose(),this.renderer.domElement=null,this.renderer=null),this.clock=null,this.destoryFPS(),this.gui&&this.gui.destroy()}debug(){this.scene.add(new Zp(100))}}const JC=Wi({__name:"index",setup(e){const t=ft(null);let n=null;return Cn((()=>{n=new KC(t.value)})),On((()=>{n&&n.destory()})),(e,n)=>{const r=Un("code-bin"),i=Un("md-bin");return Or(),Ir(Tr,null,[jr("div",{class:"container",ref_key:"container",ref:t},null,512),Vr(r,{code:{"three_demo.js":vt("import * as THREE from 'three'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer'\r\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass'\r\n\r\n// Pass\r\nimport { DotScreenPass } from 'three/examples/jsm/postprocessing/DotScreenPass.js'\r\nimport { GlitchPass } from 'three/examples/jsm/postprocessing/GlitchPass.js'\r\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass'\r\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass.js'\r\nimport { RGBShiftShader } from 'three/examples/jsm/shaders/RGBShiftShader.js'\r\n\r\n// 用于抗锯齿的通道\r\n/**\r\n * 有不同抗锯齿通道可以选择：\r\n    FXAA：性能良好，但结果也只是良好，可能会导致模糊\r\n    SMAA：效果比FXAA好，但同时性能也消耗大\r\n    SSAA：质量最好，但性能最差\r\n    TAA：性能良好但结果有限\r\n */\r\nimport { SMAAPass } from 'three/examples/jsm/postprocessing/SMAAPass.js'\r\n\r\nimport Stats from 'stats.js'\r\nimport dat from 'dat.gui'\r\n\r\nexport default class Demo {\r\n    constructor(container) {\r\n        this.container = container\r\n        this.width = container.offsetWidth\r\n        this.height = container.offsetHeight\r\n\r\n        this.guiParams = {\r\n\r\n        }\r\n\r\n        this.init()\r\n\r\n    }\r\n\r\n    init() {\r\n        // Scene\r\n        this.scene = new THREE.Scene()\r\n        const enviromentMap = new THREE.CubeTextureLoader()\r\n            .setPath(`/textures/cubeMaps/03/`)\r\n            .load([\r\n                'px.png',\r\n                'nx.png',\r\n                'py.png',\r\n                'ny.png',\r\n                'pz.png',\r\n                'nz.png'\r\n            ])\r\n        enviromentMap.encoding = THREE.sRGBEncoding\r\n        this.scene.background = enviromentMap\r\n        this.scene.environment = enviromentMap\r\n\r\n        // Camera\r\n        this.camera = new THREE.PerspectiveCamera(75, this.width / this.height, 0.1, 5000)\r\n        this.camera.lookAt(new THREE.Vector3(0, 0, 0))\r\n        this.camera.position.set(0.8, 0.05, 1.5)\r\n\r\n        // Renderer\r\n        if (!this.renderer) {\r\n            this.renderer = new THREE.WebGLRenderer()\r\n        }\r\n        this.renderer.outputEncoding = THREE.sRGBEncoding\r\n        this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\r\n        this.renderer.antialias = true\r\n        this.renderer.shadowMap.enabled = true\r\n        this.renderer.shadowMap.type = THREE.PCFShadowMap\r\n        this.renderer.setClearColor(0xFFFFFF, 0)\r\n        this.renderer.setSize(this.width, this.height)\r\n        this.container.appendChild(this.renderer.domElement)\r\n\r\n        // Clock\r\n        this.clock = new THREE.Clock()\r\n\r\n        this.initControls()\r\n\r\n        this.loadModel()\r\n        this.setPostProcessing()\r\n\r\n        \r\n        this.showFPS()\r\n        this.animate()\r\n        this.setResize()\r\n        this.createGUI()\r\n        // this.debug()\r\n    }\r\n\r\n    // Controls\r\n    initControls() {\r\n        // OrbitControlsControl\r\n        this.controls = new OrbitControls(this.camera, this.renderer.domElement)\r\n        this.controls.enableDamping = true // 阻尼器\r\n        this.controls.enabled = true // 控制器是否启用\r\n        this.controls.enablePan = false // 禁止平移\r\n        this.controls.update()\r\n    }\r\n\r\n    setResize() {\r\n        this.sizeObserver = new ResizeObserver(entries => {\r\n            this.height = entries[0].contentRect.height\r\n            this.width = entries[0].contentRect.width\r\n            // update camera\r\n            this.camera.aspect = this.width / this.height\r\n            this.camera.updateProjectionMatrix()\r\n            // update renderer\r\n            this.renderer.setSize(this.width, this.height)\r\n            this.setEffectComposerSize()\r\n        })\r\n        this.sizeObserver.observe(this.container)\r\n    }\r\n\r\n    loadModel() {\r\n        this.GLTFLoader = new GLTFLoader()\r\n        this.GLTFLoader.load('/models/gltf/DamagedHelmet/glTF/DamagedHelmet.gltf',\r\n            gltf => {\r\n                this.model = gltf.scene.children[0]\r\n                this.scene.add(this.model)\r\n            },\r\n            undefined,\r\n            error => {\r\n                console.error('load model error: ', error)\r\n            }\r\n        )\r\n    }\r\n\r\n    setEffectComposerSize() {\r\n        this.effectComposer.setSize(this.width, this.height)\r\n    }\r\n\r\n    setPostProcessing() {\r\n        // renderTarget\r\n        this.renderTarget = new THREE.WebGLRenderTarget(this.width, this.height, {\r\n            minFilter: THREE.LinearFilter,\r\n            magFilter: THREE.LinearFilter,\r\n            format: THREE.RGBAFormat,\r\n            encoding: THREE.sRGBEncoding\r\n        })\r\n\r\n        // 实例化EffectComposer\r\n        this.effectComposer = new EffectComposer(this.renderer, this.renderTarget)\r\n        this.effectComposer.setPixelRatio(this.renderer.getPixelRatio())\r\n        this.setEffectComposerSize()\r\n\r\n        // 实例化第一个通道 & 将通道加到效果合成器中\r\n        this.renderPass = new RenderPass(this.scene, this.camera)\r\n        this.effectComposer.addPass(this.renderPass)\r\n\r\n        // Pass - DotScreenPass\r\n        this.dotScreenPass = new DotScreenPass()\r\n        this.dotScreenPass.enabled = false // 是否启用通道\r\n        this.effectComposer.addPass(this.dotScreenPass)\r\n\r\n        // Pass - UnrealBloomPass\r\n        // 这个通道会添加辉光效果到渲染中，它对重现光热、激光、光剑或放射性物质非常有用。\r\n        this.unrealBloomPass = new UnrealBloomPass()\r\n        this.unrealBloomPass.enabled = true\r\n        this.unrealBloomPass.strength = 0.5\r\n        this.unrealBloomPass.radius = 1\r\n        this.unrealBloomPass.threshold = 0.2\r\n        \r\n        \r\n        this.effectComposer.addPass(this.unrealBloomPass)\r\n\r\n        // Pass - GlitchPass\r\n        this.glitchPass = new GlitchPass()\r\n        this.glitchPass.enabled = false\r\n        this.effectComposer.addPass(this.glitchPass)\r\n\r\n        // Pass - ShaderPass\r\n        this.shaderPass = new ShaderPass(RGBShiftShader)\r\n        this.shaderPass.enabled = false\r\n        this.effectComposer.addPass(this.shaderPass)\r\n\r\n        // SMAAPass 用于后期处理通道抗锯齿\r\n        this.smaaPass = new SMAAPass()\r\n        this.smaaPass.enabled = true\r\n        this.effectComposer.addPass(this.smaaPass)\r\n    }\r\n\r\n    createGUI() {\r\n        this.gui = new dat.GUI()\r\n\r\n        const Passes = this.gui.addFolder('Passes')\r\n        Passes.open()\r\n        Passes.add(this.dotScreenPass, 'enabled').name('DotScreenPass')\r\n\r\n        const glitch = Passes.addFolder('glitch')\r\n        glitch.open()\r\n        glitch.add(this.glitchPass, 'enabled')\r\n        glitch.add(this.glitchPass, 'goWild')\r\n        \r\n        const ubcontrol = Passes.addFolder('UnrealBloomPass')\r\n        ubcontrol.open()\r\n        ubcontrol.add(this.unrealBloomPass, 'enabled').onChange(() => {\r\n            console.log(this.unrealBloomPass)\r\n        })\r\n        ubcontrol.add(this.unrealBloomPass, 'strength').min(0).max(2).step(0.001).name('strength')\r\n        ubcontrol.add(this.unrealBloomPass, 'radius').min(0).max(2).step(0.001).name('radius')\r\n        ubcontrol.add(this.unrealBloomPass, 'threshold').min(0).max(1).step(0.001).name('threshold')\r\n\r\n        Passes.add(this.shaderPass, 'enabled').name('shaderPass')\r\n        Passes.add(this.smaaPass, 'enabled').name('smaaPass')\r\n    }\r\n\r\n    showFPS() {\r\n        this.stats = new Stats()\r\n        this.container.appendChild(this.stats.dom)\r\n        this.stats.dom.className = 'stats-class'\r\n        this.stats.dom.style.position = 'absolute'\r\n        this.stats.dom.style.left = '150px'\r\n        this.stats.dom.style.top = '20px'\r\n    }\r\n\r\n    destoryFPS() {\r\n        if (this.stats) {\r\n            this.stats.dom.remove()\r\n            this.stats = null\r\n        }\r\n    }\r\n\r\n    animate() {\r\n\r\n        this.long = requestAnimationFrame(this.animate.bind(this))\r\n        // this.renderer.render(this.scene,this.camera)\r\n        this.effectComposer.render() // 使用效果合成器渲染而不是renderer渲染\r\n        this.stats.update()\r\n    }\r\n\r\n    destory() {\r\n        if (this.sizeObserver) {\r\n            this.sizeObserver.disconnect(this.container)\r\n            this.sizeObserver = null\r\n        }\r\n        window.cancelAnimationFrame(this.long)\r\n        if (this.renderer) {\r\n            this.renderer.forceContextLoss()\r\n            this.renderer.dispose()\r\n            this.renderer.domElement = null\r\n            this.renderer = null\r\n        }\r\n        this.clock = null\r\n        this.destoryFPS()\r\n        if (this.gui) this.gui.destroy()\r\n    }\r\n\r\n    debug() {\r\n        this.scene.add(new THREE.AxesHelper(100))\r\n    }\r\n}\r\n")}},null,8,["code"]),Vr(i,{md:vt("## 后处理\r\n在在图像上添加后期效果\r\n\r\n参考:\r\n> [后期处理](https://blog.csdn.net/weixin_43990650/article/details/126249530)\r\n\r\n### 1.简单例子\r\n省略了其他代码\r\n```js\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js'\r\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js'\r\n\r\n// Pass\r\nimport { DotScreenPass } from 'three/examples/jsm/postprocessing/DotScreenPass.js'\r\n\r\n// ...\r\n\r\n// 实例化效果合成器\r\nconst effectComposer = new EffectComposer(renderer)\r\neffectComposer.setPixelRatio(renderer.getPixelRatio())\r\neffectComposer.setSize(sizes.width, sizes.height)\r\n\r\n// 实例化第一个通道\r\nconst renderPass = new RenderPass(scene, camera)\r\neffectComposer.addPass(renderPass)\r\n\r\n// 添加效果通道: 比如黑白效果的 DotScreenPass\r\nconst dotScreenPass = new DotScreenPass()\r\neffectComposer.addPass(dotScreenPass)\r\n\r\n// 渲染\r\neffectComposer.render()\r\n```\r\n\r\n\r\n### 2.renderTarget\r\n```js\r\nconst renderTarget = new THREE.WebGLRenderTarget(\r\n    800,\r\n    600,\r\n    {\r\n        minFilter: THREE.LinearFilter,\r\n        magFilter: THREE.LinearFilter,\r\n        format: THREE.RGBAFormat,\r\n        encoding: THREE.sRGBEncoding\r\n    }\r\n)\r\nconst effectComposer = new EffectComposer(renderer,renderTarget)\r\n```\r\n\r\n### 3.修复抗锯齿\r\n\r\n\r\n使用抗锯齿通道实现,不同的抗锯齿通道:\r\n- FXAA：性能良好，但结果也只是良好，可能会导致模糊\r\n- SMAA：效果比FXAA好，但同时性能也消耗大（不要与MSAA搞混了）\r\n- SSAA：质量最好，但性能最差\r\n- TAA：性能良好但结果有限\r\n\r\n```js\r\nimport { SMAAPass } from 'three/examples/jsm/postprocessing/SMAAPass.js'\r\n\r\n// ...\r\n\r\nconst smaaPass = new SMAAPass()\r\neffectComposer.addPass(smaaPass)\r\n```")},null,8,["md"])],64)}}},[["__scopeId","data-v-10fdc49a"]]),QC=Object.freeze(Object.defineProperty({__proto__:null,default:JC},Symbol.toStringTag,{value:"Module"})),$C={uniforms:{tDiffuse:{value:null},uTint:{value:null}},vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n    \r\n    vUv = uv;\r\n}\r\n",fragmentShader:"uniform sampler2D tDiffuse; // 贴图纹理\r\nvarying vec2 vUv;\r\nuniform vec3 uTint;\r\n\r\nvoid main() {\r\n    vec4 color = texture2D(tDiffuse,vUv);\r\n    color.rgb += uTint;\r\n    gl_FragColor = color;\r\n}"},eP={uniforms:{tDiffuse:{value:null},uTime:{value:null}},vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n    vUv = uv;\r\n}\r\n",fragmentShader:"uniform sampler2D tDiffuse; // 上一个通道传递过来的贴图纹理\r\nvarying vec2 vUv;\r\nuniform float uTime;\r\n\r\nvoid main() {\r\n    vec2 newUv = vec2(vUv.x, vUv.y + sin(vUv.x * 10.0 + uTime) * 0.1);\r\n    vec4 color = texture2D(tDiffuse, newUv);\r\n\r\n    gl_FragColor = color;\r\n}"};class tP{constructor(e){this.container=e,this.width=e.offsetWidth,this.height=e.offsetHeight,this.guiParams={},this.init()}init(){this.scene=new Dh;const e=(new rp).setPath("/textures/cubeMaps/03/").load(["px.png","nx.png","py.png","ny.png","pz.png","nz.png"]);e.encoding=3001,this.scene.background=e,this.scene.environment=e,this.camera=new Wo(75,this.width/this.height,.1,5e3),this.camera.lookAt(new Gs(0,0,0)),this.camera.position.set(.8,.05,1.5),this.renderer||(this.renderer=new Oh),this.renderer.outputEncoding=3001,this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.antialias=!0,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=1,this.renderer.setClearColor(16777215,0),this.renderer.setSize(this.width,this.height),this.container.appendChild(this.renderer.domElement),this.clock=new Sp,this.initControls(),this.loadModel(),this.setPostProcessing(),this.showFPS(),this.animate(),this.setResize(),this.createGUI()}initControls(){this.controls=new tf(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.enabled=!0,this.controls.enablePan=!1,this.controls.update()}setResize(){this.sizeObserver=new ResizeObserver((e=>{this.height=e[0].contentRect.height,this.width=e[0].contentRect.width,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height),this.setEffectComposerSize()})),this.sizeObserver.observe(this.container)}loadModel(){this.GLTFLoader=new Jb,this.GLTFLoader.load("/models/gltf/DamagedHelmet/glTF/DamagedHelmet.gltf",(e=>{this.model=e.scene.children[0],this.scene.add(this.model)}),void 0,(e=>{}))}setEffectComposerSize(){this.effectComposer.setSize(this.width,this.height)}setPostProcessing(){this.renderTarget=new Fs(this.width,this.height,{minFilter:1006,magFilter:1006,format:1023,encoding:3001}),this.effectComposer=new IC(this.renderer,this.renderTarget),this.effectComposer.setPixelRatio(this.renderer.getPixelRatio()),this.setEffectComposerSize(),this.renderPass=new FC(this.scene,this.camera),this.effectComposer.addPass(this.renderPass),this.tintPass=new zC($C),this.tintPass.material.uniforms.uTint.value=new Gs(.1,.2,0),this.effectComposer.addPass(this.tintPass),this.displacementPass=new zC(eP),this.displacementPass.material.uniforms.uTime.value=0,this.effectComposer.addPass(this.displacementPass),this.smaaPass=new ZC,this.smaaPass.enabled=!0,this.effectComposer.addPass(this.smaaPass)}createGUI(){this.gui=new Dg.GUI;const e=this.gui.addFolder("Passes");e.open(),e.add(this.smaaPass,"enabled").name("smaaPass");const t=e.addFolder("tintPassControl");t.open(),t.add(this.tintPass,"enabled"),t.add(this.tintPass.material.uniforms.uTint.value,"x").min(-1).max(1).step(.001).name("r"),t.add(this.tintPass.material.uniforms.uTint.value,"y").min(-1).max(1).step(.001).name("g"),t.add(this.tintPass.material.uniforms.uTint.value,"z").min(-1).max(1).step(.001).name("b");const n=e.addFolder("displacementPass");n.open(),n.add(this.displacementPass,"enabled")}showFPS(){this.stats=new Ug,this.container.appendChild(this.stats.dom),this.stats.dom.className="stats-class",this.stats.dom.style.position="absolute",this.stats.dom.style.left="150px",this.stats.dom.style.top="20px"}destoryFPS(){this.stats&&(this.stats.dom.remove(),this.stats=null)}animate(){const e=this.clock.getElapsedTime();this.displacementPass&&(this.displacementPass.material.uniforms.uTime.value=e),this.long=requestAnimationFrame(this.animate.bind(this)),this.effectComposer.render(),this.stats.update()}destory(){this.sizeObserver&&(this.sizeObserver.disconnect(this.container),this.sizeObserver=null),window.cancelAnimationFrame(this.long),this.renderer&&(this.renderer.forceContextLoss(),this.renderer.dispose(),this.renderer.domElement=null,this.renderer=null),this.clock=null,this.destoryFPS(),this.gui&&this.gui.destroy()}debug(){this.scene.add(new Zp(100))}}const nP=Wi({__name:"index",setup(e){const t=ft(null);let n=null;return Cn((()=>{n=new tP(t.value)})),On((()=>{n&&n.destory()})),(e,n)=>{const r=Un("code-bin"),i=Un("md-bin");return Or(),Ir(Tr,null,[jr("div",{class:"container",ref_key:"container",ref:t},null,512),Vr(r,{code:{"three_demo.js":vt("import * as THREE from 'three'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer'\r\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass'\r\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass'\r\n\r\n// 自定义的Shader 通过ShaderPass生成自定义的Pass\r\nimport TintShader from './shaders/Tint'\r\nimport DisplacementShader from './shaders/Displacement'\r\n\r\n// 用于抗锯齿的通道\r\n/**\r\n * 有不同抗锯齿通道可以选择：\r\n    FXAA：性能良好，但结果也只是良好，可能会导致模糊\r\n    SMAA：效果比FXAA好，但同时性能也消耗大\r\n    SSAA：质量最好，但性能最差\r\n    TAA：性能良好但结果有限\r\n */\r\nimport { SMAAPass } from 'three/examples/jsm/postprocessing/SMAAPass.js'\r\n\r\nimport Stats from 'stats.js'\r\nimport dat from 'dat.gui'\r\n\r\nexport default class Demo {\r\n    constructor(container) {\r\n        this.container = container\r\n        this.width = container.offsetWidth\r\n        this.height = container.offsetHeight\r\n\r\n        this.guiParams = {\r\n\r\n        }\r\n\r\n        this.init()\r\n\r\n    }\r\n\r\n    init() {\r\n        // Scene\r\n        this.scene = new THREE.Scene()\r\n        const enviromentMap = new THREE.CubeTextureLoader()\r\n            .setPath(`/textures/cubeMaps/03/`)\r\n            .load([\r\n                'px.png',\r\n                'nx.png',\r\n                'py.png',\r\n                'ny.png',\r\n                'pz.png',\r\n                'nz.png'\r\n            ])\r\n        enviromentMap.encoding = THREE.sRGBEncoding\r\n        this.scene.background = enviromentMap\r\n        this.scene.environment = enviromentMap\r\n\r\n        // Camera\r\n        this.camera = new THREE.PerspectiveCamera(75, this.width / this.height, 0.1, 5000)\r\n        this.camera.lookAt(new THREE.Vector3(0, 0, 0))\r\n        this.camera.position.set(0.8, 0.05, 1.5)\r\n\r\n        // Renderer\r\n        if (!this.renderer) {\r\n            this.renderer = new THREE.WebGLRenderer()\r\n        }\r\n        this.renderer.outputEncoding = THREE.sRGBEncoding\r\n        this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\r\n        this.renderer.antialias = true\r\n        this.renderer.shadowMap.enabled = true\r\n        this.renderer.shadowMap.type = THREE.PCFShadowMap\r\n        this.renderer.setClearColor(0xFFFFFF, 0)\r\n        this.renderer.setSize(this.width, this.height)\r\n        this.container.appendChild(this.renderer.domElement)\r\n\r\n        // Clock\r\n        this.clock = new THREE.Clock()\r\n\r\n        this.initControls()\r\n\r\n        this.loadModel()\r\n        this.setPostProcessing()\r\n\r\n\r\n        this.showFPS()\r\n        this.animate()\r\n        this.setResize()\r\n        this.createGUI()\r\n        // this.debug()\r\n    }\r\n\r\n    // Controls\r\n    initControls() {\r\n        // OrbitControlsControl\r\n        this.controls = new OrbitControls(this.camera, this.renderer.domElement)\r\n        this.controls.enableDamping = true // 阻尼器\r\n        this.controls.enabled = true // 控制器是否启用\r\n        this.controls.enablePan = false // 禁止平移\r\n        this.controls.update()\r\n    }\r\n\r\n    setResize() {\r\n        this.sizeObserver = new ResizeObserver(entries => {\r\n            this.height = entries[0].contentRect.height\r\n            this.width = entries[0].contentRect.width\r\n            // update camera\r\n            this.camera.aspect = this.width / this.height\r\n            this.camera.updateProjectionMatrix()\r\n            // update renderer\r\n            this.renderer.setSize(this.width, this.height)\r\n            this.setEffectComposerSize()\r\n        })\r\n        this.sizeObserver.observe(this.container)\r\n    }\r\n\r\n    loadModel() {\r\n        this.GLTFLoader = new GLTFLoader()\r\n        this.GLTFLoader.load('/models/gltf/DamagedHelmet/glTF/DamagedHelmet.gltf',\r\n            gltf => {\r\n                this.model = gltf.scene.children[0]\r\n                this.scene.add(this.model)\r\n            },\r\n            undefined,\r\n            error => {\r\n                console.error('load model error: ', error)\r\n            }\r\n        )\r\n    }\r\n\r\n    setEffectComposerSize() {\r\n        this.effectComposer.setSize(this.width, this.height)\r\n    }\r\n\r\n    setPostProcessing() {\r\n        // renderTarget\r\n        this.renderTarget = new THREE.WebGLRenderTarget(this.width, this.height, {\r\n            minFilter: THREE.LinearFilter,\r\n            magFilter: THREE.LinearFilter,\r\n            format: THREE.RGBAFormat,\r\n            encoding: THREE.sRGBEncoding\r\n        })\r\n\r\n        // 实例化EffectComposer\r\n        this.effectComposer = new EffectComposer(this.renderer, this.renderTarget)\r\n        this.effectComposer.setPixelRatio(this.renderer.getPixelRatio())\r\n        this.setEffectComposerSize()\r\n\r\n        // 实例化第一个通道 & 将通道加到效果合成器中\r\n        this.renderPass = new RenderPass(this.scene, this.camera)\r\n        this.effectComposer.addPass(this.renderPass)\r\n\r\n        // 自定义颜色通道\r\n        this.tintPass = new ShaderPass(TintShader)\r\n        this.tintPass.material.uniforms.uTint.value = new THREE.Vector3(0.1, 0.2, 0.0)\r\n        this.effectComposer.addPass(this.tintPass)\r\n\r\n        // 自定义位移通道\r\n        this.displacementPass = new ShaderPass(DisplacementShader)\r\n        this.displacementPass.material.uniforms.uTime.value = 0\r\n        this.effectComposer.addPass(this.displacementPass)\r\n\r\n\r\n        // SMAAPass 用于后期处理通道抗锯齿\r\n        this.smaaPass = new SMAAPass()\r\n        this.smaaPass.enabled = true\r\n        this.effectComposer.addPass(this.smaaPass)\r\n    }\r\n\r\n    createGUI() {\r\n        this.gui = new dat.GUI()\r\n\r\n        const Passes = this.gui.addFolder('Passes')\r\n        Passes.open()\r\n        Passes.add(this.smaaPass, 'enabled').name('smaaPass')\r\n\r\n        // 颜色通道控制\r\n        const tintPassControl = Passes.addFolder('tintPassControl')\r\n        tintPassControl.open()\r\n        tintPassControl.add(this.tintPass, 'enabled')\r\n        tintPassControl.add(this.tintPass.material.uniforms.uTint.value, 'x').min(-1).max(1).step(0.001).name('r')\r\n        tintPassControl.add(this.tintPass.material.uniforms.uTint.value, 'y').min(-1).max(1).step(0.001).name('g')\r\n        tintPassControl.add(this.tintPass.material.uniforms.uTint.value, 'z').min(-1).max(1).step(0.001).name('b')\r\n\r\n        // 位移通道控制\r\n        const displacementPassControl = Passes.addFolder('displacementPass')\r\n        displacementPassControl.open()\r\n        displacementPassControl.add(this.displacementPass, 'enabled')\r\n    }\r\n\r\n    showFPS() {\r\n        this.stats = new Stats()\r\n        this.container.appendChild(this.stats.dom)\r\n        this.stats.dom.className = 'stats-class'\r\n        this.stats.dom.style.position = 'absolute'\r\n        this.stats.dom.style.left = '150px'\r\n        this.stats.dom.style.top = '20px'\r\n    }\r\n\r\n    destoryFPS() {\r\n        if (this.stats) {\r\n            this.stats.dom.remove()\r\n            this.stats = null\r\n        }\r\n    }\r\n\r\n    animate() {\r\n        const elapsedTime =  this.clock.getElapsedTime()\r\n        if(this.displacementPass) this.displacementPass.material.uniforms.uTime.value = elapsedTime\r\n        this.long = requestAnimationFrame(this.animate.bind(this))\r\n        // this.renderer.render(this.scene,this.camera)\r\n        this.effectComposer.render() // 使用效果合成器渲染而不是renderer渲染\r\n        this.stats.update()\r\n    }\r\n\r\n    destory() {\r\n        if (this.sizeObserver) {\r\n            this.sizeObserver.disconnect(this.container)\r\n            this.sizeObserver = null\r\n        }\r\n        window.cancelAnimationFrame(this.long)\r\n        if (this.renderer) {\r\n            this.renderer.forceContextLoss()\r\n            this.renderer.dispose()\r\n            this.renderer.domElement = null\r\n            this.renderer = null\r\n        }\r\n        this.clock = null\r\n        this.destoryFPS()\r\n        if (this.gui) this.gui.destroy()\r\n    }\r\n\r\n    debug() {\r\n        this.scene.add(new THREE.AxesHelper(100))\r\n    }\r\n}\r\n")}},null,8,["code"]),Vr(i,{md:vt("## 自定义后处理\r\n\r\n### 1.大致流程\r\n通过使用 ShaderPass 以自定义的着色器来生成自定义的通道从而完成自定义后处理\r\n```js\r\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass'\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer'\r\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass'\r\n\r\n// ... like init effectComposer\r\n\r\nconst myShader = {\r\n    uniforms: {\r\n        tDiffuse: { value: null }, // 从上一个通道中获得贴图纹理，这个纹理自动存储在名为 tDiffuse的unifom中\r\n        uTime: { value: null }\r\n    },\r\n    vertexShader: `\r\n    varying vec2 varying vec2 vUv;;\r\n    void main() {\r\n        gl_Position = gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n        vUv = uv;\r\n    }\r\n    `,\r\n    fragmentShader: `\r\n    uniform sampler2D tDiffuse; // 贴图纹理\r\n    varying vec2 vUv;\r\n\r\n    void main() {\r\n        vec4 color = texture2D(tDiffuse, vUv);\r\n        gl_FragColor = color;\r\n    }\r\n    `\r\n}\r\n\r\nconst myPass = new ShaderPass(myShader)\r\neffectComposer.addPass(myPass)\r\n\r\n```\r\n\r\n\r\n### 2.例子\r\n#### 2.1 颜色通道\r\n```js\r\nconst TintShader = {\r\n    uniforms: {\r\n        tDiffuse: { value: null }, // 从上一个通道中获得贴图纹理，这个纹理自动存储在名为 tDiffuse的unifom中\r\n        uTint: { value: null } // 颜色rgb\r\n    },\r\n    vertexShader: `\r\n        varying vec2 vUv;\r\n\r\n        void main() {\r\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n            vUv = uv;\r\n        }\r\n    `,\r\n    fragmentShader: `\r\n        uniform sampler2D tDiffuse; // 贴图纹理\r\n        varying vec2 vUv;\r\n        uniform vec3 uTint;\r\n\r\n        void main() {\r\n            vec4 color = texture2D(tDiffuse,vUv);\r\n            color.rgb += uTint;\r\n            gl_FragColor = color;\r\n        }    \r\n    `\r\n}\r\n\r\nthis.tintPass = new ShaderPass(TintShader)\r\nthis.tintPass.material.uniforms.uTint.value = new THREE.Vector3(0.1, 0.2, 0.0)\r\nthis.effectComposer.addPass(this.tintPass)\r\n```\r\n\r\n\r\n### 2.2 位移通道\r\n```js\r\nconst DisplacementShader = {\r\n    uniforms: {\r\n        tDiffuse: { value: null }, // 从上一个通道中获得贴图纹理，这个纹理自动存储在名为 tDiffuse的unifom中\r\n        uTime: { value: null }\r\n    },\r\n    vertexShader: `\r\n        varying vec2 vUv;\r\n\r\n        void main() {\r\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n            vUv = uv;\r\n        }\r\n    `,\r\n    fragmentShader: `\r\n        uniform sampler2D tDiffuse; // 上一个通道传递过来的贴图纹理\r\n        varying vec2 vUv;\r\n        uniform float uTime;\r\n\r\n        void main() {\r\n            vec2 newUv = vec2(vUv.x, vUv.y + sin(vUv.x * 10.0 + uTime) * 0.1);\r\n            vec4 color = texture2D(tDiffuse, newUv);\r\n\r\n            gl_FragColor = color;\r\n        }\r\n    `\r\n}\r\n\r\nthis.displacementPass = new ShaderPass(DisplacementShader)\r\nthis.displacementPass.material.uniforms.uTime.value = 0\r\nthis.effectComposer.addPass(this.displacementPass)\r\n\r\n// ...\r\n\r\nanimate() {\r\n    // ...\r\n    const elapsedTime = this.clock.getElapsedTime()\r\n    this.displacementPass.material.uniforms.uTime.value = elapsedTime\r\n}\r\n```")},null,8,["md"])],64)}}},[["__scopeId","data-v-7dd4eef7"]]),rP=Object.freeze(Object.defineProperty({__proto__:null,default:nP},Symbol.toStringTag,{value:"Module"})),iP="uniform float uBigWavesElevation;\r\nuniform vec2 uBigWavesFrerquency;\r\nuniform float uTime;\r\nuniform float uBigWavesSpeed;\r\n\r\nuniform float uSmallWavesElevation;\r\nuniform float uSmallWavesFrerquency;\r\nuniform float uSmallWavesSpeed;\r\nuniform float uSmallWavesIterations;\r\n\r\nvarying float vElevation;\r\n\r\n//\tClassic Perlin 3D Noise \r\n//\tby Stefan Gustavson\r\n//\r\nvec4 permute(vec4 x) {\r\n    return mod(((x * 34.0) + 1.0) * x, 289.0);\r\n}\r\nvec4 taylorInvSqrt(vec4 r) {\r\n    return 1.79284291400159 - 0.85373472095314 * r;\r\n}\r\nvec3 fade(vec3 t) {\r\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\r\n}\r\nfloat cnoise(vec3 P) {\r\n    vec3 Pi0 = floor(P); // Integer part for indexing\r\n    vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\r\n    Pi0 = mod(Pi0, 289.0);\r\n    Pi1 = mod(Pi1, 289.0);\r\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\r\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\r\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\r\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\r\n    vec4 iz0 = Pi0.zzzz;\r\n    vec4 iz1 = Pi1.zzzz;\r\n    vec4 ixy = permute(permute(ix) + iy);\r\n    vec4 ixy0 = permute(ixy + iz0);\r\n    vec4 ixy1 = permute(ixy + iz1);\r\n    vec4 gx0 = ixy0 / 7.0;\r\n    vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\r\n    gx0 = fract(gx0);\r\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\r\n    vec4 sz0 = step(gz0, vec4(0.0));\r\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\r\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\r\n    vec4 gx1 = ixy1 / 7.0;\r\n    vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\r\n    gx1 = fract(gx1);\r\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\r\n    vec4 sz1 = step(gz1, vec4(0.0));\r\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\r\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\r\n    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\r\n    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\r\n    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\r\n    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\r\n    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\r\n    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\r\n    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\r\n    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\r\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\r\n    g000 *= norm0.x;\r\n    g010 *= norm0.y;\r\n    g100 *= norm0.z;\r\n    g110 *= norm0.w;\r\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\r\n    g001 *= norm1.x;\r\n    g011 *= norm1.y;\r\n    g101 *= norm1.z;\r\n    g111 *= norm1.w;\r\n    float n000 = dot(g000, Pf0);\r\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\r\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\r\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\r\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\r\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\r\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\r\n    float n111 = dot(g111, Pf1);\r\n    vec3 fade_xyz = fade(Pf0);\r\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\r\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\r\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\r\n    return 2.2 * n_xyz;\r\n}\r\n\r\nvoid main() {\r\n    vec4 modelPosition = modelMatrix * vec4(position, 1.0);\r\n\r\n    // elevation 表示y方向上的海深度\r\n    float elevation = sin(modelPosition.x * uBigWavesFrerquency.x + uTime * uBigWavesSpeed) *\r\n        sin(modelPosition.z * uBigWavesFrerquency.y + uTime * uBigWavesSpeed) *\r\n        uBigWavesElevation;\r\n\r\n    for(float i = 1.0; i <= uSmallWavesIterations; i++) {\r\n        // 使用 abs函数 和 负号 模拟现实波浪浪尖向上而不是正弦函数的圆滑波峰\r\n        elevation -= abs(cnoise(vec3(modelPosition.xz * uSmallWavesFrerquency * i, uTime * uSmallWavesSpeed)) * uSmallWavesElevation / i);\r\n    }\r\n\r\n    modelPosition.y += elevation;\r\n\r\n    vec4 viewPosition = viewMatrix * modelPosition;\r\n    vec4 projectedPosition = projectionMatrix * viewPosition;\r\n    gl_Position = projectedPosition;\r\n\r\n    vElevation = elevation;\r\n}",sP="uniform vec3 uDepthColor;\r\nuniform vec3 uSurfaceColor;\r\n\r\nvarying float vElevation;\r\n\r\nuniform float uColorOffset;\r\nuniform float uColorMultiplier;\r\n\r\nvoid main() {\r\n    float mixStrength = (vElevation + uColorOffset) * uColorMultiplier;\r\n    vec3 color = mix(uDepthColor, uSurfaceColor, mixStrength);\r\n    gl_FragColor = vec4(color, 1.0);\r\n}";class aP{constructor(e){this.container=e,this.width=e.offsetWidth,this.height=e.offsetHeight,this.guiParams={depthColor:"#186691",surfaceColor:"#9bd8ff"},this.init(),this.initControls(),this.setResize(),this.createGUI(),this.showFPS(),this.initShaderDemo(),this.animate(),this.debug()}init(){this.scene=new Dh,this.scene.background=new Rs(0),this.scene.fog=new zh(14737632,20,100),this.camera=new Wo(75,this.width/this.height,.1,5e3),this.camera.lookAt(new Gs(0,0,0)),this.camera.position.set(.25,1.2,2),this.renderer||(this.renderer=new Oh),this.renderer.outputEncoding=3001,this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=1,this.renderer.setClearColor(16777215,0),this.renderer.setSize(this.width,this.height),this.container.appendChild(this.renderer.domElement),this.renderer.render(this.scene,this.camera),this.clock=new Sp}initShaderDemo(){this.meshGeometry=new il(2,2,1024,1024),this.meshMaterial=new jo({vertexShader:iP,fragmentShader:sP,uniforms:{uTime:{value:0},uBigWavesElevation:{value:.2},uBigWavesFrerquency:{value:new gs(4,1.5)},uBigWavesSpeed:{value:.75},uDepthColor:{value:new Rs(this.guiParams.depthColor)},uSurfaceColor:{value:new Rs(this.guiParams.surfaceColor)},uColorOffset:{value:.08},uColorMultiplier:{value:5},uSmallWavesElevation:{value:.15},uSmallWavesFrerquency:{value:3},uSmallWavesSpeed:{value:.15},uSmallWavesIterations:{value:3}}}),this.bigWaves=this.gui.addFolder("bigWaves"),this.bigWaves.open(),this.bigWaves.add(this.meshMaterial.uniforms.uBigWavesElevation,"value").min(0).max(1).step(.001).name("uBigWavesElevation"),this.bigWaves.add(this.meshMaterial.uniforms.uBigWavesFrerquency.value,"x").min(0).max(10).step(.001).name("uBigWavesFrerquency.x"),this.bigWaves.add(this.meshMaterial.uniforms.uBigWavesFrerquency.value,"y").min(0).max(10).step(.001).name("uBigWavesFrerquency.y"),this.bigWaves.add(this.meshMaterial.uniforms.uBigWavesSpeed,"value").min(0).max(10).step(.001).name("uBigWavesSpeed"),this.seaColor=this.gui.addFolder("seaColor"),this.seaColor.open(),this.seaColor.addColor(this.guiParams,"depthColor").name("depthColor").onChange((e=>{this.meshMaterial.uniforms.uDepthColor.value.set(e)})),this.seaColor.addColor(this.guiParams,"surfaceColor").name("surfaceColor").onChange((e=>{this.meshMaterial.uniforms.uSurfaceColor.value.set(e)})),this.seaColor.add(this.meshMaterial.uniforms.uColorOffset,"value").min(0).max(1).step(.001).name("colorOffset"),this.seaColor.add(this.meshMaterial.uniforms.uColorMultiplier,"value").min(0).max(10).step(.001).name("colorMultiplier"),this.smallWaves=this.gui.addFolder("smallWaves"),this.smallWaves.open(),this.smallWaves.add(this.meshMaterial.uniforms.uSmallWavesElevation,"value").min(0).max(.5).step(.001).name("uSmallWavesElevation"),this.smallWaves.add(this.meshMaterial.uniforms.uSmallWavesFrerquency,"value").min(0).max(10).step(.001).name("uSmallWavesFrerquency"),this.smallWaves.add(this.meshMaterial.uniforms.uSmallWavesSpeed,"value").min(0).max(5).step(.001).name("uSmallWavesSpeed"),this.smallWaves.add(this.meshMaterial.uniforms.uSmallWavesIterations,"value").min(0).max(100).step(1).name("uSmallWavesIterations"),this.water=new No(this.meshGeometry,this.meshMaterial),this.water.rotation.x=.5*-Math.PI,this.scene.add(this.water)}initControls(){this.controls=new tf(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.enabled=!0,this.controls.update()}setResize(){this.sizeObserver=new ResizeObserver((e=>{this.height=e[0].contentRect.height,this.width=e[0].contentRect.width,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height),this.renderer.render(this.scene,this.camera)})),this.sizeObserver.observe(this.container)}createGUI(){this.gui=new Dg.GUI,this.gui.width=400}showFPS(){this.stats=new Ug,this.container.appendChild(this.stats.dom),this.stats.dom.className="stats-class",this.stats.dom.style.position="absolute",this.stats.dom.style.left="150px",this.stats.dom.style.top="20px"}destoryFPS(){this.stats&&(this.stats.dom.remove(),this.stats=null)}animate(){const e=this.clock.getElapsedTime();this.meshMaterial.uniforms.uTime.value=e,this.long=requestAnimationFrame(this.animate.bind(this)),this.renderer.render(this.scene,this.camera),this.stats.update()}destory(){this.sizeObserver&&(this.sizeObserver.disconnect(this.container),this.sizeObserver=null),window.cancelAnimationFrame(this.long),this.renderer&&(this.renderer.forceContextLoss(),this.renderer.dispose(),this.renderer.domElement=null,this.renderer=null),this.clock=null,this.destoryFPS(),this.gui&&this.gui.destroy()}debug(){this.scene.add(new Zp(1))}}const oP=Wi({__name:"index",setup(e){const t=ft(null);let n=null;return Cn((()=>{n=new aP(t.value)})),On((()=>{n&&n.destory()})),(e,n)=>{const r=Un("code-bin"),i=Un("md-bin");return Or(),Ir(Tr,null,[jr("div",{class:"container",ref_key:"container",ref:t},null,512),Vr(r,{code:{"three_demo.js":vt("import * as THREE from 'three'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\nimport Stats from 'stats.js'\r\nimport dat from 'dat.gui'\r\n\r\nimport waterVertexShader from './shaders/vertex.glsl?raw'\r\nimport waterFragmentShader from './shaders/fragment.glsl?raw'\r\n\r\nexport default class Demo {\r\n    constructor(container) {\r\n        this.container = container\r\n        this.width = container.offsetWidth\r\n        this.height = container.offsetHeight\r\n\r\n        this.guiParams = {\r\n            depthColor: '#186691',\r\n            surfaceColor: '#9bd8ff'\r\n        }\r\n\r\n        this.init()\r\n        this.initControls()\r\n        this.setResize()\r\n        this.createGUI()\r\n        this.showFPS()\r\n\r\n        this.initShaderDemo()\r\n\r\n        this.animate()\r\n        this.debug()\r\n\r\n    }\r\n\r\n    init() {\r\n        // Scene\r\n        this.scene = new THREE.Scene()\r\n        this.scene.background = new THREE.Color(0x000000)\r\n        this.scene.fog = new THREE.Fog(0xe0e0e0, 20, 100)\r\n        // Camera\r\n        this.camera = new THREE.PerspectiveCamera(75, this.width / this.height, 0.1, 5000)\r\n        this.camera.lookAt(new THREE.Vector3(0, 0, 0))\r\n        this.camera.position.set(0.25, 1.2, 2.0)\r\n        // Renderer\r\n        if (!this.renderer) {\r\n            this.renderer = new THREE.WebGLRenderer()\r\n        }\r\n        this.renderer.outputEncoding = THREE.sRGBEncoding\r\n        this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\r\n        this.renderer.shadowMap.enabled = true\r\n        this.renderer.shadowMap.type = THREE.PCFShadowMap\r\n        this.renderer.setClearColor(0xFFFFFF, 0)\r\n        this.renderer.setSize(this.width, this.height)\r\n        this.container.appendChild(this.renderer.domElement)\r\n        this.renderer.render(this.scene, this.camera)\r\n\r\n        // Clock\r\n        this.clock = new THREE.Clock()\r\n    }\r\n\r\n    initShaderDemo() {\r\n        // Geometry\r\n        this.meshGeometry = new THREE.PlaneGeometry(2, 2, 1024, 1024)\r\n\r\n        // Material\r\n        this.meshMaterial = new THREE.ShaderMaterial({\r\n            vertexShader: waterVertexShader,\r\n            fragmentShader: waterFragmentShader,\r\n            uniforms: {\r\n                uTime: { value: 0 },\r\n\r\n                uBigWavesElevation: { value: 0.2 },\r\n                uBigWavesFrerquency: { value: new THREE.Vector2(4, 1.5) },\r\n                uBigWavesSpeed: { value: 0.75 },\r\n\r\n                uDepthColor: { value: new THREE.Color(this.guiParams.depthColor) },\r\n                uSurfaceColor: { value: new THREE.Color(this.guiParams.surfaceColor) },\r\n                uColorOffset: { value: 0.08 },\r\n                uColorMultiplier: { value: 5.0 },\r\n\r\n                uSmallWavesElevation: { value: 0.15 },\r\n                uSmallWavesFrerquency: { value: 3.0 },\r\n                uSmallWavesSpeed: { value: 0.15 },\r\n                uSmallWavesIterations: { value: 3 }\r\n\r\n            }\r\n        })\r\n\r\n        // bigWaves\r\n        this.bigWaves = this.gui.addFolder('bigWaves')\r\n        this.bigWaves.open()\r\n        this.bigWaves.add(this.meshMaterial.uniforms.uBigWavesElevation, 'value').min(0).max(1).step(0.001).name('uBigWavesElevation')\r\n        this.bigWaves.add(this.meshMaterial.uniforms.uBigWavesFrerquency.value, 'x').min(0).max(10).step(0.001).name('uBigWavesFrerquency.x')\r\n        this.bigWaves.add(this.meshMaterial.uniforms.uBigWavesFrerquency.value, 'y').min(0).max(10).step(0.001).name('uBigWavesFrerquency.y')\r\n        this.bigWaves.add(this.meshMaterial.uniforms.uBigWavesSpeed, 'value').min(0).max(10).step(0.001).name('uBigWavesSpeed')\r\n\r\n        // color\r\n        this.seaColor = this.gui.addFolder('seaColor')\r\n        this.seaColor.open()\r\n        this.seaColor.addColor(this.guiParams, 'depthColor').name('depthColor').onChange(value => {\r\n            this.meshMaterial.uniforms.uDepthColor.value.set(value)\r\n        })\r\n        this.seaColor.addColor(this.guiParams, 'surfaceColor').name('surfaceColor').onChange(value => {\r\n            this.meshMaterial.uniforms.uSurfaceColor.value.set(value)\r\n        })\r\n        this.seaColor.add(this.meshMaterial.uniforms.uColorOffset, 'value').min(0).max(1).step(0.001).name('colorOffset')\r\n        this.seaColor.add(this.meshMaterial.uniforms.uColorMultiplier, 'value').min(0).max(10).step(0.001).name('colorMultiplier')\r\n\r\n        // smallWaves\r\n        this.smallWaves = this.gui.addFolder('smallWaves')\r\n        this.smallWaves.open()\r\n        this.smallWaves.add(this.meshMaterial.uniforms.uSmallWavesElevation, 'value').min(0).max(0.5).step(0.001).name('uSmallWavesElevation')\r\n        this.smallWaves.add(this.meshMaterial.uniforms.uSmallWavesFrerquency, 'value').min(0).max(10).step(0.001).name('uSmallWavesFrerquency')\r\n        this.smallWaves.add(this.meshMaterial.uniforms.uSmallWavesSpeed, 'value').min(0).max(5).step(0.001).name('uSmallWavesSpeed')\r\n        this.smallWaves.add(this.meshMaterial.uniforms.uSmallWavesIterations, 'value').min(0).max(100).step(1).name('uSmallWavesIterations')\r\n        \r\n        \r\n        \r\n        \r\n\r\n        // Water\r\n        this.water = new THREE.Mesh(this.meshGeometry, this.meshMaterial)\r\n        this.water.rotation.x = - Math.PI * 0.5\r\n        this.scene.add(this.water)\r\n    }\r\n\r\n    // Controls\r\n    initControls() {\r\n        // OrbitControlsControl\r\n        this.controls = new OrbitControls(this.camera, this.renderer.domElement)\r\n        this.controls.enableDamping = true // 阻尼器\r\n        this.controls.enabled = true // 控制器是否启用\r\n        this.controls.update()\r\n    }\r\n\r\n    setResize() {\r\n        this.sizeObserver = new ResizeObserver(entries => {\r\n            this.height = entries[0].contentRect.height\r\n            this.width = entries[0].contentRect.width\r\n            // update camera\r\n            this.camera.aspect = this.width / this.height\r\n            this.camera.updateProjectionMatrix()\r\n            // update renderer\r\n            this.renderer.setSize(this.width, this.height)\r\n            this.renderer.render(this.scene, this.camera)\r\n        })\r\n        this.sizeObserver.observe(this.container)\r\n    }\r\n\r\n    createGUI() {\r\n        this.gui = new dat.GUI()\r\n        this.gui.width = 400\r\n    }\r\n\r\n    showFPS() {\r\n        this.stats = new Stats()\r\n        this.container.appendChild(this.stats.dom)\r\n        this.stats.dom.className = 'stats-class'\r\n        this.stats.dom.style.position = 'absolute'\r\n        this.stats.dom.style.left = '150px'\r\n        this.stats.dom.style.top = '20px'\r\n    }\r\n\r\n    destoryFPS() {\r\n        if (this.stats) {\r\n            this.stats.dom.remove()\r\n            this.stats = null\r\n        }\r\n    }\r\n\r\n    animate() {\r\n        const elapsedTime = this.clock.getElapsedTime()\r\n        this.meshMaterial.uniforms.uTime.value = elapsedTime\r\n        this.long = requestAnimationFrame(this.animate.bind(this))\r\n        this.renderer.render(this.scene, this.camera)\r\n        this.stats.update()\r\n    }\r\n\r\n    destory() {\r\n        if (this.sizeObserver) {\r\n            this.sizeObserver.disconnect(this.container)\r\n            this.sizeObserver = null\r\n        }\r\n        window.cancelAnimationFrame(this.long)\r\n        if (this.renderer) {\r\n            this.renderer.forceContextLoss()\r\n            this.renderer.dispose()\r\n            this.renderer.domElement = null\r\n            this.renderer = null\r\n        }\r\n        this.clock = null\r\n        this.destoryFPS()\r\n        if (this.gui) this.gui.destroy()\r\n    }\r\n\r\n    debug() {\r\n        this.scene.add(new THREE.AxesHelper(1))\r\n    }\r\n}\r\n"),"vertex.glsl":vt(iP),"fragment.glsl":vt(sP)}},null,8,["code"]),Vr(i,{md:vt("ShaderMaterial 不同于 RawShaderMaterial\r\n不需要\r\n```glsl\r\nuniform mat4 projectionMatrix;\r\nuniform mat4 viewMatrix;\r\nuniform mat4 modelMatrix;\r\nattribute vec3 position;\r\n```\r\n他会自动导入\r\n\r\n噪声函数\r\ncnoise\r\n[GLSL-Noise.md](https://gist.github.com/patriciogonzalezvivo/670c22f3966e662d2f83/revisions)\r\n```glsl\r\n//\tClassic Perlin 3D Noise \r\n//\tby Stefan Gustavson\r\n//\r\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\r\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\r\nvec4 fade(vec4 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\r\nfloat cnoise(vec4 P){\r\n  vec4 Pi0 = floor(P); // Integer part for indexing\r\n  vec4 Pi1 = Pi0 + 1.0; // Integer part + 1\r\n  Pi0 = mod(Pi0, 289.0);\r\n  Pi1 = mod(Pi1, 289.0);\r\n  vec4 Pf0 = fract(P); // Fractional part for interpolation\r\n  vec4 Pf1 = Pf0 - 1.0; // Fractional part - 1.0\r\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\r\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\r\n  vec4 iz0 = vec4(Pi0.zzzz);\r\n  vec4 iz1 = vec4(Pi1.zzzz);\r\n  vec4 iw0 = vec4(Pi0.wwww);\r\n  vec4 iw1 = vec4(Pi1.wwww);\r\n  vec4 ixy = permute(permute(ix) + iy);\r\n  vec4 ixy0 = permute(ixy + iz0);\r\n  vec4 ixy1 = permute(ixy + iz1);\r\n  vec4 ixy00 = permute(ixy0 + iw0);\r\n  vec4 ixy01 = permute(ixy0 + iw1);\r\n  vec4 ixy10 = permute(ixy1 + iw0);\r\n  vec4 ixy11 = permute(ixy1 + iw1);\r\n  vec4 gx00 = ixy00 / 7.0;\r\n  vec4 gy00 = floor(gx00) / 7.0;\r\n  vec4 gz00 = floor(gy00) / 6.0;\r\n  gx00 = fract(gx00) - 0.5;\r\n  gy00 = fract(gy00) - 0.5;\r\n  gz00 = fract(gz00) - 0.5;\r\n  vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);\r\n  vec4 sw00 = step(gw00, vec4(0.0));\r\n  gx00 -= sw00 * (step(0.0, gx00) - 0.5);\r\n  gy00 -= sw00 * (step(0.0, gy00) - 0.5);\r\n  vec4 gx01 = ixy01 / 7.0;\r\n  vec4 gy01 = floor(gx01) / 7.0;\r\n  vec4 gz01 = floor(gy01) / 6.0;\r\n  gx01 = fract(gx01) - 0.5;\r\n  gy01 = fract(gy01) - 0.5;\r\n  gz01 = fract(gz01) - 0.5;\r\n  vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);\r\n  vec4 sw01 = step(gw01, vec4(0.0));\r\n  gx01 -= sw01 * (step(0.0, gx01) - 0.5);\r\n  gy01 -= sw01 * (step(0.0, gy01) - 0.5);\r\n  vec4 gx10 = ixy10 / 7.0;\r\n  vec4 gy10 = floor(gx10) / 7.0;\r\n  vec4 gz10 = floor(gy10) / 6.0;\r\n  gx10 = fract(gx10) - 0.5;\r\n  gy10 = fract(gy10) - 0.5;\r\n  gz10 = fract(gz10) - 0.5;\r\n  vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);\r\n  vec4 sw10 = step(gw10, vec4(0.0));\r\n  gx10 -= sw10 * (step(0.0, gx10) - 0.5);\r\n  gy10 -= sw10 * (step(0.0, gy10) - 0.5);\r\n  vec4 gx11 = ixy11 / 7.0;\r\n  vec4 gy11 = floor(gx11) / 7.0;\r\n  vec4 gz11 = floor(gy11) / 6.0;\r\n  gx11 = fract(gx11) - 0.5;\r\n  gy11 = fract(gy11) - 0.5;\r\n  gz11 = fract(gz11) - 0.5;\r\n  vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);\r\n  vec4 sw11 = step(gw11, vec4(0.0));\r\n  gx11 -= sw11 * (step(0.0, gx11) - 0.5);\r\n  gy11 -= sw11 * (step(0.0, gy11) - 0.5);\r\n  vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);\r\n  vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);\r\n  vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);\r\n  vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);\r\n  vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);\r\n  vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);\r\n  vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);\r\n  vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);\r\n  vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);\r\n  vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);\r\n  vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);\r\n  vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);\r\n  vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);\r\n  vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);\r\n  vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);\r\n  vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);\r\n  vec4 norm00 = taylorInvSqrt(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));\r\n  g0000 *= norm00.x;\r\n  g0100 *= norm00.y;\r\n  g1000 *= norm00.z;\r\n  g1100 *= norm00.w;\r\n  vec4 norm01 = taylorInvSqrt(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));\r\n  g0001 *= norm01.x;\r\n  g0101 *= norm01.y;\r\n  g1001 *= norm01.z;\r\n  g1101 *= norm01.w;\r\n  vec4 norm10 = taylorInvSqrt(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));\r\n  g0010 *= norm10.x;\r\n  g0110 *= norm10.y;\r\n  g1010 *= norm10.z;\r\n  g1110 *= norm10.w;\r\n  vec4 norm11 = taylorInvSqrt(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));\r\n  g0011 *= norm11.x;\r\n  g0111 *= norm11.y;\r\n  g1011 *= norm11.z;\r\n  g1111 *= norm11.w;\r\n  float n0000 = dot(g0000, Pf0);\r\n  float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));\r\n  float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));\r\n  float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));\r\n  float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));\r\n  float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));\r\n  float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));\r\n  float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));\r\n  float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));\r\n  float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));\r\n  float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));\r\n  float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));\r\n  float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));\r\n  float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));\r\n  float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));\r\n  float n1111 = dot(g1111, Pf1);\r\n  vec4 fade_xyzw = fade(Pf0);\r\n  vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);\r\n  vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);\r\n  vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);\r\n  vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);\r\n  float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);\r\n  return 2.2 * n_xyzw;\r\n}\r\n```")},null,8,["md"])],64)}}},[["__scopeId","data-v-4742cb42"]]),lP=Object.freeze(Object.defineProperty({__proto__:null,default:oP},Symbol.toStringTag,{value:"Module"})),cP="uniform mat4 projectionMatrix;\r\nuniform mat4 viewMatrix;\r\nuniform mat4 modelMatrix;\r\nuniform vec2 uFrequency;\r\nuniform float uTime;\r\n\r\nattribute vec3 position;\r\nattribute vec2 uv;\r\n\r\nvarying vec2 vUv;\r\nvarying float vElevation; // 用于模拟明暗\r\n\r\nvoid main() {\r\n    vec4 modelPosition = modelMatrix * vec4(position, 1.0);\r\n\r\n    float elevation = sin(modelPosition.x * uFrequency.x + uTime) * 0.1;\r\n    elevation += sin(modelPosition.y * uFrequency.y + uTime) * 0.1;\r\n\r\n    modelPosition.z = elevation;\r\n\r\n    vec4 viewPosition = viewMatrix * modelPosition;\r\n    vec4 projectedPosition = projectionMatrix * viewPosition;\r\n    gl_Position = projectedPosition;\r\n\r\n    vUv = uv;\r\n    vElevation = elevation;\r\n}",hP="precision mediump float;\r\n\r\nuniform sampler2D uTexture;\r\nvarying vec2 vUv;\r\nvarying float vElevation; // 用于模拟明暗\r\n\r\nvoid main() {\r\n    vec4 textureColor = texture2D(uTexture,vUv);\r\n    textureColor.rgb *= vElevation * 2.0 + 0.9;\r\n    gl_FragColor = textureColor;\r\n}";class uP{constructor(e){this.container=e,this.width=e.offsetWidth,this.height=e.offsetHeight,this.guiParams={},this.init(),this.initControls(),this.setResize(),this.createGUI(),this.showFPS(),this.initShaderDemo(),this.animate(),this.debug()}init(){this.scene=new Dh,this.scene.background=new Rs(0),this.scene.fog=new zh(14737632,20,100),this.camera=new Wo(75,this.width/this.height,.1,5e3),this.camera.lookAt(new Gs(0,0,0)),this.camera.position.set(-.2,.3,5),this.renderer||(this.renderer=new Oh),this.renderer.outputEncoding=3001,this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=1,this.renderer.setClearColor(16777215,0),this.renderer.setSize(this.width,this.height),this.container.appendChild(this.renderer.domElement),this.renderer.render(this.scene,this.camera),this.clock=new Sp}initShaderDemo(){const e=(new ip).load("/textures/FSM_Logo.svg.jpg"),t=new il(1,1,32,32),n=new Ed({vertexShader:cP,fragmentShader:hP,side:2,transparent:!0,uniforms:{uFrequency:{value:new gs(10,5)},uTime:{value:0},uTexture:{value:e}}});this.meshGeometry=t,this.meshMaterial=n,this.gui.add(n.uniforms.uFrequency.value,"x").min(0).max(20).step(.01).name("x 方向上的频率"),this.gui.add(n.uniforms.uFrequency.value,"y").min(0).max(20).step(.01).name("y 方向上的频率");const r=new No(t,n);this.scene.add(r)}initControls(){this.controls=new tf(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.enabled=!0,this.controls.update()}setResize(){this.sizeObserver=new ResizeObserver((e=>{this.height=e[0].contentRect.height,this.width=e[0].contentRect.width,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height),this.renderer.render(this.scene,this.camera)})),this.sizeObserver.observe(this.container)}createGUI(){this.gui=new Dg.GUI}showFPS(){this.stats=new Ug,this.container.appendChild(this.stats.dom),this.stats.dom.className="stats-class",this.stats.dom.style.position="absolute",this.stats.dom.style.left="150px",this.stats.dom.style.top="20px"}destoryFPS(){this.stats&&(this.stats.dom.remove(),this.stats=null)}animate(){const e=this.clock.getElapsedTime();this.meshMaterial.uniforms.uTime.value=e,this.long=requestAnimationFrame(this.animate.bind(this)),this.renderer.render(this.scene,this.camera),this.stats.update()}destory(){this.sizeObserver&&(this.sizeObserver.disconnect(this.container),this.sizeObserver=null),window.cancelAnimationFrame(this.long),this.renderer&&(this.renderer.forceContextLoss(),this.renderer.dispose(),this.renderer.domElement=null,this.renderer=null),this.clock=null,this.destoryFPS(),this.gui&&this.gui.destroy()}debug(){this.scene.add(new Zp(100));const e=new No(new Uo(.5,.5,.5),new io({color:255}));e.position.set(0,0,-.5),this.scene.add(e)}}const dP=Wi({__name:"index",setup(e){const t=ft(null);let n=null;return Cn((()=>{n=new uP(t.value)})),On((()=>{n&&n.destory()})),(e,n)=>{const r=Un("code-bin"),i=Un("md-bin");return Or(),Ir(Tr,null,[jr("div",{class:"container",ref_key:"container",ref:t},null,512),Vr(r,{code:{"three_shader.js":vt("import * as THREE from 'three'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\nimport Stats from 'stats.js'\r\nimport dat from 'dat.gui'\r\n\r\n// ! add '?raw' Importing Asset as String https://vitejs.dev/guide/assets.html\r\nimport testVertexShader from './shaders/test/vertex.glsl?raw'\r\nimport testFragmentShader from './shaders/test/fragment.glsl?raw'\r\n\r\nexport default class ShaderDemo {\r\n    constructor(container) {\r\n        this.container = container\r\n        this.width = container.offsetWidth\r\n        this.height = container.offsetHeight\r\n\r\n        this.guiParams = {\r\n\r\n        }\r\n\r\n        this.init()\r\n        this.initControls()\r\n        this.setResize()\r\n        this.createGUI()\r\n        this.showFPS()\r\n\r\n        this.initShaderDemo()\r\n\r\n        this.animate()\r\n        this.debug()\r\n\r\n    }\r\n\r\n    init() {\r\n        // Scene\r\n        this.scene = new THREE.Scene()\r\n        this.scene.background = new THREE.Color(0x000000)\r\n        this.scene.fog = new THREE.Fog(0xe0e0e0, 20, 100)\r\n        // Camera\r\n        this.camera = new THREE.PerspectiveCamera(75, this.width / this.height, 0.1, 5000)\r\n        this.camera.lookAt(new THREE.Vector3(0, 0, 0))\r\n        this.camera.position.set(-0.2, 0.3, 5)\r\n\r\n        // Renderer\r\n        if (!this.renderer) {\r\n            this.renderer = new THREE.WebGLRenderer()\r\n        }\r\n        this.renderer.outputEncoding = THREE.sRGBEncoding\r\n        this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\r\n        this.renderer.shadowMap.enabled = true\r\n        this.renderer.shadowMap.type = THREE.PCFShadowMap\r\n        this.renderer.setClearColor(0xFFFFFF, 0)\r\n        this.renderer.setSize(this.width, this.height)\r\n        this.container.appendChild(this.renderer.domElement)\r\n        this.renderer.render(this.scene, this.camera)\r\n\r\n        // Clock\r\n        this.clock = new THREE.Clock()\r\n    }\r\n\r\n    initShaderDemo() {\r\n        // Textures\r\n        const textureLoader = new THREE.TextureLoader()\r\n        const texture = textureLoader.load('/textures/FSM_Logo.svg.jpg')\r\n\r\n        // Geometry\r\n        const meshGeometry = new THREE.PlaneGeometry(1, 1, 32, 32)\r\n        console.log(meshGeometry.attributes)\r\n\r\n        // Material\r\n        const meshMaterial = new THREE.RawShaderMaterial({\r\n            vertexShader: testVertexShader,\r\n            fragmentShader: testFragmentShader,\r\n            side: THREE.DoubleSide,\r\n            transparent: true,\r\n            uniforms: {\r\n                uFrequency: { value: new THREE.Vector2(10, 5) },\r\n                uTime: { value: 0 },\r\n                uTexture: { value: texture }\r\n            }\r\n        })\r\n        this.meshGeometry = meshGeometry\r\n        this.meshMaterial = meshMaterial\r\n\r\n        this.gui.add(meshMaterial.uniforms.uFrequency.value, 'x').min(0).max(20).step(0.01).name('x 方向上的频率')\r\n        this.gui.add(meshMaterial.uniforms.uFrequency.value, 'y').min(0).max(20).step(0.01).name('y 方向上的频率')\r\n\r\n        const mesh = new THREE.Mesh(meshGeometry, meshMaterial)\r\n        \r\n        this.scene.add(mesh)\r\n    }\r\n\r\n    // Controls\r\n    initControls() {\r\n        // OrbitControlsControl\r\n        this.controls = new OrbitControls(this.camera, this.renderer.domElement)\r\n        this.controls.enableDamping = true // 阻尼器\r\n        this.controls.enabled = true // 控制器是否启用\r\n        this.controls.update()\r\n    }\r\n\r\n    setResize() {\r\n        this.sizeObserver = new ResizeObserver(entries => {\r\n            this.height = entries[0].contentRect.height\r\n            this.width = entries[0].contentRect.width\r\n            // update camera\r\n            this.camera.aspect = this.width / this.height\r\n            this.camera.updateProjectionMatrix()\r\n            // update renderer\r\n            this.renderer.setSize(this.width, this.height)\r\n            this.renderer.render(this.scene, this.camera)\r\n        })\r\n        this.sizeObserver.observe(this.container)\r\n    }\r\n\r\n    createGUI() {\r\n        this.gui = new dat.GUI()\r\n    }\r\n\r\n    showFPS() {\r\n        this.stats = new Stats()\r\n        this.container.appendChild(this.stats.dom)\r\n        this.stats.dom.className = 'stats-class'\r\n        this.stats.dom.style.position = 'absolute'\r\n        this.stats.dom.style.left = '150px'\r\n        this.stats.dom.style.top = '20px'\r\n    }\r\n\r\n    destoryFPS() {\r\n        if (this.stats) {\r\n            this.stats.dom.remove()\r\n            this.stats = null\r\n        }\r\n    }\r\n\r\n    animate() {\r\n        const elapsedTime = this.clock.getElapsedTime()\r\n        this.meshMaterial.uniforms.uTime.value = elapsedTime\r\n        this.long = requestAnimationFrame(this.animate.bind(this))\r\n        this.renderer.render(this.scene, this.camera)\r\n        this.stats.update()\r\n    }\r\n\r\n    destory() {\r\n        if (this.sizeObserver) {\r\n            this.sizeObserver.disconnect(this.container)\r\n            this.sizeObserver = null\r\n        }\r\n        window.cancelAnimationFrame(this.long)\r\n        if (this.renderer) {\r\n            this.renderer.forceContextLoss()\r\n            this.renderer.dispose()\r\n            this.renderer.domElement = null\r\n            this.renderer = null\r\n        }\r\n        this.clock = null\r\n        this.destoryFPS()\r\n        if (this.gui) this.gui.destroy()\r\n    }\r\n\r\n    debug() {\r\n        this.scene.add(new THREE.AxesHelper(100))\r\n        const debugBox = new THREE.Mesh(\r\n            new THREE.BoxGeometry(0.5, 0.5, 0.5),\r\n            new THREE.MeshBasicMaterial({ color: 0x0000ff })\r\n        )\r\n        debugBox.position.set(0, 0, -0.5)\r\n        this.scene.add(debugBox)\r\n    }\r\n}\r\n"),"vertex.glsl":vt(cP),"fragment.glsl":vt(hP)}},null,8,["code"]),Vr(i,{md:vt("# Shader\r\n\r\n## 顶点着色器 VertexShader\r\n```glsl\r\nuniform mat4 projectionMatrix;\r\nuniform mat4 viewMatrix;\r\nuniform mat4 modelMatrix;\r\n\r\nattribute vec3 position;\r\nattribute float aRandom;\r\n\r\nvoid main() {\r\n    vec4 modelPosition = modelMatrix * vec4(position, 1.0);\r\n    // modelPosition.z += sin(modelPosition.x * 20.0) * 0.1;\r\n    modelPosition.z += aRandom * 0.1;\r\n\r\n\r\n    vec4 viewPosition = viewMatrix * modelPosition;\r\n    vec4 projectedPosition = projectionMatrix * viewPosition;\r\n    gl_Position = projectedPosition;\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\n## 片元着色器 FragmentShader\r\n\r\n``` glsl\r\nprecision mediump float;\r\n// 浮点精度 highp | mediump | lowp\r\nvoid main() {\r\n    vec4 color = vec4(1.0, 0.0, 0.0, 0.5); // rgba alpha要生效需要设置材料的 transparent: true\r\n    gl_FragColor = color;\r\n}\r\n```\r\n\r\n## 1. js向顶点着色器中传递变量 `aRandom`\r\n在顶点着色器中可以使用attribute xxx 来获取geometry.attributes上的属性，比如three.js自带的normal,position,uv\r\n此处例子中获取自定义的`aRandom`变量\r\n*demo.js*\r\n```js\r\nconst meshGeometry = new THREE.PlaneGeometry(1, 1, 32, 32)\r\nconst count = meshGeometry.attributes.position.count\r\nconst randoms = new Float32Array(count)\r\nfor (let i = 0; i < count; i++) {\r\n    randoms[i] = Math.random()\r\n}\r\nmeshGeometry.setAttribute('aRandom', new THREE.BufferAttribute(randoms, 1))\r\nconsole.log(meshGeometry)\r\n```\r\n*vertex.glsl*\r\n```glsl\r\nuniform mat4 projectionMatrix;\r\nuniform mat4 viewMatrix;\r\nuniform mat4 modelMatrix;\r\n\r\nattribute vec3 position;\r\nattribute float aRandom;\r\n\r\nvoid main() {\r\n    vec4 modelPosition = modelMatrix * vec4(position, 1.0);\r\n    // modelPosition.z += sin(modelPosition.x * 20.0) * 0.1;\r\n    modelPosition.z += aRandom * 0.1;\r\n\r\n\r\n    vec4 viewPosition = viewMatrix * modelPosition;\r\n    vec4 projectedPosition = projectionMatrix * viewPosition;\r\n    gl_Position = projectedPosition;\r\n}\r\n```\r\n\r\n## 2. 顶点着色器向片元着色器传递变量 `vRandom`\r\n'attribute' :  supported in vertex shaders only\r\n所以若片元着色器需要使用geometry.attributes上的属性，则需要使用varying从顶点着色器中传递给片元着色器\r\n\r\n*vertex.glsl*\r\n```glsl\r\nattribute float aRandom\r\nvarying float vRandom\r\n\r\nvoid main() {\r\n    ...\r\n    vRandom = aRandom\r\n    ...\r\n}\r\n```\r\n\r\n在片元着色器中使用`varying`定义相同名字的变量\r\n*fragment.glsl*\r\n```glsl\r\nvarying float vRandom\r\n\r\nvoid main() {\r\n    // use vRandom\r\n}\r\n```\r\n\r\n## 3. js向片元着色器传递变量\r\n*demo.js*\r\n```js\r\n        const meshMaterial = new THREE.RawShaderMaterial({\r\n            vertexShader: testVertexShader,\r\n            fragmentShader: testFragmentShader,\r\n            uniforms: {\r\n                uColor: { value: new THREE.Color('red') }\r\n            }\r\n        })\r\n```\r\n\r\n*fragment.glsl*\r\n```glsl\r\nprecision mediump float;\r\n\r\nuniform vec3 uColor;\r\n\r\nvoid main() {\r\n    gl_FragColor = vec4(uColor, 1.0);\r\n}\r\n```\r\n\r\n## 4. 使用纹理\r\n*demo.js*\r\n```js\r\n    const textureLoader = new THREE.TextureLoader()\r\n    const texture = textureLoader.load('/textures/FSM_Logo.svg.jpg')\r\n    ...\r\n    const meshMaterial = new THREE.RawShaderMaterial({\r\n        vertexShader: testVertexShader,\r\n        fragmentShader: testFragmentShader,\r\n        side: THREE.DoubleSide,\r\n        transparent: true,\r\n        uniforms: {\r\n            uFrequency: { value: new THREE.Vector2(10, 5) },\r\n            uTime: { value: 0 },\r\n            uTexture: { value: texture } // 纹理传递给着色器\r\n        }\r\n    })\r\n```\r\n\r\n*vertex.glsl*\r\n```glsl\r\nattribute vec2 uv;\r\n\r\nvarying vec2 vUv;\r\n\r\nmain() {\r\n    ...\r\n    vUv = uv; // 传递给片元着色器\r\n}\r\n```\r\n\r\n*fragment.glsl*\r\n```glsl\r\nprecision mediump float;\r\n\r\nuniform sampler2D uTexture;\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n    vec4 textureColor = texture2D(uTexture,vUv);\r\n    gl_FragColor = textureColor;\r\n}\r\n```\r\n\r\n\r\n\r\n")},null,8,["md"])],64)}}},[["__scopeId","data-v-f411a917"]]),pP=Object.freeze(Object.defineProperty({__proto__:null,default:dP},Symbol.toStringTag,{value:"Module"})),fP="uniform mat4 projectionMatrix;\r\nuniform mat4 viewMatrix;\r\nuniform mat4 modelMatrix;\r\nattribute vec3 position;\r\nattribute vec2 uv;\r\n\r\nvarying vec2 vUv; \r\n\r\nvoid main() {\r\n    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);\r\n    vUv = uv;\r\n}",mP="precision mediump float;\r\n\r\nvarying vec2 vUv;\r\n\r\nfloat random(vec2 st) {\r\n    return fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.5453123);\r\n}\r\n\r\nvoid main() {\r\n    // different patterns > see: https://www.bilibili.com/video/BV1wY4y1h765?p=28\r\n\r\n    // gl_FragColor = vec4(0.5, 0.0, 1.0, 1.0);\r\n\r\n    // pattern 8\r\n    // float strength = mod(vUv.y * 10.0, 1.0);\r\n\r\n    // float strength = mod(vUv.y * 10.0, 1.0);\r\n\r\n    // strength = step(0.5, strength); // like: strength = strength > 0.5 ? 1.0 : 0.0;\r\n    float strength;\r\n    // strength = abs(vUv.x - 0.5);\r\n\r\n    // random - 1\r\n    // strength = random(vUv);\r\n\r\n// random - 2\r\n    strength = random(floor(vUv * 20.0) / 20.0);\r\n    gl_FragColor = vec4(strength, strength, strength, 1.0);\r\n}";class gP{constructor(e){this.container=e,this.width=e.offsetWidth,this.height=e.offsetHeight,this.guiParams={},this.init(),this.initControls(),this.setResize(),this.createGUI(),this.showFPS(),this.initShaderDemo(),this.animate(),this.debug()}init(){this.scene=new Dh,this.scene.background=new Rs(0),this.scene.fog=new zh(14737632,20,100),this.camera=new Wo(75,this.width/this.height,.1,5e3),this.camera.lookAt(new Gs(0,0,0)),this.camera.position.set(.25,-.15,.8),this.renderer||(this.renderer=new Oh),this.renderer.outputEncoding=3001,this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=1,this.renderer.setClearColor(16777215,0),this.renderer.setSize(this.width,this.height),this.container.appendChild(this.renderer.domElement),this.renderer.render(this.scene,this.camera),this.clock=new Sp}initShaderDemo(){this.meshGeometry=new il(1,1,32,32),this.meshMaterial=new Ed({vertexShader:fP,fragmentShader:mP,side:2,transparent:!0,uniforms:{}}),this.mesh=new No(this.meshGeometry,this.meshMaterial),this.scene.add(this.mesh)}initControls(){this.controls=new tf(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.enabled=!0,this.controls.update()}setResize(){this.sizeObserver=new ResizeObserver((e=>{this.height=e[0].contentRect.height,this.width=e[0].contentRect.width,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height),this.renderer.render(this.scene,this.camera)})),this.sizeObserver.observe(this.container)}createGUI(){this.gui=new Dg.GUI}showFPS(){this.stats=new Ug,this.container.appendChild(this.stats.dom),this.stats.dom.className="stats-class",this.stats.dom.style.position="absolute",this.stats.dom.style.left="150px",this.stats.dom.style.top="20px"}destoryFPS(){this.stats&&(this.stats.dom.remove(),this.stats=null)}animate(){this.long=requestAnimationFrame(this.animate.bind(this)),this.renderer.render(this.scene,this.camera),this.stats.update()}destory(){this.sizeObserver&&(this.sizeObserver.disconnect(this.container),this.sizeObserver=null),window.cancelAnimationFrame(this.long),this.renderer&&(this.renderer.forceContextLoss(),this.renderer.dispose(),this.renderer.domElement=null,this.renderer=null),this.clock=null,this.destoryFPS(),this.gui&&this.gui.destroy()}debug(){}}const vP=Wi({__name:"index",setup(e){const t=ft(null);let n=null;return Cn((()=>{n=new gP(t.value)})),On((()=>{n&&n.destory()})),(e,n)=>{const r=Un("code-bin"),i=Un("md-bin");return Or(),Ir(Tr,null,[jr("div",{class:"container",ref_key:"container",ref:t},null,512),Vr(r,{code:{"three_shader.js":vt("import * as THREE from 'three'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\nimport Stats from 'stats.js'\r\nimport dat from 'dat.gui'\r\n\r\nimport testVertexShader from './shaders/vertex.glsl?raw' // add '?raw'\r\nimport testFragmentShader from './shaders/fragment.glsl?raw'\r\n\r\nexport default class ShaderDemo {\r\n    constructor(container) {\r\n        this.container = container\r\n        this.width = container.offsetWidth\r\n        this.height = container.offsetHeight\r\n\r\n        this.guiParams = {\r\n\r\n        }\r\n\r\n        this.init()\r\n        this.initControls()\r\n        this.setResize()\r\n        this.createGUI()\r\n        this.showFPS()\r\n\r\n        this.initShaderDemo()\r\n\r\n        this.animate()\r\n        this.debug()\r\n\r\n    }\r\n\r\n    init() {\r\n        // Scene\r\n        this.scene = new THREE.Scene()\r\n        this.scene.background = new THREE.Color(0x000000)\r\n        this.scene.fog = new THREE.Fog(0xe0e0e0, 20, 100)\r\n        // Camera\r\n        this.camera = new THREE.PerspectiveCamera(75, this.width / this.height, 0.1, 5000)\r\n        this.camera.lookAt(new THREE.Vector3(0, 0, 0))\r\n        this.camera.position.set(0.25, -0.15, 0.8)\r\n        // Renderer\r\n        if (!this.renderer) {\r\n            this.renderer = new THREE.WebGLRenderer()\r\n        }\r\n        this.renderer.outputEncoding = THREE.sRGBEncoding\r\n        this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\r\n        this.renderer.shadowMap.enabled = true\r\n        this.renderer.shadowMap.type = THREE.PCFShadowMap\r\n        this.renderer.setClearColor(0xFFFFFF, 0)\r\n        this.renderer.setSize(this.width, this.height)\r\n        this.container.appendChild(this.renderer.domElement)\r\n        this.renderer.render(this.scene, this.camera)\r\n\r\n        // Clock\r\n        this.clock = new THREE.Clock()\r\n    }\r\n\r\n    initShaderDemo() {\r\n        // Geometry\r\n        this.meshGeometry = new THREE.PlaneGeometry(1, 1, 32, 32)\r\n\r\n        // Material\r\n        this.meshMaterial = new THREE.RawShaderMaterial({\r\n            vertexShader: testVertexShader,\r\n            fragmentShader: testFragmentShader,\r\n            side: THREE.DoubleSide,\r\n            transparent: true,\r\n            uniforms: {\r\n            }\r\n        })\r\n\r\n        this.mesh = new THREE.Mesh(this.meshGeometry, this.meshMaterial)\r\n        this.scene.add(this.mesh)\r\n    }\r\n\r\n    // Controls\r\n    initControls() {\r\n        // OrbitControlsControl\r\n        this.controls = new OrbitControls(this.camera, this.renderer.domElement)\r\n        this.controls.enableDamping = true // 阻尼器\r\n        this.controls.enabled = true // 控制器是否启用\r\n        this.controls.update()\r\n    }\r\n\r\n    setResize() {\r\n        this.sizeObserver = new ResizeObserver(entries => {\r\n            this.height = entries[0].contentRect.height\r\n            this.width = entries[0].contentRect.width\r\n            // update camera\r\n            this.camera.aspect = this.width / this.height\r\n            this.camera.updateProjectionMatrix()\r\n            // update renderer\r\n            this.renderer.setSize(this.width, this.height)\r\n            this.renderer.render(this.scene, this.camera)\r\n        })\r\n        this.sizeObserver.observe(this.container)\r\n    }\r\n\r\n    createGUI() {\r\n        this.gui = new dat.GUI()\r\n    }\r\n\r\n    showFPS() {\r\n        this.stats = new Stats()\r\n        this.container.appendChild(this.stats.dom)\r\n        this.stats.dom.className = 'stats-class'\r\n        this.stats.dom.style.position = 'absolute'\r\n        this.stats.dom.style.left = '150px'\r\n        this.stats.dom.style.top = '20px'\r\n    }\r\n\r\n    destoryFPS() {\r\n        if (this.stats) {\r\n            this.stats.dom.remove()\r\n            this.stats = null\r\n        }\r\n    }\r\n\r\n    animate() {\r\n        this.long = requestAnimationFrame(this.animate.bind(this))\r\n        this.renderer.render(this.scene, this.camera)\r\n        this.stats.update()\r\n    }\r\n\r\n    destory() {\r\n        if (this.sizeObserver) {\r\n            this.sizeObserver.disconnect(this.container)\r\n            this.sizeObserver = null\r\n        }\r\n        window.cancelAnimationFrame(this.long)\r\n        if (this.renderer) {\r\n            this.renderer.forceContextLoss()\r\n            this.renderer.dispose()\r\n            this.renderer.domElement = null\r\n            this.renderer = null\r\n        }\r\n        this.clock = null\r\n        this.destoryFPS()\r\n        if (this.gui) this.gui.destroy()\r\n    }\r\n\r\n    debug() {\r\n        // this.scene.add(new THREE.AxesHelper(1))\r\n    }\r\n}\r\n"),"vertex.glsl":vt(fP),"fragment.glsl":vt(mP)}},null,8,["code"]),Vr(i,{md:vt("[book of shaders](https://thebookofshaders.com/?lan=ch)")},null,8,["md"])],64)}}},[["__scopeId","data-v-1946eaf1"]]),_P=Object.freeze(Object.defineProperty({__proto__:null,default:vP},Symbol.toStringTag,{value:"Module"})),xP="undefined"!=typeof window;const yP=Object.assign;function bP(e,t){const n={};for(const r in t){const i=t[r];n[r]=SP(i)?i.map(e):e(i)}return n}const wP=()=>{},SP=Array.isArray,MP=/\/$/;function EP(e,t,n="/"){let r,i={},s="",a="";const o=t.indexOf("#");let l=t.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(r=t.slice(0,l),s=t.slice(l+1,o>-1?o:t.length),i=e(s)),o>-1&&(r=r||t.slice(0,o),a=t.slice(o,t.length)),r=function(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let i,s,a=n.length-1;for(i=0;i<r.length;i++)if(s=r[i],"."!==s){if(".."!==s)break;a>1&&a--}return n.slice(0,a).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}(null!=r?r:t,n),{fullPath:r+(s&&"?")+s+a,path:r,query:i,hash:a}}function TP(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function AP(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function CP(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!PP(e[n],t[n]))return!1;return!0}function PP(e,t){return SP(e)?RP(e,t):SP(t)?RP(t,e):e===t}function RP(e,t){return SP(t)?e.length===t.length&&e.every(((e,n)=>e===t[n])):1===e.length&&e[0]===t}var LP,OP,zP,DP;function kP(e){if(!e)if(xP){const t=document.querySelector("base");e=(e=t&&t.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),e.replace(MP,"")}(OP=LP||(LP={})).pop="pop",OP.push="push",(DP=zP||(zP={})).back="back",DP.forward="forward",DP.unknown="";const IP=/^[^#]+#/;function NP(e,t){return e.replace(IP,"#")+t}const FP=()=>({left:window.pageXOffset,top:window.pageYOffset});function UP(e){let t;if("el"in e){const n=e.el,r="string"==typeof n&&n.startsWith("#"),i="string"==typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=function(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.pageXOffset,null!=t.top?t.top:window.pageYOffset)}function BP(e,t){return(history.state?history.state.position-t:-1)+e}const HP=new Map;function GP(e,t){const{pathname:n,search:r,hash:i}=t,s=e.indexOf("#");if(s>-1){let t=i.includes(e.slice(s))?e.slice(s).length:1,n=i.slice(t);return"/"!==n[0]&&(n="/"+n),TP(n,"")}return TP(n,e)+r+i}function jP(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?FP():null}}function VP(e){const{history:t,location:n}=window,r={value:GP(e,n)},i={value:t.state};function s(r,s,a){const o=e.indexOf("#"),l=o>-1?(n.host&&document.querySelector("base")?e:e.slice(o))+r:location.protocol+"//"+location.host+e+r;try{t[a?"replaceState":"pushState"](s,"",l),i.value=s}catch(c){n[a?"replace":"assign"](l)}}return i.value||s(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:function(e,n){const a=yP({},i.value,t.state,{forward:e,scroll:FP()});s(a.current,a,!0),s(e,yP({},jP(r.value,e,null),{position:a.position+1},n),!1),r.value=e},replace:function(e,n){s(e,yP({},t.state,jP(i.value.back,e,i.value.forward,!0),n,{position:i.value.position}),!0),r.value=e}}}function WP(e){const t=VP(e=kP(e)),n=function(e,t,n,r){let i=[],s=[],a=null;const o=({state:s})=>{const o=GP(e,location),l=n.value,c=t.value;let h=0;if(s){if(n.value=o,t.value=s,a&&a===l)return void(a=null);h=c?s.position-c.position:0}else r(o);i.forEach((e=>{e(n.value,l,{delta:h,type:LP.pop,direction:h?h>0?zP.forward:zP.back:zP.unknown})}))};function l(){const{history:e}=window;e.state&&e.replaceState(yP({},e.state,{scroll:FP()}),"")}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",l),{pauseListeners:function(){a=n.value},listen:function(e){i.push(e);const t=()=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)};return s.push(t),t},destroy:function(){for(const e of s)e();s=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",l)}}}(e,t.state,t.location,t.replace);const r=yP({location:"",base:e,go:function(e,t=!0){t||n.pauseListeners(),history.go(e)},createHref:NP.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function XP(e){return"string"==typeof e||"symbol"==typeof e}const qP={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},YP=Symbol("");var ZP,KP;function JP(e,t){return yP(new Error,{type:e,[YP]:!0},t)}function QP(e,t){return e instanceof Error&&YP in e&&(null==t||!!(e.type&t))}(KP=ZP||(ZP={}))[KP.aborted=4]="aborted",KP[KP.cancelled=8]="cancelled",KP[KP.duplicated=16]="duplicated";const $P={sensitive:!1,strict:!1,start:!0,end:!0},eR=/[.+*?^${}()[\]/\\]/g;function tR(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function nR(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const e=tR(r[n],i[n]);if(e)return e;n++}if(1===Math.abs(i.length-r.length)){if(rR(r))return 1;if(rR(i))return-1}return i.length-r.length}function rR(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const iR={type:0,value:""},sR=/[a-zA-Z0-9_]/;function aR(e,t,n){const r=function(e,t){const n=yP({},$P,t),r=[];let i=n.start?"^":"";const s=[];for(const l of e){const e=l.length?[]:[90];n.strict&&!l.length&&(i+="/");for(let t=0;t<l.length;t++){const r=l[t];let a=40+(n.sensitive?.25:0);if(0===r.type)t||(i+="/"),i+=r.value.replace(eR,"\\$&"),a+=40;else if(1===r.type){const{value:e,repeatable:n,optional:c,regexp:h}=r;s.push({name:e,repeatable:n,optional:c});const u=h||"[^/]+?";if("[^/]+?"!==u){a+=10;try{new RegExp(`(${u})`)}catch(o){throw new Error(`Invalid custom RegExp for param "${e}" (${u}): `+o.message)}}let d=n?`((?:${u})(?:/(?:${u}))*)`:`(${u})`;t||(d=c&&l.length<2?`(?:/${d})`:"/"+d),c&&(d+="?"),i+=d,a+=20,c&&(a+=-8),n&&(a+=-20),".*"===u&&(a+=-50)}e.push(a)}r.push(e)}if(n.strict&&n.end){const e=r.length-1;r[e][r[e].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");return{re:a,score:r,keys:s,parse:function(e){const t=e.match(a),n={};if(!t)return null;for(let r=1;r<t.length;r++){const e=t[r]||"",i=s[r-1];n[i.name]=e&&i.repeatable?e.split("/"):e}return n},stringify:function(t){let n="",r=!1;for(const i of e){r&&n.endsWith("/")||(n+="/"),r=!1;for(const e of i)if(0===e.type)n+=e.value;else if(1===e.type){const{value:s,repeatable:a,optional:o}=e,l=s in t?t[s]:"";if(SP(l)&&!a)throw new Error(`Provided param "${s}" is an array but it is not repeatable (* or + modifiers)`);const c=SP(l)?l.join("/"):l;if(!c){if(!o)throw new Error(`Missing required param "${s}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=c}}return n||"/"}}}(function(e){if(!e)return[[]];if("/"===e)return[[iR]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${c}": ${e}`)}let n=0,r=n;const i=[];let s;function a(){s&&i.push(s),s=[]}let o,l=0,c="",h="";function u(){c&&(0===n?s.push({type:0,value:c}):1===n||2===n||3===n?(s.length>1&&("*"===o||"+"===o)&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:h,repeatable:"*"===o||"+"===o,optional:"*"===o||"?"===o})):t("Invalid state to consume buffer"),c="")}function d(){c+=o}for(;l<e.length;)if(o=e[l++],"\\"!==o||2===n)switch(n){case 0:"/"===o?(c&&u(),a()):":"===o?(u(),n=1):d();break;case 4:d(),n=r;break;case 1:"("===o?n=2:sR.test(o)?d():(u(),n=0,"*"!==o&&"?"!==o&&"+"!==o&&l--);break;case 2:")"===o?"\\"==h[h.length-1]?h=h.slice(0,-1)+o:n=3:h+=o;break;case 3:u(),n=0,"*"!==o&&"?"!==o&&"+"!==o&&l--,h="";break;default:t("Unknown state")}else r=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${c}"`),u(),a(),i}(e.path),n),i=yP(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function oR(e,t){const n=[],r=new Map;function i(e,n,r){const o=!r,l=function(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:cR(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}(e);l.aliasOf=r&&r.record;const c=dR(t,e),h=[l];if("alias"in e){const t="string"==typeof e.alias?[e.alias]:e.alias;for(const e of t)h.push(yP({},l,{components:r?r.record.components:l.components,path:e,aliasOf:r?r.record:l}))}let u,d;for(const t of h){const{path:h}=t;if(n&&"/"!==h[0]){const e=n.record.path,r="/"===e[e.length-1]?"":"/";t.path=n.record.path+(h&&r+h)}if(u=aR(t,n,c),r?r.alias.push(u):(d=d||u,d!==u&&d.alias.push(u),o&&e.name&&!hR(u)&&s(e.name)),l.children){const e=l.children;for(let t=0;t<e.length;t++)i(e[t],u,r&&r.children[t])}r=r||u,a(u)}return d?()=>{s(d)}:wP}function s(e){if(XP(e)){const t=r.get(e);t&&(r.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(s),t.alias.forEach(s))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&r.delete(e.record.name),e.children.forEach(s),e.alias.forEach(s))}}function a(e){let t=0;for(;t<n.length&&nR(e,n[t])>=0&&(e.record.path!==n[t].record.path||!pR(e,n[t]));)t++;n.splice(t,0,e),e.record.name&&!hR(e)&&r.set(e.record.name,e)}return t=dR({strict:!1,end:!0,sensitive:!1},t),e.forEach((e=>i(e))),{addRoute:i,resolve:function(e,t){let i,s,a,o={};if("name"in e&&e.name){if(i=r.get(e.name),!i)throw JP(1,{location:e});a=i.record.name,o=yP(lR(t.params,i.keys.filter((e=>!e.optional)).map((e=>e.name))),e.params&&lR(e.params,i.keys.map((e=>e.name)))),s=i.stringify(o)}else if("path"in e)s=e.path,i=n.find((e=>e.re.test(s))),i&&(o=i.parse(s),a=i.record.name);else{if(i=t.name?r.get(t.name):n.find((e=>e.re.test(t.path))),!i)throw JP(1,{location:e,currentLocation:t});a=i.record.name,o=yP({},t.params,e.params),s=i.stringify(o)}const l=[];let c=i;for(;c;)l.unshift(c.record),c=c.parent;return{name:a,path:s,params:o,matched:l,meta:uR(l)}},removeRoute:s,getRoutes:function(){return n},getRecordMatcher:function(e){return r.get(e)}}}function lR(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function cR(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]="boolean"==typeof n?n:n[r];return t}function hR(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function uR(e){return e.reduce(((e,t)=>yP(e,t.meta)),{})}function dR(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function pR(e,t){return t.children.some((t=>t===e||pR(e,t)))}const fR=/#/g,mR=/&/g,gR=/\//g,vR=/=/g,_R=/\?/g,xR=/\+/g,yR=/%5B/g,bR=/%5D/g,wR=/%5E/g,SR=/%60/g,MR=/%7B/g,ER=/%7C/g,TR=/%7D/g,AR=/%20/g;function CR(e){return encodeURI(""+e).replace(ER,"|").replace(yR,"[").replace(bR,"]")}function PR(e){return CR(e).replace(xR,"%2B").replace(AR,"+").replace(fR,"%23").replace(mR,"%26").replace(SR,"`").replace(MR,"{").replace(TR,"}").replace(wR,"^")}function RR(e){return null==e?"":function(e){return CR(e).replace(fR,"%23").replace(_R,"%3F")}(e).replace(gR,"%2F")}function LR(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}function OR(e){const t={};if(""===e||"?"===e)return t;const n=("?"===e[0]?e.slice(1):e).split("&");for(let r=0;r<n.length;++r){const e=n[r].replace(xR," "),i=e.indexOf("="),s=LR(i<0?e:e.slice(0,i)),a=i<0?null:LR(e.slice(i+1));if(s in t){let e=t[s];SP(e)||(e=t[s]=[e]),e.push(a)}else t[s]=a}return t}function zR(e){let t="";for(let n in e){const r=e[n];if(n=PR(n).replace(vR,"%3D"),null==r){void 0!==r&&(t+=(t.length?"&":"")+n);continue}(SP(r)?r.map((e=>e&&PR(e))):[r&&PR(r)]).forEach((e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))}))}return t}function DR(e){const t={};for(const n in e){const r=e[n];void 0!==r&&(t[n]=SP(r)?r.map((e=>null==e?null:""+e)):null==r?r:""+r)}return t}const kR=Symbol(""),IR=Symbol(""),NR=Symbol(""),FR=Symbol(""),UR=Symbol("");function BR(){let e=[];return{add:function(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}},list:()=>e,reset:function(){e=[]}}}function HR(e,t,n,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((a,o)=>{const l=e=>{var l;!1===e?o(JP(4,{from:n,to:t})):e instanceof Error?o(e):"string"==typeof(l=e)||l&&"object"==typeof l?o(JP(2,{from:t,to:e})):(s&&r.enterCallbacks[i]===s&&"function"==typeof e&&s.push(e),a())},c=e.call(r&&r.instances[i],t,n,l);let h=Promise.resolve(c);e.length<3&&(h=h.then(l)),h.catch((e=>o(e)))}))}function GR(e,t,n,r){const i=[];for(const a of e)for(const e in a.components){let o=a.components[e];if("beforeRouteEnter"===t||a.instances[e])if("object"==typeof(s=o)||"displayName"in s||"props"in s||"__vccOpts"in s){const s=(o.__vccOpts||o)[t];s&&i.push(HR(s,n,r,a,e))}else{let s=o();i.push((()=>s.then((i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${e}" at "${a.path}"`));const s=(o=i).__esModule||"Module"===o[Symbol.toStringTag]?i.default:i;var o;a.components[e]=s;const l=(s.__vccOpts||s)[t];return l&&HR(l,n,r,a,e)()}))))}}var s;return i}function jR(e){const t=nn(NR),n=nn(FR),r=ci((()=>t.resolve(vt(e.to)))),i=ci((()=>{const{matched:e}=r.value,{length:t}=e,i=e[t-1],s=n.matched;if(!i||!s.length)return-1;const a=s.findIndex(AP.bind(null,i));if(a>-1)return a;const o=WR(e[t-2]);return t>1&&WR(i)===o&&s[s.length-1].path!==o?s.findIndex(AP.bind(null,e[t-2])):a})),s=ci((()=>i.value>-1&&function(e,t){for(const n in t){const r=t[n],i=e[n];if("string"==typeof r){if(r!==i)return!1}else if(!SP(i)||i.length!==r.length||r.some(((e,t)=>e!==i[t])))return!1}return!0}(n.params,r.value.params))),a=ci((()=>i.value>-1&&i.value===n.matched.length-1&&CP(n.params,r.value.params)));return{route:r,href:ci((()=>r.value.href)),isActive:s,isExactActive:a,navigate:function(n={}){return function(e){if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)return;if(e.defaultPrevented)return;if(void 0!==e.button&&0!==e.button)return;if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}e.preventDefault&&e.preventDefault();return!0}(n)?t[vt(e.replace)?"replace":"push"](vt(e.to)).catch(wP):Promise.resolve()}}}const VR=_n({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:jR,setup(e,{slots:t}){const n=et(jR(e)),{options:r}=nn(NR),i=ci((()=>({[XR(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[XR(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const r=t.default&&t.default(n);return e.custom?r:hi("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}});function WR(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const XR=(e,t,n)=>null!=e?e:null!=t?t:n;function qR(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const YR=_n({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=nn(UR),i=ci((()=>e.route||r.value)),s=nn(IR,0),a=ci((()=>{let e=vt(s);const{matched:t}=i.value;let n;for(;(n=t[e])&&!n.components;)e++;return e})),o=ci((()=>i.value.matched[a.value]));tn(IR,ci((()=>a.value+1))),tn(kR,o),tn(UR,i);const l=ft();return sn((()=>[l.value,o.value,e.name]),(([e,t,n],[r,i,s])=>{t&&(t.instances[n]=e,i&&i!==t&&e&&e===r&&(t.leaveGuards.size||(t.leaveGuards=i.leaveGuards),t.updateGuards.size||(t.updateGuards=i.updateGuards))),!e||!t||i&&AP(t,i)&&r||(t.enterCallbacks[n]||[]).forEach((t=>t(e)))}),{flush:"post"}),()=>{const r=i.value,s=e.name,a=o.value,c=a&&a.components[s];if(!c)return qR(n.default,{Component:c,route:r});const h=a.props[s],u=h?!0===h?r.params:"function"==typeof h?h(r):h:null,d=hi(c,yP({},u,t,{onVnodeUnmounted:e=>{e.component.isUnmounted&&(a.instances[s]=null)},ref:l}));return qR(n.default,{Component:d,route:r})||d}}});function ZR(e){return e.reduce(((e,t)=>e.then((()=>t()))),Promise.resolve())}const KR={class:"sidebar-wrap"},JR={class:"sidebar"},QR=Wi({__name:"index",setup(e){const t=ft(!0);return sn(t,(()=>{const e=document.querySelector(".stats-class");e&&(e.style.left=t.value?"150px":"0")}),{immediate:!0}),(e,n)=>{const r=Un("router-link");return Or(),Ir("div",KR,[jr("div",{class:c(["trigger","iconfont",t.value?"icon-shouqi":"icon-quanping"]),onClick:n[0]||(n[0]=e=>t.value=!t.value)},null,2),Nn(jr("div",JR,[(Or(!0),Ir(Tr,null,Gn(vt(nL),(e=>(Or(),Nr(r,{class:"sidebar-item",key:e.name,to:{name:e.name},title:e.name},{default:Kt((()=>[Xr(h(e.name),1)])),_:2},1032,["to","title"])))),128))],512),[[Hi,t.value]])])}}},[["__scopeId","data-v-89a01a27"]]),$R={class:"demo-layout"},eL={class:"demo-container"},tL=Wi({__name:"HomeView",setup:e=>(e,t)=>{const n=Un("RouterView");return Or(),Ir("div",$R,[Vr(QR),jr("div",eL,[Vr(n)])])}},[["__scopeId","data-v-9a8bbf65"]]);const nL=function(){const e=[],t=Object.assign({"../views/DemoViews/3DMap/index.vue":Sm,"../views/DemoViews/3DText/index.vue":Gg,"../views/DemoViews/AudioVisualizer/index.vue":Fy,"../views/DemoViews/CornellBox/index.vue":ub,"../views/DemoViews/Cube/index.vue":yb,"../views/DemoViews/CubeTexture/index.vue":Sb,"../views/DemoViews/Demo1/index.vue":Tb,"../views/DemoViews/Demo2/index.vue":Gb,"../views/DemoViews/Galaxy/index.vue":Wb,"../views/DemoViews/Galaxy_Shader/index.vue":Kb,"../views/DemoViews/LoadModel_gltf/index.vue":rS,"../views/DemoViews/LoadingProgress/index.vue":$A,"../views/DemoViews/Maze/index.vue":dC,"../views/DemoViews/MixHTMLandWebGL/index.vue":xC,"../views/DemoViews/ModifiedMaterial/index.vue":MC,"../views/DemoViews/Morph/index.vue":AC,"../views/DemoViews/PostProcessing/index.vue":QC,"../views/DemoViews/PostProcessing_custom/index.vue":rP,"../views/DemoViews/Sea/index.vue":lP,"../views/DemoViews/Shader/index.vue":pP,"../views/DemoViews/Shader2/index.vue":_P});return Object.keys(t).forEach((n=>{const r={path:n.replace("../views/DemoViews/","").replace("/index.vue",""),name:n.replace("../views/DemoViews/","").replace("/index.vue",""),component:t[n].default};e.push(r)})),e}(),rL=function(e){const t=oR(e.routes,e),n=e.parseQuery||OR,r=e.stringifyQuery||zR,i=e.history,s=BR(),a=BR(),o=BR(),l=mt(qP,!0);let c=qP;xP&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=bP.bind(null,(e=>""+e)),u=bP.bind(null,RR),d=bP.bind(null,LR);function p(e,s){if(s=yP({},s||l.value),"string"==typeof e){const r=EP(n,e,s.path),a=t.resolve({path:r.path},s),o=i.createHref(r.fullPath);return yP(r,a,{params:d(a.params),hash:LR(r.hash),redirectedFrom:void 0,href:o})}let a;if("path"in e)a=yP({},e,{path:EP(n,e.path,s.path).path});else{const t=yP({},e.params);for(const e in t)null==t[e]&&delete t[e];a=yP({},e,{params:u(e.params)}),s.params=u(s.params)}const o=t.resolve(a,s),c=e.hash||"";o.params=h(d(o.params));const p=function(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}(r,yP({},e,{hash:(f=c,CR(f).replace(MR,"{").replace(TR,"}").replace(wR,"^")),path:o.path}));var f;const m=i.createHref(p);return yP({fullPath:p,hash:c,query:r===zR?DR(e.query):e.query||{}},o,{redirectedFrom:void 0,href:m})}function f(e){return"string"==typeof e?EP(n,e,l.value.path):yP({},e)}function m(e,t){if(c!==e)return JP(8,{from:t,to:e})}function g(e){return _(e)}function v(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let r="function"==typeof n?n(e):n;return"string"==typeof r&&(r=r.includes("?")||r.includes("#")?r=f(r):{path:r},r.params={}),yP({query:e.query,hash:e.hash,params:"path"in r?{}:e.params},r)}}function _(e,t){const n=c=p(e),i=l.value,s=e.state,a=e.force,o=!0===e.replace,h=v(n);if(h)return _(yP(f(h),{state:"object"==typeof h?yP({},s,h.state):s,force:a,replace:o}),t||n);const u=n;let d;return u.redirectedFrom=t,!a&&function(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&AP(t.matched[r],n.matched[i])&&CP(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}(r,i,n)&&(d=JP(16,{to:u,from:i}),R(i,i,!0,!1)),(d?Promise.resolve(d):y(u,i)).catch((e=>QP(e)?QP(e,2)?e:P(e):C(e,u,i))).then((e=>{if(e){if(QP(e,2))return _(yP({replace:o},f(e.to),{state:"object"==typeof e.to?yP({},s,e.to.state):s,force:a}),t||u)}else e=w(u,i,!0,o,s);return b(u,i,e),e}))}function x(e,t){const n=m(e,t);return n?Promise.reject(n):Promise.resolve()}function y(e,t){let n;const[r,i,o]=function(e,t){const n=[],r=[],i=[],s=Math.max(t.matched.length,e.matched.length);for(let a=0;a<s;a++){const s=t.matched[a];s&&(e.matched.find((e=>AP(e,s)))?r.push(s):n.push(s));const o=e.matched[a];o&&(t.matched.find((e=>AP(e,o)))||i.push(o))}return[n,r,i]}(e,t);n=GR(r.reverse(),"beforeRouteLeave",e,t);for(const s of r)s.leaveGuards.forEach((r=>{n.push(HR(r,e,t))}));const l=x.bind(null,e,t);return n.push(l),ZR(n).then((()=>{n=[];for(const r of s.list())n.push(HR(r,e,t));return n.push(l),ZR(n)})).then((()=>{n=GR(i,"beforeRouteUpdate",e,t);for(const r of i)r.updateGuards.forEach((r=>{n.push(HR(r,e,t))}));return n.push(l),ZR(n)})).then((()=>{n=[];for(const r of e.matched)if(r.beforeEnter&&!t.matched.includes(r))if(SP(r.beforeEnter))for(const i of r.beforeEnter)n.push(HR(i,e,t));else n.push(HR(r.beforeEnter,e,t));return n.push(l),ZR(n)})).then((()=>(e.matched.forEach((e=>e.enterCallbacks={})),n=GR(o,"beforeRouteEnter",e,t),n.push(l),ZR(n)))).then((()=>{n=[];for(const r of a.list())n.push(HR(r,e,t));return n.push(l),ZR(n)})).catch((e=>QP(e,8)?e:Promise.reject(e)))}function b(e,t,n){for(const r of o.list())r(e,t,n)}function w(e,t,n,r,s){const a=m(e,t);if(a)return a;const o=t===qP,c=xP?history.state:{};n&&(r||o?i.replace(e.fullPath,yP({scroll:o&&c&&c.scroll},s)):i.push(e.fullPath,s)),l.value=e,R(e,t,n,o),P()}let S;function M(){S||(S=i.listen(((e,t,n)=>{if(!D.listening)return;const r=p(e),s=v(r);if(s)return void _(yP(s,{replace:!0}),r).catch(wP);c=r;const a=l.value;var o,h;xP&&(o=BP(a.fullPath,n.delta),h=FP(),HP.set(o,h)),y(r,a).catch((e=>QP(e,12)?e:QP(e,2)?(_(e.to,r).then((e=>{QP(e,20)&&!n.delta&&n.type===LP.pop&&i.go(-1,!1)})).catch(wP),Promise.reject()):(n.delta&&i.go(-n.delta,!1),C(e,r,a)))).then((e=>{(e=e||w(r,a,!1))&&(n.delta&&!QP(e,8)?i.go(-n.delta,!1):n.type===LP.pop&&QP(e,20)&&i.go(-1,!1)),b(r,a,e)})).catch(wP)})))}let E,T=BR(),A=BR();function C(e,t,n){P(e);const r=A.list();return r.length&&r.forEach((r=>r(e,t,n))),Promise.reject(e)}function P(e){return E||(E=!e,M(),T.list().forEach((([t,n])=>e?n(e):t())),T.reset()),e}function R(t,n,r,i){const{scrollBehavior:s}=e;if(!xP||!s)return Promise.resolve();const a=!r&&function(e){const t=HP.get(e);return HP.delete(e),t}(BP(t.fullPath,0))||(i||!r)&&history.state&&history.state.scroll||null;return Dt().then((()=>s(t,n,a))).then((e=>e&&UP(e))).catch((e=>C(e,t,n)))}const L=e=>i.go(e);let O;const z=new Set,D={currentRoute:l,listening:!0,addRoute:function(e,n){let r,i;return XP(e)?(r=t.getRecordMatcher(e),i=n):i=e,t.addRoute(i,r)},removeRoute:function(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)},hasRoute:function(e){return!!t.getRecordMatcher(e)},getRoutes:function(){return t.getRoutes().map((e=>e.record))},resolve:p,options:e,push:g,replace:function(e){return g(yP(f(e),{replace:!0}))},go:L,back:()=>L(-1),forward:()=>L(1),beforeEach:s.add,beforeResolve:a.add,afterEach:o.add,onError:A.add,isReady:function(){return E&&l.value!==qP?Promise.resolve():new Promise(((e,t)=>{T.add([e,t])}))},install(e){e.component("RouterLink",VR),e.component("RouterView",YR),e.config.globalProperties.$router=this,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>vt(l)}),xP&&!O&&l.value===qP&&(O=!0,g(i.location).catch((e=>{})));const t={};for(const r in qP)t[r]=ci((()=>l.value[r]));e.provide(NR,this),e.provide(FR,et(t)),e.provide(UR,l);const n=e.unmount;z.add(e),e.unmount=function(){z.delete(e),z.size<1&&(c=qP,S&&S(),S=null,l.value=qP,O=!1,E=!1),n()}}};return D}({history:((iL=location.host?iL||location.pathname+location.search:"").includes("#")||(iL+="#"),WP(iL)),routes:[{path:"",name:"home",component:tL,children:nL},{path:"/about",name:"about",component:()=>{return e=()=>import("./AboutView.860b054e.js"),(t=["assets/AboutView.860b054e.js","assets/AboutView.5e08fe4d.css"])&&0!==t.length?Promise.all(t.map((e=>{if((e=function(e){return"/three-demo/"+e}(e))in qi)return;qi[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e())):e();var e,t}}]});var iL;const sL={key:0,class:"code-content"},aL={class:"code-chunkname"},oL=Wi({__name:"index",props:{code:{required:!0,validator:e=>"string"==typeof e||!(!Object.keys(e).length||!Object.values(e).every((e=>"string"==typeof e)))}},setup(e){const t=e,n=ci((()=>{let e="";return e="string"==typeof t.code?{"":t.code}:t.code,e})),r=ft(!1);return(e,t)=>{const i=Un("highlightjs"),s=Un("TransitionFade");return Or(),Ir(Tr,null,[jr("div",{class:"iconfont icon-code btn",onClick:t[0]||(t[0]=e=>r.value=!r.value)}),Vr(s,null,{default:Kt((()=>[r.value?(Or(),Ir("div",sL,[(Or(!0),Ir(Tr,null,Gn(vt(n),((e,t)=>(Or(),Ir("div",{class:"code-chunk",key:t},[jr("div",aL,h(t),1),Vr(i,{lang:"js",code:e},null,8,["code"])])))),128))])):qr("",!0)])),_:1})],64)}}},[["__scopeId","data-v-c26841eb"]]);var lL,cL={exports:{}};lL=cL,function(){function e(e){var t={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:"Remove only spaces, ' and \" from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids",type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `«««` and `»»»` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(!1===e)return JSON.parse(JSON.stringify(t));var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r].defaultValue);return n}var t={},n={},r={},i=e(!0),s="vanilla",a={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:e(!0),allOn:function(){var t=e(!0),n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=!0);return n}()};function o(e,n){var r=n?"Error in "+n+" extension->":"Error in unnamed extension",i={valid:!0,error:""};t.helper.isArray(e)||(e=[e]);for(var s=0;s<e.length;++s){var a=r+" sub-extension "+s+": ",o=e[s];if("object"!=typeof o)return i.valid=!1,i.error=a+"must be an object, but "+typeof o+" given",i;if(!t.helper.isString(o.type))return i.valid=!1,i.error=a+'property "type" must be a string, but '+typeof o.type+" given",i;var l=o.type=o.type.toLowerCase();if("language"===l&&(l=o.type="lang"),"html"===l&&(l=o.type="output"),"lang"!==l&&"output"!==l&&"listener"!==l)return i.valid=!1,i.error=a+"type "+l+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',i;if("listener"===l){if(t.helper.isUndefined(o.listeners))return i.valid=!1,i.error=a+'. Extensions of type "listener" must have a property called "listeners"',i}else if(t.helper.isUndefined(o.filter)&&t.helper.isUndefined(o.regex))return i.valid=!1,i.error=a+l+' extensions must define either a "regex" property or a "filter" method',i;if(o.listeners){if("object"!=typeof o.listeners)return i.valid=!1,i.error=a+'"listeners" property must be an object but '+typeof o.listeners+" given",i;for(var c in o.listeners)if(o.listeners.hasOwnProperty(c)&&"function"!=typeof o.listeners[c])return i.valid=!1,i.error=a+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+c+" must be a function but "+typeof o.listeners[c]+" given",i}if(o.filter){if("function"!=typeof o.filter)return i.valid=!1,i.error=a+'"filter" must be a function, but '+typeof o.filter+" given",i}else if(o.regex){if(t.helper.isString(o.regex)&&(o.regex=new RegExp(o.regex,"g")),!(o.regex instanceof RegExp))return i.valid=!1,i.error=a+'"regex" property must either be a string or a RegExp object, but '+typeof o.regex+" given",i;if(t.helper.isUndefined(o.replace))return i.valid=!1,i.error=a+'"regex" extensions must implement a replace string or function',i}}return i}function l(e,t){return"¨E"+t.charCodeAt(0)+"E"}t.helper={},t.extensions={},t.setOption=function(e,t){return i[e]=t,this},t.getOption=function(e){return i[e]},t.getOptions=function(){return i},t.resetOptions=function(){i=e(!0)},t.setFlavor=function(e){if(!a.hasOwnProperty(e))throw Error(e+" flavor was not found");t.resetOptions();var n=a[e];for(var r in s=e,n)n.hasOwnProperty(r)&&(i[r]=n[r])},t.getFlavor=function(){return s},t.getFlavorOptions=function(e){if(a.hasOwnProperty(e))return a[e]},t.getDefaultOptions=function(t){return e(t)},t.subParser=function(e,r){if(t.helper.isString(e)){if(void 0===r){if(n.hasOwnProperty(e))return n[e];throw Error("SubParser named "+e+" not registered!")}n[e]=r}},t.extension=function(e,n){if(!t.helper.isString(e))throw Error("Extension 'name' must be a string");if(e=t.helper.stdExtName(e),t.helper.isUndefined(n)){if(!r.hasOwnProperty(e))throw Error("Extension named "+e+" is not registered!");return r[e]}"function"==typeof n&&(n=n()),t.helper.isArray(n)||(n=[n]);var i=o(n,e);if(!i.valid)throw Error(i.error);r[e]=n},t.getAllExtensions=function(){return r},t.removeExtension=function(e){delete r[e]},t.resetExtensions=function(){r={}},t.validateExtension=function(e){return!!o(e,null).valid},t.hasOwnProperty("helper")||(t.helper={}),t.helper.isString=function(e){return"string"==typeof e||e instanceof String},t.helper.isFunction=function(e){return e&&"[object Function]"==={}.toString.call(e)},t.helper.isArray=function(e){return Array.isArray(e)},t.helper.isUndefined=function(e){return void 0===e},t.helper.forEach=function(e,n){if(t.helper.isUndefined(e))throw new Error("obj param is required");if(t.helper.isUndefined(n))throw new Error("callback param is required");if(!t.helper.isFunction(n))throw new Error("callback param must be a function/closure");if("function"==typeof e.forEach)e.forEach(n);else if(t.helper.isArray(e))for(var r=0;r<e.length;r++)n(e[r],r,e);else{if("object"!=typeof e)throw new Error("obj does not seem to be an array or an iterable object");for(var i in e)e.hasOwnProperty(i)&&n(e[i],i,e)}},t.helper.stdExtName=function(e){return e.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()},t.helper.escapeCharactersCallback=l,t.helper.escapeCharacters=function(e,t,n){var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var i=new RegExp(r,"g");return e=e.replace(i,l)},t.helper.unescapeHTMLEntities=function(e){return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var c=function(e,t,n,r){var i,s,a,o,l,c=r||"",h=c.indexOf("g")>-1,u=new RegExp(t+"|"+n,"g"+c.replace(/g/g,"")),d=new RegExp(t,c.replace(/g/g,"")),p=[];do{for(i=0;a=u.exec(e);)if(d.test(a[0]))i++||(o=(s=u.lastIndex)-a[0].length);else if(i&&!--i){l=a.index+a[0].length;var f={left:{start:o,end:s},match:{start:s,end:a.index},right:{start:a.index,end:l},wholeMatch:{start:o,end:l}};if(p.push(f),!h)return p}}while(i&&(u.lastIndex=s));return p};t.helper.matchRecursiveRegExp=function(e,t,n,r){for(var i=c(e,t,n,r),s=[],a=0;a<i.length;++a)s.push([e.slice(i[a].wholeMatch.start,i[a].wholeMatch.end),e.slice(i[a].match.start,i[a].match.end),e.slice(i[a].left.start,i[a].left.end),e.slice(i[a].right.start,i[a].right.end)]);return s},t.helper.replaceRecursiveRegExp=function(e,n,r,i,s){if(!t.helper.isFunction(n)){var a=n;n=function(){return a}}var o=c(e,r,i,s),l=e,h=o.length;if(h>0){var u=[];0!==o[0].wholeMatch.start&&u.push(e.slice(0,o[0].wholeMatch.start));for(var d=0;d<h;++d)u.push(n(e.slice(o[d].wholeMatch.start,o[d].wholeMatch.end),e.slice(o[d].match.start,o[d].match.end),e.slice(o[d].left.start,o[d].left.end),e.slice(o[d].right.start,o[d].right.end))),d<h-1&&u.push(e.slice(o[d].wholeMatch.end,o[d+1].wholeMatch.start));o[h-1].wholeMatch.end<e.length&&u.push(e.slice(o[h-1].wholeMatch.end)),l=u.join("")}return l},t.helper.regexIndexOf=function(e,n,r){if(!t.helper.isString(e))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(n instanceof RegExp==0)throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var i=e.substring(r||0).search(n);return i>=0?i+(r||0):i},t.helper.splitAtIndex=function(e,n){if(!t.helper.isString(e))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[e.substring(0,n),e.substring(n)]},t.helper.encodeEmailAddress=function(e){var t=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+e.charCodeAt(0).toString(16)+";"},function(e){return e}];return e=e.replace(/./g,(function(e){if("@"===e)e=t[Math.floor(2*Math.random())](e);else{var n=Math.random();e=n>.9?t[2](e):n>.45?t[1](e):t[0](e)}return e}))},t.helper.padEnd=function(e,t,n){return t>>=0,n=String(n||" "),e.length>t?String(e):((t-=e.length)>n.length&&(n+=n.repeat(t/n.length)),String(e)+n.slice(0,t))},"undefined"==typeof console&&(console={warn:function(e){alert(e)},log:function(e){alert(e)},error:function(e){throw e}}),t.helper.regexes={asteriskDashAndColon:/([*_:~])/g},t.helper.emojis={"+1":"👍","-1":"👎",100:"💯",1234:"🔢","1st_place_medal":"🥇","2nd_place_medal":"🥈","3rd_place_medal":"🥉","8ball":"🎱",a:"🅰️",ab:"🆎",abc:"🔤",abcd:"🔡",accept:"🉑",aerial_tramway:"🚡",airplane:"✈️",alarm_clock:"⏰",alembic:"⚗️",alien:"👽",ambulance:"🚑",amphora:"🏺",anchor:"⚓️",angel:"👼",anger:"💢",angry:"😠",anguished:"😧",ant:"🐜",apple:"🍎",aquarius:"♒️",aries:"♈️",arrow_backward:"◀️",arrow_double_down:"⏬",arrow_double_up:"⏫",arrow_down:"⬇️",arrow_down_small:"🔽",arrow_forward:"▶️",arrow_heading_down:"⤵️",arrow_heading_up:"⤴️",arrow_left:"⬅️",arrow_lower_left:"↙️",arrow_lower_right:"↘️",arrow_right:"➡️",arrow_right_hook:"↪️",arrow_up:"⬆️",arrow_up_down:"↕️",arrow_up_small:"🔼",arrow_upper_left:"↖️",arrow_upper_right:"↗️",arrows_clockwise:"🔃",arrows_counterclockwise:"🔄",art:"🎨",articulated_lorry:"🚛",artificial_satellite:"🛰",astonished:"😲",athletic_shoe:"👟",atm:"🏧",atom_symbol:"⚛️",avocado:"🥑",b:"🅱️",baby:"👶",baby_bottle:"🍼",baby_chick:"🐤",baby_symbol:"🚼",back:"🔙",bacon:"🥓",badminton:"🏸",baggage_claim:"🛄",baguette_bread:"🥖",balance_scale:"⚖️",balloon:"🎈",ballot_box:"🗳",ballot_box_with_check:"☑️",bamboo:"🎍",banana:"🍌",bangbang:"‼️",bank:"🏦",bar_chart:"📊",barber:"💈",baseball:"⚾️",basketball:"🏀",basketball_man:"⛹️",basketball_woman:"⛹️&zwj;♀️",bat:"🦇",bath:"🛀",bathtub:"🛁",battery:"🔋",beach_umbrella:"🏖",bear:"🐻",bed:"🛏",bee:"🐝",beer:"🍺",beers:"🍻",beetle:"🐞",beginner:"🔰",bell:"🔔",bellhop_bell:"🛎",bento:"🍱",biking_man:"🚴",bike:"🚲",biking_woman:"🚴&zwj;♀️",bikini:"👙",biohazard:"☣️",bird:"🐦",birthday:"🎂",black_circle:"⚫️",black_flag:"🏴",black_heart:"🖤",black_joker:"🃏",black_large_square:"⬛️",black_medium_small_square:"◾️",black_medium_square:"◼️",black_nib:"✒️",black_small_square:"▪️",black_square_button:"🔲",blonde_man:"👱",blonde_woman:"👱&zwj;♀️",blossom:"🌼",blowfish:"🐡",blue_book:"📘",blue_car:"🚙",blue_heart:"💙",blush:"😊",boar:"🐗",boat:"⛵️",bomb:"💣",book:"📖",bookmark:"🔖",bookmark_tabs:"📑",books:"📚",boom:"💥",boot:"👢",bouquet:"💐",bowing_man:"🙇",bow_and_arrow:"🏹",bowing_woman:"🙇&zwj;♀️",bowling:"🎳",boxing_glove:"🥊",boy:"👦",bread:"🍞",bride_with_veil:"👰",bridge_at_night:"🌉",briefcase:"💼",broken_heart:"💔",bug:"🐛",building_construction:"🏗",bulb:"💡",bullettrain_front:"🚅",bullettrain_side:"🚄",burrito:"🌯",bus:"🚌",business_suit_levitating:"🕴",busstop:"🚏",bust_in_silhouette:"👤",busts_in_silhouette:"👥",butterfly:"🦋",cactus:"🌵",cake:"🍰",calendar:"📆",call_me_hand:"🤙",calling:"📲",camel:"🐫",camera:"📷",camera_flash:"📸",camping:"🏕",cancer:"♋️",candle:"🕯",candy:"🍬",canoe:"🛶",capital_abcd:"🔠",capricorn:"♑️",car:"🚗",card_file_box:"🗃",card_index:"📇",card_index_dividers:"🗂",carousel_horse:"🎠",carrot:"🥕",cat:"🐱",cat2:"🐈",cd:"💿",chains:"⛓",champagne:"🍾",chart:"💹",chart_with_downwards_trend:"📉",chart_with_upwards_trend:"📈",checkered_flag:"🏁",cheese:"🧀",cherries:"🍒",cherry_blossom:"🌸",chestnut:"🌰",chicken:"🐔",children_crossing:"🚸",chipmunk:"🐿",chocolate_bar:"🍫",christmas_tree:"🎄",church:"⛪️",cinema:"🎦",circus_tent:"🎪",city_sunrise:"🌇",city_sunset:"🌆",cityscape:"🏙",cl:"🆑",clamp:"🗜",clap:"👏",clapper:"🎬",classical_building:"🏛",clinking_glasses:"🥂",clipboard:"📋",clock1:"🕐",clock10:"🕙",clock1030:"🕥",clock11:"🕚",clock1130:"🕦",clock12:"🕛",clock1230:"🕧",clock130:"🕜",clock2:"🕑",clock230:"🕝",clock3:"🕒",clock330:"🕞",clock4:"🕓",clock430:"🕟",clock5:"🕔",clock530:"🕠",clock6:"🕕",clock630:"🕡",clock7:"🕖",clock730:"🕢",clock8:"🕗",clock830:"🕣",clock9:"🕘",clock930:"🕤",closed_book:"📕",closed_lock_with_key:"🔐",closed_umbrella:"🌂",cloud:"☁️",cloud_with_lightning:"🌩",cloud_with_lightning_and_rain:"⛈",cloud_with_rain:"🌧",cloud_with_snow:"🌨",clown_face:"🤡",clubs:"♣️",cocktail:"🍸",coffee:"☕️",coffin:"⚰️",cold_sweat:"😰",comet:"☄️",computer:"💻",computer_mouse:"🖱",confetti_ball:"🎊",confounded:"😖",confused:"😕",congratulations:"㊗️",construction:"🚧",construction_worker_man:"👷",construction_worker_woman:"👷&zwj;♀️",control_knobs:"🎛",convenience_store:"🏪",cookie:"🍪",cool:"🆒",policeman:"👮",copyright:"©️",corn:"🌽",couch_and_lamp:"🛋",couple:"👫",couple_with_heart_woman_man:"💑",couple_with_heart_man_man:"👨&zwj;❤️&zwj;👨",couple_with_heart_woman_woman:"👩&zwj;❤️&zwj;👩",couplekiss_man_man:"👨&zwj;❤️&zwj;💋&zwj;👨",couplekiss_man_woman:"💏",couplekiss_woman_woman:"👩&zwj;❤️&zwj;💋&zwj;👩",cow:"🐮",cow2:"🐄",cowboy_hat_face:"🤠",crab:"🦀",crayon:"🖍",credit_card:"💳",crescent_moon:"🌙",cricket:"🏏",crocodile:"🐊",croissant:"🥐",crossed_fingers:"🤞",crossed_flags:"🎌",crossed_swords:"⚔️",crown:"👑",cry:"😢",crying_cat_face:"😿",crystal_ball:"🔮",cucumber:"🥒",cupid:"💘",curly_loop:"➰",currency_exchange:"💱",curry:"🍛",custard:"🍮",customs:"🛃",cyclone:"🌀",dagger:"🗡",dancer:"💃",dancing_women:"👯",dancing_men:"👯&zwj;♂️",dango:"🍡",dark_sunglasses:"🕶",dart:"🎯",dash:"💨",date:"📅",deciduous_tree:"🌳",deer:"🦌",department_store:"🏬",derelict_house:"🏚",desert:"🏜",desert_island:"🏝",desktop_computer:"🖥",male_detective:"🕵️",diamond_shape_with_a_dot_inside:"💠",diamonds:"♦️",disappointed:"😞",disappointed_relieved:"😥",dizzy:"💫",dizzy_face:"😵",do_not_litter:"🚯",dog:"🐶",dog2:"🐕",dollar:"💵",dolls:"🎎",dolphin:"🐬",door:"🚪",doughnut:"🍩",dove:"🕊",dragon:"🐉",dragon_face:"🐲",dress:"👗",dromedary_camel:"🐪",drooling_face:"🤤",droplet:"💧",drum:"🥁",duck:"🦆",dvd:"📀","e-mail":"📧",eagle:"🦅",ear:"👂",ear_of_rice:"🌾",earth_africa:"🌍",earth_americas:"🌎",earth_asia:"🌏",egg:"🥚",eggplant:"🍆",eight_pointed_black_star:"✴️",eight_spoked_asterisk:"✳️",electric_plug:"🔌",elephant:"🐘",email:"✉️",end:"🔚",envelope_with_arrow:"📩",euro:"💶",european_castle:"🏰",european_post_office:"🏤",evergreen_tree:"🌲",exclamation:"❗️",expressionless:"😑",eye:"👁",eye_speech_bubble:"👁&zwj;🗨",eyeglasses:"👓",eyes:"👀",face_with_head_bandage:"🤕",face_with_thermometer:"🤒",fist_oncoming:"👊",factory:"🏭",fallen_leaf:"🍂",family_man_woman_boy:"👪",family_man_boy:"👨&zwj;👦",family_man_boy_boy:"👨&zwj;👦&zwj;👦",family_man_girl:"👨&zwj;👧",family_man_girl_boy:"👨&zwj;👧&zwj;👦",family_man_girl_girl:"👨&zwj;👧&zwj;👧",family_man_man_boy:"👨&zwj;👨&zwj;👦",family_man_man_boy_boy:"👨&zwj;👨&zwj;👦&zwj;👦",family_man_man_girl:"👨&zwj;👨&zwj;👧",family_man_man_girl_boy:"👨&zwj;👨&zwj;👧&zwj;👦",family_man_man_girl_girl:"👨&zwj;👨&zwj;👧&zwj;👧",family_man_woman_boy_boy:"👨&zwj;👩&zwj;👦&zwj;👦",family_man_woman_girl:"👨&zwj;👩&zwj;👧",family_man_woman_girl_boy:"👨&zwj;👩&zwj;👧&zwj;👦",family_man_woman_girl_girl:"👨&zwj;👩&zwj;👧&zwj;👧",family_woman_boy:"👩&zwj;👦",family_woman_boy_boy:"👩&zwj;👦&zwj;👦",family_woman_girl:"👩&zwj;👧",family_woman_girl_boy:"👩&zwj;👧&zwj;👦",family_woman_girl_girl:"👩&zwj;👧&zwj;👧",family_woman_woman_boy:"👩&zwj;👩&zwj;👦",family_woman_woman_boy_boy:"👩&zwj;👩&zwj;👦&zwj;👦",family_woman_woman_girl:"👩&zwj;👩&zwj;👧",family_woman_woman_girl_boy:"👩&zwj;👩&zwj;👧&zwj;👦",family_woman_woman_girl_girl:"👩&zwj;👩&zwj;👧&zwj;👧",fast_forward:"⏩",fax:"📠",fearful:"😨",feet:"🐾",female_detective:"🕵️&zwj;♀️",ferris_wheel:"🎡",ferry:"⛴",field_hockey:"🏑",file_cabinet:"🗄",file_folder:"📁",film_projector:"📽",film_strip:"🎞",fire:"🔥",fire_engine:"🚒",fireworks:"🎆",first_quarter_moon:"🌓",first_quarter_moon_with_face:"🌛",fish:"🐟",fish_cake:"🍥",fishing_pole_and_fish:"🎣",fist_raised:"✊",fist_left:"🤛",fist_right:"🤜",flags:"🎏",flashlight:"🔦",fleur_de_lis:"⚜️",flight_arrival:"🛬",flight_departure:"🛫",floppy_disk:"💾",flower_playing_cards:"🎴",flushed:"😳",fog:"🌫",foggy:"🌁",football:"🏈",footprints:"👣",fork_and_knife:"🍴",fountain:"⛲️",fountain_pen:"🖋",four_leaf_clover:"🍀",fox_face:"🦊",framed_picture:"🖼",free:"🆓",fried_egg:"🍳",fried_shrimp:"🍤",fries:"🍟",frog:"🐸",frowning:"😦",frowning_face:"☹️",frowning_man:"🙍&zwj;♂️",frowning_woman:"🙍",middle_finger:"🖕",fuelpump:"⛽️",full_moon:"🌕",full_moon_with_face:"🌝",funeral_urn:"⚱️",game_die:"🎲",gear:"⚙️",gem:"💎",gemini:"♊️",ghost:"👻",gift:"🎁",gift_heart:"💝",girl:"👧",globe_with_meridians:"🌐",goal_net:"🥅",goat:"🐐",golf:"⛳️",golfing_man:"🏌️",golfing_woman:"🏌️&zwj;♀️",gorilla:"🦍",grapes:"🍇",green_apple:"🍏",green_book:"📗",green_heart:"💚",green_salad:"🥗",grey_exclamation:"❕",grey_question:"❔",grimacing:"😬",grin:"😁",grinning:"😀",guardsman:"💂",guardswoman:"💂&zwj;♀️",guitar:"🎸",gun:"🔫",haircut_woman:"💇",haircut_man:"💇&zwj;♂️",hamburger:"🍔",hammer:"🔨",hammer_and_pick:"⚒",hammer_and_wrench:"🛠",hamster:"🐹",hand:"✋",handbag:"👜",handshake:"🤝",hankey:"💩",hatched_chick:"🐥",hatching_chick:"🐣",headphones:"🎧",hear_no_evil:"🙉",heart:"❤️",heart_decoration:"💟",heart_eyes:"😍",heart_eyes_cat:"😻",heartbeat:"💓",heartpulse:"💗",hearts:"♥️",heavy_check_mark:"✔️",heavy_division_sign:"➗",heavy_dollar_sign:"💲",heavy_heart_exclamation:"❣️",heavy_minus_sign:"➖",heavy_multiplication_x:"✖️",heavy_plus_sign:"➕",helicopter:"🚁",herb:"🌿",hibiscus:"🌺",high_brightness:"🔆",high_heel:"👠",hocho:"🔪",hole:"🕳",honey_pot:"🍯",horse:"🐴",horse_racing:"🏇",hospital:"🏥",hot_pepper:"🌶",hotdog:"🌭",hotel:"🏨",hotsprings:"♨️",hourglass:"⌛️",hourglass_flowing_sand:"⏳",house:"🏠",house_with_garden:"🏡",houses:"🏘",hugs:"🤗",hushed:"😯",ice_cream:"🍨",ice_hockey:"🏒",ice_skate:"⛸",icecream:"🍦",id:"🆔",ideograph_advantage:"🉐",imp:"👿",inbox_tray:"📥",incoming_envelope:"📨",tipping_hand_woman:"💁",information_source:"ℹ️",innocent:"😇",interrobang:"⁉️",iphone:"📱",izakaya_lantern:"🏮",jack_o_lantern:"🎃",japan:"🗾",japanese_castle:"🏯",japanese_goblin:"👺",japanese_ogre:"👹",jeans:"👖",joy:"😂",joy_cat:"😹",joystick:"🕹",kaaba:"🕋",key:"🔑",keyboard:"⌨️",keycap_ten:"🔟",kick_scooter:"🛴",kimono:"👘",kiss:"💋",kissing:"😗",kissing_cat:"😽",kissing_closed_eyes:"😚",kissing_heart:"😘",kissing_smiling_eyes:"😙",kiwi_fruit:"🥝",koala:"🐨",koko:"🈁",label:"🏷",large_blue_circle:"🔵",large_blue_diamond:"🔷",large_orange_diamond:"🔶",last_quarter_moon:"🌗",last_quarter_moon_with_face:"🌜",latin_cross:"✝️",laughing:"😆",leaves:"🍃",ledger:"📒",left_luggage:"🛅",left_right_arrow:"↔️",leftwards_arrow_with_hook:"↩️",lemon:"🍋",leo:"♌️",leopard:"🐆",level_slider:"🎚",libra:"♎️",light_rail:"🚈",link:"🔗",lion:"🦁",lips:"👄",lipstick:"💄",lizard:"🦎",lock:"🔒",lock_with_ink_pen:"🔏",lollipop:"🍭",loop:"➿",loud_sound:"🔊",loudspeaker:"📢",love_hotel:"🏩",love_letter:"💌",low_brightness:"🔅",lying_face:"🤥",m:"Ⓜ️",mag:"🔍",mag_right:"🔎",mahjong:"🀄️",mailbox:"📫",mailbox_closed:"📪",mailbox_with_mail:"📬",mailbox_with_no_mail:"📭",man:"👨",man_artist:"👨&zwj;🎨",man_astronaut:"👨&zwj;🚀",man_cartwheeling:"🤸&zwj;♂️",man_cook:"👨&zwj;🍳",man_dancing:"🕺",man_facepalming:"🤦&zwj;♂️",man_factory_worker:"👨&zwj;🏭",man_farmer:"👨&zwj;🌾",man_firefighter:"👨&zwj;🚒",man_health_worker:"👨&zwj;⚕️",man_in_tuxedo:"🤵",man_judge:"👨&zwj;⚖️",man_juggling:"🤹&zwj;♂️",man_mechanic:"👨&zwj;🔧",man_office_worker:"👨&zwj;💼",man_pilot:"👨&zwj;✈️",man_playing_handball:"🤾&zwj;♂️",man_playing_water_polo:"🤽&zwj;♂️",man_scientist:"👨&zwj;🔬",man_shrugging:"🤷&zwj;♂️",man_singer:"👨&zwj;🎤",man_student:"👨&zwj;🎓",man_teacher:"👨&zwj;🏫",man_technologist:"👨&zwj;💻",man_with_gua_pi_mao:"👲",man_with_turban:"👳",tangerine:"🍊",mans_shoe:"👞",mantelpiece_clock:"🕰",maple_leaf:"🍁",martial_arts_uniform:"🥋",mask:"😷",massage_woman:"💆",massage_man:"💆&zwj;♂️",meat_on_bone:"🍖",medal_military:"🎖",medal_sports:"🏅",mega:"📣",melon:"🍈",memo:"📝",men_wrestling:"🤼&zwj;♂️",menorah:"🕎",mens:"🚹",metal:"🤘",metro:"🚇",microphone:"🎤",microscope:"🔬",milk_glass:"🥛",milky_way:"🌌",minibus:"🚐",minidisc:"💽",mobile_phone_off:"📴",money_mouth_face:"🤑",money_with_wings:"💸",moneybag:"💰",monkey:"🐒",monkey_face:"🐵",monorail:"🚝",moon:"🌔",mortar_board:"🎓",mosque:"🕌",motor_boat:"🛥",motor_scooter:"🛵",motorcycle:"🏍",motorway:"🛣",mount_fuji:"🗻",mountain:"⛰",mountain_biking_man:"🚵",mountain_biking_woman:"🚵&zwj;♀️",mountain_cableway:"🚠",mountain_railway:"🚞",mountain_snow:"🏔",mouse:"🐭",mouse2:"🐁",movie_camera:"🎥",moyai:"🗿",mrs_claus:"🤶",muscle:"💪",mushroom:"🍄",musical_keyboard:"🎹",musical_note:"🎵",musical_score:"🎼",mute:"🔇",nail_care:"💅",name_badge:"📛",national_park:"🏞",nauseated_face:"🤢",necktie:"👔",negative_squared_cross_mark:"❎",nerd_face:"🤓",neutral_face:"😐",new:"🆕",new_moon:"🌑",new_moon_with_face:"🌚",newspaper:"📰",newspaper_roll:"🗞",next_track_button:"⏭",ng:"🆖",no_good_man:"🙅&zwj;♂️",no_good_woman:"🙅",night_with_stars:"🌃",no_bell:"🔕",no_bicycles:"🚳",no_entry:"⛔️",no_entry_sign:"🚫",no_mobile_phones:"📵",no_mouth:"😶",no_pedestrians:"🚷",no_smoking:"🚭","non-potable_water":"🚱",nose:"👃",notebook:"📓",notebook_with_decorative_cover:"📔",notes:"🎶",nut_and_bolt:"🔩",o:"⭕️",o2:"🅾️",ocean:"🌊",octopus:"🐙",oden:"🍢",office:"🏢",oil_drum:"🛢",ok:"🆗",ok_hand:"👌",ok_man:"🙆&zwj;♂️",ok_woman:"🙆",old_key:"🗝",older_man:"👴",older_woman:"👵",om:"🕉",on:"🔛",oncoming_automobile:"🚘",oncoming_bus:"🚍",oncoming_police_car:"🚔",oncoming_taxi:"🚖",open_file_folder:"📂",open_hands:"👐",open_mouth:"😮",open_umbrella:"☂️",ophiuchus:"⛎",orange_book:"📙",orthodox_cross:"☦️",outbox_tray:"📤",owl:"🦉",ox:"🐂",package:"📦",page_facing_up:"📄",page_with_curl:"📃",pager:"📟",paintbrush:"🖌",palm_tree:"🌴",pancakes:"🥞",panda_face:"🐼",paperclip:"📎",paperclips:"🖇",parasol_on_ground:"⛱",parking:"🅿️",part_alternation_mark:"〽️",partly_sunny:"⛅️",passenger_ship:"🛳",passport_control:"🛂",pause_button:"⏸",peace_symbol:"☮️",peach:"🍑",peanuts:"🥜",pear:"🍐",pen:"🖊",pencil2:"✏️",penguin:"🐧",pensive:"😔",performing_arts:"🎭",persevere:"😣",person_fencing:"🤺",pouting_woman:"🙎",phone:"☎️",pick:"⛏",pig:"🐷",pig2:"🐖",pig_nose:"🐽",pill:"💊",pineapple:"🍍",ping_pong:"🏓",pisces:"♓️",pizza:"🍕",place_of_worship:"🛐",plate_with_cutlery:"🍽",play_or_pause_button:"⏯",point_down:"👇",point_left:"👈",point_right:"👉",point_up:"☝️",point_up_2:"👆",police_car:"🚓",policewoman:"👮&zwj;♀️",poodle:"🐩",popcorn:"🍿",post_office:"🏣",postal_horn:"📯",postbox:"📮",potable_water:"🚰",potato:"🥔",pouch:"👝",poultry_leg:"🍗",pound:"💷",rage:"😡",pouting_cat:"😾",pouting_man:"🙎&zwj;♂️",pray:"🙏",prayer_beads:"📿",pregnant_woman:"🤰",previous_track_button:"⏮",prince:"🤴",princess:"👸",printer:"🖨",purple_heart:"💜",purse:"👛",pushpin:"📌",put_litter_in_its_place:"🚮",question:"❓",rabbit:"🐰",rabbit2:"🐇",racehorse:"🐎",racing_car:"🏎",radio:"📻",radio_button:"🔘",radioactive:"☢️",railway_car:"🚃",railway_track:"🛤",rainbow:"🌈",rainbow_flag:"🏳️&zwj;🌈",raised_back_of_hand:"🤚",raised_hand_with_fingers_splayed:"🖐",raised_hands:"🙌",raising_hand_woman:"🙋",raising_hand_man:"🙋&zwj;♂️",ram:"🐏",ramen:"🍜",rat:"🐀",record_button:"⏺",recycle:"♻️",red_circle:"🔴",registered:"®️",relaxed:"☺️",relieved:"😌",reminder_ribbon:"🎗",repeat:"🔁",repeat_one:"🔂",rescue_worker_helmet:"⛑",restroom:"🚻",revolving_hearts:"💞",rewind:"⏪",rhinoceros:"🦏",ribbon:"🎀",rice:"🍚",rice_ball:"🍙",rice_cracker:"🍘",rice_scene:"🎑",right_anger_bubble:"🗯",ring:"💍",robot:"🤖",rocket:"🚀",rofl:"🤣",roll_eyes:"🙄",roller_coaster:"🎢",rooster:"🐓",rose:"🌹",rosette:"🏵",rotating_light:"🚨",round_pushpin:"📍",rowing_man:"🚣",rowing_woman:"🚣&zwj;♀️",rugby_football:"🏉",running_man:"🏃",running_shirt_with_sash:"🎽",running_woman:"🏃&zwj;♀️",sa:"🈂️",sagittarius:"♐️",sake:"🍶",sandal:"👡",santa:"🎅",satellite:"📡",saxophone:"🎷",school:"🏫",school_satchel:"🎒",scissors:"✂️",scorpion:"🦂",scorpius:"♏️",scream:"😱",scream_cat:"🙀",scroll:"📜",seat:"💺",secret:"㊙️",see_no_evil:"🙈",seedling:"🌱",selfie:"🤳",shallow_pan_of_food:"🥘",shamrock:"☘️",shark:"🦈",shaved_ice:"🍧",sheep:"🐑",shell:"🐚",shield:"🛡",shinto_shrine:"⛩",ship:"🚢",shirt:"👕",shopping:"🛍",shopping_cart:"🛒",shower:"🚿",shrimp:"🦐",signal_strength:"📶",six_pointed_star:"🔯",ski:"🎿",skier:"⛷",skull:"💀",skull_and_crossbones:"☠️",sleeping:"😴",sleeping_bed:"🛌",sleepy:"😪",slightly_frowning_face:"🙁",slightly_smiling_face:"🙂",slot_machine:"🎰",small_airplane:"🛩",small_blue_diamond:"🔹",small_orange_diamond:"🔸",small_red_triangle:"🔺",small_red_triangle_down:"🔻",smile:"😄",smile_cat:"😸",smiley:"😃",smiley_cat:"😺",smiling_imp:"😈",smirk:"😏",smirk_cat:"😼",smoking:"🚬",snail:"🐌",snake:"🐍",sneezing_face:"🤧",snowboarder:"🏂",snowflake:"❄️",snowman:"⛄️",snowman_with_snow:"☃️",sob:"😭",soccer:"⚽️",soon:"🔜",sos:"🆘",sound:"🔉",space_invader:"👾",spades:"♠️",spaghetti:"🍝",sparkle:"❇️",sparkler:"🎇",sparkles:"✨",sparkling_heart:"💖",speak_no_evil:"🙊",speaker:"🔈",speaking_head:"🗣",speech_balloon:"💬",speedboat:"🚤",spider:"🕷",spider_web:"🕸",spiral_calendar:"🗓",spiral_notepad:"🗒",spoon:"🥄",squid:"🦑",stadium:"🏟",star:"⭐️",star2:"🌟",star_and_crescent:"☪️",star_of_david:"✡️",stars:"🌠",station:"🚉",statue_of_liberty:"🗽",steam_locomotive:"🚂",stew:"🍲",stop_button:"⏹",stop_sign:"🛑",stopwatch:"⏱",straight_ruler:"📏",strawberry:"🍓",stuck_out_tongue:"😛",stuck_out_tongue_closed_eyes:"😝",stuck_out_tongue_winking_eye:"😜",studio_microphone:"🎙",stuffed_flatbread:"🥙",sun_behind_large_cloud:"🌥",sun_behind_rain_cloud:"🌦",sun_behind_small_cloud:"🌤",sun_with_face:"🌞",sunflower:"🌻",sunglasses:"😎",sunny:"☀️",sunrise:"🌅",sunrise_over_mountains:"🌄",surfing_man:"🏄",surfing_woman:"🏄&zwj;♀️",sushi:"🍣",suspension_railway:"🚟",sweat:"😓",sweat_drops:"💦",sweat_smile:"😅",sweet_potato:"🍠",swimming_man:"🏊",swimming_woman:"🏊&zwj;♀️",symbols:"🔣",synagogue:"🕍",syringe:"💉",taco:"🌮",tada:"🎉",tanabata_tree:"🎋",taurus:"♉️",taxi:"🚕",tea:"🍵",telephone_receiver:"📞",telescope:"🔭",tennis:"🎾",tent:"⛺️",thermometer:"🌡",thinking:"🤔",thought_balloon:"💭",ticket:"🎫",tickets:"🎟",tiger:"🐯",tiger2:"🐅",timer_clock:"⏲",tipping_hand_man:"💁&zwj;♂️",tired_face:"😫",tm:"™️",toilet:"🚽",tokyo_tower:"🗼",tomato:"🍅",tongue:"👅",top:"🔝",tophat:"🎩",tornado:"🌪",trackball:"🖲",tractor:"🚜",traffic_light:"🚥",train:"🚋",train2:"🚆",tram:"🚊",triangular_flag_on_post:"🚩",triangular_ruler:"📐",trident:"🔱",triumph:"😤",trolleybus:"🚎",trophy:"🏆",tropical_drink:"🍹",tropical_fish:"🐠",truck:"🚚",trumpet:"🎺",tulip:"🌷",tumbler_glass:"🥃",turkey:"🦃",turtle:"🐢",tv:"📺",twisted_rightwards_arrows:"🔀",two_hearts:"💕",two_men_holding_hands:"👬",two_women_holding_hands:"👭",u5272:"🈹",u5408:"🈴",u55b6:"🈺",u6307:"🈯️",u6708:"🈷️",u6709:"🈶",u6e80:"🈵",u7121:"🈚️",u7533:"🈸",u7981:"🈲",u7a7a:"🈳",umbrella:"☔️",unamused:"😒",underage:"🔞",unicorn:"🦄",unlock:"🔓",up:"🆙",upside_down_face:"🙃",v:"✌️",vertical_traffic_light:"🚦",vhs:"📼",vibration_mode:"📳",video_camera:"📹",video_game:"🎮",violin:"🎻",virgo:"♍️",volcano:"🌋",volleyball:"🏐",vs:"🆚",vulcan_salute:"🖖",walking_man:"🚶",walking_woman:"🚶&zwj;♀️",waning_crescent_moon:"🌘",waning_gibbous_moon:"🌖",warning:"⚠️",wastebasket:"🗑",watch:"⌚️",water_buffalo:"🐃",watermelon:"🍉",wave:"👋",wavy_dash:"〰️",waxing_crescent_moon:"🌒",wc:"🚾",weary:"😩",wedding:"💒",weight_lifting_man:"🏋️",weight_lifting_woman:"🏋️&zwj;♀️",whale:"🐳",whale2:"🐋",wheel_of_dharma:"☸️",wheelchair:"♿️",white_check_mark:"✅",white_circle:"⚪️",white_flag:"🏳️",white_flower:"💮",white_large_square:"⬜️",white_medium_small_square:"◽️",white_medium_square:"◻️",white_small_square:"▫️",white_square_button:"🔳",wilted_flower:"🥀",wind_chime:"🎐",wind_face:"🌬",wine_glass:"🍷",wink:"😉",wolf:"🐺",woman:"👩",woman_artist:"👩&zwj;🎨",woman_astronaut:"👩&zwj;🚀",woman_cartwheeling:"🤸&zwj;♀️",woman_cook:"👩&zwj;🍳",woman_facepalming:"🤦&zwj;♀️",woman_factory_worker:"👩&zwj;🏭",woman_farmer:"👩&zwj;🌾",woman_firefighter:"👩&zwj;🚒",woman_health_worker:"👩&zwj;⚕️",woman_judge:"👩&zwj;⚖️",woman_juggling:"🤹&zwj;♀️",woman_mechanic:"👩&zwj;🔧",woman_office_worker:"👩&zwj;💼",woman_pilot:"👩&zwj;✈️",woman_playing_handball:"🤾&zwj;♀️",woman_playing_water_polo:"🤽&zwj;♀️",woman_scientist:"👩&zwj;🔬",woman_shrugging:"🤷&zwj;♀️",woman_singer:"👩&zwj;🎤",woman_student:"👩&zwj;🎓",woman_teacher:"👩&zwj;🏫",woman_technologist:"👩&zwj;💻",woman_with_turban:"👳&zwj;♀️",womans_clothes:"👚",womans_hat:"👒",women_wrestling:"🤼&zwj;♀️",womens:"🚺",world_map:"🗺",worried:"😟",wrench:"🔧",writing_hand:"✍️",x:"❌",yellow_heart:"💛",yen:"💴",yin_yang:"☯️",yum:"😋",zap:"⚡️",zipper_mouth_face:"🤐",zzz:"💤",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:"<span style=\"font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;\">S</span>"},t.Converter=function(e){var n={},l=[],c=[],h={},u=s,d={parsed:{},raw:"",format:""};function p(e,n){if(n=n||null,t.helper.isString(e)){if(n=e=t.helper.stdExtName(e),t.extensions[e])return void function(e,n){"function"==typeof e&&(e=e(new t.Converter)),t.helper.isArray(e)||(e=[e]);var r=o(e,n);if(!r.valid)throw Error(r.error);for(var i=0;i<e.length;++i)switch(e[i].type){case"lang":l.push(e[i]);break;case"output":c.push(e[i]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}(t.extensions[e],e);if(t.helper.isUndefined(r[e]))throw Error('Extension "'+e+'" could not be loaded. It was either not found or is not a valid extension.');e=r[e]}"function"==typeof e&&(e=e()),t.helper.isArray(e)||(e=[e]);var i=o(e,n);if(!i.valid)throw Error(i.error);for(var s=0;s<e.length;++s){switch(e[s].type){case"lang":l.push(e[s]);break;case"output":c.push(e[s])}if(e[s].hasOwnProperty("listeners"))for(var a in e[s].listeners)e[s].listeners.hasOwnProperty(a)&&f(a,e[s].listeners[a])}}function f(e,n){if(!t.helper.isString(e))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof e+" given");if("function"!=typeof n)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof n+" given");h.hasOwnProperty(e)||(h[e]=[]),h[e].push(n)}!function(){for(var r in e=e||{},i)i.hasOwnProperty(r)&&(n[r]=i[r]);if("object"!=typeof e)throw Error("Converter expects the passed parameter to be an object, but "+typeof e+" was passed instead.");for(var s in e)e.hasOwnProperty(s)&&(n[s]=e[s]);n.extensions&&t.helper.forEach(n.extensions,p)}(),this._dispatch=function(e,t,n,r){if(h.hasOwnProperty(e))for(var i=0;i<h[e].length;++i){var s=h[e][i](e,t,this,n,r);s&&void 0!==s&&(t=s)}return t},this.listen=function(e,t){return f(e,t),this},this.makeHtml=function(e){if(!e)return e;var r={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:l,outputModifiers:c,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return e=(e=(e=(e=(e=e.replace(/¨/g,"¨T")).replace(/\$/g,"¨D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/\u00A0/g,"&nbsp;"),n.smartIndentationFix&&(e=function(e){var t=e.match(/^\s*/)[0].length,n=new RegExp("^\\s{0,"+t+"}","gm");return e.replace(n,"")}(e)),e="\n\n"+e+"\n\n",e=(e=t.subParser("detab")(e,n,r)).replace(/^[ \t]+$/gm,""),t.helper.forEach(l,(function(i){e=t.subParser("runExtension")(i,e,n,r)})),e=t.subParser("metadata")(e,n,r),e=t.subParser("hashPreCodeTags")(e,n,r),e=t.subParser("githubCodeBlocks")(e,n,r),e=t.subParser("hashHTMLBlocks")(e,n,r),e=t.subParser("hashCodeTags")(e,n,r),e=t.subParser("stripLinkDefinitions")(e,n,r),e=t.subParser("blockGamut")(e,n,r),e=t.subParser("unhashHTMLSpans")(e,n,r),e=(e=(e=t.subParser("unescapeSpecialChars")(e,n,r)).replace(/¨D/g,"$$")).replace(/¨T/g,"¨"),e=t.subParser("completeHTMLDocument")(e,n,r),t.helper.forEach(c,(function(i){e=t.subParser("runExtension")(i,e,n,r)})),d=r.metadata,e},this.makeMarkdown=this.makeMd=function(e,n){if(e=(e=(e=e.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/>[ \t]+</,">¨NBSP;<"),!n){if(!window||!window.document)throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");n=window.document}var r=n.createElement("div");r.innerHTML=e;var i={preList:function(e){for(var n=e.querySelectorAll("pre"),r=[],i=0;i<n.length;++i)if(1===n[i].childElementCount&&"code"===n[i].firstChild.tagName.toLowerCase()){var s=n[i].firstChild.innerHTML.trim(),a=n[i].firstChild.getAttribute("data-language")||"";if(""===a)for(var o=n[i].firstChild.className.split(" "),l=0;l<o.length;++l){var c=o[l].match(/^language-(.+)$/);if(null!==c){a=c[1];break}}s=t.helper.unescapeHTMLEntities(s),r.push(s),n[i].outerHTML='<precode language="'+a+'" precodenum="'+i.toString()+'"></precode>'}else r.push(n[i].innerHTML),n[i].innerHTML="",n[i].setAttribute("prenum",i.toString());return r}(r)};!function e(t){for(var n=0;n<t.childNodes.length;++n){var r=t.childNodes[n];3===r.nodeType?/\S/.test(r.nodeValue)||/^[ ]+$/.test(r.nodeValue)?(r.nodeValue=r.nodeValue.split("\n").join(" "),r.nodeValue=r.nodeValue.replace(/(\s)+/g,"$1")):(t.removeChild(r),--n):1===r.nodeType&&e(r)}}(r);for(var s=r.childNodes,a="",o=0;o<s.length;o++)a+=t.subParser("makeMarkdown.node")(s[o],i);return a},this.setOption=function(e,t){n[e]=t},this.getOption=function(e){return n[e]},this.getOptions=function(){return n},this.addExtension=function(e,t){p(e,t=t||null)},this.useExtension=function(e){p(e)},this.setFlavor=function(e){if(!a.hasOwnProperty(e))throw Error(e+" flavor was not found");var t=a[e];for(var r in u=e,t)t.hasOwnProperty(r)&&(n[r]=t[r])},this.getFlavor=function(){return u},this.removeExtension=function(e){t.helper.isArray(e)||(e=[e]);for(var n=0;n<e.length;++n){for(var r=e[n],i=0;i<l.length;++i)l[i]===r&&l.splice(i,1);for(var s=0;s<c.length;++s)c[s]===r&&c.splice(s,1)}},this.getAllExtensions=function(){return{language:l,output:c}},this.getMetadata=function(e){return e?d.raw:d.parsed},this.getMetadataFormat=function(){return d.format},this._setMetadataPair=function(e,t){d.parsed[e]=t},this._setMetadataFormat=function(e){d.format=e},this._setMetadataRaw=function(e){d.raw=e}},t.subParser("anchors",(function(e,n,r){var i=function(e,i,s,a,o,l,c){if(t.helper.isUndefined(c)&&(c=""),s=s.toLowerCase(),e.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)a="";else if(!a){if(s||(s=i.toLowerCase().replace(/ ?\n/g," ")),a="#"+s,t.helper.isUndefined(r.gUrls[s]))return e;a=r.gUrls[s],t.helper.isUndefined(r.gTitles[s])||(c=r.gTitles[s])}var h='<a href="'+(a=a.replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback))+'"';return""!==c&&null!==c&&(h+=' title="'+(c=(c=c.replace(/"/g,"&quot;")).replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback))+'"'),n.openLinksInNewWindow&&!/^#/.test(a)&&(h+=' rel="noopener noreferrer" target="¨E95Eblank"'),h+=">"+i+"</a>"};return e=(e=(e=(e=(e=r.converter._dispatch("anchors.before",e,n,r)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,i)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,i)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,i)).replace(/\[([^\[\]]+)]()()()()()/g,i),n.ghMentions&&(e=e.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gim,(function(e,r,i,s,a){if("\\"===i)return r+s;if(!t.helper.isString(n.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var o=n.ghMentionsLink.replace(/\{u}/g,a),l="";return n.openLinksInNewWindow&&(l=' rel="noopener noreferrer" target="¨E95Eblank"'),r+'<a href="'+o+'"'+l+">"+s+"</a>"}))),e=r.converter._dispatch("anchors.after",e,n,r)}));var h=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,u=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,d=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,p=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gim,f=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,m=function(e){return function(n,r,i,s,a,o,l){var c=i=i.replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback),h="",u="",d=r||"",p=l||"";return/^www\./i.test(i)&&(i=i.replace(/^www\./i,"http://www.")),e.excludeTrailingPunctuationFromURLs&&o&&(h=o),e.openLinksInNewWindow&&(u=' rel="noopener noreferrer" target="¨E95Eblank"'),d+'<a href="'+i+'"'+u+">"+c+"</a>"+h+p}},g=function(e,n){return function(r,i,s){var a="mailto:";return i=i||"",s=t.subParser("unescapeSpecialChars")(s,e,n),e.encodeEmails?(a=t.helper.encodeEmailAddress(a+s),s=t.helper.encodeEmailAddress(s)):a+=s,i+'<a href="'+a+'">'+s+"</a>"}};t.subParser("autoLinks",(function(e,t,n){return e=(e=(e=n.converter._dispatch("autoLinks.before",e,t,n)).replace(d,m(t))).replace(f,g(t,n)),e=n.converter._dispatch("autoLinks.after",e,t,n)})),t.subParser("simplifiedAutoLinks",(function(e,t,n){return t.simplifiedAutoLink?(e=n.converter._dispatch("simplifiedAutoLinks.before",e,t,n),e=(e=t.excludeTrailingPunctuationFromURLs?e.replace(u,m(t)):e.replace(h,m(t))).replace(p,g(t,n)),e=n.converter._dispatch("simplifiedAutoLinks.after",e,t,n)):e})),t.subParser("blockGamut",(function(e,n,r){return e=r.converter._dispatch("blockGamut.before",e,n,r),e=t.subParser("blockQuotes")(e,n,r),e=t.subParser("headers")(e,n,r),e=t.subParser("horizontalRule")(e,n,r),e=t.subParser("lists")(e,n,r),e=t.subParser("codeBlocks")(e,n,r),e=t.subParser("tables")(e,n,r),e=t.subParser("hashHTMLBlocks")(e,n,r),e=t.subParser("paragraphs")(e,n,r),e=r.converter._dispatch("blockGamut.after",e,n,r)})),t.subParser("blockQuotes",(function(e,n,r){e=r.converter._dispatch("blockQuotes.before",e,n,r),e+="\n\n";var i=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return n.splitAdjacentBlockquotes&&(i=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),e=e.replace(i,(function(e){return e=(e=(e=e.replace(/^[ \t]*>[ \t]?/gm,"")).replace(/¨0/g,"")).replace(/^[ \t]+$/gm,""),e=t.subParser("githubCodeBlocks")(e,n,r),e=(e=(e=t.subParser("blockGamut")(e,n,r)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,(function(e,t){var n=t;return n=(n=n.replace(/^  /gm,"¨0")).replace(/¨0/g,"")})),t.subParser("hashBlock")("<blockquote>\n"+e+"\n</blockquote>",n,r)})),e=r.converter._dispatch("blockQuotes.after",e,n,r)})),t.subParser("codeBlocks",(function(e,n,r){return e=r.converter._dispatch("codeBlocks.before",e,n,r),e=(e=(e+="¨0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=¨0))/g,(function(e,i,s){var a=i,o=s,l="\n";return a=t.subParser("outdent")(a,n,r),a=t.subParser("encodeCode")(a,n,r),a=(a=(a=t.subParser("detab")(a,n,r)).replace(/^\n+/g,"")).replace(/\n+$/g,""),n.omitExtraWLInCodeBlocks&&(l=""),a="<pre><code>"+a+l+"</code></pre>",t.subParser("hashBlock")(a,n,r)+o}))).replace(/¨0/,""),e=r.converter._dispatch("codeBlocks.after",e,n,r)})),t.subParser("codeSpans",(function(e,n,r){return void 0===(e=r.converter._dispatch("codeSpans.before",e,n,r))&&(e=""),e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,(function(e,i,s,a){var o=a;return o=(o=o.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),o=i+"<code>"+(o=t.subParser("encodeCode")(o,n,r))+"</code>",o=t.subParser("hashHTMLSpans")(o,n,r)})),e=r.converter._dispatch("codeSpans.after",e,n,r)})),t.subParser("completeHTMLDocument",(function(e,t,n){if(!t.completeHTMLDocument)return e;e=n.converter._dispatch("completeHTMLDocument.before",e,t,n);var r="html",i="<!DOCTYPE HTML>\n",s="",a='<meta charset="utf-8">\n',o="",l="";for(var c in void 0!==n.metadata.parsed.doctype&&(i="<!DOCTYPE "+n.metadata.parsed.doctype+">\n","html"!==(r=n.metadata.parsed.doctype.toString().toLowerCase())&&"html5"!==r||(a='<meta charset="utf-8">')),n.metadata.parsed)if(n.metadata.parsed.hasOwnProperty(c))switch(c.toLowerCase()){case"doctype":break;case"title":s="<title>"+n.metadata.parsed.title+"</title>\n";break;case"charset":a="html"===r||"html5"===r?'<meta charset="'+n.metadata.parsed.charset+'">\n':'<meta name="charset" content="'+n.metadata.parsed.charset+'">\n';break;case"language":case"lang":o=' lang="'+n.metadata.parsed[c]+'"',l+='<meta name="'+c+'" content="'+n.metadata.parsed[c]+'">\n';break;default:l+='<meta name="'+c+'" content="'+n.metadata.parsed[c]+'">\n'}return e=i+"<html"+o+">\n<head>\n"+s+a+l+"</head>\n<body>\n"+e.trim()+"\n</body>\n</html>",e=n.converter._dispatch("completeHTMLDocument.after",e,t,n)})),t.subParser("detab",(function(e,t,n){return e=(e=(e=(e=(e=(e=n.converter._dispatch("detab.before",e,t,n)).replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"¨A¨B")).replace(/¨B(.+?)¨A/g,(function(e,t){for(var n=t,r=4-n.length%4,i=0;i<r;i++)n+=" ";return n}))).replace(/¨A/g,"    ")).replace(/¨B/g,""),e=n.converter._dispatch("detab.after",e,t,n)})),t.subParser("ellipsis",(function(e,t,n){return t.ellipsis?(e=(e=n.converter._dispatch("ellipsis.before",e,t,n)).replace(/\.\.\./g,"…"),e=n.converter._dispatch("ellipsis.after",e,t,n)):e})),t.subParser("emoji",(function(e,n,r){return n.emoji?(e=(e=r.converter._dispatch("emoji.before",e,n,r)).replace(/:([\S]+?):/g,(function(e,n){return t.helper.emojis.hasOwnProperty(n)?t.helper.emojis[n]:e})),e=r.converter._dispatch("emoji.after",e,n,r)):e})),t.subParser("encodeAmpsAndAngles",(function(e,t,n){return e=(e=(e=(e=(e=n.converter._dispatch("encodeAmpsAndAngles.before",e,t,n)).replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?$!])/gi,"&lt;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),e=n.converter._dispatch("encodeAmpsAndAngles.after",e,t,n)})),t.subParser("encodeBackslashEscapes",(function(e,n,r){return e=(e=(e=r.converter._dispatch("encodeBackslashEscapes.before",e,n,r)).replace(/\\(\\)/g,t.helper.escapeCharactersCallback)).replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,t.helper.escapeCharactersCallback),e=r.converter._dispatch("encodeBackslashEscapes.after",e,n,r)})),t.subParser("encodeCode",(function(e,n,r){return e=(e=r.converter._dispatch("encodeCode.before",e,n,r)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,t.helper.escapeCharactersCallback),e=r.converter._dispatch("encodeCode.after",e,n,r)})),t.subParser("escapeSpecialCharsWithinTagAttributes",(function(e,n,r){return e=(e=(e=r.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",e,n,r)).replace(/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,(function(e){return e.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,t.helper.escapeCharactersCallback)}))).replace(/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi,(function(e){return e.replace(/([\\`*_~=|])/g,t.helper.escapeCharactersCallback)})),e=r.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",e,n,r)})),t.subParser("githubCodeBlocks",(function(e,n,r){return n.ghCodeBlocks?(e=r.converter._dispatch("githubCodeBlocks.before",e,n,r),e=(e=(e+="¨0").replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,(function(e,i,s,a){var o=n.omitExtraWLInCodeBlocks?"":"\n";return a=t.subParser("encodeCode")(a,n,r),a="<pre><code"+(s?' class="'+s+" language-"+s+'"':"")+">"+(a=(a=(a=t.subParser("detab")(a,n,r)).replace(/^\n+/g,"")).replace(/\n+$/g,""))+o+"</code></pre>",a=t.subParser("hashBlock")(a,n,r),"\n\n¨G"+(r.ghCodeBlocks.push({text:e,codeblock:a})-1)+"G\n\n"}))).replace(/¨0/,""),r.converter._dispatch("githubCodeBlocks.after",e,n,r)):e})),t.subParser("hashBlock",(function(e,t,n){return e=(e=n.converter._dispatch("hashBlock.before",e,t,n)).replace(/(^\n+|\n+$)/g,""),e="\n\n¨K"+(n.gHtmlBlocks.push(e)-1)+"K\n\n",e=n.converter._dispatch("hashBlock.after",e,t,n)})),t.subParser("hashCodeTags",(function(e,n,r){return e=r.converter._dispatch("hashCodeTags.before",e,n,r),e=t.helper.replaceRecursiveRegExp(e,(function(e,i,s,a){var o=s+t.subParser("encodeCode")(i,n,r)+a;return"¨C"+(r.gHtmlSpans.push(o)-1)+"C"}),"<code\\b[^>]*>","</code>","gim"),e=r.converter._dispatch("hashCodeTags.after",e,n,r)})),t.subParser("hashElement",(function(e,t,n){return function(e,t){var r=t;return r=(r=(r=r.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),r="\n\n¨K"+(n.gHtmlBlocks.push(r)-1)+"K\n\n"}})),t.subParser("hashHTMLBlocks",(function(e,n,r){e=r.converter._dispatch("hashHTMLBlocks.before",e,n,r);var i=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],s=function(e,t,n,i){var s=e;return-1!==n.search(/\bmarkdown\b/)&&(s=n+r.converter.makeHtml(t)+i),"\n\n¨K"+(r.gHtmlBlocks.push(s)-1)+"K\n\n"};n.backslashEscapesHTMLTags&&(e=e.replace(/\\<(\/?[^>]+?)>/g,(function(e,t){return"&lt;"+t+"&gt;"})));for(var a=0;a<i.length;++a)for(var o,l=new RegExp("^ {0,3}(<"+i[a]+"\\b[^>]*>)","im"),c="<"+i[a]+"\\b[^>]*>",h="</"+i[a]+">";-1!==(o=t.helper.regexIndexOf(e,l));){var u=t.helper.splitAtIndex(e,o),d=t.helper.replaceRecursiveRegExp(u[1],s,c,h,"im");if(d===u[1])break;e=u[0].concat(d)}return e=e.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,t.subParser("hashElement")(e,n,r)),e=(e=t.helper.replaceRecursiveRegExp(e,(function(e){return"\n\n¨K"+(r.gHtmlBlocks.push(e)-1)+"K\n\n"}),"^ {0,3}\x3c!--","--\x3e","gm")).replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,t.subParser("hashElement")(e,n,r)),e=r.converter._dispatch("hashHTMLBlocks.after",e,n,r)})),t.subParser("hashHTMLSpans",(function(e,t,n){function r(e){return"¨C"+(n.gHtmlSpans.push(e)-1)+"C"}return e=(e=(e=(e=(e=n.converter._dispatch("hashHTMLSpans.before",e,t,n)).replace(/<[^>]+?\/>/gi,(function(e){return r(e)}))).replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,(function(e){return r(e)}))).replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,(function(e){return r(e)}))).replace(/<[^>]+?>/gi,(function(e){return r(e)})),e=n.converter._dispatch("hashHTMLSpans.after",e,t,n)})),t.subParser("unhashHTMLSpans",(function(e,t,n){e=n.converter._dispatch("unhashHTMLSpans.before",e,t,n);for(var r=0;r<n.gHtmlSpans.length;++r){for(var i=n.gHtmlSpans[r],s=0;/¨C(\d+)C/.test(i);){var a=RegExp.$1;if(i=i.replace("¨C"+a+"C",n.gHtmlSpans[a]),10===s)break;++s}e=e.replace("¨C"+r+"C",i)}return e=n.converter._dispatch("unhashHTMLSpans.after",e,t,n)})),t.subParser("hashPreCodeTags",(function(e,n,r){return e=r.converter._dispatch("hashPreCodeTags.before",e,n,r),e=t.helper.replaceRecursiveRegExp(e,(function(e,i,s,a){var o=s+t.subParser("encodeCode")(i,n,r)+a;return"\n\n¨G"+(r.ghCodeBlocks.push({text:e,codeblock:o})-1)+"G\n\n"}),"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),e=r.converter._dispatch("hashPreCodeTags.after",e,n,r)})),t.subParser("headers",(function(e,n,r){e=r.converter._dispatch("headers.before",e,n,r);var i=isNaN(parseInt(n.headerLevelStart))?1:parseInt(n.headerLevelStart),s=n.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,a=n.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;e=(e=e.replace(s,(function(e,s){var a=t.subParser("spanGamut")(s,n,r),o=n.noHeaderId?"":' id="'+l(s)+'"',c="<h"+i+o+">"+a+"</h"+i+">";return t.subParser("hashBlock")(c,n,r)}))).replace(a,(function(e,s){var a=t.subParser("spanGamut")(s,n,r),o=n.noHeaderId?"":' id="'+l(s)+'"',c=i+1,h="<h"+c+o+">"+a+"</h"+c+">";return t.subParser("hashBlock")(h,n,r)}));var o=n.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;function l(e){var i,s;if(n.customizedHeaderId){var a=e.match(/\{([^{]+?)}\s*$/);a&&a[1]&&(e=a[1])}return i=e,s=t.helper.isString(n.prefixHeaderId)?n.prefixHeaderId:!0===n.prefixHeaderId?"section-":"",n.rawPrefixHeaderId||(i=s+i),i=n.ghCompatibleHeaderId?i.replace(/ /g,"-").replace(/&amp;/g,"").replace(/¨T/g,"").replace(/¨D/g,"").replace(/[&+$,\/:;=?@"#{}|^¨~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():n.rawHeaderId?i.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/¨T/g,"¨").replace(/¨D/g,"$").replace(/["']/g,"-").toLowerCase():i.replace(/[^\w]/g,"").toLowerCase(),n.rawPrefixHeaderId&&(i=s+i),r.hashLinkCounts[i]?i=i+"-"+r.hashLinkCounts[i]++:r.hashLinkCounts[i]=1,i}return e=e.replace(o,(function(e,s,a){var o=a;n.customizedHeaderId&&(o=a.replace(/\s?\{([^{]+?)}\s*$/,""));var c=t.subParser("spanGamut")(o,n,r),h=n.noHeaderId?"":' id="'+l(a)+'"',u=i-1+s.length,d="<h"+u+h+">"+c+"</h"+u+">";return t.subParser("hashBlock")(d,n,r)})),e=r.converter._dispatch("headers.after",e,n,r)})),t.subParser("horizontalRule",(function(e,n,r){e=r.converter._dispatch("horizontalRule.before",e,n,r);var i=t.subParser("hashBlock")("<hr />",n,r);return e=(e=(e=e.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,i)).replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,i)).replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,i),e=r.converter._dispatch("horizontalRule.after",e,n,r)})),t.subParser("images",(function(e,n,r){function i(e,n,i,s,a,o,l,c){var h=r.gUrls,u=r.gTitles,d=r.gDimensions;if(i=i.toLowerCase(),c||(c=""),e.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)s="";else if(""===s||null===s){if(""!==i&&null!==i||(i=n.toLowerCase().replace(/ ?\n/g," ")),s="#"+i,t.helper.isUndefined(h[i]))return e;s=h[i],t.helper.isUndefined(u[i])||(c=u[i]),t.helper.isUndefined(d[i])||(a=d[i].width,o=d[i].height)}n=n.replace(/"/g,"&quot;").replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback);var p='<img src="'+(s=s.replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback))+'" alt="'+n+'"';return c&&t.helper.isString(c)&&(p+=' title="'+(c=c.replace(/"/g,"&quot;").replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback))+'"'),a&&o&&(p+=' width="'+(a="*"===a?"auto":a)+'"',p+=' height="'+(o="*"===o?"auto":o)+'"'),p+=" />"}return e=(e=(e=(e=(e=(e=r.converter._dispatch("images.before",e,n,r)).replace(/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,i)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,(function(e,t,n,r,s,a,o,l){return i(e,t,n,r=r.replace(/\s/g,""),s,a,0,l)}))).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,i)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,i)).replace(/!\[([^\[\]]+)]()()()()()/g,i),e=r.converter._dispatch("images.after",e,n,r)})),t.subParser("italicsAndBold",(function(e,t,n){function r(e,t,n){return t+e+n}return e=n.converter._dispatch("italicsAndBold.before",e,t,n),e=t.literalMidWordUnderscores?(e=(e=e.replace(/\b___(\S[\s\S]*?)___\b/g,(function(e,t){return r(t,"<strong><em>","</em></strong>")}))).replace(/\b__(\S[\s\S]*?)__\b/g,(function(e,t){return r(t,"<strong>","</strong>")}))).replace(/\b_(\S[\s\S]*?)_\b/g,(function(e,t){return r(t,"<em>","</em>")})):(e=(e=e.replace(/___(\S[\s\S]*?)___/g,(function(e,t){return/\S$/.test(t)?r(t,"<strong><em>","</em></strong>"):e}))).replace(/__(\S[\s\S]*?)__/g,(function(e,t){return/\S$/.test(t)?r(t,"<strong>","</strong>"):e}))).replace(/_([^\s_][\s\S]*?)_/g,(function(e,t){return/\S$/.test(t)?r(t,"<em>","</em>"):e})),e=t.literalMidWordAsterisks?(e=(e=e.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,(function(e,t,n){return r(n,t+"<strong><em>","</em></strong>")}))).replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,(function(e,t,n){return r(n,t+"<strong>","</strong>")}))).replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,(function(e,t,n){return r(n,t+"<em>","</em>")})):(e=(e=e.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,(function(e,t){return/\S$/.test(t)?r(t,"<strong><em>","</em></strong>"):e}))).replace(/\*\*(\S[\s\S]*?)\*\*/g,(function(e,t){return/\S$/.test(t)?r(t,"<strong>","</strong>"):e}))).replace(/\*([^\s*][\s\S]*?)\*/g,(function(e,t){return/\S$/.test(t)?r(t,"<em>","</em>"):e})),e=n.converter._dispatch("italicsAndBold.after",e,t,n)})),t.subParser("lists",(function(e,n,r){function i(e,i){r.gListLevel++,e=e.replace(/\n{2,}$/,"\n");var s=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,a=/\n[ \t]*\n(?!¨0)/.test(e+="¨0");return n.disableForced4SpacesIndentedSublists&&(s=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0|\2([*+-]|\d+[.])[ \t]+))/gm),e=(e=e.replace(s,(function(e,i,s,o,l,c,h){h=h&&""!==h.trim();var u=t.subParser("outdent")(l,n,r),d="";return c&&n.tasklists&&(d=' class="task-list-item" style="list-style-type: none;"',u=u.replace(/^[ \t]*\[(x|X| )?]/m,(function(){var e='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return h&&(e+=" checked"),e+=">"}))),u=u.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,(function(e){return"¨A"+e})),i||u.search(/\n{2,}/)>-1?(u=t.subParser("githubCodeBlocks")(u,n,r),u=t.subParser("blockGamut")(u,n,r)):(u=(u=t.subParser("lists")(u,n,r)).replace(/\n$/,""),u=(u=t.subParser("hashHTMLBlocks")(u,n,r)).replace(/\n\n+/g,"\n\n"),u=a?t.subParser("paragraphs")(u,n,r):t.subParser("spanGamut")(u,n,r)),u="<li"+d+">"+(u=u.replace("¨A",""))+"</li>\n"}))).replace(/¨0/g,""),r.gListLevel--,i&&(e=e.replace(/\s+$/,"")),e}function s(e,t){if("ol"===t){var n=e.match(/^ *(\d+)\./);if(n&&"1"!==n[1])return' start="'+n[1]+'"'}return""}function a(e,t,r){var a=n.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,o=n.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,l="ul"===t?a:o,c="";if(-1!==e.search(l))!function n(h){var u=h.search(l),d=s(e,t);-1!==u?(c+="\n\n<"+t+d+">\n"+i(h.slice(0,u),!!r)+"</"+t+">\n",l="ul"==(t="ul"===t?"ol":"ul")?a:o,n(h.slice(u))):c+="\n\n<"+t+d+">\n"+i(h,!!r)+"</"+t+">\n"}(e);else{var h=s(e,t);c="\n\n<"+t+h+">\n"+i(e,!!r)+"</"+t+">\n"}return c}return e=r.converter._dispatch("lists.before",e,n,r),e+="¨0",e=(e=r.gListLevel?e.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,(function(e,t,n){return a(t,n.search(/[*+-]/g)>-1?"ul":"ol",!0)})):e.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,(function(e,t,n,r){return a(n,r.search(/[*+-]/g)>-1?"ul":"ol",!1)}))).replace(/¨0/,""),e=r.converter._dispatch("lists.after",e,n,r)})),t.subParser("metadata",(function(e,t,n){if(!t.metadata)return e;function r(e){n.metadata.raw=e,(e=(e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;")).replace(/\n {4}/g," ")).replace(/^([\S ]+): +([\s\S]+?)$/gm,(function(e,t,r){return n.metadata.parsed[t]=r,""}))}return e=(e=(e=(e=n.converter._dispatch("metadata.before",e,t,n)).replace(/^\s*«««+(\S*?)\n([\s\S]+?)\n»»»+\n/,(function(e,t,n){return r(n),"¨M"}))).replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,(function(e,t,i){return t&&(n.metadata.format=t),r(i),"¨M"}))).replace(/¨M/g,""),e=n.converter._dispatch("metadata.after",e,t,n)})),t.subParser("outdent",(function(e,t,n){return e=(e=(e=n.converter._dispatch("outdent.before",e,t,n)).replace(/^(\t|[ ]{1,4})/gm,"¨0")).replace(/¨0/g,""),e=n.converter._dispatch("outdent.after",e,t,n)})),t.subParser("paragraphs",(function(e,n,r){for(var i=(e=(e=(e=r.converter._dispatch("paragraphs.before",e,n,r)).replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),s=[],a=i.length,o=0;o<a;o++){var l=i[o];l.search(/¨(K|G)(\d+)\1/g)>=0?s.push(l):l.search(/\S/)>=0&&(l=(l=t.subParser("spanGamut")(l,n,r)).replace(/^([ \t]*)/g,"<p>"),l+="</p>",s.push(l))}for(a=s.length,o=0;o<a;o++){for(var c="",h=s[o],u=!1;/¨(K|G)(\d+)\1/.test(h);){var d=RegExp.$1,p=RegExp.$2;c=(c="K"===d?r.gHtmlBlocks[p]:u?t.subParser("encodeCode")(r.ghCodeBlocks[p].text,n,r):r.ghCodeBlocks[p].codeblock).replace(/\$/g,"$$$$"),h=h.replace(/(\n\n)?¨(K|G)\d+\2(\n\n)?/,c),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(h)&&(u=!0)}s[o]=h}return e=(e=(e=s.join("\n")).replace(/^\n+/g,"")).replace(/\n+$/g,""),r.converter._dispatch("paragraphs.after",e,n,r)})),t.subParser("runExtension",(function(e,t,n,r){if(e.filter)t=e.filter(t,r.converter,n);else if(e.regex){var i=e.regex;i instanceof RegExp||(i=new RegExp(i,"g")),t=t.replace(i,e.replace)}return t})),t.subParser("spanGamut",(function(e,n,r){return e=r.converter._dispatch("spanGamut.before",e,n,r),e=t.subParser("codeSpans")(e,n,r),e=t.subParser("escapeSpecialCharsWithinTagAttributes")(e,n,r),e=t.subParser("encodeBackslashEscapes")(e,n,r),e=t.subParser("images")(e,n,r),e=t.subParser("anchors")(e,n,r),e=t.subParser("autoLinks")(e,n,r),e=t.subParser("simplifiedAutoLinks")(e,n,r),e=t.subParser("emoji")(e,n,r),e=t.subParser("underline")(e,n,r),e=t.subParser("italicsAndBold")(e,n,r),e=t.subParser("strikethrough")(e,n,r),e=t.subParser("ellipsis")(e,n,r),e=t.subParser("hashHTMLSpans")(e,n,r),e=t.subParser("encodeAmpsAndAngles")(e,n,r),n.simpleLineBreaks?/\n\n¨K/.test(e)||(e=e.replace(/\n+/g,"<br />\n")):e=e.replace(/  +\n/g,"<br />\n"),e=r.converter._dispatch("spanGamut.after",e,n,r)})),t.subParser("strikethrough",(function(e,n,r){return n.strikethrough&&(e=(e=r.converter._dispatch("strikethrough.before",e,n,r)).replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,(function(e,i){return function(e){return n.simplifiedAutoLink&&(e=t.subParser("simplifiedAutoLinks")(e,n,r)),"<del>"+e+"</del>"}(i)})),e=r.converter._dispatch("strikethrough.after",e,n,r)),e})),t.subParser("stripLinkDefinitions",(function(e,n,r){var i=function(i,s,a,o,l,c,h){return s=s.toLowerCase(),e.toLowerCase().split(s).length-1<2?i:(a.match(/^data:.+?\/.+?;base64,/)?r.gUrls[s]=a.replace(/\s/g,""):r.gUrls[s]=t.subParser("encodeAmpsAndAngles")(a,n,r),c?c+h:(h&&(r.gTitles[s]=h.replace(/"|'/g,"&quot;")),n.parseImgDimensions&&o&&l&&(r.gDimensions[s]={width:o,height:l}),""))};return e=(e=(e=(e+="¨0").replace(/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=¨0)|(?=\n\[))/gm,i)).replace(/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=¨0))/gm,i)).replace(/¨0/,"")})),t.subParser("tables",(function(e,n,r){if(!n.tables)return e;function i(e,i){return"<td"+i+">"+t.subParser("spanGamut")(e,n,r)+"</td>\n"}function s(e){var s,a=e.split("\n");for(s=0;s<a.length;++s)/^ {0,3}\|/.test(a[s])&&(a[s]=a[s].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(a[s])&&(a[s]=a[s].replace(/\|[ \t]*$/,"")),a[s]=t.subParser("codeSpans")(a[s],n,r);var o,l,c,h,u=a[0].split("|").map((function(e){return e.trim()})),d=a[1].split("|").map((function(e){return e.trim()})),p=[],f=[],m=[],g=[];for(a.shift(),a.shift(),s=0;s<a.length;++s)""!==a[s].trim()&&p.push(a[s].split("|").map((function(e){return e.trim()})));if(u.length<d.length)return e;for(s=0;s<d.length;++s)m.push((o=d[s],/^:[ \t]*--*$/.test(o)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(o)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(o)?' style="text-align:center;"':""));for(s=0;s<u.length;++s)t.helper.isUndefined(m[s])&&(m[s]=""),f.push((l=u[s],c=m[s],h=void 0,h="",l=l.trim(),(n.tablesHeaderId||n.tableHeaderId)&&(h=' id="'+l.replace(/ /g,"_").toLowerCase()+'"'),"<th"+h+c+">"+(l=t.subParser("spanGamut")(l,n,r))+"</th>\n"));for(s=0;s<p.length;++s){for(var v=[],_=0;_<f.length;++_)t.helper.isUndefined(p[s][_]),v.push(i(p[s][_],m[_]));g.push(v)}return function(e,t){for(var n="<table>\n<thead>\n<tr>\n",r=e.length,i=0;i<r;++i)n+=e[i];for(n+="</tr>\n</thead>\n<tbody>\n",i=0;i<t.length;++i){n+="<tr>\n";for(var s=0;s<r;++s)n+=t[i][s];n+="</tr>\n"}return n+"</tbody>\n</table>\n"}(f,g)}return e=(e=(e=(e=r.converter._dispatch("tables.before",e,n,r)).replace(/\\(\|)/g,t.helper.escapeCharactersCallback)).replace(/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|¨0)/gm,s)).replace(/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|¨0)/gm,s),e=r.converter._dispatch("tables.after",e,n,r)})),t.subParser("underline",(function(e,n,r){return n.underline?(e=r.converter._dispatch("underline.before",e,n,r),e=(e=n.literalMidWordUnderscores?(e=e.replace(/\b___(\S[\s\S]*?)___\b/g,(function(e,t){return"<u>"+t+"</u>"}))).replace(/\b__(\S[\s\S]*?)__\b/g,(function(e,t){return"<u>"+t+"</u>"})):(e=e.replace(/___(\S[\s\S]*?)___/g,(function(e,t){return/\S$/.test(t)?"<u>"+t+"</u>":e}))).replace(/__(\S[\s\S]*?)__/g,(function(e,t){return/\S$/.test(t)?"<u>"+t+"</u>":e}))).replace(/(_)/g,t.helper.escapeCharactersCallback),e=r.converter._dispatch("underline.after",e,n,r)):e})),t.subParser("unescapeSpecialChars",(function(e,t,n){return e=(e=n.converter._dispatch("unescapeSpecialChars.before",e,t,n)).replace(/¨E(\d+)E/g,(function(e,t){var n=parseInt(t);return String.fromCharCode(n)})),e=n.converter._dispatch("unescapeSpecialChars.after",e,t,n)})),t.subParser("makeMarkdown.blockquote",(function(e,n){var r="";if(e.hasChildNodes())for(var i=e.childNodes,s=i.length,a=0;a<s;++a){var o=t.subParser("makeMarkdown.node")(i[a],n);""!==o&&(r+=o)}return r="> "+(r=r.trim()).split("\n").join("\n> ")})),t.subParser("makeMarkdown.codeBlock",(function(e,t){var n=e.getAttribute("language"),r=e.getAttribute("precodenum");return"```"+n+"\n"+t.preList[r]+"\n```"})),t.subParser("makeMarkdown.codeSpan",(function(e){return"`"+e.innerHTML+"`"})),t.subParser("makeMarkdown.emphasis",(function(e,n){var r="";if(e.hasChildNodes()){r+="*";for(var i=e.childNodes,s=i.length,a=0;a<s;++a)r+=t.subParser("makeMarkdown.node")(i[a],n);r+="*"}return r})),t.subParser("makeMarkdown.header",(function(e,n,r){var i=new Array(r+1).join("#"),s="";if(e.hasChildNodes()){s=i+" ";for(var a=e.childNodes,o=a.length,l=0;l<o;++l)s+=t.subParser("makeMarkdown.node")(a[l],n)}return s})),t.subParser("makeMarkdown.hr",(function(){return"---"})),t.subParser("makeMarkdown.image",(function(e){var t="";return e.hasAttribute("src")&&(t+="!["+e.getAttribute("alt")+"](",t+="<"+e.getAttribute("src")+">",e.hasAttribute("width")&&e.hasAttribute("height")&&(t+=" ="+e.getAttribute("width")+"x"+e.getAttribute("height")),e.hasAttribute("title")&&(t+=' "'+e.getAttribute("title")+'"'),t+=")"),t})),t.subParser("makeMarkdown.links",(function(e,n){var r="";if(e.hasChildNodes()&&e.hasAttribute("href")){var i=e.childNodes,s=i.length;r="[";for(var a=0;a<s;++a)r+=t.subParser("makeMarkdown.node")(i[a],n);r+="](",r+="<"+e.getAttribute("href")+">",e.hasAttribute("title")&&(r+=' "'+e.getAttribute("title")+'"'),r+=")"}return r})),t.subParser("makeMarkdown.list",(function(e,n,r){var i="";if(!e.hasChildNodes())return"";for(var s=e.childNodes,a=s.length,o=e.getAttribute("start")||1,l=0;l<a;++l)void 0!==s[l].tagName&&"li"===s[l].tagName.toLowerCase()&&(i+=("ol"===r?o.toString()+". ":"- ")+t.subParser("makeMarkdown.listItem")(s[l],n),++o);return(i+="\n\x3c!-- --\x3e\n").trim()})),t.subParser("makeMarkdown.listItem",(function(e,n){for(var r="",i=e.childNodes,s=i.length,a=0;a<s;++a)r+=t.subParser("makeMarkdown.node")(i[a],n);return/\n$/.test(r)?r=r.split("\n").join("\n    ").replace(/^ {4}$/gm,"").replace(/\n\n+/g,"\n\n"):r+="\n",r})),t.subParser("makeMarkdown.node",(function(e,n,r){r=r||!1;var i="";if(3===e.nodeType)return t.subParser("makeMarkdown.txt")(e,n);if(8===e.nodeType)return"\x3c!--"+e.data+"--\x3e\n\n";if(1!==e.nodeType)return"";switch(e.tagName.toLowerCase()){case"h1":r||(i=t.subParser("makeMarkdown.header")(e,n,1)+"\n\n");break;case"h2":r||(i=t.subParser("makeMarkdown.header")(e,n,2)+"\n\n");break;case"h3":r||(i=t.subParser("makeMarkdown.header")(e,n,3)+"\n\n");break;case"h4":r||(i=t.subParser("makeMarkdown.header")(e,n,4)+"\n\n");break;case"h5":r||(i=t.subParser("makeMarkdown.header")(e,n,5)+"\n\n");break;case"h6":r||(i=t.subParser("makeMarkdown.header")(e,n,6)+"\n\n");break;case"p":r||(i=t.subParser("makeMarkdown.paragraph")(e,n)+"\n\n");break;case"blockquote":r||(i=t.subParser("makeMarkdown.blockquote")(e,n)+"\n\n");break;case"hr":r||(i=t.subParser("makeMarkdown.hr")(e,n)+"\n\n");break;case"ol":r||(i=t.subParser("makeMarkdown.list")(e,n,"ol")+"\n\n");break;case"ul":r||(i=t.subParser("makeMarkdown.list")(e,n,"ul")+"\n\n");break;case"precode":r||(i=t.subParser("makeMarkdown.codeBlock")(e,n)+"\n\n");break;case"pre":r||(i=t.subParser("makeMarkdown.pre")(e,n)+"\n\n");break;case"table":r||(i=t.subParser("makeMarkdown.table")(e,n)+"\n\n");break;case"code":i=t.subParser("makeMarkdown.codeSpan")(e,n);break;case"em":case"i":i=t.subParser("makeMarkdown.emphasis")(e,n);break;case"strong":case"b":i=t.subParser("makeMarkdown.strong")(e,n);break;case"del":i=t.subParser("makeMarkdown.strikethrough")(e,n);break;case"a":i=t.subParser("makeMarkdown.links")(e,n);break;case"img":i=t.subParser("makeMarkdown.image")(e,n);break;default:i=e.outerHTML+"\n\n"}return i})),t.subParser("makeMarkdown.paragraph",(function(e,n){var r="";if(e.hasChildNodes())for(var i=e.childNodes,s=i.length,a=0;a<s;++a)r+=t.subParser("makeMarkdown.node")(i[a],n);return r=r.trim()})),t.subParser("makeMarkdown.pre",(function(e,t){var n=e.getAttribute("prenum");return"<pre>"+t.preList[n]+"</pre>"})),t.subParser("makeMarkdown.strikethrough",(function(e,n){var r="";if(e.hasChildNodes()){r+="~~";for(var i=e.childNodes,s=i.length,a=0;a<s;++a)r+=t.subParser("makeMarkdown.node")(i[a],n);r+="~~"}return r})),t.subParser("makeMarkdown.strong",(function(e,n){var r="";if(e.hasChildNodes()){r+="**";for(var i=e.childNodes,s=i.length,a=0;a<s;++a)r+=t.subParser("makeMarkdown.node")(i[a],n);r+="**"}return r})),t.subParser("makeMarkdown.table",(function(e,n){var r,i,s="",a=[[],[]],o=e.querySelectorAll("thead>tr>th"),l=e.querySelectorAll("tbody>tr");for(r=0;r<o.length;++r){var c=t.subParser("makeMarkdown.tableCell")(o[r],n),h="---";if(o[r].hasAttribute("style"))switch(o[r].getAttribute("style").toLowerCase().replace(/\s/g,"")){case"text-align:left;":h=":---";break;case"text-align:right;":h="---:";break;case"text-align:center;":h=":---:"}a[0][r]=c.trim(),a[1][r]=h}for(r=0;r<l.length;++r){var u=a.push([])-1,d=l[r].getElementsByTagName("td");for(i=0;i<o.length;++i){var p=" ";void 0!==d[i]&&(p=t.subParser("makeMarkdown.tableCell")(d[i],n)),a[u].push(p)}}var f=3;for(r=0;r<a.length;++r)for(i=0;i<a[r].length;++i){var m=a[r][i].length;m>f&&(f=m)}for(r=0;r<a.length;++r){for(i=0;i<a[r].length;++i)1===r?":"===a[r][i].slice(-1)?a[r][i]=t.helper.padEnd(a[r][i].slice(-1),f-1,"-")+":":a[r][i]=t.helper.padEnd(a[r][i],f,"-"):a[r][i]=t.helper.padEnd(a[r][i],f);s+="| "+a[r].join(" | ")+" |\n"}return s.trim()})),t.subParser("makeMarkdown.tableCell",(function(e,n){var r="";if(!e.hasChildNodes())return"";for(var i=e.childNodes,s=i.length,a=0;a<s;++a)r+=t.subParser("makeMarkdown.node")(i[a],n,!0);return r.trim()})),t.subParser("makeMarkdown.txt",(function(e){var n=e.nodeValue;return n=(n=n.replace(/ +/g," ")).replace(/¨NBSP;/g," "),n=(n=(n=(n=(n=(n=(n=(n=(n=t.helper.unescapeHTMLEntities(n)).replace(/([*_~|`])/g,"\\$1")).replace(/^(\s*)>/g,"\\$1>")).replace(/^#/gm,"\\#")).replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3")).replace(/^( {0,3}\d+)\./gm,"$1\\.")).replace(/^( {0,3})([+-])/gm,"$1\\$2")).replace(/]([\s]*)\(/g,"\\]$1\\(")).replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:")})),lL.exports?lL.exports=t:this.showdown=t}.call(kg);const hL=cL.exports,uL=["innerHTML"],dL=Wi({__name:"index",props:{md:String},setup(e){const t=e,n=new hL.Converter,r=ci((()=>n.makeHtml(t.md))),i=ft(!1);return(e,t)=>{const n=Un("TransitionFade");return Or(),Ir(Tr,null,[jr("div",{class:"iconfont icon-shenpi btn",onClick:t[0]||(t[0]=e=>i.value=!i.value)}),Vr(n,null,{default:Kt((()=>[i.value?(Or(),Ir("div",{key:0,class:"md-content",innerHTML:vt(r)},null,8,uL)):qr("",!0)])),_:1})],64)}}},[["__scopeId","data-v-d57e6603"]]),pL={class:"wrap"},fL={class:"text"},mL=Wi({__name:"index",props:{itemsLoaded:Number,itemsTotal:Number,progressRatio:Number},setup(e){const t=ft(!0);return(n,r)=>Nn((Or(),Ir("div",pL,[jr("div",{class:"bar",style:s({transform:`scaleX(${e.progressRatio})`})},null,4),jr("div",fL,h(e.itemsLoaded)+" / "+h(e.itemsTotal),1)],512)),[[Hi,t.value]])}},[["__scopeId","data-v-9661d35e"]]);const gL=Wi({},[["render",function(e,t,n,r,i,s){return Or(),Nr(Pi,{name:"transition-fade"},{default:Kt((()=>[jn(e.$slots,"default")])),_:3})}]]);var vL={exports:{}};function _L(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach((function(t){var n=e[t];"object"!=typeof n||Object.isFrozen(n)||_L(n)})),e}vL.exports=_L,vL.exports.default=_L;class xL{constructor(e){void 0===e.data&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function yL(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function bL(e,...t){const n=Object.create(null);for(const r in e)n[r]=e[r];return t.forEach((function(e){for(const t in e)n[t]=e[t]})),n}const wL=e=>!!e.scope||e.sublanguage&&e.language;class SL{constructor(e,t){this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){this.buffer+=yL(e)}openNode(e){if(!wL(e))return;let t="";t=e.sublanguage?`language-${e.language}`:((e,{prefix:t})=>{if(e.includes(".")){const n=e.split(".");return[`${t}${n.shift()}`,...n.map(((e,t)=>`${e}${"_".repeat(t+1)}`))].join(" ")}return`${t}${e}`})(e.scope,{prefix:this.classPrefix}),this.span(t)}closeNode(e){wL(e)&&(this.buffer+="</span>")}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const ML=(e={})=>{const t={children:[]};return Object.assign(t,e),t};class EL{constructor(){this.rootNode=ML(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const t=ML({scope:e});this.add(t),this.stack.push(t)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,t){return"string"==typeof t?e.addText(t):t.children&&(e.openNode(t),t.children.forEach((t=>this._walk(e,t))),e.closeNode(t)),e}static _collapse(e){"string"!=typeof e&&e.children&&(e.children.every((e=>"string"==typeof e))?e.children=[e.children.join("")]:e.children.forEach((e=>{EL._collapse(e)})))}}class TL extends EL{constructor(e){super(),this.options=e}addKeyword(e,t){""!==e&&(this.openNode(t),this.addText(e),this.closeNode())}addText(e){""!==e&&this.add(e)}addSublanguage(e,t){const n=e.root;n.sublanguage=!0,n.language=t,this.add(n)}toHTML(){return new SL(this,this.options).value()}finalize(){return!0}}function AL(e){return e?"string"==typeof e?e:e.source:null}function CL(e){return LL("(?=",e,")")}function PL(e){return LL("(?:",e,")*")}function RL(e){return LL("(?:",e,")?")}function LL(...e){return e.map((e=>AL(e))).join("")}function OL(...e){const t=function(e){const t=e[e.length-1];return"object"==typeof t&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}(e);return"("+(t.capture?"":"?:")+e.map((e=>AL(e))).join("|")+")"}function zL(e){return new RegExp(e.toString()+"|").exec("").length-1}const DL=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function kL(e,{joinWith:t}){let n=0;return e.map((e=>{n+=1;const t=n;let r=AL(e),i="";for(;r.length>0;){const e=DL.exec(r);if(!e){i+=r;break}i+=r.substring(0,e.index),r=r.substring(e.index+e[0].length),"\\"===e[0][0]&&e[1]?i+="\\"+String(Number(e[1])+t):(i+=e[0],"("===e[0]&&n++)}return i})).map((e=>`(${e})`)).join(t)}const IL="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",NL={begin:"\\\\[\\s\\S]",relevance:0},FL={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[NL]},UL={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[NL]},BL=function(e,t,n={}){const r=bL({scope:"comment",begin:e,end:t,contains:[]},n);r.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const i=OL("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return r.contains.push({begin:LL(/[ ]+/,"(",i,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),r},HL=BL("//","$"),GL=BL("/\\*","\\*/"),jL=BL("#","$"),VL={scope:"number",begin:"\\b\\d+(\\.\\d+)?",relevance:0},WL={scope:"number",begin:IL,relevance:0},XL={scope:"number",begin:"\\b(0b[01]+)",relevance:0},qL={begin:/(?=\/[^/\n]*\/)/,contains:[{scope:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[NL,{begin:/\[/,end:/\]/,relevance:0,contains:[NL]}]}]},YL={scope:"title",begin:"[a-zA-Z]\\w*",relevance:0},ZL={scope:"title",begin:"[a-zA-Z_]\\w*",relevance:0},KL={begin:"\\.\\s*[a-zA-Z_]\\w*",relevance:0};var JL=Object.freeze({__proto__:null,MATCH_NOTHING_RE:/\b\B/,IDENT_RE:"[a-zA-Z]\\w*",UNDERSCORE_IDENT_RE:"[a-zA-Z_]\\w*",NUMBER_RE:"\\b\\d+(\\.\\d+)?",C_NUMBER_RE:IL,BINARY_NUMBER_RE:"\\b(0b[01]+)",RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG:(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=LL(t,/.*\b/,e.binary,/\b.*/)),bL({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(e,t)=>{0!==e.index&&t.ignoreMatch()}},e)},BACKSLASH_ESCAPE:NL,APOS_STRING_MODE:FL,QUOTE_STRING_MODE:UL,PHRASAL_WORDS_MODE:{begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},COMMENT:BL,C_LINE_COMMENT_MODE:HL,C_BLOCK_COMMENT_MODE:GL,HASH_COMMENT_MODE:jL,NUMBER_MODE:VL,C_NUMBER_MODE:WL,BINARY_NUMBER_MODE:XL,REGEXP_MODE:qL,TITLE_MODE:YL,UNDERSCORE_TITLE_MODE:ZL,METHOD_GUARD:KL,END_SAME_AS_BEGIN:function(e){return Object.assign(e,{"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}})}});function QL(e,t){"."===e.input[e.index-1]&&t.ignoreMatch()}function $L(e,t){void 0!==e.className&&(e.scope=e.className,delete e.className)}function eO(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=QL,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,void 0===e.relevance&&(e.relevance=0))}function tO(e,t){Array.isArray(e.illegal)&&(e.illegal=OL(...e.illegal))}function nO(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function rO(e,t){void 0===e.relevance&&(e.relevance=1)}const iO=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},e);Object.keys(e).forEach((t=>{delete e[t]})),e.keywords=n.keywords,e.begin=LL(n.beforeMatch,CL(n.begin)),e.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},e.relevance=0,delete n.beforeMatch},sO=["of","and","for","in","not","or","if","then","parent","list","value"];function aO(e,t,n="keyword"){const r=Object.create(null);return"string"==typeof e?i(n,e.split(" ")):Array.isArray(e)?i(n,e):Object.keys(e).forEach((function(n){Object.assign(r,aO(e[n],t,n))})),r;function i(e,n){t&&(n=n.map((e=>e.toLowerCase()))),n.forEach((function(t){const n=t.split("|");r[n[0]]=[e,oO(n[0],n[1])]}))}}function oO(e,t){return t?Number(t):function(e){return sO.includes(e.toLowerCase())}(e)?0:1}const lO={},cO=(e,t)=>{lO[`${e}/${t}`]||(lO[`${e}/${t}`]=!0)},hO=new Error;function uO(e,t,{key:n}){let r=0;const i=e[n],s={},a={};for(let o=1;o<=t.length;o++)a[o+r]=i[o],s[o+r]=!0,r+=zL(t[o-1]);e[n]=a,e[n]._emit=s,e[n]._multi=!0}function dO(e){!function(e){e.scope&&"object"==typeof e.scope&&null!==e.scope&&(e.beginScope=e.scope,delete e.scope)}(e),"string"==typeof e.beginScope&&(e.beginScope={_wrap:e.beginScope}),"string"==typeof e.endScope&&(e.endScope={_wrap:e.endScope}),function(e){if(Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw hO;if("object"!=typeof e.beginScope||null===e.beginScope)throw hO;uO(e,e.begin,{key:"beginScope"}),e.begin=kL(e.begin,{joinWith:""})}}(e),function(e){if(Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw hO;if("object"!=typeof e.endScope||null===e.endScope)throw hO;uO(e,e.end,{key:"endScope"}),e.end=kL(e.end,{joinWith:""})}}(e)}function pO(e){function t(t,n){return new RegExp(AL(t),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(n?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(e,t){t.position=this.position++,this.matchIndexes[this.matchAt]=t,this.regexes.push([t,e]),this.matchAt+=zL(e)+1}compile(){0===this.regexes.length&&(this.exec=()=>null);const e=this.regexes.map((e=>e[1]));this.matcherRe=t(kL(e,{joinWith:"|"}),!0),this.lastIndex=0}exec(e){this.matcherRe.lastIndex=this.lastIndex;const t=this.matcherRe.exec(e);if(!t)return null;const n=t.findIndex(((e,t)=>t>0&&void 0!==e)),r=this.matchIndexes[n];return t.splice(0,n),Object.assign(t,r)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(e){if(this.multiRegexes[e])return this.multiRegexes[e];const t=new n;return this.rules.slice(e).forEach((([e,n])=>t.addRule(e,n))),t.compile(),this.multiRegexes[e]=t,t}resumingScanAtSamePosition(){return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(e,t){this.rules.push([e,t]),"begin"===t.type&&this.count++}exec(e){const t=this.getMatcher(this.regexIndex);t.lastIndex=this.lastIndex;let n=t.exec(e);if(this.resumingScanAtSamePosition())if(n&&n.index===this.lastIndex);else{const t=this.getMatcher(0);t.lastIndex=this.lastIndex+1,n=t.exec(e)}return n&&(this.regexIndex+=n.position+1,this.regexIndex===this.count&&this.considerAll()),n}}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=bL(e.classNameAliases||{}),function n(i,s){const a=i;if(i.isCompiled)return a;[$L,nO,dO,iO].forEach((e=>e(i,s))),e.compilerExtensions.forEach((e=>e(i,s))),i.__beforeBegin=null,[eO,tO,rO].forEach((e=>e(i,s))),i.isCompiled=!0;let o=null;return"object"==typeof i.keywords&&i.keywords.$pattern&&(i.keywords=Object.assign({},i.keywords),o=i.keywords.$pattern,delete i.keywords.$pattern),o=o||/\w+/,i.keywords&&(i.keywords=aO(i.keywords,e.case_insensitive)),a.keywordPatternRe=t(o,!0),s&&(i.begin||(i.begin=/\B|\b/),a.beginRe=t(a.begin),i.end||i.endsWithParent||(i.end=/\B|\b/),i.end&&(a.endRe=t(a.end)),a.terminatorEnd=AL(a.end)||"",i.endsWithParent&&s.terminatorEnd&&(a.terminatorEnd+=(i.end?"|":"")+s.terminatorEnd)),i.illegal&&(a.illegalRe=t(i.illegal)),i.contains||(i.contains=[]),i.contains=[].concat(...i.contains.map((function(e){return function(e){e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map((function(t){return bL(e,{variants:null},t)})));if(e.cachedVariants)return e.cachedVariants;if(fO(e))return bL(e,{starts:e.starts?bL(e.starts):null});if(Object.isFrozen(e))return bL(e);return e}("self"===e?i:e)}))),i.contains.forEach((function(e){n(e,a)})),i.starts&&n(i.starts,s),a.matcher=function(e){const t=new r;return e.contains.forEach((e=>t.addRule(e.begin,{rule:e,type:"begin"}))),e.terminatorEnd&&t.addRule(e.terminatorEnd,{type:"end"}),e.illegal&&t.addRule(e.illegal,{type:"illegal"}),t}(a),a}(e)}function fO(e){return!!e&&(e.endsWithParent||fO(e.starts))}class mO extends Error{constructor(e,t){super(e),this.name="HTMLInjectionError",this.html=t}}const gO=yL,vO=bL,_O=Symbol("nomatch");var xO=function(e){const t=Object.create(null),n=Object.create(null),r=[];let i=!0;const s="Could not find the language '{}', did you forget to load/include a language module?",a={disableAutodetect:!0,name:"Plain text",contains:[]};let o={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:TL};function l(e){return o.noHighlightRe.test(e)}function c(e,t,n){let r="",i="";"object"==typeof t?(r=e,n=t.ignoreIllegals,i=t.language):(cO("10.7.0","highlight(lang, code, ...args) has been deprecated."),cO("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277"),i=e,r=t),void 0===n&&(n=!0);const s={code:r,language:i};_("before:highlight",s);const a=s.result?s.result:h(s.language,s.code,n);return a.code=s.code,_("after:highlight",a),a}function h(e,n,r,a){const l=Object.create(null);function c(){if(!M.keywords)return void T.addText(A);let e=0;M.keywordPatternRe.lastIndex=0;let t=M.keywordPatternRe.exec(A),n="";for(;t;){n+=A.substring(e,t.index);const i=b.case_insensitive?t[0].toLowerCase():t[0],s=(r=i,M.keywords[r]);if(s){const[e,r]=s;if(T.addText(n),n="",l[i]=(l[i]||0)+1,l[i]<=7&&(C+=r),e.startsWith("_"))n+=t[0];else{const n=b.classNameAliases[e]||e;T.addKeyword(t[0],n)}}else n+=t[0];e=M.keywordPatternRe.lastIndex,t=M.keywordPatternRe.exec(A)}var r;n+=A.substring(e),T.addText(n)}function d(){null!=M.subLanguage?function(){if(""===A)return;let e=null;if("string"==typeof M.subLanguage){if(!t[M.subLanguage])return void T.addText(A);e=h(M.subLanguage,A,!0,E[M.subLanguage]),E[M.subLanguage]=e._top}else e=u(A,M.subLanguage.length?M.subLanguage:null);M.relevance>0&&(C+=e.relevance),T.addSublanguage(e._emitter,e.language)}():c(),A=""}function p(e,t){let n=1;const r=t.length-1;for(;n<=r;){if(!e._emit[n]){n++;continue}const r=b.classNameAliases[e[n]]||e[n],i=t[n];r?T.addKeyword(i,r):(A=i,c(),A=""),n++}}function f(e,t){return e.scope&&"string"==typeof e.scope&&T.openNode(b.classNameAliases[e.scope]||e.scope),e.beginScope&&(e.beginScope._wrap?(T.addKeyword(A,b.classNameAliases[e.beginScope._wrap]||e.beginScope._wrap),A=""):e.beginScope._multi&&(p(e.beginScope,t),A="")),M=Object.create(e,{parent:{value:M}}),M}function g(e,t,n){let r=function(e,t){const n=e&&e.exec(t);return n&&0===n.index}(e.endRe,n);if(r){if(e["on:end"]){const n=new xL(e);e["on:end"](t,n),n.isMatchIgnored&&(r=!1)}if(r){for(;e.endsParent&&e.parent;)e=e.parent;return e}}if(e.endsWithParent)return g(e.parent,t,n)}function v(e){return 0===M.matcher.regexIndex?(A+=e[0],1):(L=!0,0)}function _(e){const t=e[0],r=n.substring(e.index),i=g(M,e,r);if(!i)return _O;const s=M;M.endScope&&M.endScope._wrap?(d(),T.addKeyword(t,M.endScope._wrap)):M.endScope&&M.endScope._multi?(d(),p(M.endScope,e)):s.skip?A+=t:(s.returnEnd||s.excludeEnd||(A+=t),d(),s.excludeEnd&&(A=t));do{M.scope&&T.closeNode(),M.skip||M.subLanguage||(C+=M.relevance),M=M.parent}while(M!==i.parent);return i.starts&&f(i.starts,e),s.returnEnd?0:t.length}let x={};function y(t,s){const a=s&&s[0];if(A+=t,null==a)return d(),0;if("begin"===x.type&&"end"===s.type&&x.index===s.index&&""===a){if(A+=n.slice(s.index,s.index+1),!i){const t=new Error(`0 width match regex (${e})`);throw t.languageName=e,t.badRule=x.rule,t}return 1}if(x=s,"begin"===s.type)return function(e){const t=e[0],n=e.rule,r=new xL(n),i=[n.__beforeBegin,n["on:begin"]];for(const s of i)if(s&&(s(e,r),r.isMatchIgnored))return v(t);return n.skip?A+=t:(n.excludeBegin&&(A+=t),d(),n.returnBegin||n.excludeBegin||(A=t)),f(n,e),n.returnBegin?0:t.length}(s);if("illegal"===s.type&&!r){const e=new Error('Illegal lexeme "'+a+'" for mode "'+(M.scope||"<unnamed>")+'"');throw e.mode=M,e}if("end"===s.type){const e=_(s);if(e!==_O)return e}if("illegal"===s.type&&""===a)return 1;if(R>1e5&&R>3*s.index){throw new Error("potential infinite loop, way more iterations than matches")}return A+=a,a.length}const b=m(e);if(!b)throw s.replace("{}",e),new Error('Unknown language: "'+e+'"');const w=pO(b);let S="",M=a||w;const E={},T=new o.__emitter(o);!function(){const e=[];for(let t=M;t!==b;t=t.parent)t.scope&&e.unshift(t.scope);e.forEach((e=>T.openNode(e)))}();let A="",C=0,P=0,R=0,L=!1;try{for(M.matcher.considerAll();;){R++,L?L=!1:M.matcher.considerAll(),M.matcher.lastIndex=P;const e=M.matcher.exec(n);if(!e)break;const t=y(n.substring(P,e.index),e);P=e.index+t}return y(n.substring(P)),T.closeAllNodes(),T.finalize(),S=T.toHTML(),{language:e,value:S,relevance:C,illegal:!1,_emitter:T,_top:M}}catch(O){if(O.message&&O.message.includes("Illegal"))return{language:e,value:gO(n),illegal:!0,relevance:0,_illegalBy:{message:O.message,index:P,context:n.slice(P-100,P+100),mode:O.mode,resultSoFar:S},_emitter:T};if(i)return{language:e,value:gO(n),illegal:!1,relevance:0,errorRaised:O,_emitter:T,_top:M};throw O}}function u(e,n){n=n||o.languages||Object.keys(t);const r=function(e){const t={value:gO(e),illegal:!1,relevance:0,_top:a,_emitter:new o.__emitter(o)};return t._emitter.addText(e),t}(e),i=n.filter(m).filter(v).map((t=>h(t,e,!1)));i.unshift(r);const s=i.sort(((e,t)=>{if(e.relevance!==t.relevance)return t.relevance-e.relevance;if(e.language&&t.language){if(m(e.language).supersetOf===t.language)return 1;if(m(t.language).supersetOf===e.language)return-1}return 0})),[l,c]=s,u=l;return u.secondBest=c,u}function d(e){let t=null;const r=function(e){let t=e.className+" ";t+=e.parentNode?e.parentNode.className:"";const n=o.languageDetectRe.exec(t);if(n){const e=m(n[1]);return e||s.replace("{}",n[1]),e?n[1]:"no-highlight"}return t.split(/\s+/).find((e=>l(e)||m(e)))}(e);if(l(r))return;if(_("before:highlightElement",{el:e,language:r}),e.children.length>0&&(o.ignoreUnescapedHTML,o.throwUnescapedHTML)){throw new mO("One of your code blocks includes unescaped HTML.",e.innerHTML)}t=e;const i=t.textContent,a=r?c(i,{language:r,ignoreIllegals:!0}):u(i);e.innerHTML=a.value,function(e,t,r){const i=t&&n[t]||r;e.classList.add("hljs"),e.classList.add(`language-${i}`)}(e,r,a.language),e.result={language:a.language,re:a.relevance,relevance:a.relevance},a.secondBest&&(e.secondBest={language:a.secondBest.language,relevance:a.secondBest.relevance}),_("after:highlightElement",{el:e,result:a,text:i})}let p=!1;function f(){if("loading"===document.readyState)return void(p=!0);document.querySelectorAll(o.cssSelector).forEach(d)}function m(e){return e=(e||"").toLowerCase(),t[e]||t[n[e]]}function g(e,{languageName:t}){"string"==typeof e&&(e=[e]),e.forEach((e=>{n[e.toLowerCase()]=t}))}function v(e){const t=m(e);return t&&!t.disableAutodetect}function _(e,t){const n=e;r.forEach((function(e){e[n]&&e[n](t)}))}"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("DOMContentLoaded",(function(){p&&f()}),!1),Object.assign(e,{highlight:c,highlightAuto:u,highlightAll:f,highlightElement:d,highlightBlock:function(e){return cO("10.7.0","highlightBlock will be removed entirely in v12.0"),cO("10.7.0","Please use highlightElement now."),d(e)},configure:function(e){o=vO(o,e)},initHighlighting:()=>{f(),cO("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")},initHighlightingOnLoad:function(){f(),cO("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")},registerLanguage:function(n,r){let s=null;try{s=r(e)}catch(o){if("Language definition for '{}' could not be registered.".replace("{}",n),!i)throw o;s=a}s.name||(s.name=n),t[n]=s,s.rawDefinition=r.bind(null,e),s.aliases&&g(s.aliases,{languageName:n})},unregisterLanguage:function(e){delete t[e];for(const t of Object.keys(n))n[t]===e&&delete n[t]},listLanguages:function(){return Object.keys(t)},getLanguage:m,registerAliases:g,autoDetection:v,inherit:vO,addPlugin:function(e){!function(e){e["before:highlightBlock"]&&!e["before:highlightElement"]&&(e["before:highlightElement"]=t=>{e["before:highlightBlock"](Object.assign({block:t.el},t))}),e["after:highlightBlock"]&&!e["after:highlightElement"]&&(e["after:highlightElement"]=t=>{e["after:highlightBlock"](Object.assign({block:t.el},t))})}(e),r.push(e)}}),e.debugMode=function(){i=!1},e.safeMode=function(){i=!0},e.versionString="11.6.0",e.regex={concat:LL,lookahead:CL,either:OL,optional:RL,anyNumberOfTimes:PL};for(const x in JL)"object"==typeof JL[x]&&vL.exports(JL[x]);return Object.assign(e,JL),e}({}),yO=xO;xO.HighlightJS=xO,xO.default=xO;const bO=yO,wO=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],SO=["true","false","null","undefined","NaN","Infinity"],MO=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],EO=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],TO=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],AO=["arguments","this","super","console","window","document","localStorage","module","global"],CO=[].concat(TO,MO,EO);var PO=_n({props:{code:{type:String,required:!0},language:{type:String,default:""},autodetect:{type:Boolean,default:!0},ignoreIllegals:{type:Boolean,default:!0}},setup:function(e){var t=ft(e.language);sn((function(){return e.language}),(function(e){t.value=e}));var n=ci((function(){return e.autodetect||!t.value})),r=ci((function(){return!n.value&&!bO.getLanguage(t.value)}));return{className:ci((function(){return r.value?"":"hljs "+t.value})),highlightedCode:ci((function(){var i;if(r.value)return e.code.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;");if(n.value){var s=bO.highlightAuto(e.code);return t.value=null!==(i=s.language)&&void 0!==i?i:"",s.value}return(s=bO.highlight(e.code,{language:t.value,ignoreIllegals:e.ignoreIllegals})).value}))}},render:function(){return hi("pre",{},[hi("code",{class:this.className,innerHTML:this.highlightedCode})])}}),RO={install:function(e){e.component("highlightjs",PO)},component:PO};bO.registerLanguage("javascript",(function(e){const t=e.regex,n="[A-Za-z$_][0-9A-Za-z$_]*",r="<>",i="</>",s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(e,t)=>{const n=e[0].length+e.index,r=e.input[n];if("<"===r||","===r)return void t.ignoreMatch();let i;">"===r&&(((e,{after:t})=>{const n="</"+e[0].slice(1);return-1!==e.input.indexOf(n,t)})(e,{after:n})||t.ignoreMatch());(i=e.input.substring(n).match(/^\s+extends\s+/))&&0===i.index&&t.ignoreMatch()}},a={$pattern:"[A-Za-z$_][0-9A-Za-z$_]*",keyword:wO,literal:SO,built_in:CO,"variable.language":AO},o="\\.([0-9](_?[0-9])*)",l="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",c={className:"number",variants:[{begin:`(\\b(${l})((${o})|\\.)?|(${o}))[eE][+-]?([0-9](_?[0-9])*)\\b`},{begin:`\\b(${l})\\b((${o})\\b|\\.)?|(${o})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},h={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},u={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,h],subLanguage:"xml"}},d={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,h],subLanguage:"css"}},p={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,h]},f={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},m=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,u,d,p,c];h.contains=m.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(m)});const g=[].concat(f,h.contains),v=g.concat([{begin:/\(/,end:/\)/,keywords:a,contains:["self"].concat(g)}]),_={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:v},x={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,t.concat(n,"(",t.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},y={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...MO,...EO]}},b={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[_],illegal:/%/},w={match:t.concat(/\b/,(S=[...TO,"super"],t.concat("(?!",S.join("|"),")")),n,t.lookahead(/\(/)),className:"title.function",relevance:0};var S;const M={begin:t.concat(/\./,t.lookahead(t.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},E={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},_]},T="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",A={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(T)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[_]};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:v,CLASS_REFERENCE:y},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),{label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,u,d,p,f,c,y,{className:"attr",begin:n+t.lookahead(":"),relevance:0},A,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[f,e.REGEXP_MODE,{className:"function",begin:T,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:v}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:r,end:i},{match:/<[A-Za-z0-9\\._:-]+\s*\/>/},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},b,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[_,e.inherit(e.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},M,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[_]},w,{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},x,E,{match:/\$[(.]/}]}}));const LO=((...e)=>{const t=(Vi||(Vi=Sr(ji))).createApp(...e),{mount:n}=t;return t.mount=e=>{const r=function(e){if(A(e)){return document.querySelector(e)}return e}(e);if(!r)return;const i=t._component;T(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const s=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),s},t})(Xi);LO.use(rL),LO.use(RO),LO.component("CodeBin",oL),LO.component("MdBin",dL),LO.component("LoadProgressBar",mL),LO.component("TransitionFade",gL),LO.mount("#app");export{Wi as _,jr as a,Ir as c,Or as o};
